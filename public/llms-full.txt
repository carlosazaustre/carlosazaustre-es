# Carlos Azaustre ‚Äî Blog completo en Markdown
> Generado autom√°ticamente: 2026-02-27T13:24:10.880Z
> Fuente: https://carlosazaustre.es/blog
> Este archivo contiene todos los art√≠culos del blog en formato Markdown limpio,
> organizado para ser ingestado por modelos de lenguaje (LLMs).

---

<article slug="ia-programador-junior" date="2024-05-11" url="https://carlosazaustre.es/blog/ia-programador-junior">

# El problema de la Inteligencia Artificial y los Programadores Junior

**Fecha:** 2024-05-11
Hoy quiero profundizar en un tema que gener√≥ bastante debate tras una [publicaci√≥n reciente que compart√≠](https://twitter.com/carlosazaustre/status/1784654311663755378): 
El uso de la inteligencia artificial (IA) en la educaci√≥n de programadores, especialmente para aquellos 
que est√°n empezando. 

Hay mucha conversaci√≥n sobre este tema, porque nos encontramos en un punto de inflexi√≥n sobre c√≥mo las
nuevas tecnolog√≠as se integran en nuestros m√©todos de aprendizaje.

## La Inteligencia Artificial como asistente en la programaci√≥n

Desde mi perspectiva como educador en programaci√≥n y desarrollo web, creo que la IA, usada correctamente,
puede ser un excelente aliado. 

¬øQui√©n no querr√≠a un tutor que est√° disponible a todas horas para resolver dudas o ofrecer ejemplos de
c√≥digo cuando te quedas atascado? 

Eso es exactamente lo que la IA puede hacer por nosotros. Adem√°s, para aquellos con m√°s experiencia, 
puede ser una herramienta invaluable para optimizar el tiempo, automatizando tareas repetitivas y 
permitiendo que nos centremos en los aspectos m√°s complejos y creativos de nuestros proyectos.

## Pero, ¬øD√≥nde est√° el l√≠mite?

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=S8OlsVc2_II)
/>

A pesar de sus ventajas, debemos tener cuidado. El principal riesgo que veo, y que he observado en algunos
estudiantes, es la dependencia excesiva de la IA.

Usarla para resolver cada tarea o desaf√≠o sin intentar primero intentarlo por uno mismo no solo impide el
aprendizaje efectivo, sino que tambi√©n impide el desarrollo de habilidades esenciales en programaci√≥n como
"el pensar antes de escibrir", comprender el c√≥digo que escribimos, y depurarlo.

Cuando se usa IA como una soluci√≥n r√°pida, se corre el riesgo de obtener una comprensi√≥n superficial del tema. 
Es como usar una calculadora para resolver todas tus operaciones matem√°ticas sin aprender realmente las matem√°ticas
antes. 

Funciona a corto plazo, pero no te prepara para los desaf√≠os m√°s complejos que vendr√°n m√°s adelante.

## Consejos para integrar la IA en tu aprendizaje

Como educador, no estoy prohibiendo estas herramientas que pueden ser √∫tiles. 
Sin embargo, creo que es mejor guiar a los estudiantes sobre c√≥mo usar la IA de manera que realmente beneficie
su aprendizaje:

1. Usa la IA para entender mejor los conceptos: P√≠dele que te explique por qu√© una soluci√≥n funciona,
o qu√© alternativas podr√≠an existir.

2. Desaf√≠a las respuestas que te da la IA: Siempre verifica y cuestiona el c√≥digo que genera. 
Esto no solo te ayudar√° a entender mejor lo que est√°s haciendo, sino que tambi√©n te ense√±ar√° a pensar
cr√≠ticamente.

3. No sustituyas la pr√°ctica propia: La IA deber√≠a ser un complemento de tu estudio, no un sustituto. 
Aseg√∫rate de escribir y depurar tu propio c√≥digo regularmente, porque es la √∫nica manera de aprender de verdad.

La IA es una herramienta muy potente y su capacidad para ayudarnos en el d√≠a a d√≠a no tiene discusi√≥n. 

Sin embargo, cuando est√°s en una etapa de aprendizaje, su papel debe ser bien medido. 

Mi consejo para nuevos programadores es que la utilicen inteligentemente: como una herramienta para facilitar el aprendizaje, no para reemplazarlo.

</article>

---

<article slug="quetechcuentas-01" date="2023-10-30" url="https://carlosazaustre.es/blog/quetechcuentas-01">

# Qu√© TECH Cuentas - Ep.01, con Pau Garcia-Mil√†

**Fecha:** 2023-10-30
> üéß [Escuchar episodio en Spotify](https://open.spotify.com/episode/2y3MGMC2WmbnMNiW3Vi3J5?si=ce97e30bdb4f4773)
/>

## El Futuro de la Educaci√≥n Digital, Emprendimiento y Divulgaci√≥n de Tecnolog√≠a

Hace unos d√≠as tuve el privilegio de charlar un rato con [Pau Garcia-Mil√†](https://linkedin.com/in/paugarciamila) para el primer episodio de mi podcast, un verdadero peso pesado en el mundo de la tecnolog√≠a y el emprendimiento en Espa√±a.

¬øQu√© puedes esperar de este episodio?

‚úÖ Una conversaci√≥n apasionante sobre la divulgaci√≥n tecnol√≥gica y c√≥mo se cruza con la educaci√≥n e inteligencia artificial ü§ñ.

‚úÖ Pau comparte su experiencia en redes sociales, especialmente en LinkedIn y TikTok, y c√≥mo las usa para construir una comunidad s√≥lida ü§≥.

‚úÖ Un debate sobre el estado del bienestar y la salud mental en el mundo tech, y c√≥mo el alto costo de vida en ciudades como San Francisco afecta a nuestras vidas üèôÔ∏è.

Si te fascina el mundo tech tanto como a m√≠, este episodio es te gustar√° üåü.

Si prefieres verlo en v√≠deo, aqu√≠ tienes el episodio en YouTube:

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=PBLhdPPf5Mo)
/>

### Transcripci√≥n completa del Episodio

- [00:00](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=0s) Bienvenidos a qu√© tech cuentas un podcast sobre tecnolog√≠a y programaci√≥n en el que contaremos con diversas personalidades del sector en este primer episodio nos acompa√±a Pau Garc√≠a Mila Pau es un emprendedor y comunicador espa√±ol conocido por su papel en la tecnolog√≠a y la innovaci√≥n en Espa√±a fund√≥ su primera empresa iOS a una edad muy temprana y desde entonces ha estado involucrado en diversas iniciativas de innovaci√≥n y comunicaci√≥n ha escrito varios libros entre ellos est√° todo por hacer y optimism M es conferenciante
- [00:31](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=31s) habitual en eventos de tecnolog√≠a y emprendimiento y tiene un canal de tiktok de m√°s de medio mill√≥n de Seguidores que se llama en un minuto donde te cuenta noticias sobre tecnolog√≠a en un minuto de esta manera est√° ayudando a popularizar la tecnolog√≠a y la innovaci√≥n al p√∫blico en general durante la pr√≥xima hora vamos a estar conversando sobre diversos temas por supuesto sobre divulgaci√≥n tecnol√≥gica repasaremos su trayectoria emprendedora desde su primera empresa todos los dem√°s proyectos que ha ido haciendo Hasta los m√°s recientes
- [01:01](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=61s) discutiremos tambi√©n sobre su visi√≥n de la educaci√≥n y la tecnolog√≠a y como esta Va de la mano con todo el tema de inteligencias artificiales que van apareciendo d√≠a a d√≠a acabaremos Charlando sobre el futuro digital que nos espera y que ya tenemos aqu√≠ sin m√°s te dejo con el podcast Espero que te guste Hola Pau qu√© tal Muchas gracias por pasarte por aqu√≠ pues muy bien muchas gracias a ti por invitarme nada es un placer eh Como te te estaba comentando antes de de empezar a grabar ya hace un tiempo que que te conozco que tengo por aqu√≠ un par
- [01:33](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=93s) de libros libros que sacaste no s√© si sacaste alguno m√°s S√≠ en espa√±ol uno m√°s de de c√≥mo funciona Pues c√≥mo funcionamos cuando generamos ideas c√≥mo funciona el cerebro cuando generamos ideas y en ingl√©s es m√°s como no es no es publicaci√≥n cient√≠fica tampoco es libro exactamente con una escuela de negocios que se llama imd se llama strategies digital pero es como un tema mucho m√°s t√©cnico es menos sex S√≠ y m√°s caro yo lo que flip honestamente no no lo sab√≠a y mando un abrazo a c√≥mo se llame la editorial eh venden libros
- [02:08](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=128s) super cortos porque al final es como un art√≠culo muy largo igual son 50 60 p√°ginas pero por 60 o sea es absurdo cuando compran esto Pues yo que s√© un tipo de empresa muy concreta el mercado anglosaj√≥n Claro pero no un tipo que se quiera leer este libro es m√°s por temas t√©cnicos de empresa de tal eh pero yo cu√°ndo vi el precio y como autor te pagan bueno eramos cuatro autores pero te pagan lo mismo o sea que s√≠ ya ya Qu√© bueno pues ese del cerebro Me lo me lo apunto no le ten√≠a yo yo fichado tiene buena pinta te mando uno si
- [02:38](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=158s) quieres porque creo que tengo tengo un sitio en el sof√° de casa que como un puff que est√° lleno de de los libros que me regalaba la editorial cuando hac√≠amos un libro o lo que sea una nueva edici√≥n y mis hijos est√°n hartos de eso porque quieren que sea para guardar juguetes con lo cual una buena excusa para ir Vaciando No te preocupes yo te lo mando bueno bueno pues muchas gracias Pues nada eh claro yo te conozco de desde entonces cuando estabas con aquel que luego hablaremos el sistema operativo que se hac√≠a en el navegador y tal yo
- [03:08](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=188s) ah√≠ te segu√≠a pero claro ahora mucha gente ya te conoce m√°s yo creo por sobre todo en tiktok no que tienes lo de un minuto es curioso y no frustrante pero s√≠ curioso porque yo que s√© sea llevo un mont√≥n de a√±os haciendo cosas y mi vida no es la creaci√≥n de contenido es es todo el resto la creaci√≥n de contenido es un un Hobby o algo que hago y que me encanta pero no es mi vida profesional y mucha gente a veces me ve eh Me gusta eres tiktoker Y yo pensando bueno Noa tengo 36 a√±os Tengo tres hijos no soy exactamente la figura de tiktoker que
- [03:42](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=222s) tienes en la cabeza no no s√≠ s√≠ s√≠ vale Vale pues tiktoker un placer Bueno tambi√©n Es verdad que ha evolucionado ha evolucionado bastante antes s√≠ que era otra cosa saco a saco total de hecho es que e y y me alegro Adem√°s que lo haya que lo haya hecho porque es que durante de mucho tiempo las redes sociales han como tenido una una base generacional muy fuerte o sea todos est√°bamos en Facebook Hasta que nuestros padres vinieron a Facebook luego huimos todos a Instagram y ah√≠ somos nosotros los padres nosotros empezamos a usar
- [04:18](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=258s) Instagram huyeron a tiktok y aqu√≠ se hizo la magia para m√≠ tiktok es la primera red donde convive el nieto y el abuelo haciendo tiktok Y es que adem√°s se comparten cosas cuando tantos abuelos haciendo tiktok abuelos no como por edad abuelos Pues porque tiene nietos Eh me refiero Pues a s√≠ s√≠ s√≠ s√≠ s√≠ que que hacen tiktok y que y que la generaci√≥n Z les flipa lo comparten y tal e entonces creo que es es un poco La magia de tiktok que ha mezclado cuatro generaciones juntas mientras que en las otras redes sociales se
- [04:50](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=290s) generaban incomodidad entre ellas si quieres y y creo que esto es bastante √∫nico de de tiktok y yo la verdad me alegro mucho de que haya haya pasado creo que es algo muy bueno muy bueno en instagram s√≠ que es verdad que que no hay tanta gente joven pero yo por ejemplo tengo tengo primos que son todav√≠a adolescentes y lo usan y lo que lo usan m√°s es para las Stories las Stories S√≠ ah√≠ suben todos los d√≠as pero post ni uno es es curioso eh Porque tambi√©n el uso de la de las redes sociales ha ido cambiando H el
- [05:24](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=324s) punto de que muchas veces las usamos de forma distinta a como dijeron que se usaban final Instagram con los Stories y tal Y evidentemente es una funcionalidad que ha creado el creador de Instagram con lo cual es l√≠cito Espera que lo usen Pero cuando la gente deja de crear contenido permanente y solo pone lo que caduca me parece muy interesante eem como el usuario acaba siendo due√±o de la plataforma m√°s que el propio due√±o porque es quien realmente decide lo que se va y lo que se quede me parece fascinante Esto s√≠ lo usan yo creo un
- [05:57](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=357s) poco pues como usamos nosotros Twitter no que contamos ah√≠ un poco lo que nos pasa en el d√≠a a d√≠a Pero claro Twitter tambi√©n es otra plataforma que tampoco la juventud as√≠ m√°s joven est√° ah√≠ metida lo consideran como Bueno ah√≠ existe esa red bueno Twitter X ahora tal cual tal cual y y en cambio es uno de los mejores sitios para para saber lo que est√° pasando en el mundo yo recientemente con lo que ha pasado pues entre Israel Palestina para m x Twitter mejor lugar para ver diferentes puntos de vista y muchas veces
- [06:34](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=394s) diferentes al tuyo porque Jo es que si no a veces otas redes sociales buscan m√°s el la afinidad te ense√±an cosas que a ti te Mola ver y te sientes comoo Twitter tiene ese punto provocador si eres del Barsa te ense√±ar√° mucha gente del Madrid y esto te cabrea pero la vez te da otros puntos de vista cosa que no est√° tan mal S√≠ yo yo hago un poco eso tambi√©n tambi√©n Es verdad que en el para ti c√≥mo se llama ahora pues empieza a salir cosas de de todo pero s√≠ que es verdad queo gente Pues con ideas distintas y tal para para eso Que dices para no
- [07:06](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=426s) encerrarte en tu caverna no y solo lo que yo pienso es lo bueno sino ver Oye no tiene por ser tambi√©n todo lo tuyo Bueno ni todo lo de los dem√°s malo no siempre es bueno el contraste total y Es que creo que que deber√≠a haber m√° m√°s cosas y ahora mismo Pues Twitter con el for page tambi√©n la ha creado tiktok lo tikt te busca precisamente por afinidad Twitter a veces te busca por aci√≥n Y de nuevo S√≠ para que es que no creo que esto sea malo entres al trapo S√≠ bueno para para para que entres en en debates y yo Honestamente como usuario y
- [07:40](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=460s) como creador tambi√©n de contenido creo que es uno de los lugares m√°s interesantes y luego est√° linkedin que a veces nos olvidamos mucho de linkedin S√≠ pero eso te iba a decir que para m√≠ es la la segunda red despu√©s de tiktok donde m√°s m√°s que m√°s m√°s seguidores no est√° YouTube pero m√°s interacciones s√≠ la sensaci√≥n y yo me baso en el bar√≥metro de la gente que me habla por la calle o sea ya ves que es cero cient√≠fico eh pero cierto que encuentro mucha much√≠sima gente Pues que que me ha visto en tiktok y tal y me lo comenta pero
- [08:13](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=493s) despu√©s inmediatamente despu√©s viene linkedin mucha gente no te veo en linkedin tal me gusta lo que creas en linkedin y digo Bueno realmente lo creo para tiktok y tal No no Ah tiktok yo no tengo yo solo linkedin o sea que es curioso la cantidad de gente que las interacciones son como m√°s profundas en cambio Twitter donde me sigue m√°s gente que en linkedin o YouTube no hay tanta ese bar√≥metro de gente que ve dice Ah mira tal pues es mucho menos tiene mucha fuerza porque much√≠sima y creo que es bu Qu√© d√≠a lo cambiar√°n el algoritmo pero
- [08:44](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=524s) de momento Pues ojal√° ojal√° nunca porque a veces llegas a gente con post de hace semanas que cosa que en otra red es imposible y a veces nos gusta romper lo que funciona es un poco frustrante Ojal√° se√±ores de linkedin no cambien lo que funciona toen Porque es que a veces Jo nos encanta romper cosas que van muy bien sabes no s√© no s√© en fin eh Ah viv linkedin yo esty muy de linkedin S√≠ s√≠ yo estoy muy contento tambi√©n porque es eso llegas a m√°s gente puedes tambi√©n debatir puedes poner a lo mejor una opini√≥n que que en otra red pues
- [09:21](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=561s) pasa desapercibida o genera un hate sin buscar y ah√≠ es est√° m√°s abierto Yo creo que influye tambi√©n mucho que lo digo muchas veces que como ah√≠ tenemos todos cara foto y d√≥nde trabajamos la gente sabe sabe medirse no y en Twitter hay mucho anonimato pero mira que tambi√©n Creo que ha cambiado bastante El el c√≥mo interactuamos o sea antes linkedin era el lugar para ir a buscar trabajo y eras super amable porque pensabas que alguien estaba leyendo mirando y te estaba considerando para un curro y de repente no Qu√© interesante tal pero tambi√©n Creo
- [09:56](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=596s) que se nos ha pasado la tonter√≠a un poco con lindin y que amente veo no no m√°s cr√≠tica ni nada negativo eh pero s√≠ gente hablando m√°s abiertamente yo yo en Linkin hace un a√±o empec√© a poner contenido no propio de linkedin tampoco es que pusiera porno eh pero es que me entiendes que no todo todo qu√© Parece que qu√© pasa que para publicar el linkedin Tienes que ponerte el traje y la corbata Y entonces se te abre la web no entonces en cosas m√°s personales historias del d√≠a a d√≠a a veces s√≠ que ten√≠an que ver con con trabajo eh pero
- [10:25](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=625s) gesti√≥n tema familiar ni√±os emprendimiento y la recepci√≥n fue buen√≠sima porque las personas que est√°n en linkedin son personas o sea no no no est√°n ah√≠ solo aqu√≠ solo vengo a ver temas de trabajo no y a veces salir un poco de de lo que est√°n viendo arriba o abajo pues pues les Mola y precisamente vi que cuando te sales un poco de la l√≠nea editorial de contenido para que se comparta de trabajo de tal de futuro y hablas Pues de de ti de cosas la recepci√≥n en linkedin es buen√≠sima Yo creo que es precisamente porque sales de
- [10:54](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=654s) lo habitual s√≠ no s√© no s√© si servir√° bien o no pero lo que dices t√∫ somos personas y al final tenemos todos las las mismas inquietudes o problemas y entonces que otra persona lo diga es como Ah Mira pues no es tab√∫ ya ya se puede hablar total yo me alegro Honestamente de que de que sea as√≠ porque si yo tuviera que empezar a crear contenido hoy ser√≠a tiktok y linkedin y despu√©s evidentemente no seamos tontos pues pues publicas las redes en YouTube en tal Pero al final para m√≠ son los dos lugares y mira que y adem√°s tiktok y
- [11:26](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=686s) linkedin tienen equipos en espaa muy Guay de ayuda al creador cuando empiezas a crear y tal llega un momento que si te va bien que te escriben ese mensaje Hola Soy del equipo de creadores y te sientes muy muy muy muy cuidado y esto me ha pasado en tiktok y en linkedin no es esa sensaci√≥n de abandono linkedin tiktok todav√≠a no ha llegado a decirme nada lleg estoy seguro S√≠ s√≠ s√≠ qu√© Guay qu√© Guay pues ya Aprovechando que estamos hablando de de contenido y de generaci√≥n Z y todo esto c√≥mo logras Eh pues esto en lo que haces de un
- [12:01](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=721s) minuto eh hablar de cosas de tecnolog√≠a que avanzan tan r√°pido que cada d√≠a sale algo nuevo si estamos hablando de javascript cada d√≠a sale un framework si estamos hablando de ias cada d√≠a sale una herramienta No c√≥mo logras que hacerlo de tal manera que sea entretenido y que que la gente lo lo vea no porque normalmente los temas t√©cnicos pues la gente enseguida hace el swipe para arriba y se pasa Otra cosa Sabes que a veces intentado te lo digo en serio eh pero he intentado heavy o sea de mirar datos de pasarme un rato
- [12:34](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=754s) mirando y tal entender porque hay cosas que funcionen y no lo he conseguido o sea no s√© por qu√© lo m√≠o esto ha funcionado y otras cosas no pero no tengo ni idea porque no sigue un patr√≥n yo un d√≠a me puse a crear contenido en un minuto de divulgaci√≥n porque me gustaba pero lo hubiera hecho igual sin sin el √©xito O sea al final yo tengo otras cosas que que consumen tiempo m√°s que el un minuto que tiene menos audiencia mi podcast llama el futuro era mejor hay publicidad podcast en podcast que lo hago con Rafa ponch que es uno de
- [13:06](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=786s) mis mejores amigos y y m√∫sico es compatible a veces parece que no eh pero los y y y Jo al final no no hemos crecido excesivamente audiencia llevamos cco o 6 a√±os haciendo podcast Y tenemos 5000 6000 reproducciones que para mucha gente ser√° mucho y no no lo desprecio y much√≠simo menos me flipa 5000 personas juntas imagin√°ndomelo S√≠ pero la media de los v√≠deos de tiktok que hago pues igual son 150,000 o 200.
- [13:31](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=811s) 000 personas que los ven Entonces es mucho menos y consume tiempo pero Jo en este caso es que lo empezamos como excusa para hacer algo porque √©l se fue a vivir a Madrid para yo Barcelona para seguir vi√©ndonos y tal pues vamos a buscar algo y encontramos esto y nos flipa eem y Y adem√°s lo escucha gente pero menos que en otras cosas que consumen menos tiempo Pero no por eso lo voy a dejar de hacer o sea yo creo que cada cosa tienes que tener un Reason Why puede ser ganar dinero puede ser ganar fama puede ser visibilidad puede ser que
- [14:01](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=841s) te lo pases bien puede ser pues hacer algo con un amigo precisamente como excusa de vamos a tener un proyecto juntos que nos divirtamos Y en este caso fue as√≠ Eso es luego ya salen m√°s cosas Pero yo es lo que digo siempre cuando empiezas algo tiene que ser porque te guste porque como sea por otra raz√≥n al final sab para m√≠ el baremo es si no lo viera nadie o sea Si no tuviera √©xito lo seguir√≠a haciendo porque evidentemente es un proyecto empresarial pues no si no a nadie pues has quebrado has perdido el dinero te vas a otra cosa pero a veces
- [14:33](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=873s) hay temas de comunicaci√≥n que dices si durante el primer a√±o no lo viera nadie yo lo seguir√≠a haciendo me lo pasar√≠a bien aguantar√≠a en Twitch ah√≠ streame Durante un a√±o porque Depende si estoy haciendo streaming de algo que me encanta Estoy jugando a un videojuego y me flipa jugar y aparte hago streaming por si alguien le Mola verme y tengo chispa y tal Mola pero si solo juego para que me vean entonces la respuesta ser√≠a que no no si no va bien lo dejar√© de hacer pues es un muy buen una forma de medir un s√≠ntoma de que igual no
- [15:00](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=900s) deber√≠as estar haci√©ndolo Porque si solo hago algo para que tenga √©xito pero si no lo ve lo dejar√© de hacer es una pena hay otras cosas que har√≠as Claro si no crees en ti mismo tampoco es que se va a reflejado 100000% y m√°s all√° de creer en ti mismo es hacer cosas que te gusten O sea si sumas la creaci√≥n de contenido en internet a algo que ya haces porque te Mola cocinar me flipa cocinar me paso el d√≠a cocinando con la termomix inventando cosas t√≠o Pon una c√°mara y ponlo en en tiktok Haz Twitch en directo de
- [15:29](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=929s) cocinando cosas raras igual no lo ve nadie pero igual S√≠ pero como no cambia porque ya lo ibas a hacer Me entiendes Como es algo que ya te flipa hacer y ya lo haces pues Jo o te quedas igual o vienen cosas nuevas maravillosas cosas nuevas maravillosas Pues que un d√≠a tienes medio mill√≥n de Seguidores un d√≠a tienes un mill√≥n est√°s publicando libros de cocina la gente y esto tambi√©n son ingresos con lo cual dejas tu trabajo que no te gustaba tanto y te dedicas a lo que te apasiona esto es el mejor escenario pero si no va bien yo voy a
- [15:57](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=957s) seguir cocinando porque me flipas s√≠ voy a seguir dedicando las horas libres que tengo pues cuando juntamos algo que nos flipa con la creaci√≥n de contenido no hay un escenario malo Ay o me quedo igual o voy a mejor para m√≠ esta es la clave porque muchas veces empezamos creando contenido con algo que puede ir mal no es que si no va bien lo dejar√© de hacer s√≠ntoma de que ojo alarma bandera roja que dicen a los m√°s j√≥venes que yo red flag red flag pues Total ya me siento un generaci√≥n Z ahora mismo vamos ya ves ya ves S√≠ yo yo estoy
- [16:30](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=990s) contigo porque igual yo empec√© yo empec√© con un blog cuando hab√≠a blogs que ya la gente yo creo que ya ni sabe que existe eso qu√© pena eh o sea molaba mucho la √©poca de los blogs S√≠ s√≠ con hab√≠a hasta premios creo que hab√≠a un premio de 20 minutos de los 20 blogs o cosas as√≠ hab√≠a ah√≠ hab√≠a un sector ah√≠ de bloggers influen br muy fan de los blogs pero con diferencias y luego pues dije o sea Vi Vi alg√∫n v√≠deo en YouTube de Pues de gente Pues de habla inglesa que hac√≠a tutoriales de programaci√≥n y dem√°s y dije Y dije anda
- [17:04](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=1024s) pues Por qu√© no hago yo lo mismo si total es [¬†__¬†] un un post que tenga en el blog de de alg√∫n tutorial que haya hecho y grabarme no Y eso hice lo grab√© ah√≠ con la c√°mara del port√°til y con el micro del port√°til y para arriba no porque lo m√°s dif√≠cil es eso que digo Siempre empezar eh nadie te va a ver el primer d√≠a entonces da igual como lo grabes no te vas a ver m√°s que t√∫ y a veces es una pena porque como sabemos que nadie nos ver√° al primer d√≠a e es como que dices pues para qu√© lo hago Bueno pues porque al final para que
- [17:35](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=1055s) funcione Tienes que empezar por alg√∫n lugar y y y no voy a guardar lo mejor que tengo para dentro de tres meses es que nunca va a llegar entonces si si guardas lo mejor que tienes significa est√°s creando algo que es una [¬†__¬†] Eh Porque porque no es que tengo algo muy guapo pero me lo guardo para cuando tenga audiencia ya pero es que la audiencia va a llegar porque lo que haces es les Mola con lo cual t√≠o dalo todo ahora y cuando te vaya bien e secreto Hola puede recuperar es que no pasa nada O sea si hay algo que lo vio
- [18:04](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=1084s) 2000 personas que te lo ocurr hase un huevo d√≠talo un poco actual√≠zalo tal pero vuelo a publicarlo para la gente nueva y a veces yo lo hago y me dicen esto ya lo vi digo gu qu√© Guay Gracias por decirlo porque significa que llevas un mont√≥n de tiempo sigui√©ndome y te lo agradezco porque esto lo publiqu√© hace TR a√±os cuando erais t√∫ y tres m√°s con lo cual Muchas gracias por estar este tiempo y y la gente lo aprecia O sea a veces es como Ah esto ya lo vi trampa trampa que tambi√©n a veces parece que y como est√©n pagando 100 al mes por lo que
- [18:30](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=1110s) haces no es gratis pero pero bueno pero tambi√©n yo intento transformar algo bueno decir bu Pues si ya lo has visto significa que llevas aqu√≠ uno de tiempo y te lo agradezco no me voy a cabrear sabes al contrario no s√© Pues s√≠ no Y adem√°s yo tambi√©n Es verdad que reutilizo cosas pero por lo que t√∫ dices los que llegan hoy no tienen por haber estado ah√≠ hace 2s a√±os hace 3 a√±os y si es un contenido de valor Oye pues que ha gado gente en su momento vida hay que hay que sacarlo 100% y viva la vida y dej√©monos de tonter√≠as porque a veces en
- [19:02](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=1142s) serio estamos llenos de no Pero qu√© tal esto ya lo puse los que lo vean me lo dir√°n S√≠ y result resulta el 99% no lo ha visto pues eso es pues pues ole es que a veces creemos que claro nosotros tenemos conciencia de todo lo que hacemos porque Claro t√∫ sabes lo que has grabado hoy lo que has grabado ma√±ana y Y tal Pero claro la gente no no Aunque te sigan no siguen vamos a lo mejor hay alguien que sigue todo lo que haces pero no es lo lo m√°s habitual lo que hices t√∫ el 99% de la gente ni se entera de que has ido a tal sitio que ha sacado tal
- [19:35](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=1175s) cosa y lo dicen anda si sacaste esto S√≠ ya hace tiempo y llevo todos los d√≠as dici√©ndolo yo me en mi caso me di cuenta de de la de gente que que que segu√≠a los v√≠deos que hac√≠amos y tal mm un d√≠a que fuimos al tibidabo al parque de atracciones que hay peque√±o de Barcelona y uno gigante creo que es un parque p√∫blico del ayuntamiento O sea que es algo Bastante rara Avis en Espa√±a y fuimos ah√≠ despu√©s de que menos de un a√±o 6 7 meses creando contenido em porque nos hicimos un autoconfinamiento en la pandemia M√°s
- [20:15](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=1215s) all√° del confinamiento obligatorio tuvimos un beb√© nuestro tercer hijo y de repente dijimos vamos a quedarnos m√°s tiempo nos da bastante miedo mal rollo el tema del covid todav√≠a no hab√≠a vacunas dijimos pues vamos a alargar el confinamiento m√°s all√° de lo que nos obliga la ley y cl estuvimos unos meses m√°s en casa yo empezaba a crear contenido empezaba a tener audiencia bastante pero para m√≠ Era un n√∫mero 100.
- [20:39](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=1239s) 000 seguidores pues qu√© Guay Pero no no me imaginaba un campo de f√∫tbol Bernab√© welcam no petar gente que me est√° sea no Bueno un n√∫mero y el d√≠a que fuimos al tabu fue como y no fue tan positivo Pues fue un choque como sin aviso yo fui feliz tal Y de repente bastante gente empez√≥ como Wow os veo tal una foto los ni√±os agobiados Ana dici√©ndome cuando lleguemos a casa borramos todas las redes sociales e y fue un momento ese d√≠a fue m√°s agobio que Guay fue 20% Guay 80% de Uy uyuy uyu esto se nos ha dio las manos C√≥mo se arregla pero poco a poco mm se fue transformando en algo muy Guay
- [21:23](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=1283s) y ahora es al rev√©s ahora es el 98 por son cosas Guay y viene mucha m√°s gente O sea al final ese a√±o era justo al inicio y cerramos el a√±o con 200 y pico 202 o 205 millones de reproducciones que es que es absoluta locura pero conseguimos transformarlo en algo Guay la verdad la gente siempre ha sido hiper respetuosa Es evidente que no ponemos las caras nuestros hijos en las redes sociales Es evidente porque pues hay gente que lo hace y lo respeto pero Es evidente que no porque nunca han salido y la gente se da cuenta y tambi√©n
- [21:52](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=1312s) lo respetan mucho a veces cuando nos ven por la calle que no es por esconderlos es porque al final yo creo y es mi opini√≥n que es su decisi√≥n si van a querer salir pues que salgan cuando sean mayores que Pero que sea su decisi√≥n que no se encuentren 10 a√±os de su vida compartidos para lo que nunca se apuntaron ya no imag√≠nate que se van a buscar trabajo Oh yo te vi tu primer d√≠a Se te cay√≥ un diente y est√°n en plan pero me das el trabajo ya es que claro cuando ya se comparte tanto tanto es demasiado Yo s√≠ que es verdad que alguna
- [22:23](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=1343s) foto y tal s√≠ que s√≠ que he subido pero claro ya e o sea es que yo todo s√≠ que es Es peligroso tambi√©n hay gente que que est√° un poco mal de la cabeza s√≠ O sea yo yo yo al final lo que te dec√≠a creo que cada uno tiene que elegir Yo respeto a full los que comparten cada minuto de cada d√≠a los que publican fotos y los que no publican nada de los que los publicamos pero si est√°n de espaldas o lo que sea pues es que no hay nada malo sabes aqu√≠ quien juzgue es que tiene demasiado tiempo libre e al final en mi caso es una decisi√≥n
- [22:56](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=1376s) m√°s de conceptual de pensar yo creo que el d√≠a que quieran publicar cosas verg√ºenza ya no una foto tal sino yo que s√© que empiezan a contar su vida Sabes Yo que s√© lo que sea que tienen que ser ellos pero hay cosas cuando son ni√±os que a veces publicamos nos parecen graciosas Y es que lo son el ni√±o pal con una tarta en la cara no s√© qu√© pero cuando son mayores nos podr√≠a dar verg√ºenza que hubiera Imag√≠nate que yo que s√© yo ahora estoy creando contenido que hubiera v√≠deos m√≠os entonces la gente lo sacar√≠a porque
- [23:23](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=1403s) ahora pues el canal ha funcionado dir√≠a Mira ese eres t√∫ pues igual lo saco yo un d√≠a y tengo cosas bastante cachondas de cuando era ni√±o pero pero ya lo eliges t√∫ no Claro pero no quiero encontr√°rmelo si no no es que me fuera a cabrar con mis padres pero dir√≠a t√≠o c√≥mo me la hab√©is liado no hace 30 a√±os pero bueno s√≠ lo que dices t√∫ de la gente Igual yo bueno Yo despu√©s de la pandemia cuando ya nos dejaron salir Lo que hicimos fue mudarnos mudarnos a un a un pueblo a las afueras de de Madrid a para respirar porque claro de estar en
- [23:57](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=1437s) un un apartamento pues sin terraza peque√±o con un ni√±o tambi√©n igual ten√≠a 6 meses Pues fue una locura Entonces en cuanto nos dejaron busqu√© anuncios digo a ver casas fuera que tengan un poco de jard√≠n no Y entonces como que hicimos tambi√©n ese como dices t√∫ ese confinamiento extra no porque ya al irte fuera del barullo de la ciudad pues ya no ostras es interesante ya pero es que esto es otro tema eh pero me parece super interesante porque nosotros estuvimos a punto No s√© si deber√≠a contarlo esto estuvimos a
- [24:33](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=1473s) punto de mudarnos a a un pueblo de cero habitantes o sea medio de la monta√±a S√≠ aqu√≠ son 100 o 200 no s√© cu√°ntos son este pueblo y y al final dijimos de de qu√© estamos huyendo realmente porque era no la tranquilidad tal los ni√±os S√≠ s√≠ que son cosas buen√≠simas eh que no digo que no pero esto no lo puedes conseguir donde vives porque nosotros ya vivimos en la monta√±a o sea es un pueblo o sea maravilloso en medio del Bosque por eso que no te irte de la ciudad al campo tiene para m√≠ Mucho Sentido y la gente que sigen la ciudad e es porque les
- [25:08](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=1508s) flipa mucho la ciudad La vida loca de la ciudad la contaminaci√≥n yo que s√© algo tienen que verle pero es que es mucho m√°s caro es mucho m√°s contaminado e para m√≠ es mucho m√°s ruido mucho tal est√°s pendiente que no te atropella un coche siempre o sea al final es para m√≠ muy muy estresante vale o sea que de nuevo respeto pero no es para m√≠ entonces claro querer irnos de un pueblo peque√±o a uno todav√≠a m√°s peque√±o igual dijimos estamos oyendo de algo que es culpa nuestra del estr√©s de la ansiedad del d√≠a a d√≠a tal pero es que
- [25:41](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=1541s) ya vivimos en un entorno que puedo salir Tengo mountain bike aqu√≠ delante lo que quiera entonces dijimos Vamos a darle una oportunidad cambiando cosas nuestras e que quemos que nos gustar√≠a que fueran mejores pero sin querer romperlo todo por solucionar alg que igual no es la mejor forma romperlo todo me explico y la verdad que estoy contento de que tom√°ramos esa decisi√≥n porque al final encontramos la la calma Y esa felicidad eh en el lugar donde ya hab√≠amos creado un hogar no nos montamos nuestra casa la construimos hace a√±os sobre un terreno
- [26:17](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=1577s) fue ampliando Tenemos muchos recuerdos Aqu√≠ tambi√©n me da pena y despu√©s cuando econ√≥micamente pues tuvimos la la oportunidad s√≠ compramos una casa en medio de la monta√±a eh que nos flipa ir y escaparnos pues pues cuando podemos con los ni√±os pero fue posterior o sea lugar donde pasamos la mayor parte de los d√≠as del a√±o quer√≠amos que fuera casi uno uno m√°s de la familia no porque es un lugar que tienes que estar a gusto en armon√≠a que no soy yo mucho de bueno no soy mucho ni nada soy cero de energ√≠as y cosas estas no soy m√°s de
- [26:50](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=1610s) de Jo que est√©s en un lugar que despiertes y te den ganas hay gente que lo llamar√° fchu y no s√© qu√© Y que no quieren girar la cama porque lo este no Mola yo no soy as√≠ a m√≠ me la suda perd√≥n eh pero como est√© la cama yo lo que quiero es despertarme y sentirme a gusto igual alguien lo dir√° Pues por eso porque no m√≠ralo este es porque est√°s a gusto Pues no s√© pero yo me siento a gusto y no creo que sea por tu opini√≥n O sea que en mi cabeza t√∫ est√°s loco Yo estoy sano y en la tuya al rev√©s Pues todos felices S√≠ aqu√≠ me pasa igual el el no
- [27:20](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=1640s) hay ni un ruido y cuando Pues eso voy a ver a mis padres que siguen viviendo Pues en Madrid y tal claro te das cuenta del choque no de pero pero tu cama m√≠ralo este pues no lo s√© lo tengo que mirar proba no lo mires gu Ya est√° ya vas entrar en esta [¬†__¬†] porque hay veces que duerme un poco mal Quiz√°s a lo mejor no est√° est√° ah√≠ est√° lindando con otra coordenada yo una vez fui a comprar una planta artificial para la oficina y mi socio que si est√° viendo esto te quiero Perd√≥n dijo no plantas artificiales no porque rompen el no s√©
- [27:54](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=1674s) no s√© si era esto o otra cosa yo pero qu√© dices es broma no no no no como no no imposible porque se ve que van en contra de una energ√≠a tal y dije vale vale nada es tu oficina Estamos locos Mad habr√° sus estudios qui√©n sabe s√≠ s√≠ no no total total pero bueno en fin a veces las abuelas sab√≠an m√°s que los estudios cient√≠ficos eh la abuela te dec√≠a va llover ya ya que no que mira est√° va llover me duele el brazo izquierdo y es que va a llover yo que no ya ya tormenta y t en la monta√±a Pues s√≠ s√≠ s√≠ la experiencia es un grado que se
- [28:27](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=1707s) dice S√≠ s√≠ s√≠ mira tengo unos amigos que est√°n haciendo un podcast precisamente de que va en esta l√≠nea de de hablar con gente mayor de extraer esa sabidur√≠a que a veces nos pasa Genial porque es que eso se pierde luego Y s√≠ s√≠ s√≠ Y antes iba pasando de generaci√≥n en generaci√≥n pero ahora ya las generaciones vamos a otro ritmo y y se pierden esas cosas S√≠ y eso de que no y yo bueno T√∫ tienes 38 38 S√≠ bueno casi 39 porque en diciembre ya yo 36 de junio del creo que soy un d√≠a m√°s peque√±o un d√≠a m√°s mayor que Leo
- [29:02](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=1742s) Messi no compartimos la misma cuenta bancaria Pero los dos tenemos tres ni√±os ah√≠ est√° sabes feliz pero al final yo creo que hay un un mont√≥n de De qu√© generaci√≥n somos nos va a definir muchas cosas o sea que a veces pensamos que queremos hacer cosas pero no queremos nos han venido generacionalmente e y una de esas creo que es esa queda de de de paz mental o sea creo que somos la y ahora hablado de millenials eh gente 30 hasta 40 m√°s o menos Somos la primera generaci√≥n que como lo ha tenido todo ya de de cuna O
- [29:40](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=1780s) sea no hemos vivido una guerra en nuestro pa√≠s Aunque hay algunas bastante cerca pero a nosotros nos ha tocado al menos en Espa√±a hemos subido siempre democracia O sea que al final si comparamos con nuestros padres eh hemos tenido menos miedos en la vida de acuerdo y Habr√° gente evidentemente que ha vivido en un entorno pues econ√≥micamente mejor peor etc√©tera no entro ah√≠ pero al final nuestros padres la mayor√≠a vivieron peor de lo que vivimos nosotros s entonces eh creo que somos la primera generaci√≥n que se ha preocupado por la Salud Mental
- [30:12](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=1812s) O sea t√∫ vas a muchos de nuestros padres 60 70 a√±os y dices no la Salud Mental y te dicen tonter√≠as tira para all√° ni√±o porque es que en su caso es que no ten√≠an tiempo y es Es que no es que no fuera important ten tiempo enterarse de si estaban mal o no S√≠ es que era Ten√≠a que seguir seguir seguir nosotros pues hemos sido los primeros en preocuparnos la la siguiente generaci√≥n todav√≠a m√°s se ha preocupado y creo que esto es bueno y hay quien se quiere re√≠r de esto la generaci√≥n de cristal que no se les puede decir nada t√≠o no te equivoques o
- [30:39](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=1839s) sea precisamente que nos estemos preocupando de Salud Mental de estar bien de bienestar de d√≥nde seremos m√°s felices tal combinado con no me puedo comprar una casa en medio de la ciudad porque valen medio mill√≥n de euros o un mill√≥n de euros y solo son para hiper millonarios que vienen de fuera pues combinamos las dos cosas y decimos Jo pues blanco y embotella me voy ah√≠ que es m√°s barato que lo est√° dejando de ser porque de repente empiezas a ver precios en pueblos peque√±os que dices pues ole t√∫ Qui√©n ha puesto esto pero ah√≠ s√≠ que
- [31:06](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=1866s) puedo aqu√≠ no pues pues pues voy a intentar ser m√°s feliz all√≠ y y esto a nivel de empresa lo hemos notado mucho en founders nosotros somos casi 40 hay mucha gente que trabaja en remoto y hay bastante gente de pueblos peque√±os y a m√≠ esto no sabes lo feliz que me hace que no vi en Madrid o en Barcelona que se ha quedado en su pueblo eh pienso en Oliva en la l√≠nea de la concepci√≥n [M√∫sica] alguno que se ha desplazado pero que tambi√©n era un pueblo Jo esto es muy Guay porque al final evidentemente los salarios de una
- [31:37](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=1897s) startup No son no son los salarios de accenture que molan m√°s o de telef√≥nica seguramente pero precisamente poder quedarte lugar donde donde quieres estar Y que adem√°s seguramente no est√° en caro como Madrid o Barcelona que si ya es absurdo Pues tambi√©n tiene sus ventajas y y hoy en d√≠a hay fibra √≥ptica en todos lados entonces yo creo que a veces tambi√©n nos tenemos que bajar un poco la tonter√≠a de cuando estamos intentando montar un equipo y plantearnos d√≥nde ser√° m√°s feliz la gente no pero tienen que volver a la oficina yo soy el
- [32:08](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=1928s) primero que aboga porque ciertos equipos pues est√©n juntos pero creo que esto es algo bueno pero despu√©s la paz mental la Salud Mental que te da el el poder decir este tipo de cosas creo que es bastante alta As√≠ que yo me alegro de que de que sea as√≠ vaya S√≠ adem√°s de eso que estamos en un sector que nos permite eso otro sector pues quieras o no pues tiene que ser presencial pero todo lo que hacemos nosotros que se puede hacer por lo que dices t√∫ un ordenador un fibra √≥ptica y una c√°mara en caso de que hagas
- [32:39](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=1959s) contenido o graves formaciones o lo que sea tal cual eh No tienes por qu√© estar atado a a un sitio Y encima ese sitio suele ser hiper caro no tal cual y adem√°s esto lo hemos visto mucho en Estados Unidos silcon vale Y tal silicon vale San Francisco es el lugar ideal que muestra un poco lo que estamos diciendo e es es el lugar perfecto para demostrar esto San Francisco si eres maestro no puedes vivir en una escuela p√∫blica es que no puedes vivir porque el alquiler vale 10.000 y no cobras 10.
- [33:12](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=1992s) 000 al mes por qu√© Porque hay tantas empresas muy top que se han ido a mudar all√≠ que al final pues al competir entre ell han subido los salarios a niveles Pues un programador cobra 150 200,000 al a√±o y el propietario un pis ha dicho Para qu√© se lo voy a quilar a un maestro si se lo puedo quilar a un ingeniero de esta super multinacional y subre el precio pues y m√°s en un pa√≠s tan salvaje a nivel capitalista e pues pues los han subido y el nivel es que d√≥nde trabaja el maestro d√≥nde trabaja ah√≠ D√≥nde vive el maestro D√≥nde
- [33:43](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=2023s) vive la persona que est√° en Star Lu ti que estar TR horas de y es una locura s√≠ y y y al final qu√© ha pasado ha llegado la pandemia la gente ha teletrabajo y se han preguntado por qu√© estoy pagando 8000 de alquiler por un piso de una o dos habitaciones cuando a 3 horas de vuelo en Espa√±a no existe 3 horas de vuelo son las Canarias eh per aqu√≠ ah√≠ 3 horas de vuelo no es mucho menos irte a la otra punta del pa√≠s o sea es aqu√≠ al lado e entonces pues si estoy a tres horas de vuelo que puedo venir incluso Un d√≠a a
- [34:10](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=2050s) la semana la gente Eh que los vuelos valen 30 es barat√≠simo pero ah√≠ a 3 horas por lo que pago por menos de lo que pago de alquiler Aqu√≠ tengo una casa que flipas que flipas ya se te va la olla o sea casa de ocho habitaciones piscina Infinity pool no s√© qu√© tal pues me voy y y de repente hay gente que ha dicho quiero vivir bien y creo que esto es bueno que llegue a silicon baley porque significa que llegar√° tambi√©n a nosotros pronto claro S√≠ lo que pasa all√≠ llega aqu√≠ en unos a√±os a veces tarda eh A veces Tarda pero pero yo yo
- [34:42](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=2082s) creo que acabar√° llegando unos tres o cu a√±os ah√≠ de de delay S√≠ pero bueno tambi√©n cada vez m√°s hay gente que detecta oportunidades all√≠ y las trae aqu√≠ antes porque si veo que algo est√° funcionando e Pues por qu√© no me meto a lo loco [M√∫sica] a avanz arme sabes Pues mira pues intent√©moslo Pues mira ya que hablas de oportunidades vamos a hablar de tu trayectoria emprendedora si quieres venga porque por lo que se de verdad se te conoce aunque sea seas tiktoker aunque no lo quieras es por el el sistema operativo este que
- [35:20](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=2120s) que hiciste navegador que se llamaba iOS no no iOS sio a de ojo lo dijo mi madre se llama os nosotros lo llamamos mal porque en espa√±ol aos pero todo el mundo cuando empez a crecer internacionalmente era como y yo s√≠ s√≠ eso eso Thing sea al final os Pues fue una √©poca brutal de mi vida que fue mi universidad fue mi todo o sea para m√≠ os fue eh fue lo que me dio de los 18 a los 25 todo lo que aprend√≠ para hacer cosas despu√©s y adem√°s que que yo soy programador como t√∫ y en esa √©poca era un mal programador y para m√≠ tambi√©n fue un aprendizaje
- [36:15](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=2175s) porque aprend√≠ de los mejores em fue una √©poca brutal evidentemente pues pues pas√≥ lo que pas√≥ empez√≥ a aparecer soluciones brutales que yo uso hoy cada d√≠a de iCloud que principio se llamaba de forma distinta dropbox box.net tambi√©n fue un Player muy fuerte en esa √©poca Microsoft skydrive y tal Y ya no ten√≠a tanto sentido virtualizar todas las aplicaciones y guardar los datos fuera si ya ten√≠amos los datos en cualquier lugar pero fue una experiencia Recuerdo Como a√±os muy felices en mi pueblo antes de irnos a
- [36:48](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=2208s) Barcelona y ah√≠ tambi√©n eh pero concretamente esa √©poca por la ma√±ana trabajando de cualquier cosa que nos diera pasta para vivir y por la tarde creando nuestro proyecto y que ver que empieza a funcionar y sin prisa porque el chup chup dur√≥ bastante tiempo ten√≠amos tiempo al final 18 a√±os te da igual se pasa un a√±o o dos pero de repente empez√≥ cada vez a hacerlo m√°s gente era gratis lo regal√° O sea que al final se cre√≥ una comunidad muy Guay de gente que nos triplicaba la edad a veces que se dedicaba horas al proyecto y era
- [37:22](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=2242s) buah una √©poca muy Guay de hecho me encantar√≠a alg√∫n d√≠a de mi vida volver a hacer Open source trabajar en en proyectos libres no exist√≠a github no exist√≠a stack overflow era otra √©poca que pocos la recordamos no exist√≠an frameworks ibas a pelo con todo pero lo recuerdo con una √©poca muy feliz S√≠ s√≠ s√≠ yo bueno comparto un poco contigo eso porque tambi√©n con mi pareja creamos una startup tambi√©n no con tanto √©xito pero lo que dices t√∫ lo que se aprende por el camino ya no solo de programaci√≥n sino pues de todo no
- [37:59](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=2279s) aprendes es la universidad de la vida s√≠ total y adem√°s el √©xito Honestamente creo que es bastante relativo O sea qu√© es √©xito y Qu√© es fracaso evidentemente fracaso es que un proyecto no funcione econ√≥micamente te lo compro pero eh todo lo que fracasa es un fracaso es una pregunta Absurda seguramente l√©xicamente la respuesta s√≠ tengo un ejemplo yo he fracasado muchas veces muchas e perdiendo todo y cerrando la empresa Pero una en concreto la repetir√≠a que fue steps Life una para guardar recuerdos de los ni√±os de los primeros
- [38:34](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=2314s) a√±os porque aparte de crear la startup la usamos la usamos a saco y algunas personas que ya no est√°n que todav√≠a deber√≠an estar aqu√≠ pero se fueron antes de tiempo pues les enviaron mensajes a nuestros hijos igual no las van a recordar directamente sobre todo los peque√±os pero s√≠ que tienen mensajes suyos que les cuentan cosas super interesantes O sea que al final es una startup que yo le tengo mucho cari√±o aunque no conseguimos monetizar y tuvimos que cerrar y no pasa nada porque pasa las mejores familias pero
- [38:59](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=2339s) concretamente esa es como que para m√≠ no es un fracaso y insisto e fracasado perdimos dinero Adem√°s porque invertimos pero para m√≠ no es un fracaso en cambio hay otras cosas que son fracasos y que para m√≠ son fracasos muy gordos pu no pasa nada pero esta concretamente e le guardo pues ese cari√±o extra√±o de que tienes a pocos fracasos norment pues acabas cabree con las cosas que no han ido bien pero en esta concreta para m√≠ no es un fracaso es lo que t tambi√©n de los errores que puedas tener al finales son es el
- [39:30](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=2370s) aprendizaje No nadie nace Sabiendo y los que de verdad saben las cosas son porque ya se han peleado ya se han pegado y han cometido errores Entonces igual Pues eso Nosotros tampoco conseguimos tambi√©n pusimos dinero y no conseguimos que despegara ni nada pero todo el aprendizaje y todos las contactos o como lo quieras llamar que se va sinergias no s se van eh creando a partir de lo que haces Eh Pues como dice mi pareja Cuando haces cosas pasan cosas y es as√≠ y me encanta lo que lo que dice y adem√°s creo que cuando haces cosas pasan cosas estoy
- [40:13](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=2413s) 100000% de acuerdo y que cuando emprendes tiene que irte bien una cosa no todas las cosas que hagas no es decir es algo muy c√≠clico lo normal es que las cosas no funcionen y se habla un poco de esto lo normal es que las cosas no vayan bien lo extraordinario lo que no es normal es que funcionen Entonces joo cuando funcionan suelen funcionar muy bien y te cambian la vida y te dan un privilegio que te puede llegar a los 20 a los 30 a los 40 a los 50 a los 60 cuando sea que es el poder elegir lo que vas a hacer despu√©s y esto es un
- [40:45](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=2445s) privilegio brutal y y a veces no somos conscientes de ello y trabajas un poco para eso para que te llegue ese momento y hay veces que no llega nunca Pero tiene que irte bien una cosa y si te va bien una cosa eres imparable s√≠ quiero creo Claro porque en tu caso la empresa la compr√≥ bueno la adquiri√≥ telef√≥nica no entonces tambi√©n ese ese mundo yo ya de las adquisiciones ah√≠ ya me pierdo no s√© tal fue imagino que bastante estr√©s s√≠ en este caso no tanto porque pues al final una situ mutin hab√≠a muchos socios inversores tal
- [41:28](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=2488s) y Nosotros tampoco es que tuvi√©ramos las mejores condiciones como emprendedores Pero en cambio en idea Foster que fue un √©xit m√° m√°s puro Ana y yo ten√≠amos el 90 y pico por de las acciones cuando se vendi√≥ y o sea al final dentro del mundo √©xito los exits la salida de una startup hay hay muchas categor√≠as y y dentro de los fracasos tambi√©n entonces yo he vivido todas de todas o sea de √©xitos buenos √©xitos Bueno pues pues no tan buenos fracasos malos y fracasos pues m√°s malos pero cuando te va bien una cosa que
- [42:01](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=2521s) sales del notario Y dices vale ahora s√≠ que puedo elegir Qu√© vas a hacer y me acuerdo nuestro abogado nos dio Bueno que ahora celebrar no y le dije ahora un McDonald's que hay que ahorrar y el qu√© Catal√°n eres pero s√≠ hay que invertir bien pero pero s√≠ que es ese momento que sales y dices HM Ahora puedo hacer o sea cualquier locura que tengo en la cabeza y sin miedo a pero deber√≠a hacerlas tambi√©n yo digo que es muy sano que te pille con hijos con familia con tal esto porque con 20 a√±os te compras un Ferrari tal
- [42:39](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=2559s) pero despu√©s ya es como no quiero no quiero dar un paso en falso porque este momento concreto que tengo ahora puede no ser el √∫ltimo que tenga en mi vida de este tipo Porque si sigo trabajando en proyectos Pues ojal√° otro vaya bien pero no es como cuando toque la loter√≠a o una herencia grande de un familiar que sabes que es lo que dicen One lifetime o sea esto te pasa No te pas no te tocar√° otra vez la loter√≠a no se morir√° otra vez el abuelo que te ha dejado esa herencia porque ya acaba de fallecer e con lo
- [43:04](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=2584s) cual tienes que poner mucho esfuerzo en en en no quemar el dinero en en en invertirlo bien cuando se vende una empresa en el fondo es como que eso te ayuda te da puntos para que hagas bien otra cosa o sea que puede venir en el futuro pero tampoco se trata de dilapidar sino poner m√°s cabeza que nunca en en todo esto Bueno pues yo yo creo que ah√≠ eh ese punto medio es lo que m√°s cuesta encontrar para alguna locura haces en nuestro caso fue una furgo acuerdo nos compramos una California me flipa que son coches caros
- [43:32](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=2612s) eh No es un Ferrari pero pero Jo me flipaba la idea de irme y lo hicimos Pues ojal√° esta fuera Todas Las locuras que se hacen porque a veces te va la olla y te gastas 2 millones de euros en chorradas Pero bueno intentamos contenernos con lo que pudimos Pero entre un Ferrari y la y la California pues la California es mucho mejor te da ah√≠ experiencias que yo creo que m√°s sanas que tener conducir un Ferrari 300 km por s√≠ No no todos pensar√≠an igual que t√∫ que yo pero yo desde luego me lo paso genial con nuestra Cali S√≠ s√≠ pues
- [44:06](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=2646s) ya que abres el tema de eso de una nueva oportunidad una nueva idea que que sacar ahora est√°s de lleno en lo que has comentado founders que trata sobre bueno es una empresa de de Educaci√≥n S√≠ c√≥mo ves todo el tema educaci√≥n tecnolog√≠a y dem√°s yo creo que la la educaci√≥n es el el futuro de la sociedad hasta aqu√≠ he dicho una obviedad como una casa pero que s√≠ pero mucha gente no no lo entiende S√≠ o sea la la la sanidad es el futuro porque sin ella nos morimos la educaci√≥n es el futuro porque sin ella no no no no no damos pasos adelante pero
- [44:52](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=2692s) a la vez em creo que est√° obligada a cambiar y que es algo iba a decir maravilloso y no no es maravilloso Es algo necesario porque con la Inteligencia artificial lo que va a venir lo que est√° viniendo ya e pues ya no nos queda otra que dar esos cambios y ahora es un momento super interesante Para proponer cosas innovadoras de c√≥mo Deber√≠a ser la la educaci√≥n combinada con lo que viene Inteligencia artificial Bueno pues para bien o para mal nos ha llegado ahora igual que la pandemia nadie nos avis√≥ dijo Esto es lo que hay ten√©is que
- [45:29](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=2729s) digitalizar ahora todas las empresas la educaci√≥n pues Oye la ia ha llegado ahora tenemos que cambiar todo y esto es bueno creo que es muy bueno eh que todas las entidades educativas tengen cambiar a la vez es algo bueno porque ya no es las escuelas privadas van antes que las p√∫blicas tal se crea m√°s diferencia ahora es todos a la vez todos a la vez y esto es super bueno habr√° quien no lo vea s√≠ seguro que evidentemente las privadas tendr√°n m√°s recursos para hacer todo esto pero creo que no ha habido mejor momento
- [46:06](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=2766s) para estar en temas de Educaci√≥n que ahora y esto me pone muy feliz de estar en este en este mundo en este momento Honestamente Pues s√≠ yo yo lo comparo un poco pues con las calculadoras no las calculadoras est√°n prohibidas no se pueden usar hombre est√° bien eh aprender Pues c√≥mo se hace una divisi√≥n c√≥mo se hace una ra√≠z cuadrada pero en el d√≠a a d√≠a no vas a tener que hacerlo en papel siempre o sea est√° bien saberlo te abre la mente pero usas las herramientas que hay ahora igual que si usan tablets tambi√©n para para educaci√≥n y no tanto
- [46:39](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=2799s) libro no me me fas es igual me flipa como lo ves es uno de los ejemplos que a veces pongo el de la calculadora tambi√©n hay uno que me gusta mucho que no que no es m√≠o eh No no s√© qui√©n lo no s√© qui√©n se lo rob√≥ pero que que la ia es un un destornillador esto el el√©ctrico de liqua que todos tenemos sabes dice claro atornillador o incluso uno de manual dice puedes usarlo para clav√°rsele g√≠a un destornillador para clav√°rsele eh Pero hay gente que est√° proponiendo prohibir los destornilladores porque de cada un mill√≥n de usos para montar un
- [47:33](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=2853s) mueble que son necesarios hay una persona que la ha usado para clavarse una cabeza a otro con lo cual lo mejor que podemos hacer es prohibir todos los destornilladores del mundo bien obviamente esto nunca se plantear√≠a pero con la ya se ha planteado la utilidad de un destornillador es enorme sin ella c√≥mo montar√≠a los muebles sin destornillador ni llaves alen ni nada con el con la u√±a no es totalmente necesario pero a veces es tan evidente que est√° y que pasa desapercibido es una herramienta una commodity que Dicen Los
- [47:59](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=2879s) Americanos la ia yo quiero que llegar√° a ese punto llegar√° al punto de que est√© tan integrada en lo que hacemos que no nos lleguemos a plantear qu√© √ötil es un destornillador Qu√© suerte que tenemos destornilladores en nuestra vida [¬†__¬†] Pues s√≠ t√≠o Qu√© suerte esta mesa no no estar√≠a sin destor ladores montada as√≠ sabes O costar√≠a 1000 en lugar de 100 porque tendr√≠an que haber lo he hecho un experto Qu√© tal eh sabes la madera partida un bloque de madera tallada tal en lugar de poder juntar piezas y ponerles tornillos todo con cola la cola
- [48:30](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=2910s) el pegamento Ser√≠a mucho m√°s caro en fin yo creo que la gua llegar√° a un punto que ser√° tan normal que ya no dejaremos de adorarla o odiarla ser√° una herramienta necesaria pero una comodity pues Es evidente que est√° vamos a construir a partir de aqu√≠ si antes ten√≠amos que dedicar 8 minutos a hacer un c√°lculo con el ejemplo de la calculadora y 2 minutos a pensar que se pue hacer a partir de ahora Jo ahora la m√°quina esos 8 minutos y tendremos 10 minutos para pensar con lo cual haremos muchas m√°s cosas como humanos no es que
- [48:58](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=2938s) nos vaya a sustituirla ya es que al contrario har√° m√°s humanos que nunca nos permitir√° explorar cosas que hasta hoy nunca hemos explorado Y esto es Guay s√≠ inviertes energ√≠a que o sea yo yo la uso a diario y lo que noto es pues que tienes energ√≠a para otras cosas que se te iban en en tareas que no te iban a aportar nada que es simplemente pues que ten√≠as que escribir una historia o ten√≠as que hacer un c√≥digo pues muy repetitivo pues al final pues con herramientas que hay hoy d√≠a te lo da te lo da Pues eso con un chasquido de de
- [49:30](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=2970s) los dedos no lo que s√≠ que hay que tener es el conocimiento para saber Eh pues deducir si lo que me est√° ofreciendo est√° bien o est√° mal no te va a sustituir directamente lo que sigue yo creo que va a sustituir es a la gente que no la use porque como digas no yo no toco ias que eso es el mal eh Entonces vas a tener un problema porque Pero qui√©n va pero esa sustituci√≥n la har√°n las personas o sea al final claro por otra persona te va a sustituir otra persona que s√≠ que usa la d√≠a y quien tomar√° la decisi√≥n de sustituirte va a
- [50:04](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=3004s) ser un director o directora de recursos humanos que es un humano O sea al final es que es algo que nos hacemos nosotros a nosotros mismo no las m√°quinas van a venir no las m√°quinas no pero bueno cre que tambi√©n lo de que va a estar integrada es pues como d√≠a a d√≠a de hoy los buscadores de internet o sea t√∫ buscas en Google en bingo en donde sea sin pensar que eso ha estado ah√≠ siempre no ha estado ah√≠ siempre yo he vivido la √©poca de bueno a ver c√≥mo voy a tal web no porque sab√≠as la direcci√≥n o porque hab√≠a unas p√°ginas amarillas tambi√©n que
- [50:40](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=3040s) recuerdo que hab√≠a ah√≠ p√°ginas amarillas de inter yo las buscaba nunca las entend√≠a bien era como a qui√©n puede hacer esto voy a buscar pero me costaba encontrar algo s√≠ un portal y de ese portal enlazaban a otro lado pero no hab√≠a vamos el d√≠a que me dijeron mira has visto esta p√°gina se escribe Google B las p√°ginas amarillas como libro que es impreso no se pod√≠a actualizar pero hubo los pend drives la gente tambi√©n lo segu√≠a usando pues t√≠o un pendrive con un Excel no que se pueda Buscar al menos pero bueno yo Yo hace No
- [51:12](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=3072s) mucho eh yo me acuerdo que hab√≠a en la en la tele como concursos o tal de a ver qui√©n pod√≠a partir un libro de p√°ginas amarillas con la mano que era gente hiper cachas que pod√≠an partir es estamos creo que era s√≠ Pues eso lo part√≠an eso es incre√≠ble no s√© c√≥m pued la mayor√≠a de de gente hoy de menos de 30 a√±os no sabe lo que son las p√°ginas amarillas no sabes lo que es el tomo ese nunca las ha visto y es que aparte no hay nada m√°s definitorio que eso era un libro con las p√°ginas amarillas amarillas hab√≠a p√°ginas blancas tambi√©n
- [51:43](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=3103s) no s√© muy bien de qu√© era las blancas yo no me acuerdo es verdad Creo que eran emas no y las amarillas es el l√≠n telef√≥nico S√≠ s√≠ tal cual pero s√≠ s√≠ qu√© pocas aquellas pero s√≠ tambi√©n un poco el miedo que hay yo creo es primero que enfocando a la educaci√≥n que en la educaci√≥n tambi√©n hay mucha gente ya que lleva mucho tiempo que ha hecho siempre las cosas de de cierta manera y como que los cambios pues le suponen un mundo y como encima la ia evoluciona porque es que no hace ni un a√±o que tenemos chpt y mira c√≥mo estamos
- [52:17](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=3137s) ahora entonces eso es el miedo Yo creo que ha avanza superr√°pido y y la gente pues le cuesta eh el cambio y lo que haces t√∫ es el mejor momento para invertir ah√≠ cambiar Si no pues o sea ya esto de lo t√≠pico hacer esta redacci√≥n para casa pues eso van a usar la ia para hacerlo antes us√°bamos la en carta es que es que directamente ya no nos van a pedir redacciones para casa porque es que no sirve no sirve es que lo hace la m√°quina es como si dicen iros a casa y hacer esta multiplicaci√≥n super lga a mano no la van a hacer primero S√≠ igual
- [52:58](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=3178s) s√≠ que la hacen Pero al final tambi√©n le haran calculador para mirar si lo han hecho bien entonces Mola tambi√©n no tenemos que olvidar el m√©todo para llegar a un resultado Pero esto es todo lo que tengo que hacer en casa no puedo aportar m√°s valor que hacer algo que una maquinar en medio segundo igual S√≠ s√≠ yo por ejemplo a m√≠ yo tengo una espinita clavada en la universidad con bueno en la universidad y en bachillerato con la f√≠sica se me daba fatal se me daba fatal suspendida siempre pero con el tiempo pues me
- [53:26](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=3206s) interesa me interesa saber o sea aprender un poco m√°s de de f√≠sica Y tal Pero claro no tengo ya edad ni energ√≠a para meterme a estudiar la carrera de F√≠sica Pero oye con con chag PT o con cosas as√≠ puedes irle pidiendo Oye Expl√≠came no O Ponme ejercicios o Ponme tal y yo creo que es la forma en la que hay que integrar esto en la en la educaci√≥n en plan en vez de decirles a los alumnos Oye hacerme una redacci√≥n de Leonardo Da Vinci pues que le digan Oye vamos a utilizar esta herramienta y vamos a preguntarle que o que nos cuente
- [54:01](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=3241s) un poco eh cosas que ha hecho esta persona y ense√±arles a pues a contrastar a ver si lo que te est√° dando es verdad o no buscando en otros sitios pero que no sea el copy paste de toda la vida porque yo que te he dicho el ejemplo de encarta claro cuando cuando √©ramos j√≥venes y estaba la en carta la enciclopedia en el CD pues muchos nos mandaban Oye ten√©is que hacer No s√© qu√© copiabas y pegabas el profesor ya se daba cuenta dec√≠a lo quiero en en papel escrito a mano pues ya quieras o no te obligaba a que te lo ten√≠as que leer y
- [54:33](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=3273s) escribirlo y ya quieras o no algo aprend√≠ pero claro si le llevabas lo copiabas del ese lo mandabas al Word lo imprim√≠ y lo mandabas a a a clase pues no no sirve Entonces hay que saber que existe eso y sacarle provecho para Pues eso yo creo que para generar un poco ese pensamiento cr√≠tico y de saber pues contrastar la informaci√≥n que te dan y no tragarte todo lo que te llega como el la verdad absoluta no total y al final tambi√©n dir√≠a que hay algo que a veces nos olvidamos que es el la inteligencia colectiva el Enjambre
- [55:11](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=3311s) La Colmena de que evidentemente el profesor tiene un rol muy importante en un aula pero sumando todos los dem√°s tambi√©n conocen mucho y hay que extraerlo ese conocimiento de alguna forma es un reto para la educaci√≥n actual s√≠ que no sea un uno a muchos sino un todos con todos al final en clase y esta que sirva el ir cl bastante m√°s gordo sabes bues nada ya que hablamos de la ia y dem√°s y y est√°bamos hablando de founders en founders tengo entendido que ten√©is un m√°ster ah√≠ super tocho de de innovaci√≥n y de Inteligencia artificial
- [55:52](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=3352s) s√≠ es para m√≠ es lo mejor que no que nos ha pasado de lejos nunca como emprendedor pues la confianza de que viene un d√≠a y te y te Conf√≠a en ti acepta colaborar pues Microsoft creci√≥ nos llev√≥ a a un siguiente Paso como startup la idea fue crear un programa de dos a tres meses con metodolog√≠a microlearning lo que se llaman micro Masters en Estados Unidos que nos que nos permiti√≥ pues crecer much√≠simo m√°s de 5000 alumnos lo est√°n haciendo en Espa√±a estamos lanzando cada vez m√°s en m√°s pa√≠ses y Microsoft si tiene algo es es
- [56:32](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=3392s) algo maravillosos es que siempre nos ha tratado de de t√∫ a t√∫ que est algo que no se encuentra tanto en grandes multinacionales Porque de repente Hay una que es como que te en cada conversaci√≥n te hace Te recuerda te hace notar Qui√©n es el grande y qui√©n es el peque√±o Microsoft no fue as√≠ Nunca con nosotros siempre nos trat√≥ literal de t√∫ a t√∫ de iguales y creo que esto es algo muy Guay y gracias a ello pues nuestro Master online en Innovaci√≥n pues est√° donde est√° y est√° creciendo y hemos pasado de ser una startup que que meaba
- [57:02](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=3422s) dinero con 10 personas una startup que genera dinero con casi 40 y creo que esto es en parte Gracias pues a a partners como Microsoft que han decidido confiar en nosotros qu√© Guay yo fui a la presentaci√≥n que hicisteis ya hace un a√±o o no que va en mayo de este a√±o hace no tanto eh Ya es que estoy perdido con el tiempo se meses s√≠ s√≠ menos S√≠ s√≠ y estoy ah√≠ Lo que pasa que bueno ya sabes c√≥mo van las cosas hice hice los primeros temas pero lo tengo ah√≠ a medias Pero bueno alg√∫n d√≠a cuando puedas bienvenido eres alg√∫n d√≠a llegar√°
- [57:35](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=3455s) que lo acabe Y la verdad es que est√° est√° muy bien lo que hices t√∫ el micro learning este o como lo quieras llamar es la mejor para el momento del mundo que vivimos hoy d√≠a que todo lo queremos r√°pido y que tenemos la dopamina siempre a full a full claro tener esa peque√±as lecciones que te ven que que puedes ver que vas avanzando que no es un curso de 1000 horas y ni dos a√±os o cosas as√≠ que te te echan un poco para atr√°s sino que lo puedes hacer ir haciendo a tu ritmo y que son Pues eso son peque√±as lecciones
- [58:11](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=3491s) ves una pues es como las series no al final ves un cap√≠tulo y quieres ver otro y quieres ver otro en cambio verte una pel√≠cula de TR horas del tir√≥n Pues a no ser que sea nolan es comp o estar en una clase del tir√≥n 3 horas con un profe tambi√©n Es lo posible pas muchas veces la pandemia cuando los estudiantes les ped√≠an estar 6 7 horas tiante un zoom es que no no se puede peroo me alegro mucho que que digas esto y te lo agradezco porque a veces cuesta pues conseguir testimonios de gente que sabes que est√° contenta pero o sea que muchas gracias
- [58:39](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=3519s) S√≠ porque siempre hemos tendido a al peso no este Ah mira este curso es de en Emi por ponerte un ejemplo Ah este curso es de 50 horas Ay pero este es de tres Pues a lo mejor en de tres Primero te has ahorrado las 47 horas restantes y y a a al estar m√°s condensado de alguna forma pues como que no s√© yo he hecho cursos m√°s cortos y he aprendido m√°s y me he cansado menos que haciendo cursos de estos tan largos qu√© qu√© maravilla pues pues yo creo que es es el futuro o sea la gente cada vez tenemos menos tiempo o tenemos menos
- [59:11](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=3551s) ganas de de estar m√°s tiempo quietos viendo algo no queremos algo como como r√°pido y hombre no va a ser un curso a base de tiktok de un minuto pero s√≠ que es un es una cosa ah intermedia que yo la veo muy bien muy bien que no hay que hacerlo al peso pero vamos que ten√≠as que hablar eras t√∫ no yo pues no no al contrario yo aqu√≠ callo y escucho y te agradezco Adem√°s que lo comentes O sea que muchas gracias y ten√©is en founders m√°s cosas ah√≠ en preparaci√≥n que se puedan decir que no haya spoiler no que se puedan
- [59:47](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=3587s) decir no Pero algunas muy Guay que espero que en breve antes de que acabe el a√±o las contaremos qu√© Guay qu√© Guay s√≠ s√≠ s√≠ s√≠ pero alguna S√≠ pues genial yo yo creo que s√≠ es el es el futuro la educaci√≥n y y dem√°s pasan por ah√≠ por integrar la ia no verla como un enemigo y sobre todo porque si alg√∫n d√≠a llega skynet Pues los que le hayamos apoyado el inicio tendremos puntos no no nos matar√°n las primeras me alegro mucho que lo digas porque no no siempre se dice o sea que de verdad muchas gracias Nada nada ya ves yo digo siempre lo que lo que veo no
- [1:00:26](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=3626s) no hay nada aqu√≠ pagado ni pactado eh es as√≠ yo lo prefiero ese tipo de de de formaciones m√°s directas y pues eso que no est√©n atadas sobre todo tambi√©n porque es remoto no tienes que ir a un sitio f√≠sico a a recibir ese conocimiento No hay un trabajo detr√°s de grabaci√≥n y dem√°s que que no se ve porque Claro que un v√≠deo de una lecci√≥n sean 5 minutos no significa que se haya tardado 5 minutos en hacer no y despu√©s que que es una parte de algo mucho m√°s grande y que vas avanzando poco a poco etc√©tera etc√©tera O sea que total total
- [1:01:01](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=3661s) S√≠ porque adem√°s eh No solo la no solo los v√≠deos no la plataforma que ten√©is montada lo lo que he estado viendo est√° est√° muy bien te hace pues parecer que est√°s ah√≠ en en cierta manera no como un como una clase no tiene ah√≠ su metaverso tambi√©n ah√≠ metido pero aunque yo no me meto ah√≠ en plan 3D pero s√≠ que notas que pues eso que no est√°s t√∫ solo viendo los v√≠deos no que tienes ah√≠ gente la puedes ver ah√≠ en un peque√±o mapita que se ve√≠a no como de una clase total Ah√≠ est√° dices Mira no estoy yo solo no Y
- [1:01:32](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=3692s) eso de es como todo no como cuando vas al gimnasio y como no est√°s t√∫ solo hay m√°s gente pues como que te como que te arropan o te empujan cierta manera seguir haci√©ndolo no O cuando ibas a una biblioteca a estudiar pues igual t√∫ en casa a m√≠ por lo menos en casa pues ya cuando en √©poca de ex√°menes Pues s√≠ a lo mejor ya despu√©s de un tiempo necesitaba estar en casa estudiando No m√°s relajado pero al inicio cuando empezaba la temporada ah√≠ de a ver qu√© es lo que entra qu√© es lo que hay que estudiar prefer√≠a la biblioteca porque no s√© yo
- [1:02:02](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=3722s) creo que todos los cerebros ah√≠ juntos cocinando y tal como que te te daba esa fuerza No ese no estoy solo y que ha cambiado todo todo todo todo todo todo desde que desde que nosotros amos peque√±os y es es algo que hay que celebrar ha cambiado y la la pandemia y las sillas lo han acelerado O sea si en 10 a√±os no hab√≠a cambiado en en un un y medio dos ha sido ya la la revoluci√≥n totalmente Pues nada no te no te robo m√°s tiempo porque Bueno mira hemos estado una horita y un minutillo eh la idea era eso estar una hora Charlando de
- [1:02:40](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=3760s) Pues de todo lo que has hecho de todo lo que est√°s haciendo y de todo lo que vas a hacer que es una trayectoria Pues la verdad que bastante motivante No la todo lo que has hecho y nada eh Muchas gracias por este al final Mola poder tener conversaciones tambi√©n pausadas y y tambi√©n pues Enhorabuena por lo que haces Porque creo que a veces nos olvidamos de la importancia de de de Pues nada esto de lo que haces ya no dijam escribe en programaci√≥n tal sino de la importancia de lo que hacemos en el en el d√≠a a d√≠a
- [1:03:16](https://www.youtube.com/watch?v=PBLhdPPf5Mo&t=3796s) o sea en en en en poder explicarlo de forma calmada y dem√°s hoy todo es un minuto yo el primero O sea que me aleg de poder tener conversaciones as√≠ de largas muchas Gracias nada a ti Pau y nada pues a ver si nos vemos en persona en alguna en alguna presentaci√≥n de algo que saques por ah√≠ Venga pues gracias Un abrazo

</article>

---

<article slug="javascript-solid" date="2023-10-16" url="https://carlosazaustre.es/blog/javascript-solid">

# Principios SOLID en JavaScript

**Fecha:** 2023-10-16
## TL;DR:

¬øEres m√°s de contenido en v√≠deo? Aqu√≠ tienes explicados los 5 principios SOLID de la programaci√≥n, aplicado a JavaScript.

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=6PdAOfsPh48)
/>

En este art√≠culo discutiremos los principios SOLID, una serie de pautas muy √∫tiles para mejorar tu c√≥digo en programaci√≥n orientada a
objetos. Estos principios fueron popularizados por Robert C. Martin, conocido como el "t√≠o Bob", autor de libros como *Clean Code*.

## Introducci√≥n a SOLID - Qu√© son y Por Qu√© Importan

Los principios SOLID son un acr√≥nimo de cinco valores de dise√±o:

1. **Single Responsibility Principle** (S) - Principio de Responsabilidad √önica
2. **Open-Closed Principle** (O) - Principio de Abierto/Cerrado
3. **Liskov Substitution Principle** (L) - Principio de Sustituci√≥n de Liskov
4. **Interface Segregation Principle** (I) - Principio de Segregaci√≥n de la Interfaz
5. **Dependency Inversion Principle** (D) - Principio de Inversi√≥n de Dependencias

A continuaci√≥n vamos a profundizar en cada uno de estos principios aplic√°ndolos a nuestro lenguaje de programaci√≥n favorito: JavaScript.
Empezamos con el primer principio.

## Principio de responsabilidad √∫nica (S)

Seg√∫n este principio, una clase debe tener una sola raz√≥n para cambiar, es decir, debe tener s√≥lo una tarea o responsabilidad.

Para ilustrar este principio, pensemos en una orquesta. Cada m√∫sico tiene un instrumento que sabe tocar perfectamente. El violinista
sabe tocar el viol√≠n, pero si lo pusi√©ramos a tocar tambi√©n el tambor, seguramente algo no funcionar√≠a bien.

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=HQAjtNPgfss)
/>

Aplicando este ejemplo a la programaci√≥n, cada clase o funci√≥n debe tener una √∫nica responsabilidad.
Esto simplifica la comprensi√≥n, el mantenimiento y la modificaci√≥n del c√≥digo en el futuro.

Vamos a ilustrar esto con un ejemplo de un caso que puedes encontrarte en tu d√≠a a d√≠a como desarrollador.

Considera una funci√≥n `calculateSalary()`. Esta funci√≥n recibe un objeto que simula a un empleado y calcula su salario.
Pero adem√°s de calcular el salario, esta funci√≥n tambi√©n genera un reporte del empleado.

```javascript
function calculateSalary(employee) {
    let salary = employee.hoursWorked * employee.hourlyRate;
    let report = /*...*/;
    console.log(report);
    return salary;
}
```

En esta funci√≥n hay dos responsabilidades: calcular el salario y generar el informe. Esto viola el principio de responsabilidad √∫nica.

Una alternativa ser√≠a refactorizar esta funci√≥n en dos funciones separadas: una para calcular el salario y otra para generar el informe.

```javascript
function calculateSalary(employee) {
    return employee.hoursWorked * employee.hourlyRate;
}

function generateReport(employee, salary) {
    let report = /*...*/;
    console.log(report);
}
```

En esta refactorizaci√≥n, cada funci√≥n tiene una sola responsabilidad, lo que facilita su comprensi√≥n y mantenimiento.

## Principio de abierto-cerrado (O)

El segundo principio SOLID es el principio de abierto-cerrado. Su definici√≥n oficial sostiene que las entidades de software (clases, m√≥dulos, funciones, etc.) deben estar abiertas para su extensi√≥n, pero cerradas para su modificaci√≥n.

Para entender este principio, imaginemos un coche de juguete que se carga con bater√≠as. El dise√±o del coche est√° cerrado para modificaciones, no puedes cambiar la forma en que se carga. Sin embargo, est√° abierto para su extensi√≥n, puedes cargarlo con diferentes tipos de bater√≠as o pilas.

En el c√≥digo, debemos poder agregar nuevas funcionalidades sin modificar el c√≥digo que ya existe.

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=_-O0KOrISKk)
/>

Imagina, por ejemplo, que tienes una aplicaci√≥n de comercio electr√≥nico con una funci√≥n `processPayment()`, que recibe un monto y los detalles de una tarjeta de cr√©dito. En un principio, este sistema permit√≠a s√≥lo pagos con tarjeta de cr√©dito.

```javascript
function processPayment(price, cardDetails) {
    /*...*/
    console.log('Pagado con tarjeta.');
}
```

Pero m√°s adelante, decides que tu aplicaci√≥n tambi√©n deber√≠a aceptar pagos con PayPal. Podr√≠as estar tentado a a√±adir l√≥gica extra a la funci√≥n `processPayment()``, con una condici√≥n para verificar si el pago se est√° haciendo con tarjeta o con PayPal. Pero esto violar√≠a el principio de abierto-cerrado, ya que est√°s modificando la funci√≥n en lugar de extenderla.

Una mejor soluci√≥n ser√≠a agregar una nueva funci√≥n processPaymentWithPayPal(). De esta manera, puedes manejar los pagos con PayPal sin alterar el c√≥digo existente.

```javascript
function processPaymentWithPayPal(price, accountDetails) {
    /*...*/
    console.log('Pagado con PayPal.');
}
```

Al aplicar el principio abierto/cerrado, nos aseguramos de que cada vez que queremos agregar una nueva funcionalidad, como aceptar pagos con Bitcoin, s√≥lo necesitamos a√±adir una nueva subclase.

## Principio de Sustituci√≥n de Liskov (L)

El principio de sustituci√≥n de Liskov establece que "los objetos de una superclase deben ser reemplazables por objetos de una subclase sin afectar la correcci√≥n del programa".

Al aplicar este principio, podemos crear diferentes objetos "manejador de errores" que se pueden utilizar en el mismo lugar sin causar errores en el programa.

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=3raQSxeOflg)
/>

```javascript
// Funci√≥n de ejemplo que realizac una petici√≥n HTTP
function makeRequest(url, errorHandler) {
    fetch(url)
        .then(response => response.json())
        .catch(error => errorHandler.handle(error))
    }

// Podemos tener varias funciones para manejar errores
const consoleErrorHandler = function handle(error){
    console.log(error)
}

const externalErrorHandler = function handle(error){
    sendErrorToExternalService(error)
}
// Usando el principio de sustituci√≥n de Liskov, 
// podr√≠amos pasar cualquier funci√≥n manejadora de
// errores durante una request.
makeRequest(url, consoleErrorHandler);
makeRequest(url, externalErrorHandler);
```

## principio de segregaci√≥n de la interfaz (I)

El cuarto principio SOLID, la "I", se refiere al principio de segregaci√≥n de la interfaz. Con base en este principio, ninguna clase deber√≠a ser forzada a implementar interfaces o m√©todos que no va a utilizar.

Es mejor tener interfaces espec√≠ficas, en lugar de una sola interfaz general. Y esto aplica tambi√©n a las funciones en JavaScript.

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=N6TxeHzum_g)
/>

```javascript
class Product {
    constructor() { /* */ }

    getDetails() { /* */ }
    saveToDb() {/* */ }
    displayInFrontEnd() { /* */ }
}

// DigitalProduct no necesita el m√©todo saveToDb(),
// sin embargo, lo hereda sin poder evitarlo
// Se viola el principio de segregaci√≥n de la interfaz

class DigitalProduct extends Product{
    // Se hereda el m√©todo innecesario saveToDb()}
}

// ---- //
// Refactorizando siguiendo este principio

class Product {
    constructor() { /* */ }

    getDetails() { /* */ }
    displayInFrontEnd() { /* */ }
}

class PhysicalProduct extends Product {
    constructor() {
        super()
    }
    saveToDb() { /* */ }
}

class DigitalProduct extends Product{
    // No se hereda el m√©todo innecesario saveToDb()
}
```

## Principio de inversi√≥n de dependencia (D)

El √∫ltimo principio, "D", es el principio de inversi√≥n de dependencia. Este principio sostiene que los m√≥dulos de alto nivel, es decir, los m√≥dulos que contienen las decisiones estrat√©gicas y las directivas de alto nivel, no deben depender de los m√≥dulos de bajo nivel, que son los m√≥dulos que contienen la l√≥gica detallada y de bajo nivel.

Ambos, los m√≥dulos de alto nivel y de bajo nivel, deber√≠an depender de abstracciones.

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=U4yVna0ZH80)
/>

Siguiendo el principio de inversi√≥n de dependencias, una clase `PasswordReminder` no debe depende directamente de `MySQLConnection`, sino que debe recibir una instancia de una clase que implemente una interfaz com√∫n de "conexi√≥n de base de datos".

```javascript
class MySqlConnection {
    connect() { /* */ }
}

class PasswordReminder {
    constructor() {
        this.dbConnection = new MySQLConnection();
    }
}

// Refactorizando de acuerdo al principio de inversi√≥n de dependencia
class MySqlConnection {
    connect() { /* */ }
}
class PostgreSqlConnection {
    connect() { /* */ }
}

class PasswordReminder {
    constructor(connection) {
        this.dbConnection = connection
    }
}
```

## Reflexiones Finales

Las reglas SOLID son una herramienta muy √∫til para la programaci√≥n. Pero, al igual que cualquier herramienta, no deben ser aplicadas ciegamente en todos los casos. Mi consejo es que sigas estos principios donde tenga sentido y pueda ayudarte a mantener y mejorar tu c√≥digo en el largo plazo.

> "El software es un ciclo en el que t√∫ vas desarrollando c√≥digo, se van necesitando nuevas caracter√≠sticas o funcionalidades, van apareciendo bugs sin querer o queriendo, y vas a necesitar refactorizar. No necesariamente siempre tienes que estar escribiendo c√≥digo nuevo. La mayor parte de tu tiempo vas a estar leyendo c√≥digo de otros o incluso tuyo y vas a poder ver que hay partes que puedes refactorizar para mejorar el mantenimiento e incluso el rendimiento de tu aplicaci√≥n."

Como siempre, si tienes alguna pregunta o comentario, no dudes en escribirlo abajo. 

¬°Hasta la pr√≥xima!

</article>

---

<article slug="react-tutorial-modern" date="2023-09-29" url="https://carlosazaustre.es/blog/react-tutorial-modern">

# Tutorial React: C√≥mo crear una aplicaci√≥n web con React desde cero con librer√≠as modernas

**Fecha:** 2023-09-29
# C√≥mo desarrollar una aplicaci√≥n React desde cero con Zustand, React Query, React Hook Form, React Router y React Hot Toast - Tutorial paso a paso

## Introducci√≥n

En este tutorial paso a paso, vamos a aprender c√≥mo desarrollar una aplicaci√≥n web React desde cero utilizando algunas de las herramientas m√°s populares del ecosistema React.

Espec√≠ficamente, utilizaremos:

- Zustand para la gesti√≥n del estado global
- React Query para la obtenci√≥n y almacenamiento en cach√© de datos
- React Hook Form para el manejo de formularios
- React Router para la navegaci√≥n
- React Hot Toast para mostrar notificaciones

La aplicaci√≥n que construiremos simular√° un sistema de reservas de hotel, con una p√°gina para listar hoteles y una p√°gina de detalles para reservar habitaciones en un hotel espec√≠fico.

Aqu√≠ hay algunas de las caracter√≠sticas que implementaremos:

- Obtener y mostrar una lista de hoteles desde una API
- Navegar a la p√°gina de detalles de un hotel espec√≠fico
- Formulario para seleccionar fechas y reservar una habitaci√≥n
- Gesti√≥n del estado global para reservas
- Notificaciones sobre errores o reservas exitosas
- Validaciones de formulario

As√≠ que sin m√°s pre√°mbulos, ¬°empecemos!

Este tutorial, lo tienes en formato v√≠deo aqu√≠ üëá

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=KRrzBkxxMbc)
/>

## Preparando el proyecto

Lo primero que necesitamos hacer es preparar nuestro proyecto React. Para ello, utilizaremos `create-react-app`, que nos permitir√° iniciar r√°pidamente:

```
npx create-react-app hotel-reservations
```

Esto generar√° la estructura b√°sica del proyecto React en una carpeta llamada `hotel-reservations`.

A continuaci√≥n, instalamos las dependencias ejecutando `npm install` dentro de esa carpeta.

Las dependencias que utilizaremos en este proyecto son:

- zustand
- react-query
- react-hook-form
- react-router-dom
- react-hot-toast

As√≠ que las instalamos ejecutando:

```
npm install zustand react-query react-hook-form react-router-dom react-hot-toast
```

¬°Nuestro proyecto ya est√° configurado y listo! Ahora podemos empezar a programar.

## Estado global con Zustand

Primero vamos a configurar nuestro estado global utilizando Zustand.

Zustand es una biblioteca ligera para gestionar el estado global en React. Nos permite tener un almac√©n centralizado al que se puede acceder desde cualquier componente para leer y actualizar el estado.

Para ello, creamos un archivo `store.js` y a√±adimos lo siguiente:

```js
import { create } from "zustand";

const useStore = create(() => ({
	reservations: [],
	addReservation: (hotel, dates) => {
		set((state) => ({
			reservations: [...state.reservations, { hotel, dates }],
		}));
	},
}));

export default useStore;
```

B√°sicamente estamos creando un hook `useStore` que nos da acceso al estado global `reservations` y una acci√≥n `addReservation` para a√±adir nuevas reservas.

Podemos importar y utilizar este hook desde cualquier componente de nuestra aplicaci√≥n.

## Obtenci√≥n de datos con React Query

Ahora vamos a encargarnos de obtener datos desde una API. Para ello utilizaremos React Query.

React Query nos permite realizar la obtenci√≥n de datos, almacenamiento en cach√© y actualizaci√≥n. Tambi√©n maneja los estados de carga, error y revalidaci√≥n autom√°tica.

Primero, creamos un archivo `db.json` con datos simulados:

```json
{
	"hotels": [
		{
			"id": 1,
			"name": "Hotel Sunshine",
			"description": "Hotel en primera l√≠nea de playa con piscina",
			"image": "hotel-1.jpg"
		},
		{
			"id": 2,
			"name": "Hotel Mountain Spa",
			"description": "Hotel de lujo en la monta√±a",
			"image": "hotel-2.jpg"
		}
	]
}
```

Luego, creamos un script en `package.json` para iniciar un servidor de desarrollo con esos datos:

```json
"server": "json-server --watch db.json --port 3001"
```

Ahora podemos crear nuestra funci√≥n de obtenci√≥n de datos:

```js
// hotels.js
const fetchHotels = async () => {
	const response = await fetch("http://localhost:3001/hotels");
	if (!response.ok) {
		throw new Error("Error de red");
	}
	return response.json();
};

export { fetchHotels };
```

Y utilizarla en nuestro componente `HotelsList`:

```jsx
// HotelsList.js
import { fetchHotels } from './hotels';
import { useQuery } from 'react-query';

export default function HotelsList() {
  const { data, error, isLoading } = useQuery('hotels', fetchHotels);
  // mostrar datos o estado de carga/error
  return (
    // JSX para mostrar hoteles
  );
}
```

¬°Eso es todo lo que necesitamos para implementar la obtenci√≥n de datos con React Query!

## Formularios con React Hook Form

Ahora vamos a implementar el formulario de reservas con React Hook Form.

React Hook Form nos permite construir formularios f√°cilmente en React, con validaciones, manejo de errores y gesti√≥n del estado.

Primero creamos nuestro componente `BookingForm`:

```js
// BookingForm.js
import { useForm } from "react-hook-form";

function BookingForm() {
	const {
		register,
		handleSubmit,
		formState: { errors },
	} = useForm();
	const onSubmit = (data) => {
		// enviar formulario
	};

	return (
		<form onSubmit={handleSubmit(onSubmit)}>
			<input {...register("checkinDate", { required: true })} />
			{errors.checkinDate && <p>Fecha de entrada requerida</p>}
			// ...m√°s entradas y validaciones
		</form>
	);
}
```

Estamos registrando las entradas para que React Hook Form las controle, manejando el env√≠o y mostrando cualquier error de validaci√≥n.

¬°Y eso es todo lo que necesitamos para un potente manejo de formularios con React Hook Form!

## Navegaci√≥n con React Router

Ahora vamos a configurar la navegaci√≥n entre diferentes vistas utilizando React Router.

Primero, envolvemos nuestra aplicaci√≥n con un `<BrowserRouter>` en `index.js`.

Luego, creamos las rutas en `App.js`:

```jsx
import { Routes, Route } from "react-router-dom";

function App() {
	return (
		<Routes>
			<Route path="/" element={<h1>Hoteles</h1>} />
			} />
		
	);
}
```

Finalmente, utilizamos el hook `useNavigate` dentro de nuestro `HotelsList` para navegar a la vista de detalles de un hotel cuando se haga clic en √©l.

¬°Y eso es todo lo que necesitamos para la navegaci√≥n con React Router!

## Notificaciones con React Hot Toast

Por √∫ltimo, vamos a a√±adir notificaciones utilizando React Hot Toast.

React Hot Toast

nos permite mostrar mensajes emergentes muy f√°cilmente.

Lo importamos en nuestro componente `BookingForm`:

```js
import { toast } from "react-hot-toast";
```

Y mostramos una notificaci√≥n de √©xito al reservar:

```js
// dentro de onSubmit
toast.success("¬°Reserva exitosa!");
```

Tambi√©n lo envolvemos en `<Toaster>` para que funcione en toda la aplicaci√≥n.

¬°Y eso es todo lo que necesitamos para mostrar notificaciones! React Hot Toast se encarga de la interfaz de usuario.

## Resumen

En este art√≠culo hemos visto c√≥mo desarrollar una aplicaci√≥n web React desde cero utilizando:

- Zustand para el estado global
- React Query para la obtenci√≥n de datos
- React Hook Form para formularios
- React Router para la navegaci√≥n
- React Hot Toast para notificaciones

Hemos aprendido c√≥mo:

- Configurar un almac√©n global con Zustand
- Obtener datos desde una API con React Query
- Crear un formulario con validaciones utilizando React Hook Form
- A√±adir navegaci√≥n entre vistas con React Router
- Mostrar notificaciones al usuario con React Hot Toast

Estas herramientas nos han permitido construir r√°pidamente una aplicaci√≥n React de una manera sencilla y declarativa con buenas pr√°cticas.

Tienes el c√≥digo de todo este tutorial, en [√©ste repositorio de GitHub](https://github.com/carlosazaustre/hotel-reservation-app).

Y de nuevo, te comparto el v√≠deo para que veas el paso a paso y como funciona la aplicaci√≥n üëá

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=KRrzBkxxMbc)
/>

¬°Espero que hayas encontrado √∫til este tutorial! No olvides compartirlo y seguirme para m√°s contenido sobre desarrollo web. ¬°Hasta la pr√≥xima!

</article>

---

<article slug="pc-2023" date="2023-06-13" url="https://carlosazaustre.es/blog/pc-2023">

# Volviendo a los Or√≠genes: El Arte de Armar tu Propio PC

**Fecha:** 2023-06-13
Despu√©s de m√°s de 18 a√±os, he vuelto a experimentar el placer de armar un PC componente por componente.

Mi √∫ltima experiencia de este tipo remonta a los tiempos cuando los primeros microprocesadores de 64 bits de AMD
(el Athlon64, si no recuerdo mal) acababan de ser lanzados.

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=_qwGlqlN29w)
/>

En aquellos d√≠as, los diskettes de 3,5 pulgadas eran el principal medio para iniciar el PC y poder
instalar el Sistema Operativo desde un CD-ROM üò¢.

Desde entonces, he tenido varios port√°tiles (un Toshiba Satellite y un Sony Vaio) hasta que finalmente me
sumerg√≠ en el mundo Apple con la adquisici√≥n de mi primer iMac (alrededor de 2010-11).

Aunque seguir√© usando mi MacBook Pro (con M1 Max 64GB), me apetec√≠a explorar el universo del hardware _no-Apple_
por varias razones:

- Quer√≠a familiarizarme con los actuales chipsets, CPUs, GPUs y seleccionar personalmente los componentes;
- Me apetec√≠a armar un PC por mi cuenta.
- Probar Windows para desarrollo, especialmente con las recientes actualizaciones que Microsoft
  ha implementado para IA y para desarrolladores.
- Y, por supuesto, no descarto la posibilidad de üéÆ "quemar" la gr√°fica en alguna ocasi√≥n. üòÇ

Si tambi√©n te interesa aventurarte en este camino, te cuento que componentes he seleccionado para mi nueva m√°quina.

![Montando el PC](/images/pc-2023/montaje-pc.png)

## Componentes seleccionados para mi PC

### TL;DR

| Tipo de Producto             | Marca y Modelo                                | Precio       | Link de Compra                                                                                                                                            |
| ---------------------------- | --------------------------------------------- | ------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Placa Base                   | ASUS TUF B650M-PLUS WIFI                      | 209,90‚Ç¨      | [Comprado en Amazon](https://amzn.to/42SjtGx)                                                                                                             |
| Procesador                   | AMD Ryzen 7 7700X 4.5 GHz                     | 333,16‚Ç¨      | [Comprado en Amazon](https://amzn.to/43X9AYR)                                                                                                             |
| Memoria RAM                  | Corsair Vengeance DDR5 32 GB (2x16GB) 5200MHZ | 129,90‚Ç¨      | [Comprado en PCComponentes](https://www.pccomponentes.com/corsair-vengeance-rgb-ddr5-5200mhz-32gb-2x16gb-cl40)                                            |
| Tarjeta Gr√°fica (GPU)        | Nvidia Geforce RTX 4070 12 GB GDDR6X          | 669‚Ç¨         | [Comprado en nVidia Store](https://store.nvidia.com/es-es/geforce/store/?page=1&limit=9&locale=es-es&gpu=RTX%204070%20Ti,RTX%204070&category=GPU,DESKTOP) |
| Chasis                       | Corsair 4000D Airflow RGB                     | 154,99‚Ç¨      | [Comprado en PCComponentes](https://www.pccomponentes.com/corsair-icue-4000d-rgb-airflow-cristal-templado-usb-32-blanca)                                  |
| Fuente de Alimentaci√≥n       | Corsair RM750X                                | 145,30‚Ç¨      | [Comprado en PCComponentes](https://www.pccomponentes.com/corsair-rm-white-series-rm750-750w-80-plus-gold-full-modular)                                   |
| Sistema de Refrigeraci√≥n     | Corsair H100X Elite RGB                       | 138,90‚Ç¨      | [Comprado en PCComponentes](https://www.pccomponentes.com/corsair-icue-h100x-rgb-elite-kit-de-refrigeracion-liquida-240mm-negro)                          |
| Disco de Estado S√≥lido (SSD) | Corsair MP600 M.2 NVMe 1TB                    | 94,28‚Ç¨       | [Comprado en Amazon](https://amzn.to/3qHNhIx)                                                                                                             |
|                              |                                               | **1875,43‚Ç¨** |                                                                                                                                                           |

> **Resumen:** 
	Todos los componentes fueron compradosy elegidos por mi. No se trata de
	ninguna promoci√≥n pagada por ninguna marca, ni tienda. <br />
	(Los enlaces de Amazon son de afiliaci√≥n, si compras desde el enlace me llevo una
	peque√±a comisi√≥n, pero no te cuesta nada m√°s).

### CPU

Esto es lo primero que hay que decidir, porque muchos componentes dependen de la elecci√≥n del procesador. A d√≠a de hoy
tienes 2 opciones principales: Intel o AMD.
Intel siempre ha estado a la vanguardia en el mercado de los procesadores, pero AMD ha estado ganando terreno
en los √∫ltimos a√±os. A d√≠a de hoy (2023) AMD ofrece un mejor rendimiento y un precio m√°s competitivo.

En Intel tenemos 4 familias de procesadores:

- i3 para uso b√°sico
- i5 para uso general
- i7 para uso intensivo
- i9 para uso profesional

Dentro de estas cuatro familias, hay diferentes modelos con diferentes velocidades de reloj y n√∫mero de n√∫cleos. las √∫ltimas generaciones de Intel son la 12¬™ y la 13¬™.

En AMD tambi√©n tenemos 4 familias de procesadores:

- Ryzen 3 para uso b√°sico
- Ryzen 5 para uso general
- Ryzen 7 para uso intensivo
- Ryzen 9 para uso profesional

Por rendimiento y consumo de energ√≠a, por ejemplo un Ryzen 5 ser√≠a equivalente a un Intel i7, en lugar de a un i5 como se podr√≠a pensar.
Al igual que intel, estas familias tienen diferentes modelos con diferentes velocidades de reloj y n√∫mero de n√∫cleos. Las √∫ltimas generaciones de AMD son la 5¬™ y la 7¬™.

[![Procesador AMD Ryzen 7 7700X](/images/pc-2023/amd-ryzen7-7700x.png)](https://amzn.to/43X9AYR)

El procesador que eleg√≠ finalmente es el **[AMD Ryzen 7 7700X](https://amzn.to/43X9AYR)** con una frecuencia de reloj de **4.5 GHz**. Con **8 n√∫cleos** y **16 hilos**,
este CPU ofrece un alto rendimiento, ser√≠a mejor el modelo 7800X3D que es lo m√°s _√∫ltimito_,
pero el precio se dispara y quer√≠a no gastarme m√°s de 1800-2000‚Ç¨ en el PC completo.

### Placa Base / Placa Madre.

Una vez elegida la CPU, hay que elegir la placa base. La placa base es el componente que conecta todos los dem√°s componentes del PC. La serie 7000 de AMD utiliza una nueva arquitectua,
la _Zen4_ y tambi√©n un nuevo socket, el _AM5_. Por lo tanto, hay que elegir una placa base que sea compatible con este socket.

Para el Socket AM5 de AMD, existen 2 tipos de chipsets:

- B650: para uso general
- X670: para uso intensivo

La principal diferencia en los chipsets es el numero y tipo de conexiones que permiten, as√≠ como la memoria RAM que soportan. He optado por el B650 que me permite
tener hasta 128 GB de memoria, varias conexiones USB 3.2 y 2.0, conexiones para discos SSD M.2 y SATA, asi como ranuras PCI Express para conectar tarjetas gr√°ficas.

[![Placa Base ASUS TUF B650M-PLUS Wifi](/images/pc-2023/asus-tuf-b650m-plus-wifi.png)](https://amzn.to/42SjtGx)

Tras mirar varias, me decant√© por la [ASUS TUF B650M-PLUS Wifi](https://amzn.to/42SjtGx). Es una placa base de tama√±o medio, con un precio razonable y que ofrece todo lo que necesito.
Pod√≠a haber elegido la versi√≥n ATX en lugar de la microATX, pero no necesito tantas ranuras PCI Express y me ahorraba unos euros.

[![Placa Base ASUS TUF B650M-PLUS Wifi](/images/pc-2023/asus-tuf-b650m-plus-wifi_2.png)](https://amzn.to/42SjtGx)

### Memoria RAM

Con la placa y CPUs elegidas, puedo utilizar memoria DDR5, la √∫ltima generaci√≥n. La memoria DDR5 es m√°s r√°pida y consume menos energ√≠a que la DDR4.
Al ser un PC totalmente _custom_, puedo ampliarlo cuando quiera, por eso en la memoria no he ido a por todos los m√≥dulos. He empezado con dos m√≥dulos de 16GB para tener un total
de 32GB. En el futuro, si lo necesito, puedo a√±adir otros dos m√≥dulos de 16GB para tener un total de 64GB, o incluso cambiar los m√≥dulos de 16GB por otros de 32GB para tener un total de 128GB.
pero en este momento, con 32GB de RAM tengo suficiente y as√≠ el presupuesto no se me dispara.

Para la RAM he elegido 2 m√≥dulos DIMM del modelo Corsair Vengeance DDR5 a 5200 MHz. Y lleva RGB para que se vea bonito. üòÇ

### Almacenamiento.

A d√≠a de hoy resulta imprescindible tener un disco SSD para el sistema operativo y las aplicaciones. Los discos SSD son mucho m√°s r√°pidos que los discos duros tradicionales.
y los precios han bajado mucho en los √∫ltimos a√±os. Para el sistema operativo y las aplicaciones, he elegido [un disco **SSD M.2 de 1TB de la marca Corsair](https://amzn.to/3qHNhIx)** Iba a elegir uno de Samsung,
pero parece que ultimamente est√°n teniendo problemas y no quer√≠a arriesgarme. Adem√°s Corsair es una marca que me da confianza y adem√°s de la RAM he elegido varios productos para completar
mi PC.

### GPU / Tarjeta Gr√°fica.

Las gr√°ficas hoy en d√≠a son una aut√©ntica locura... Si no vas a utilizar la GPU a fondo, ya sea para jugar o para entrenar modelos de IA, no merece la pena tener una dedicada ya
que la propia CPU incorporta una gr√°fica que sirve para el uso habitual.
En mi caso, ya que me pongo he decidido invertir en una. Y he elegido la marca Nvidia por todo el software que ofrece para IA y desarrollo, y por que no, por su sistema de Ray-Tracing
para videojuegos que es tremendo.

Los chipset de nVidia m√°s actuales son los RTX 30xx y 40xx. Dentro de esta familias, tenemos varias opciones:

- RTX 3090 y 4090 son las m√°s potentes, soportan m√°s memoria gr√°fica, pero tambi√©n su consumo y su precio es muy elevado.
- RTX 3080 y 4080 son la gama media-alta, con un precio m√°s razonable y un consumo m√°s moderado.
- RTX 3070 y 4070 son la gama media, con un precio m√°s asequible y un consumo m√°s moderado.
- RTX 3060 es la gama baja, con un precio de entrada menos duro y menor consumo. De la serie 40xx no hay versi√≥n 4060 por ahora.

Nvidia siempre saca el modelo xx90 el primero de la generaci√≥n, y con el paso de los meses van llegando las versiones m√°s asequibles para mortales.
despues de la xx90, llega la xx80, unos meses m√°s tarde la xx70 y casi un a√±o despues del lanzamiento de la xx90 llega la xx60 y posteriores.

Mi intenci√≥n era invertir en una RTX 40xx, la 90 no por supuesto ya que se me iba todo el presupuesto del PC solo en la tarjeta y el resto de componentes tendr√≠a que
volverlos a elegir para no tener un cuello de botella y desaprovechar la m√°quuba.
La 4080 costaba el doble que la 4070, y aunque ofrece m√°s memoria y un mejor rendimiento, me parec√≠a mucho dinero.

![RTX 4070](/images/pc-2023/rtx4070.png)

Finalmente opt√© por la 4070. Mir√© los fabricantes de Asus y Gigabyte y su precio rondaba los 900-1000‚Ç¨. Era mucho dinero.
De casualidad, entr√© en la web de nVidia para ver las especificaciones de la RTX 4070 y asegurarme que habia elegido una placa base y CPU adecuadas, cuando descubro que la propia web de nVidia
tiene tienda online y vend√≠a la RTX 4070 oficial de nVidia (la Founders Edition) de 12 GB de memoria GDDR6X, por 670‚Ç¨ üò≥, 300‚Ç¨ menos de lo que pensaba gastarme. As√≠ que la compr√© de inmediato..

### Fuente de Alimentaci√≥n.

Para elegir la fuente, hay que tener en cuenta el consumo que va a tener todo el equipo y a√±adir un margen de seguridad de unos 100W. Finalmente eleg√≠ la **Corsair RM750X** de 750W,
modular y con certificacion Gold 80 Plus y es muy silenciosa.

![Set de productos Corsair](/images/pc-2023/corsair-devices.png)

### Caja / Torre / Chasis

El chasis es una parte vital, ya que no solo protege los componentes, sino que tambi√©n puede afectar el flujo de aire y, por lo tanto, el enfriamiento de tu PC.
Eleg√≠ el **Corsair 4000D Airflow RGB** por su dise√±o orientado a un excelente flujo de aire, manejo de cables y su aspecto, por que no decirlo. Incluye 3 ventilados RGB de 120mm en la parte delantera
y un controlador para los LEDs. Adem√°s, tiene un panel lateral de vidrio templado para que se vea todo el interior.

### Refrigeraci√≥n

Me he decantado por Refrigeraci√≥n l√≠quida para la CPU. No por ninguna raz√≥n especial, simplemente porque me apetec√≠a probarla. He elegido el sistema **Corsair H100X Elite RGB**. Viene con dos ventiladores
de 120mm y un radiador de 240mm. Es compatible con el software iCUE de Corsair para controlar la iluminaci√≥n RGB y la velocidad de los ventiladores.

![Corsair H100X Elite RGB](/images/pc-2023/corsair-h100x-elite.png)

Armar un PC desde cero es una experiencia gratificante y educativa. No solo te permite entender m√°s sobre c√≥mo funciona tu computadora, sino que tambi√©n te permite personalizarla
a tu gusto y a tus necesidades espec√≠ficas y ampliarlo cuando puedas y/o quieras.

¬øQu√© componentes elegir√≠as para tu PC?

</article>

---

<article slug="conventional-commits" date="2022-11-29" url="https://carlosazaustre.es/blog/conventional-commits">

# Conventional Commits - Especificaci√≥n para tus mensajes de commit

**Fecha:** 2022-11-29
## ¬øQu√© son los mensajes de commit?

Los mensajes de commit son una forma de documentar los cambios que se realizan en un repositorio de c√≥digo.
Estos mensajes son muy √∫tiles para entender qu√© cambios se realizaron en un proyecto, y por qu√© se hicieron.

Cuando se trabaja en un equipo de desarrollo, es muy importante que todos los miembros del equipo
puedan entender qu√© cambios se realizaron en el c√≥digo, y por qu√© se realizaron.

## Conventional Commits

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=SigVVJmUGv8)
/>

Como dice su [p√°gina oficial](https://www.conventionalcommits.org/es/v1.0.0/): Es una especificaci√≥n
para dar significado a los mensajes de commits haci√©ndolos comprensibles tanto para las m√°quinas como
para las personas. Proporciona un conjunto sencillo de reglas para crear un historial de commits expl√≠cito;
lo que hace m√°s f√°cil poder escribir herramientas automatizadas. Esta convenci√≥n encaja con [SemVer](http://semver.org/),
ya que podemos explicar en los mensajes de commits, si es una _feature_, _bugfix_, incluso si hay "Breaking Changes\*.

Si no conoc√≠as el t√©rmino de **Semantic Versioning**, en este v√≠deo corto te lo cuento:

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=k_nV7ExQdw4)
/>

La estructura de un mensaje de commit siguiendo la especificaci√≥n ser√≠a la siguiente:

```shell
<tipo>[scope opcional]: <descripci√≥n del commit>

[cuerpo del mensaje, opcional]

[footer(s), opcionales]

```

### Tipos de commits

Los tipos de commits son los siguientes:

- **feat**: Una nueva caracter√≠stica o funcionalidad. Tendr√≠a correlaci√≥n con una versi√≥n MINOR siguiendo _SemVer_.
- **fix**: Un error corregido. Tendr√≠a correlaci√≥n con una versi√≥n PATCH siguiendo _SemVer_.
- **BREAKING CHANGE**: Un cambio que contenga esta palabra en el `footer` del mensaje o un signo `!` despues del tipo o scope,
  rompe la compatibilidad con versiones anteriores. Tendr√≠a correlaci√≥n con una versi√≥n MAJOR siguiendo _SemVer_.

Se permiten tambi√©n los siguientes tipos:

- **build**: Cambios que afectan el sistema de compilaci√≥n o dependencias externas (ej. cambios en el `package.json`).
- **ci**: Cambios en nuestros archivos y scripts de configuraci√≥n de integraci√≥n continua.
- **docs**: Cambios en la documentaci√≥n.
- **chore**: Otros cambios que no afectan el c√≥digo fuente.
- **perf**: Un cambio de c√≥digo que mejora el rendimiento.
- **refactor**: Un cambio de c√≥digo que no corrige un error ni agrega una caracter√≠stica.
- **style**: Cambios que no afectan el significado del c√≥digo (espacios en blanco, formato, puntos y comas faltantes, etc).
- **test**: Agregar pruebas faltantes o corregir pruebas existentes.

### Scope

El scope es opcional, y sirve para especificar el alcance del commit. Por ejemplo, si estamos trabajando
en un proyecto monorepo, podemos especificar el paquete que estamos modificando.

### Ejemplos

Veamos algunos ejemplos de mensajes de commit siguiento la especificaci√≥n:

**Commit que a√±ade una nueva caracter√≠stica, sin un scope en concreto**.

```shell
feat: add support for TypeScript
```

**Commit que arregla un bug, dentro del paquete `ui` de nuestro proyecto**.

```shell
fix(ui): bugfix on Button component
```

**Commit que rompe la compatibilidad con versiones anteriores, aunque no a√±ade caracter√≠sticas nuevas ni corrige bugs**.

```shell
chore!: drop support for Node 6

BREAKING CHANGE: use JavaScript features not available in Node 6.
```

**Commit que agrega pruebas faltantes**

```shell
test(ui): add missing tests for Button component
```

**Commit que agrega una tarea para el sistema de integraci√≥n/despliegue continuo**.

```shell
ci: add GitHub Actions workflow
```

**Commit con un mensaje descriptivo largo y varios footers o pie de p√°gina**.

```shell
fix(api): prevent duplicate users from being created

This commit fixes a bug where the API would allow duplicate users to be created
with the same email address. This commit also adds a new `unique` constraint to
the `users` table to prevent this from happening in the future.

Paired with: X
Fixes #123

```

## ¬øPor qu√© usar Conventional Commits?

- Permite la generaci√≥n autom√°tica del fichero CHANGELOG.
- Determina autom√°ticamente los cambios de versi√≥n siguiendo SemVer (basado en los tipos de commits utilizados).
- Comunican la naturaleza de los cambios a los dem√°s integrantes del equipo o cualquier persona interesada.
- Activa los procesos de build y despliegue o publicaci√≥n.
- Hacer m√°s f√°cil a otras personas contribuir al proyecto al permitirles explorar el historial de commits de una forma m√°s estructurada.

## Herramientas para usar Conventional Commits

### Plugin de VSCode

La primera que utilizo es la extensi√≥n o plugin de VSCode, [Conventional Commit](https://marketplace.visualstudio.com/items?itemName=vivaxy.vscode-conventional-commits). Me ayuda a elegir el tipo de commit,
el scope, escribir el mensaje,... todo a base de ventanas de dialogo.

### Gitemoji

Para darle m√°s colorido a nuestros commits, podemos usar la convenci√≥n [Gitemoji](https://gitmoji.dev/). Es una convenci√≥n en la que
los emojis representan el tipo de commit. Por ejemplo, el emoji üêõ representa un bugfix, ‚ú® un nuevo feature, etc... As√≠ de un vistazo
r√°pido puedes ver que tipo de cambio se ha realizado.

### Commitlint

[Commitlint](https://commitlint.js.org/#/) es una herramienta que nos permite configurar reglas para validar los mensajes de commit.
Igual que usamos un linter para comprobar si seguimos ciertas reglas de estilo en nuestro c√≥digo, lo podemos usar para
los mensajes de commit.

Para ello necesitas instalar la librer√≠a `@commitlint/cli` y `@commitlint/config-conventional` en tu proyecto.

```shell
npm install --save-dev @commitlint/cli @commitlint/config-conventional
```

Una vez instaladas, debes crear un fichero de configuraci√≥n llamado `commitlint.config.js` en la ra√≠z
de tu proyecto con el siguiente contenido:

```js
module.exports = {
  extends: ["@commitlint/config-conventional"],
};
```

### Husky

Ya vimos [para que serv√≠a Husky en un post anterior](/husky-lintstaged). Ahora vamos a a√±adirle una nueva regla al hook `pre-commit` para
que verifique y valide si el mensaje de commit cumple las reglas de la convenci√≥n Conventional Commits.

Si ya tienes [configurado Husky](/husky-lintstaged) lo √∫nico que has de hacer es ejecutar el siguiente comando
en la ra√≠z de tu proyecto para que a√±ada el comando al hook `commit-msg`:

```shell
npx husky add .husky/commit-msg  'npx --no -- commitlint --edit ${1}'
```

Y listo, cada vez que hagas un commit, verificar√° que sigue las reglas.

### CHANGELOG

Por √∫ltimo, tambi√©n es interesante poder generar autom√°ticamente el fichero CHANGELOG a partir de los mensajes de commit.
Para ello hay diversas herramientas, una de ellas es [Conventional Changelog](https://github.com/conventional-changelog/conventional-changelog)

</article>

---

<article slug="firebase-hosting-ssr" date="2022-11-14" url="https://carlosazaustre.es/blog/firebase-hosting-ssr">

# C√≥mo desplegar una app Server-Side Rendering con Next.js en el nuevo Firebase Hosting

**Fecha:** 2022-11-14
![Firebase Hosting](/images/firebase-hosting-ssr/firebase-hosting.png)

En la [Firebase Summit 2022](https://firebase.google.com/summit/2022), Google anunci√≥ que el nuevo
_Firebase Hosting_ ya estaba disponible en `preview`. La gran novedad es que permite desplegar
aplicaciones _Server-Side Rendering_ (SSR) como podemos hacer con Next.js o Angular Universal.

Anteriormente, Firebase Hosting solo permit√≠a desplegar aplicaciones est√°ticas, se pod√≠an subir
ficheros est√°ticos como HTML, CSS, JS, im√°genes, etc.
Pero no se pod√≠a desplegar una aplicaci√≥n que renderizara en el servidor. Hab√≠a una forma,
utilizando _Cloud Functions_, pero era un poco engorrosa.

El equipo de Firebase ha trabajado para que ahora sea mucho m√°s sencillo desplegar de esta
forma y con menos comandos.

En el momento de escribir este tutorial, el nuevo _Firebase Hosting_ est√° en `preview` y es posible
que cambie el proceso. De hecho, por estar en **beta** a√∫n no hay mucha documentaci√≥n y todav√≠a
hay algunas cosas que no funcionan como deber√≠an y hay que hacer algo m√°s de configuraci√≥n que
a d√≠a de hoy no se encuentra en la [documentaci√≥n](https://firebase.google.com/docs/hosting).

Por eso he creado este post, para tenerlo como referencia y si quieres probar esta nueva
funcionalidad, espero que te sirva.

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=TJqJ-WY3XxA)
/>

## ¬øQu√© es Server-Side Rendering?

O SSR, es cuando el servidor renderiza la p√°gina y la env√≠a al cliente. Hasta hace no mucho, la
gran mayor√≠a de las aplicaciones web se renderizaban en el cliente, es decir, el navegador
descargaba el HTML, CSS y JS y lo renderizaba. Esto tiene algunas desventajas, como que el
tiempo de carga de la p√°gina es mayor, ya que el navegador tiene que descargar todos los
ficheros y renderizarlos.

![Server Side Rendering - SSR](/images/firebase-hosting-ssr/ssr.png)

![Client Side Rendering - CSR](/images/firebase-hosting-ssr/csr.png)

> **Fuente**: [_The Benefits of Server Side Rendering Over Client Side Rendering_](https://medium.com/walmartglobaltech/the-benefits-of-server-side-rendering-over-client-side-rendering-5d07ff2cefe8) por [Alex Grigoryan](https://medium.com/@lexgrigoryan)

Las librer√≠as como React, Vue o Angular se "han hecho mayores" con los frameworks Next, Nuxt y Angular Universal
respectivamente, y permiten renderizar en el servidor. Esto hace que el tiempo de carga de la
p√°gina sea menor, ya que el servidor renderiza la p√°gina y la env√≠a al cliente.

El despliegue de este tipo de aplicaciones no era sencillo. Servicios como [Vercel](https://vercel.com/) o [Netlify](netlify.com)
lo hacen muy f√°cil, pero Firebase Hosting no. Ahora, con el nuevo Firebase Hosting, es mucho m√°s
sencillo.

## ¬øQu√© necesitamos?

Para este tutorial voy a utilizar Next.js, mi framework favorito para crear aplicaciones web.
Para ello vamos a crear una aplicaci√≥n de ejemplo con el comando `create-next-app`:

```bash
npx create-next-app nextjs-firebase-hosting
```

## Configuraci√≥n del proyecto

Para poder probar esta nueva funcionalidad, vamos a generar unas p√°ginas de ejemplo que
utilicen SSR.

Para ello, en el proyecto reci√©n creado, dir√≠gete a la carpeta `pages` y crea una carpeta `product`
y dentro de ella, un fichero con el nombre `[id].js` con el siguiente c√≥digo:

```js
// pages/product/[id].js
import Image from "next/image";

export async function getServerSideProps(context) {
  const { id } = context.params;
  const res = await fetch(`https://fakestoreapi.com/products/${id}`);
  const product = await res.json();

  return {
    props: {
      product,
    },
  };
}

export default function Product({ product }) {
  return (
    <div>
      <h1>{product.title}</h1>
      
      <p>{product.description}</p>
    </div>
  );
}
```

¬øQu√© estamos haciendo aqu√≠?

Una p√°gina generada din√°micamente en el servidor, para ello
utilizamos el m√©todo `getServerSideProps` de `Next.js` que nos permite incluir c√≥digo que √∫nicamente
se ejecutar√° en el servidor (puedes poner llamadas a una base de datos directamente aqu√≠, por ejemplo,
aunque es mejor que para eso uses un servicio).

Lo que hacemos aqu√≠ es obtener el `id` din√°mico del producto que nos llega por par√°metros
(cuando la URL sea por ejemplo `miweb.com/products/1` ser√° el `1`) y hacer una llamada a
un API como [fakestoreapi](https://fakestoreapi.com/) para obtener los datos de un producto aleatorio.

En el componente `Product` simplemente pintamos los datos del producto.

## Configuraci√≥n de Firebase

Ahora que ya tenemos nuestra aplicaci√≥n de ejemplo, vamos a configurar Firebase para poder
desplegarla en el hosting.

Primero de todo, debes tener instalado el CLI de Firebase. Si no lo tienes, puedes instalarlo
con el siguiente comando:

```bash
npm install -g firebase-tools
```

Con esto, podemos autenticarnos en los servicios de Firebase desde la consola con el comando:

```bash
firebase login
```

Una vez autenticados, vamos a crear un nuevo proyecto en Firebase. Para ello, en la [consola de
Firebase](https://console.firebase.google.com), haz click en el bot√≥n `Add project` y crea un nuevo proyecto.
Ll√°malo como quieras.

**Importante**: Para poder usar funcionalidades como las _Cloud Functions_ tienes que activar el plan _Blaze (Pay as you go)_
No te preocupes, porque para el ejemplo no te cobrar√°n nada, e incluso puedes poner un l√≠mite de
gasto para que te avise por si te lo olvidas activado.

![Firebase Blaze Plan](/images/firebase-hosting-ssr/firebase-blaze-plan.png)

Aunque no vamos a configurar Cloud Functions manualmente, esta nueva funcionalidad las utiliza por debajo, por
eso debemos activarlo.

Volviendo a la terminal, vamos a inicializar el proyecto de Firebase en nuestro proyecto de Next.js, como
lo que vamos a utilizar est√° en fase experimental, debemos ejecutar antes:

```bash
firebase experiments:enable webframeworks
```

Y ya si, inicializar el proyecto de Firebase:

```bash
firebase init hosting
```

El script detectar√° que estamos usando Next.js y configurar√° Firebase para ello.

## Probando en local

Antes de desplegar nada en producci√≥n, vamos a probar que todo funciona correctamente en local.
Para ello, Firebase desde hace un tiempo nos proporciona un set de emuladores de sus servicios
(Firestore, Storage, Cloud Functions, etc...) para probar el entorno en nuestro equipo local.

Esto ha mejorado y ahora con un √∫nico comando, es capaz de detectar que servicios estamos utilizando y
lanzar los emuladores correspondientes.

```bash
firebase emulators:start
```

Si todo ha ido bien, ver√°s algo como esto:

```bash
i  emulators: Starting emulators: hosting
‚ö†  hosting: Hosting Emulator unable to start on port 5000, starting on 5002 instead.
Detected a Next.js codebase. This is an experimental integration, proceed with caution.

event - compiled client and server successfully in 232 ms (154 modules)
i  hosting[next-demo-firebase]: Serving hosting files from: public
‚úî  hosting[next-demo-firebase]: Local server: http://127.0.0.1:5002
‚ö†  emulators: The Emulator UI is not starting, either because none of the emulated products
have an interaction layer in Emulator UI or it cannot determine the Project ID.
Pass the --project flag to specify a project.

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚úî  All emulators ready! It is now safe to connect your app. ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Emulator ‚îÇ Host:Port      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Hosting  ‚îÇ 127.0.0.1:5002 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
  Emulator Hub running at 127.0.0.1:4400
  Other reserved ports: 4500
```

Si vas a `http://localhost:5002` (o con el puerto que te haya asignado el emulador) ver√°s la aplicaci√≥n
funcionando correctamente. La p√°gina principal es est√°tica asi que ahi no podemos probar el SSR,
para ello dir√≠gite a la URL por ejemplo `http://localhost:5002/products/1` y ver√°s que se renderiza correctamente.

![Aplicaci√≥n corriendo en el emulador de Firebase Hosting local](/images/firebase-hosting-ssr/firebase-hosting-emulator.png)

## Desplegando en producci√≥n

Ahora ya podemos desplegarlo al Hosting de firebase. Seg√∫n la [documentaci√≥n](https://firebase.google.com/docs/hosting), con el comando:

```bash
firebase deploy
```

Bastar√≠a, pero si lo ejecutas (al menos al momento de escribir este tutorial) tendr√°s varios errores.

¬øA qu√© se deben?

Firebase es un servicio por encima de **Google Cloud**. Cada vez que creas un proyecto en Firebase, se crea
en [Google Cloud](https://console.cloud.google.com/).

La nueva funcionalidad de Firebase Hosting de servir contenido SSR, ejecuta por debajo Cloud Functions (Una Cloud Function de Firebase es
una Cloud Function de Google Cloud) y √©sta, adem√°s, dentro de Google Cloud, crea un entorno en Cloud Run
(Basicamente un Docker con Node.js y las funciones que ejecutan el SSR).

Lo primero que tienes que hacer es ir a la consola de Google Cloud, y dentro del servicio de [Cloud Functions de tu proyecto](https://console.cloud.google.com/functions/),
Clickar en el bot√≥n que dice _Powered by Cloud Run_ y activarlo.

![Activar Cloud Run](/images/firebase-hosting-ssr/enable-cloud-run.png)

Una vez en esta pantalla, ve a la opci√≥n **Trigger** y en las opciones de **Authentication** seleccionar **Allow unauthenticated invocations**.
De esta manera, Firebase podr√° ejecutar las funciones sin necesidad de autenticaci√≥n, ya qye cualquier usuario puede
visitar la URL `miweb.com/products/1` que es la que lanza la Cloud Function. Sino te dar√° error.

![Selecciona la pesta√±a Trigger](/images/firebase-hosting-ssr/cloud-run-trigger-1.png)

![Selecciona Allow unauthenticated invocations](/images/firebase-hosting-ssr/cloud-run-trigger-2.png)

Si sigues teniendo problemas, dir√≠gete al servicio de [Artifacts Registry](https://console.cloud.google.com/artifacts) de
tu proyecto y act√≠valos.

![Activar Artifacts Registry](/images/firebase-hosting-ssr/artifact-registry.png)

Con estas dos configuraciones, ya deber√≠a funcionar correctamente. Otra opci√≥n que puedes probar si te
da fallos, es aumentar la memoria RAM que ejecuta tu Cloud Function. Para ello, en la consola de Google Cloud,
ve a la opci√≥n de [Cloud Functions](https://console.cloud.google.com/functions/) y en la opci√≥n de **Configuration**
aumenta el valor de **Memory** a 512 MB.

Ahora si, adelante con el despliegue:

```bash
firebase deploy
```

Y si todo va bien, en la terminal te saldr√° algo como esto:

```bash
Detected a Next.js codebase. This is an experimental integration, proceed with caution.

info  - Linting and checking validity of types
info  - Creating an optimized production build
info  - Compiled successfully
info  - Collecting page data
info  - Generating static pages (3/3)
info  - Finalizing page optimization

Route (pages)                              Size     First Load JS
‚îå ‚óã /                                      1.26 kB        83.9 kB
‚îú   ‚îî css/ae0e3e027412e072.css             707 B
‚îú   /_app                                  0 B            78.9 kB
‚îú ‚óã /404                                   212 B          79.1 kB
‚îî Œª /products/[id]                         484 B          83.1 kB
+ First Load JS shared by all              79.2 kB
  ‚îú chunks/framework-0f397528c01bc177.js   45.7 kB
  ‚îú chunks/main-5cebf592faf0463a.js        31.8 kB
  ‚îú chunks/pages/_app-aba2de2b7ae6fcb3.js  390 B
  ‚îú chunks/webpack-2369ea09e775031e.js     1.02 kB
  ‚îî css/ab44ce7add5c3d11.css               247 B

Œª  (Server)  server-side renders at runtime (uses getInitialProps or getServerSideProps)
‚óã  (Static)  automatically rendered as static HTML (uses no initial props)

changed 1 package in 24s

24 packages are looking for funding
  run `npm fund` for details

=== Deploying to 'next-demo-firebase'...

i  deploying functions, hosting
i  functions: ensuring required API cloudfunctions.googleapis.com is enabled...
i  functions: ensuring required API cloudbuild.googleapis.com is enabled...
i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled...
‚úî  artifactregistry: required API artifactregistry.googleapis.com is enabled
‚úî  functions: required API cloudbuild.googleapis.com is enabled
‚úî  functions: required API cloudfunctions.googleapis.com is enabled
i  functions: preparing codebase firebase-frameworks-next-demo-firebase for deployment
‚ö†  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory.
‚ö†  functions: Please note that there will be breaking changes when you upgrade.
i  functions: Loaded environment variables from .env.
i  functions: preparing .firebase/next-demo-firebase/functions directory for uploading...
i  functions: packaged /Users/carlosazaustre/Code/next-demo-firebase/.firebase/next-demo-firebase/functions (15.28 MB) for uploading
i  functions: ensuring required API run.googleapis.com is enabled...
i  functions: ensuring required API eventarc.googleapis.com is enabled...
i  functions: ensuring required API pubsub.googleapis.com is enabled...
i  functions: ensuring required API storage.googleapis.com is enabled...
‚úî  functions: required API eventarc.googleapis.com is enabled
‚úî  functions: required API pubsub.googleapis.com is enabled
‚úî  functions: required API storage.googleapis.com is enabled
‚úî  functions: required API run.googleapis.com is enabled
i  functions: generating the service identity for pubsub.googleapis.com...
i  functions: generating the service identity for eventarc.googleapis.com...
‚úî  functions: .firebase/next-demo-firebase/functions folder uploaded successfully
i  hosting[next-demo-firebase]: beginning deploy...
i  hosting[next-demo-firebase]: found 18 files in .firebase/next-demo-firebase/hosting
‚úî  hosting[next-demo-firebase]: file upload complete
i  functions: updating Node.js 16 function firebase-frameworks-next-demo-firebase:ssrnextdemofirebase(us-central1)...
‚úî  functions[firebase-frameworks-next-demo-firebase:ssrnextdemofirebase(us-central1)] Successful update operation.
Function URL (firebase-frameworks-next-demo-firebase:ssrnextdemofirebase(us-central1)): https://ssrnextdemofirebase-vz7izpvioa-uc.a.run.app
i  functions: cleaning up build files...
i  hosting[next-demo-firebase]: finalizing version...
‚úî  hosting[next-demo-firebase]: version finalized
i  hosting[next-demo-firebase]: releasing new version...
‚úî  hosting[next-demo-firebase]: release complete

‚úî  Deploy complete!

Project Console: https://console.firebase.google.com/project/next-demo-firebase/overview
Hosting URL: https://next-demo-firebase.web.app
```

En mi caso, en la URL `https://next-demo-firebase.web.app/products/1` ya tengo mi aplicaci√≥n desplegada y
el contenido es generado desde el servidor.

¬øQu√© te ha parecido? Dime si lo has probado y cu√©ntame qu√© tal.

</article>

---

<article slug="husky-lintstaged" date="2022-11-09" url="https://carlosazaustre.es/blog/husky-lintstaged">

# C√≥mo configurar Husky y Lint-Staged en un proyecto

**Fecha:** 2022-11-09
Mejora tu flujo de desarrollo como programador, utilizando Git Hooks que se ejecuten antes de un commit,
push, etc... y que comprueben si el Linter
pasa correctamente, los test dan OK,...
y as√≠ asegures que el c√≥digo que subes a
tu repositorio cumple un m√≠nimo de calidad.

Para ello tenemos herramientas como Husky y
Lint-Staged que nos ayudan a configurarlo.

En este tutorial vemos como hacerlo, pero si quieres verlo en video, aqu√≠ abajo te lo dejo en YouTube.

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=YWBrzwSDpo8)
/>

## Iniciando proyecto de ejemplo

Usaremos node y npm para este ejemplo, pero puedes usar cualquier otro lenguaje y gestor de paquetes.

```bash
mkdir husky-lint-staged
cd husky-lint-staged
npm init -y
```

Ahora iniciamos un nuevo repositorio, ya que [Husky](https://typicode.github.io/husky/#/) utiliza [Git Hooks](https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks).
Si no tienes un repositorio, no vas a poder instalar Husky.

```bash
git init
```

Instalamos las depencencias de desarrollo que vamos a usar.

```bash
npm i -D husky lint-staged
```

## ¬øPor qu√© usar Husky y Lint-Staged?

Husky en lo que se basa es en los [Git Hooks](https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks),
que son scripts que se ejecutan en momentos determinados, como antes de un commit, push, etc...

Por ejemplo el script de `pre-commit` nos permite que antes de finalizar un commit, se ejecute un script que corra el Linter
y nos diga si hay errores o no y asegurarnos que el c√≥digo que se sube al repositorio sigue las reglas de estilo.

Por otro lado, Lint-Staged nos permite ejecutar scripts en los archivos que se van a subir al repositorio, es decir,
solo en los archivos que hemos modificado, no en todos los archivos del proyecto. Se entiende que el resto de archivos que no
hemos tocado ya est√°n bien y no necesitan ser revisados.

## Configurando Husky y Lint-staged

Creamos un fichero `.lintstagedrc` en la ra√≠z de nuestro proyecto, con el siguiente contenido:

```json
{
  "*.{js,jsx,ts,tsx}": ["eslint --fix", "git add"]
}
```

Aqui le estamos diciendo que para los ficheros con extensi√≥n `js`, `jsx`, `ts` y `tsx`, ejecute el comando `eslint --fix` y
despu√©s a√±ada los cambios al commit.

Ahora en nuestro `package.json` a√±adimos un script que podemos llamar `prepare`. Puedes a√±adirlo en la secci√≥n `scripts` o
ejecutar el siguiente comando:

```bash
npm set-script prepare "husky install"
```

Esto nos permite configurar Husky de una forma m√°s r√°pida corriendo:

```bash
npm run prepare
```

Esto instala los git hooks dentro de la carpeta `.husky` que se acaba de crear.

## A√±adir el pre-commit hook

Ahora vamos a a√±adir el pre-commit hook, para que antes de hacer un commit, se ejecute el script de Lint-Staged. Esto lo hacemos
con el siguiente comando:

```bash
npx husky add .husky/pre-commit "npx lint-staged"
```

Esto crea el fichero `.husky/pre-commit` con el siguiente contenido:

```bash
#!/usr/bin/sh
. "$(dirname "$0")/_/husky.sh"

npx lint-staged
```

## Configurar el Linter

Tenemos el hook pero no tenemos un linter configurado. Solucionemos eso. Ejecutamos el siguiente comando para que se instale
y configure ESlint de una forma r√°pida:

```bash
npx eslint --init
```

Elige las opciones de configuraci√≥n que prefieras.

Ahora si realizas un commit y modificas un fichero con extensi√≥n `js`, `jsx`, `ts` o `tsx`, se ejecutar√° el script de Lint-Staged
y se ejecutar√° el comando `eslint --fix` y se a√±adir√°n los cambios al commit.

## A√±adir el pre-push hook

Ahora vamos a a√±adir el pre-push hook, para que antes de hacer un push, se ejecuten los scripts que determinemos, como por ejemplo que
se lancen los Tests y s√≥lo si pasan, el c√≥digo se suba finalmente al repositorio.Esto lo hacemos
con el siguiente comando:

```bash
npx husky add .husky/pre-push "npm run test"
```

Si no tienes tests o estos no pasan, el push no se realizar√° hasta que lo soluciones.

Para que puedas probar este ejemplo, vamos a crear un fichero y un peque√±o test, adem√°s de la configuraci√≥n de ESLint necesaria para que no
te de errores:

Primero de todo, instalar√© Jest como runner de tests:

```bash
npm i -D jest
```

Seguidamente, para no complicarnos mucho con este ejemplo, en un fichero `.eslintignore` vamos a a√±adir la carpeta de `tests` y ya que estamos
tambi√©n `node_modules` por curarnos en salud.

```json
//.eslintignore
node_modules
__test__
```

Tendremos un fichero de ejemplo, `index.js` que simplemente exporta una funci√≥n que devuelve la suma de dos valores:

```js
// index.js
const sum = (a, b) => a + b;

module.exports = { sum };
```

Y en la carpeta `__test__` tendremos un fichero `index.test.js` que importar√° la funci√≥n `sum` y har√° un test para comprobar que
funciona correctamente:

```js
// index.test.js
const { sum } = require("./index");

test("adds 1 + 2 to equal 3", () => {
  expect(sum(1, 2)).toBe(3);
});
```

Puedes jugar con esto para ver como el test falla y no te deja realizar el push.

## Conclusi√≥n

Esto es solo una de las muchas cosas que podemos hacer con Husky y Lint-Staged. Puedes ver m√°s en la [documentaci√≥n de Husky](https://typicode.github.io/husky/#/).

En un pr√≥ximo art√≠culo tutorial, veremos como configurar todo esto para que el propio mensaje de commit siga unas normas de estilo, conocidas
como 'Conventional Commits'.

**D√©jame en los comentarios si te interesa.**

```

```

</article>

---

<article slug="dynamic-island-html" date="2022-11-06" url="https://carlosazaustre.es/blog/dynamic-island-html">

# C√≥mo hacer la Dynamic Island del iPhone 14 con HTML, CSS y JavaScript

**Fecha:** 2022-11-06
## ¬øQu√© es la Dynamic Island?

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=3LYaZyVPW58)
/>

La Dynamic Island es una caracter√≠stica que se ha introducido en el iPhone 14
y que permite a los usuarios crear una isla personalizada en la pantalla de inicio del iPhone.
En este art√≠culo vamos a crear una versi√≥n web de la Dynamic Island utilizando HTML, CSS y JavaScript.

Este es el resultado que obtendr√°s:

![Dynamic Island con HTML y CSS](/images/dynamic-island-html/dynamic-island-html.gif)

## HTML

El HTML es bastante simple, solo necesitamos un contenedor para la isla
y un contenedor para el contenido de la misma.

Crea una carpeta en tu ordenador, la puedes llamar `dynamic-island` y abre tu editor favorito (yo utilizo VSCode).
Dentro crea un archivo `index.html` con el siguiente contenido:

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles.css" />
    <title>Document</title>
    <script src="./main.js"></script>
  </head>
  <body>
    <div class="island">
      <div class="island-content">
        <div class="player">
          <img
            class="player-picture"
            src="./assets/spotify-logo.png"
            alt="Spotify"
          />
          <div class="player-details">
            <p>Now Playing...</p>
            <h2>Hablando.js - Podcast</h2>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
```

Como puedes ver dentro de la etiqueta `<head>`, he a√±adido links a un archivo de estilos y a un archivo de JavaScript.
Estos archivos los vamos a crear en los siguientes pasos.

Lo interesante de esta parte es esto:

```html
<div class="island">
  <div class="island-content">
    <div class="player">
      <img
        class="player-picture"
        src="./assets/spotify-logo.png"
        alt="Spotify"
      />
      <div class="player-details">
        <p>Now Playing...</p>
        <h2>Hablando.js - Podcast</h2>
      </div>
    </div>
  </div>
</div>
```

Tenemos un `<div>` con la clase `island` y dentro otro con la clase `island-content`. Esto nos permitir√°
jugar con las transiciones y los efectos de la isla.

Dentro de `island-content` tenemos otro `div` en el que vamos a simular la informaci√≥n de
una reproducci√≥n de Spotify. Este `div` contiene una imagen con el logo de la aplicaci√≥n y un `div` con
detalles de la reproducci√≥n.

vamos con el CSS.

## CSS

Lo que vamos a hacer no es nada "rocambolesco", solo vamos a crear la isla, darle un fondo de color negro,
bordes redondeados, y transiciones para cuando el usuario pase el rat√≥n por encima de la isla esta
cambie de tama√±o de una manera fluida.

Basicamente, mucho uso de Flexbox y un poco de animaciones.

```css
body {
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: "IBM Plex Sans", sans-serif; // Puedes usar otra fuente
}

.island {
  width: 85px;
  background-color: #000;
  height: 25px;
  border-radius: 50px;
  position: absolute;
  top: 37px;
  transition: 0.3s ease;
  display: flex;
  justify-content: center;
  align-items: center;
}

.island:hover {
  cursor: pointer;
  width: 75%;
  height: 60px;
  border-radius: 70px;
  transition: 0.3s ease;
}

.island-content {
  opacity: 0;
  transform: scale(0);
  height: 100%;
  width: 100%;
  display: flex;
  padding: 0 0.6em;
  justify-content: space-between;
  align-items: center;
}

.island:hover .island-content {
  transition: 0.3s ease;
}

.player {
  display: flex;
  align-items: flex-end;
  justify-content: flex-start;
}

.player-picture {
  width: 40px;
  margin-right: 0.7em;
  height: 40px;
  border-radius: 50%;
  object-fit: cover;
  object-position: center center;
}

.player-details {
  color: #fff;
}

.player-details p {
  font-size: 14px;
  font-weight: 300;
  opacity: 0.3;
  margin: 0 0 0.5em 0;
}

.player-details h2 {
  white-space: nowrap;
  margin: 0;
  font-weight: 500;
  font-size: 14px;
  color: #f5f5f5;
}
```

## JavaScript

Ahora vamos a a√±adir un poco de JavaScript para que el contenido de la isla (el reproductor)
se muestre cuando el usuario acerque el rat√≥n por encima de ella y desaparezca cuando lo saque.

Como no estamos usando frameworks ni librer√≠as, √∫nicamente Vanilla JavaScript, necesitamos a√±adir
un "listener" para que se ejecute el c√≥digo cuando ya est√° el DOM listo.

```javascript
window.addEventListener("DOMContentLoaded", main);
```

De esta forma, el c√≥digo de la funci√≥n `main` se ejecutar√° cuando el DOM est√© listo. Dentro de `main`
cacheamos los elementos corresponndientes a los `div`: `island` y `island-content`.

```js
const island = document.querySelector(".island");
const islandContent = document.querySelector(".island-content");
```

Ahora, a√±adimos "listener" a cada uno de ellos. A `island` le a√±adimos un listener para cuando el
usuario pase el rat√≥n por encima de √©l, y a `islandContent` le a√±adimos un listener para cuando el
usuario saque el rat√≥n de √©l.

Dentro de su funci√≥n de callback, jugaremos con la opacicidad y la escala, usando CSS de manera program√°tica.

```js
island.addEventListener("mouseenter", () => {
  islandContent.style.opacity = 1;
  islandContent.style.transform = "scale(1)";
});

islandContent.addEventListener("mouseleave", () => {
  islandContent.style.opacity = 0;
  islandContent.style.transform = "scale(0)";
});
```

El c√≥digo completo de `main.js` ser√≠a este:

```js
function main() {
  const island = document.querySelector(".island");
  const islandContent = document.querySelector(".island-content");

  island.addEventListener("mouseenter", () => {
    setTimeout(() => {
      islandContent.style.opacity = 1;
      islandContent.style.transform = "scale(1)";
    }, 100);
  });

  islandContent.addEventListener("mouseleave", () => {
    islandContent.style.opacity = 0;
    islandContent.style.transform = "scale(0)";
  });
}

window.addEventListener("DOMContentLoaded", main);
```

Pru√©balo y dime que mejorar√≠as üòä

</article>

---

<article slug="react-vite" date="2022-10-26" url="https://carlosazaustre.es/blog/react-vite">

# C√≥mo iniciar un proyecto React con Vite

**Fecha:** 2022-10-26
![Vite](/images/react-vite/logo-vite.png)

[Vite](https://vitejs.dev/) es una herramienta de tooling para el Frontend. Lo puedes agrupar
en la categor√≠a donde se encuentran otros como Webpack, Parcel y Snowpack.
Es muy √∫til para crear una estructura de proyecto que se pueda utilizar con React y de
una forma muy r√°pida, ya que no necesitas tener que configurar nada. Aprovecha el
sistema de m√≥dulos de ES6 (ESModules) por lo que puede ser servido din√°micamente seg√∫n
lo necesite el navegador.

### Crear un proyecto React con Vite.

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=niTHb7pwfRI)
/>

Aseg√∫rate de tener instalado [Node.js](https://nodejs.org) en tu equipo.

Puedes comprobarlo ejecutando en la terminal:

```shell
$ node -v
```

Una vez
lo tengas, ejecuta los siguientes comandos:

```shell
$ npm create vite@latest <nombre-de-mi-proyecto>
```

Entre los diferentes frameworks que te sugiere, elige el que necesites, en nuestro caso `react`.
Despu√©s te pregunta si quieres utilizar TypeScript o no. Elige lo que prefieras.

```shell
‚úî Project name: ‚Ä¶ vite-project
? Select a framework: ‚Ä∫ - Use arrow-keys. Return to submit.
    Vanilla
    Vue
‚ùØ   React
    Preact
    Lit
    Svelte

```

```shell
? Select a variant: ‚Ä∫ - Use arrow-keys. Return to submit.
‚ùØ   JavaScript
    TypeScript
```

```shell
Scaffolding project in /Users/carlosazaustre/dev/vite-project...

Done. Now run:

  cd vite-project
  npm install
  npm run dev
```

### Ejecutar el proyecto.

Una vez creado, dir√≠gete al directorio creado y ejecuta el comando de instalaci√≥n:

```shell
$ cd <nombre-de-mi-proyecto>
$ npm install
```

Una vez instaladas las dependencias, ejecuta el comando de desarrollo y ya puedes
empezar a trabajar.

```shell
$ npm run dev

  VITE v3.1.8 ready in 396 ms

  > Local: http://localhost:5173/
  > Network: use `--host` to expose

```

![aplicacion con react y vite corriendo en localhost](/images/react-vite/vite-react-app.png)

</article>

---

<article slug="workspace" date="2022-01-27" url="https://carlosazaustre.es/blog/workspace">

# Mi Setup 2022 - Trabajo en Remoto y desde casa

**Fecha:** 2022-01-27
El **teletrabajo o trabajo desde casa** ya es una realidad y un √©standar en la mayor√≠a de empresas
que tienen departamentos de desarrollo, dise√±o y/o marketing digital. √önicamente necesitas de un ordenador
y una conexi√≥n a internet (bueno y c√°mara y micr√≥fono para las videollamadas).

![Setup para programar Carlos Azaustre](/images/workspace/setup_desarrollador_carlosazaustre.jpg)

Teletrabajar o trabajar en remoto no es sencillo, requiere tiempo para adaptarse,
implementar rutinas y tener un buen ambiente y zona de trabajo.

Para mi no es algo nuevo. En Eventbrite, mi anterior empresa, dispon√≠amos de varios d√≠as a la semana
que pod√≠amos trabajar desde casa antes de la pandemia. Y antes de eso, En IBM Research, todo el equipo era distribuido
y trabaj√°bamos de forma remota. Tambi√©n, en mi etapa en Google, no hab√≠a mucho teletrabajo, pero el equipo
si era distribuido entre Italia, Alemania, Rep√∫blica Checa, Suiza, USA, etc...

En este post te comparto mi **zona de trabajo** y de **creaci√≥n de contenido** con los dispositivos que utilizo
en mi d√≠a a d√≠a para trabajar c√≥modamente desde casa.

---

## TL;DR:

¬øNo quieres leer mucho? te dejo una tabla con todos los elementos y d√≥nde los he comprado üëá

| Dispositivo     | Descripci√≥n                                                                                                                                                       | Precio |
| --------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------ |
| Port√°til        | [Macbook Pro 14" 2021 (M1Max - 64 Gb)](https://www.apple.com/es/shop/buy-mac/macbook-pro/14-pulgadas-gris-espacial-cpu-8-n%C3%BAcleos-gpu-14-n%C3%BAcleos-512gb#) | 3800‚Ç¨  |
| Tablero Mesa    | [Tablero 110x60cm para mesa](https://amzn.to/3iE64Lm)                                                                                                             | 50‚Ç¨    |
| Silla           | [DXRacer 5 Robas Lund](https://amzn.to/2QfjMbB)                                                                                                                   | 220‚Ç¨   |
| Monitor         | [Samsung UltraWide QHD 34"](https://amzn.to/2WdFPn2)                                                                                                              | 800‚Ç¨   |
| Brazo Monitor   | [Brazo](https://amzn.to/33oSd55)                                                                                                                                  | 30‚Ç¨    |
| HUB USB-C       | [Satechi USB HUB](https://amzn.to/3ohblf1)                                                                                                                        | 80‚Ç¨    |
| Mouse           | [Logitech MX Vertical](https://amzn.to/30GCcIa)                                                                                                                   | 90‚Ç¨    |
| Teclado         | [Keychron K2 v2](https://www.keychron.com/products/keychron-k2-wireless-mechanical-keyboard)                                                                      | 60‚Ç¨    |
| Auriculares     | [Bose 700HC](https://amzn.to/2xG5f2t)                                                                                                                             | 350‚Ç¨   |
| Micr√≥fono       | [RODE NT USB](https://amzn.to/2QhH00Y)                                                                                                                            | 180‚Ç¨   |
| Brazo micr√≥fono | [Neweer Soporte de Brazo de Tijera](https://amzn.to/34oPmh8)                                                                                                      | 16‚Ç¨    |
| Webcam          | [Logitech C920](https://amzn.to/2U8392L)                                                                                                                          | 80‚Ç¨    |
| C√°mara          | [Sony Alpha 6000](https://amzn.to/3ITpPeT)                                                                                                                        | 500‚Ç¨   |
| Brazo c√°mara    | [ElGato Master Mount L](https://amzn.to/3GmCYLU)                                                                                                                  | 50‚Ç¨    |
| Foco            | [ElGato Key Light Air](https://amzn.to/348HII3)                                                                                                                   | 100‚Ç¨   |
| StreamDeck      | [ElGato StreamDeck MK.2](https://amzn.to/3HlgBroL)                                                                                                                | 140‚Ç¨   |

---

## Hardware: Dispositivos y Gadgets

### Port√°til

A d√≠a de hoy (Enero 2022) dispongo de un **[Macbook Pro del 2021 de 14"](https://www.apple.com/es/shop/buy-mac/macbook-pro/14-pulgadas-gris-espacial-cpu-8-n%C3%BAcleos-gpu-14-n%C3%BAcleos-512gb#)"** con las siguientes caracter√≠sticas:

- Sistema: **macOS Monterey (v12.01)**
- Procesador y GPU: **M1 Max (10 N√∫cleos, GPU 32 n√∫cleos, Neural Engine 16 n√∫cleos)**
- Memoria Unificada: **64GB**
- Almacenamiento: **512 GB SSD**

![macbookpro](/images/workspace/macbook_m1_max.jpg)

Mucha gente me pregunta si Mac/Apple es recomendable para desarollo. **Cualquier port√°til es
bueno para desarrollo web**, es cierto que los equipos de Apple son m√°s caros que la media,
pero tambi√©n son m√°s resistentes y duran bastante tiempo como el primer d√≠a.

Por mis manos han pasado un Toshiba Satellite, un Sony Vaio, un Macbook Air y mi anterior Macbook Pro. Los primeros no me duraron m√°s de un a√±o.
Mi anterior Macbook lo he tenido durante 7 a√±os y salvo que ten√≠a 4GB de RAM y ya no eran suficientes
en 2020, por lo dem√°s segu√≠a perfecto. Llevo trabajando con Mac desde 2010, con un iMac y despues con los port√°tiles,
y me va a ser dificil cambiar.

Por cierto, te recomiendo [√©stas toallitas](https://amzn.to/2WeF5Op) para que las teclas no se queden
marcadas en la pantalla. Cuestan muy poco y alargan la vida del _display_.

### Mesa para _Standing-Desk_

Una de mis mejores compras que he hecho. Una mesa regulable en altura.

Te comparto un video de mi setup en 2020 d√≥nde puedes ver como funcionaba.

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=ioVvkuQDt0s)
/>

Est√° compuesta de dos partes, la [estructura de patas con el motor y el mando](https://amzn.to/3h0bosa) para subir y bajar la mesa de la marca [Flexspot](https://amzn.to/3h0bosa) y el tablero que puedes encontrar en cualquier tienda de bricolaje, [yo lo adquir√≠ en Amazon, en concreto un tablero de 110x60cm con 3cm de grosor](https://amzn.to/3iE64Lm).

La estructura de la mesa que tengo permite hasta 160cm de anchura y 80 de profundidad ya que se puede regular. Si en alg√∫n momento quiero ampliarla, solo tengo que comprar un tablero m√°s grande.

¬øEs √∫til? Yo si lo encuentro √∫til. El uso m√°s habitual es que si pasas muchas horas
sentado trabajando, el poder alternar a estar de pie es beneficioso para la salud. En mi
caso el mayor provecho que le saco es cuando est√°n los ni√±os peque√±os por casa mientras
trabajas que si necesitas estar pendiente, es m√°s facil si estoy de pie que sentado.

Tambi√©n, muchas veces tengo al m√°s peque√±o dormido en brazos o en la mochila porta-beb√©s, y aunque sentado
parece que aguanta, de pie puedo trabajar y el descansa mejor.

![standing desk con porta beb√©s](/images/workspace/porta-bebes.png)

### Silla

Si vas a pasar muchas horas sentado, lo mejor es
que te hagas con una buena silla. Que te sea c√≥moda, que no te da√±e la espalda, etc..

Esto es un mundo, desde sillas que valen 1,000‚Ç¨ hasta las de IKEA que puedes encontrar por 80‚Ç¨.
Yo opt√© por adquirir una de _Gamer_ aunque jugar juego poco (o nada), pero me resulta c√≥moda
para apoyar la cabeza, recoge los ri√±ones,... y el precio no es excesivamente caro.

Esta fue mi elecci√≥n: [DX Racer 5 Robas Lund](https://amzn.to/2QfjMbB). De momento estoy muy
contento con ella. Si buscas una silla c√≥moda e invertir dinero en ella, te la recomiendo.

### Monitor Panor√°mico

Tener un monitor externo siempre es una buena inversi√≥n. Si tienes que tener muchas ventanas y
aplicaciones abiertas, al final la pantalla del port√°til se te queda peque√±a.

Dud√© entre un monitor 4K grande u optar por un UltraWide 2K. Finalmente me decant√©
por el [UltraWide QHD de 3440x1440px de resoluci√≥n de Samsung, de 34"](https://amzn.to/2WdFPn2),
que adem√°s tiene conexi√≥n USB-C. Esto me permite que con un s√≥lo cable pueda tener el portatil
con bater√≠a y compartir pantalla con el monitor.

[![Monitor Ultra Wide QHD 34"](/images/workspace/monitor.jpg)](https://amzn.to/2WdFPn2)

Si te gusta, lo puedes conseguir, como yo en Amazon, [desde aqu√≠](https://amzn.to/2WdFPn2).

#### Brazo de monitor.

Para tener mayor movilidad para la pantalla,
yo compr√© [√©ste brazo](https://amzn.to/33oSd55) cuya relaci√≥n calidad/precio no est√° nada mal.
Los hay mejores y m√°s caros, pero este aguanta el peso incluso del ultrawide de 34" y estoy muy contento con √©l.

[![Brazo de Monitor](/images/workspace/brazo-monitor.jpg)](https://amzn.to/33oSd55)

Lo puedes conseguir desde Amazon [aqu√≠](https://amzn.to/33oSd55)

#### Hub Adaptador USB

El Macbook √∫nicamente tiene salidas USB-C, si quieres conectar un dispositivo USB 2.0 o 3.0,
Ethernet, HDMI, etc...vas a necesitar un HUB que te lo permita. El que utilizo es el
[Satechi USB C Hub](https://amzn.to/3ohblf1), tiene entrada de Ethernet para la conexi√≥n a internet, Salida HDMI, 4 salidas
USB, y tambi√©n entrada de tarjetas de memoria SD. De esta manera tengo el monitor ultrawide conectado a un USB-C del portatil, el cual me da
alimentaci√≥n y la salida DisplayPort, y en otra conexi√≥n USB-C tengo el adaptador donde conecto mi cable de red, el cable HDMI para el monitor
vertical, el micr√≥fono, la webcam, etc...

### Rat√≥n o _Mouse_

Como rat√≥n, he usado muchos a√±os el de Apple, pero en los √∫ltimos a√±o empec√© a tener algunas
molestias en la mu√±eca e invert√≠ en [el _mouse_ MX Master 2S de Logitech](https://amzn.to/3aVQ6It)
que actualmente dejo para mi [setup viajero](/mochila).

Actualmente utilizo el [MX Vertical](https://amzn.to/30GCcIa) de la misma marca. Tiene un dise√±o a primera vista un poco
rato, pero es muy c√≥modo de usar. Cuesta un poco hacerse a el, pero despues encuentras el resto de
ratones inc√≥modos. Funciona con Bluetooth, se carga con USB-C y es perfectamente compatible con los
Macbook de Apple.

![MX Vertical](/images/workspace/mx-vertical.png)

### Teclado Externo

![teclado externo](/images/workspace/keychron_k2.jpg)

Me llamaba la atenci√≥n tener un teclado mec√°nico. No te va a hacer mejor programador, pero ten√≠a la curiosidad de usarlo. Opt√© por la
marca Keychron ya que me gusta mucho su est√©tica. Y

Lo compr√© desde Aliexpress porque en su momento no estaba disponible el env√≠o a Espa√±a desde la web oficial debido a la pandemia, pero ya
[lo puedes conseguir en su web](https://www.keychron.com/products/keychron-k2-wireless-mechanical-keyboard).

El modelo que utilizo es el [K2 versi√≥n 2, con Layout estadounidense](https://www.keychron.com/products/keychron-k2-wireless-mechanical-keyboard). Uso ese layout, porque llevo unos 8 a√±os us√°ndolo y me resulta m√°s c√≥modo
para programar. Para tildes y la `√±`, al menos en macOS, hay una combinaci√≥n de teclas que te permite ponerlos. `option/alt + e` para las tildes
y `option/alt + n` para la `√±`. En cuanto a _switches_ utilizo los _Cherry-Brown_

El teclado es inal√°mbrico, por bluetooth y tambi√©n puedes conectar por cable USB-C.

En este v√≠deo puedes ver una review que hice.

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=BUjd4Nhl6Fg)
/>

### Auriculares

Unos buenos auriculares son una buena inversi√≥n. Particularmente me gustan los de diadema y
con cancelaci√≥n de ruido. El sonido se escucha mejor y si necesitas un poco de concentraci√≥n
y aislarte del ruido externo.

Los que tengo actualmente son los [Bose 700](https://amzn.to/2xG5f2t). No son econ√≥micos
precisamente, pero si aprecias una buena cancelaci√≥n de ruido y una buena calidad de sonido,
te los recomiendo. Si no, siempre puedes probar la [versi√≥n anterior](https://amzn.to/2x1z6Sp)
que ahora est√° [rebajada de precio](https://amzn.to/2x1z6Sp) y que tambi√©n he utilizado.

[![Bose 700](/images/workspace/bose700.jpg)](https://amzn.to/2xG5f2t)

Como detalle, son recargables con USB-C, y una bater√≠a completa dura 14-15 horas. Para subir el
volumen y pasar de canci√≥n, lo puedes hacer con un simple gesto en el auricular derecho.
Parece una tonter√≠a, pero te acostumbras y luego no sabes hacerlo de otra manera üòÖ

### Webcam y C√°mara

Para videoconferencias o grabar videos, es recomendable tener una buena webcam. Las que traen
integradas los Macbook suelen estar bien, y son suficientes, pero te limitan a donde tengas
el _laptop_ colocado.

En mi caso, tengo una [Logitech c920](https://amzn.to/2U8392L), Graba a 1080HD y si la utilizas para _livecoding_ o
Videoconferencias por Hangouts, Meet, Skype, Zoom, etc.. te sirve de sobra y est√° muy bien de precio.
[√âste directo](https://www.youtube.com/watch?v=YF0_UuckZOg), est√° grabado con ella.

[![Logitech c920 HD](/images/workspace/logi-c920.jpg)](https://amzn.to/2U8392L).

Para los v√≠deos de [Youtube](https://www.youtube.com/carlosazaustre?sub_confirmation=1) y streamings en
[Twitch](https://www.twitch.tv/carlosazaustre), utilizo una c√°mara digital, en concreto la [Sony Alpha 6000](https://amzn.to/3ITpPeT).
Para esto me estuve informando ya que no todas las c√°maras digitales sirven para hacer streaming. Tienes que tener en cuenta que tengan las siguientes
caracter√≠sticas:

- Que no tenga un modo reposo, ya que necesitas que la c√°mara est√© siempre encendida.
- Que tengan una salida HDMI limpia, es decir que no haya marcos, informacion, etc... en la imagen.
- Que soporte una bateria "dummy".

Mirando mucho, parece que SONY es buena marca para esto. Canon me gusta mucho, pero sus c√°maras est√°n m√°s pensadas para fotograf√≠a. En Sony
puedes ir al modelo anterior, la 5400 que tambi√©n sirve. Yo opt√© por la 6000 porque en el momento que la compr√© ten√≠an pr√°cticamente el mismo precio.

Para sujetarla a la mesa y que no ocupe mucho espacio, utilizo el [Master Mount L](https://amzn.to/3GmCYLU) de ElGato. Es un set de brazos que anclas a la mesa y puedes distribuir,
sin que ocupe el espacio que tiene un tr√≠pode, por ejemplo.

![C√°mara Sony a6000 con ElGato Master Mount](/images/workspace/elgato_master_mount.png)

### Micr√≥fono

Si vas a grabar videos, o hacer directos, y no puedes invertir mucho, invierte antes en un buen micr√≥fono que en una c√°mara.
Un buen sonido se agradece m√°s que una buena calidad de imagen.

El micr√≥fono que adquir√≠ fue el [RODE NT](https://amzn.to/2QhH00Y) que se conecta por USB, eso me permite conectarlo
directamente al ordenador sin necesidad de una consola, conectores especiales, etc...

Hay [micr√≥fonos mucho mejores](https://amzn.to/2JGUcMI), pero la calidad no es algo que haga que este micr√≥fono quede desmerecido. Adem√°s necesitar√≠as de
[amplificador y de consola](https://amzn.to/2JGUfrS) para poderlo conectar al PC/port√°til, por lo que el precio se disparara y el n√∫mero de "cacharros" se multiplica.

[![Rode NT USB](/images/workspace/rode-nt-usb.jpg)](https://amzn.to/2QhH00Y)

Si te interesa, lo compr√© desde [aqu√≠](https://amzn.to/2QhH00Y). Estoy muy contento con el.

Para utilizar de una manera m√°s c√≥moda el micr√≥fono en el escritorio, adquir√≠ un brazo plegable y un adaptador.
De esta manera puedo tener el micro cerca de la boca, para mejor sonido, y as√≠ tener espacio para escribir y usar el rat√≥n

- **Brazo**: [Neewer - Soporte de Brazo de Tijera Ajustable para Micr√≥fono,](https://amzn.to/33i2Iav)
- **Soporte**: [Rode Soporte para micr√≥fono NT de USB](https://amzn.to/2wcqMiG)

Y esto es todo. ¬øQu√© es lo que m√°s valoras de tu espacio de trabajo? D√©jalo en los comentarios üôÇ

</article>

---

<article slug="acortador-urls" date="2021-07-16" url="https://carlosazaustre.es/blog/acortador-urls">

# C√≥mo hacer un acortador de URLs con Next.js y Prisma

**Fecha:** 2021-07-16
En este art√≠culo aprender√°s a crear un acortador de urls, desde cero y paso a paso.

Un acortador es un servicio que posiblemente ya
hayas utilizado, como por ejemplo _bit.ly_. Sirve para, dada una URL, nos genera una URL m√°s corta que podemos utilizar para
ahorrarnos caracteres o si no tenemos acceso a las anal√≠ticas de la web en cuesti√≥n, saber cuantos clicks se han hecho
desde determinado enlace.

Para ello vamos a utilizar las siguientes tecnologias:

- React / Next.js como Framework.
- PostgreSQL como base de datos.
- [Prisma](https://www.prisma.io?utm_source=Prisma+Ambassador&utm_medium=Blog+post&utm_campaign=Prisma+AP+Carlos+Azaustre) como ORM para modear la base de datos y realizar las consultas.

Let's go!

### Generar el proyecto

Lo primero ser√° crear una aplicaci√≥n Next.js, para ello utilizaremos el CLI de Next.js:

```shell
$ npx create-next-app url-shortener
```

Esto nos instala las dependencias necesarias y nos crea una estructura de proyecto y carpetas de nuestra aplicaci√≥n.

Lo primero que vamos a hacer es crear el formulario de envio de URLs en la parte frontend de nuestra aplicaci√≥n.

Nos dirigimos al fichero `pages/index.js`, borramos lo que viene por defecto y lo dejamos as√≠:

```javascript
import Head from 'next/head'
import styles from '../styles/Home.module.css'

export default function Home () {
  return (
    <div className={styles.container}>
      <Head>
        <title>URL Shortener</title>
        <meta name='description' content='Generated by create next app' />
        <link rel='icon' href='/favicon.ico' />
      

      <main className={styles.main}>
        <h1 className={styles.title}>URL Shortener</h1>

        <p className={styles.description}>Acorta tus URLs aqu√≠</p>

        <div className={styles.grid}>
          <form className={styles.card}>
            <input type='text' className={styles.input} placeholder='URL' />
            <button className={styles.button}>Acorta</button>
          </form>
        </div>
      </main>
    </div>
  )
}
```

### Formulario de env√≠o de URLs

Vamos a hacer uso de algunos hooks de React para ayudarnos con el formulario de env√≠o de URLs.

```javascript
import { useRef, useState } from 'react'
```

Con useRef guardamos la referencia del input, y useState lo usaremos para almacenar la URL que se genera al presionar el bot√≥n.

```javascript
const inputRef = useRef()
const [shortURL, setShortURL] = useState('')
```

Actualizamos el formulario aplicando estas variables:

```javascript
<input
  ref={inputRef}
  className={styles.input}
  type="text"
  placeholder="URL"
/>
<button className={styles.button}>Acorta</button>
<span className={styles.input}>{shortURL}</span>
```

Creamos una funci√≥n para manejar el estado de 'on submit' del firmulario. Basicamente lo que haremos es recoger el
valor de la URL del input y crear nuestra URL corta. Lo podr√≠amos hacer en local, pero lo ideal es que guardemos estos valores en una base de datos
para que persistan y por tanto se pueda utilizar como un servicio.

A√±adimos lo siguiente al formulario:

```javascript
<form className={styles.card} onSubmit={handleSubmit}>
  ...
</form>
```

Y creamos la funci√≥n:

```javascript
const handleSubmit = e => {
  e.preventDefault()
  const url = inputRef.current.value
  //TODO: Peticion al API
}
```

### Servicio REST para crear la URL corta

Continuamos, y vamos a crear el servicio que nos crea la URL corta, lo almacena en la base de datos y la env√≠a al frontend.
Para ello vamos a la carpeta `pages/api` y creamos un nuevo fichero, llamado por ejemplo `shortUrl.js`

Ahi creamos una _funci√≥n serverless_ que consumiremos via AJAX y tiene la siguiente pinta:

```javascript
export default async function handler (req, res) {
  const { url } = req.body
  const shortUrl = Math.random()
    .toString(36)
    .substr(2, 6)

  res.status(200).send({ url, shortUrl })
}
```

Tomamos la url del cuerpo de la petici√≥n que ahora implementaremos y generamos un string de 5 caracteres aleatorios que nos
servir√° como la URL corta. Antes de hacer nada con la base de datos, enviamos la respuesta y probamos a ver si todo llega y se genera bien.

Volvemos a `pages/index.js` y ahora vamos a hacer una petici√≥n fetch a la URL `api/shortUrl` que corresponde con la funci√≥n que acabamos de crear.

```javascript
const handleSubmit = e => {
  e.preventDefault()
  const url = inputRef.current.value

  fetch('/api/shortUrl', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({ url })
  })
    .then(res => res.json())
    .then(data => {
      console.log(data)
    })
}
```

Si probamos esto, vemos que la consola muestra que le llega la respuesta con la URL enviada y la ShortURL generada.

![Console.log mostrando los datos recibidos](/images/acortador-urls/url-shortener-1.png)

Podemos incluso hacer uso de useState y dejar ya la URL corta lista para usar:

```javascript
...
 .then(data => { setShortURL(data.shortUrl) });
```

Y asi al generarse, la funci√≥n `setShortUrl` la coloca en el elemento `span` que teniamos:
![setState colocando la respuesta recibida](/images/acortador-urls/url-shortener-2.png)

### Almacenamiento en base de datos, con Prisma

Todo esto est√° muy bien, pero si esto lo queremos llevar a producci√≥n y que las URLs cortas se queden almacenadas
y asi poderlas usar apropiadamente necesitamos persisitir todo esto.

Vamos a utilizar PostgreSQL para almacenar las URLs cortas y [Prisma como ORM](https://www.prisma.io?utm_source=Prisma+Ambassador&utm_medium=Blog+post&utm_campaign=Prisma+AP+Carlos+Azaustre) para facilitarnos
la creaci√≥n de las tablas y las consultas SQL.

Primero necesitamos la base de datos. Yo voy a usar PostgreSQL en local, pero puedes utilizar
servicios cloud como [Digital Ocean](czstr.link/zipuc3s), Amazon RBD, Google Cloud SQL, Supabase, etc... que ofrecen
"SQLs as a Service", lo unico que necesitas es una 'URL String' como la siguiente:

```shell
postgresql://carlosazaustre:carlosazaustre@localhost:5432/links_test?schema=public"
```

Donde:

- `carlosazaustre:carlosazaustre` es mi user y password en local para la base de datos.
- `localhost` es el host de mi servidor local.
- `5432` es el puerto de mi servidor local.
- `links_test` es el nombre de mi base de datos.

Este url string lo necesitaremos dentro de poco, antes, vamos a instalar Prisma:

```shell
$ npm install -D prisma
$ npm install @prisma/client
```

Una vez instalado, corremos el siguente comando para iniciar el CLI de Prisma y que nos genere,
el archivo de Schemas:

```shell
$ npx prisma init
```

Esto nos crea entre otras cosas el fichero `prisma/schema.prisma` donde se indica el motor de base de datos y los modelos
que vamos a emplear.
editamos ese fichero con lo siguiente:

```javascript
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Link {
  id         Int       @id @default(autoincrement())
  url        String    @unique
  createdAt  DateTime  @default(now())
  shortUrl   String    @unique
}
```

Hemos creado el modelo `Link` que mapear√° a una Tabla SQL, con un id autoincremental,
la url que pasamos por formulario, la shortUrl que generamos y la fecha de creaci√≥n que
lo hace de forma autom√°tica.

Ahora abrimos el fichero `.env` para colocar el URL string de conexi√≥n a la base de datos.

> Este fichero no debe subirse al repositorio ya que tu usuario y contrase√±a quedar√≠an expuestos.

```shell
DATABASE_URL="postgresql://carlosazaustre:carlosazaustre@localhost:5432/_test?schema=public"
```

Con todo esto, ejecutamos los siguientes comandos que generar√°n las instrucciones SQL para crear las
tablas en la base de datos.

```shell
$ npx prisma generate
$ npx prisma migrate dev --name init
$ npx prisma db push
```

Si accedemos por terminal a PostreSQL, vemos la base de datos creada y la tabla Links:

```shell
$ psql links_test
links_test-# \d
                    List of relations
 Schema |        Name        |   Type   |     Owner
--------+--------------------+----------+----------------
 public | Link               | table    | carlosazaustre
 public | Link_id_seq        | sequence | carlosazaustre
 public | _prisma_migrations | table    | carlosazaustre
(3 rows)
```

Listo, ya podemos hacer uso de Prisma para almacenar los datos en Postgres. Vayamos a nuestro fichero `pages/api/shortUrl.js` y
modifiquemos la funci√≥n _serverless_.

```javascript
import { PrismaClient } from '@prisma/client'

export default async function handler (req, res) {
  const prisma = new PrismaClient()
  const { url } = req.body
  const shortUrl = Math.random()
    .toString(36)
    .substr(2, 6)

  try {
    const data = await prisma.link.create({
      data: { url, shortUrl }
    })

    prisma.$disconnect()

    return res.status(200).send(data)
  } catch (error) {
    console.log(error)
    return res.status(500).send(error)
  }
}
```

Importamos el cliente Prisma, y con el metodo `prisma.link.create` creamos un nuevo registro en la tabla "Links", que consta
de una url y una shortUrl. ya que el Id y la fecha se autogeneran al momento de crear.

![URL corta enviada al frontend](/images/acortador-urls/url-shortener-3.png)
![Registro almacenado en la base de datos](/images/acortador-urls/url-shortener-4.png)

Una vez creado, mandamos la respuesta al frontend y como ya tenemos la petici√≥n fetch implementada, todo deber√≠a funcionar y recibir
la URL corta y esta quedarse almacenada en la base de datos

### Redirecci√≥n a la URL original

Ahora nos queda la funcionalidad mas importante y es, que cuando pongamos una URL corta, esta redirija a la URL original.
¬øC√≥mo hacemos esto? Pues con dos propiedades de Next, es muy sencillo.

Primero de todo vamos a crear una ruta din√°mica. En Next se hace creando un fichero en la carpeta `pages` con el nombre entre
corchetes. Tal que as√≠:

```shell
pages/[shortId].js
```

Con esto indicamos a Next que la ruta ser√° din√°mica, y el par√°metro o nombre de la ruta, se recoge en la variable `params.shortId`

> Puedes llamarlo `shortId` o como quieras.

Implementamos la ruta din√°mica en el fichero `pages/[shortId].js` creando un componente muy simple ya que nunca se
renderizar√° esta parte

```javascript
export default function ShortIdPage () {
  return <div>ShortID Redirect</div>
}
```

Lo interesante viene ahora. Usamos la funci√≥n de Next `getServerSideProps` para transformar esta "p√°gina" en una p√°gina
renderizada desde el servidor (_SSR - Server Side Renderer_) Aqu√≠ tomaremos el valor dinamico de la ruta, a trav√©s del objeto `params`, y
este lo utilizaremos para hacer una query a nuestra base de datos y que nos devuelva el registro para el que coincida ese `shortId`.

```javascript
import { PrismaClient } from "@prisma/client";

...

export async function getServerSideProps({ params }) {
  const prisma = new PrismaClient();
  const { shortId } = params;

  const data = await prisma.link.findUnique({
    where: { shortUrl: shortId },
  });
```

Esta query a la base de datos la podemos colocar ahi, porque eso es c√≥digo que no viaja al cliente, se hace en el lado del servidor.
Aunque veas c√≥digo React ahi, es la peculiaridad que tiene Next, que es un framework que junta ambos mundos, el Frontend y el Backend y
a veces es dificil de distinguir.

Ahora necesitamos hacer que la p√°gina redirija. Para ello usaremos la propiedad `redirect` que nos proporciona Next para que ocurra:

```javascript
if (!data) {
  return {
    redirect: { destination: '/' }
  }
}

return {
  redirect: {
    destination: data.url
  }
}
```

Si la `data` recibida no contiene nada, redirigimos por defecto a la ruta raiz, pero si el objeto data, contiene una URL (la que teniamos
almacenada en la DB) lo que hacemos es que redirija a ella.

Este es el fichero `pages/[shortId].js` completo:

```javascript
import { PrismaClient } from '@prisma/client'

export default function ShortIdPage () {
  return <div>ShortID Redirect</div>
}

export async function getServerSideProps ({ params }) {
  const prisma = new PrismaClient()
  const { shortId } = params

  const data = await prisma.link.findUnique({
    where: { shortUrl: shortId }
  })

  prisma.$disconnect()

  if (!data) {
    return {
      redirect: { destination: '/' }
    }
  }

  return {
    redirect: {
      destination: data.url
    }
  }
}
```

### C√≥digo del proyecto

[Aqu√≠ tienes el repositorio en **GitHub**](https://github.com/carlosazaustre/url-shortener) con todo el c√≥digo visto en el tutorial. Por si quieres revisarlo.

Y con esto ya tendr√≠as tu propio acortador de URLs. Necesitas tener la Base de datos en producci√≥n. Puedes elegir como digo al principio
cualquier servicio Cloud como [Digital Ocean Databases](czstr.link/zipuc3s), Amazon RDS, Google Cloud SQL, Supabase, PlanetScale, etc..., y subir el
c√≥digo tambi√©n a producci√≥n, puedes hacerlo en Vercel, Heroku, ... donde prefieras.

Yo mismo tengo un servicio de [acortador de URLs](https://czstr.link) en producci√≥n, siguiendo este mismo c√≥digo, pero a√±adi√©ndole autenticaci√≥n con Auth0 y mejor estructurado
.
El c√≥digo es _Open Source_ y lo puedes ver [en este otro repositorio de GitHub](https://github.com/carlosazaustre/czstr.link), y el servicio en producci√≥n lo tienes en [czstr.link](https://czstr.link)

¬°Espero que te haya gustado y servido! Comp√°rtelo con tus amigos y si√©ntete libre de hacer pull requests para mejorar este tutorial.

</article>

---

<article slug="mochila" date="2020-08-09" url="https://carlosazaustre.es/blog/mochila">

# Un Setup en tu mochila

**Fecha:** 2020-08-09
Tener un setup para trabajar en remoto desde cualquier sitio
se ha convertido en algo bastante habitual hoy en d√≠a.

Suelo trabajar desde casa y mi espacio de trabajo en ese sentido es bastante fijo. [En otro art√≠culo comparto como es](/workspace). Pero cuando viajo tengo una serie de dispositivos que me ayudan a mantener un poco ese "entorno".

![Traveler Setup](/images/mochila/travelling-setup.jpg)

El ordenador port√°itl o _latptop_ es mi principal herramienta de trabajo. Mis prioridades son tenerlo bien protegido y poderlo transportar de una forma apropiada.

A continuaci√≥n te cuento que mochila llevo actualmente a mis espaldas en el d√≠a y todo lo que suelo llevar en ella.

## üéí Mejor mochila para el port√°til.

Anteriormente ten√≠a una [Evecase que compr√© en Amazon](http://www.amazon.es/gp/product/B00YB8IND8/ref=as_li_ss_tl?ie=UTF8&camp=3626&creative=24822&creativeASIN=B00YB8IND8&linkCode=as2&tag=pa0f-21). No estaba nada mal y la verdad es que segu√≠a como nueva cuando la actualic√©, pero encontr√© que se me quedaba peque√±a si **quer√≠a transportar algo de equipaje cuando viajaba**.

Eso me llev√≥ a actualizarla y adquirir una un poco m√°s grande que me sirviera para el d√≠a a d√≠a as√≠ como para cuando estoy de viaje sin necesidad de tener que llevar una maleta adicional si el viaje es para varios d√≠as.

La elegida fue una **[Thule Crossover de 25 litros](https://amzn.to/2PdXRzq)**. Algo que siempre me gusta de una mochila es que tenga diferentes apartados para poder organizar mis cosas al gusto. √âsta en concreto tiene 4 apartados:

[![Comprar mochila para port√°til Thule Crossover de 25 Litros](/images/mochila/mochila-thule-carlos-azaustre.jpg)](https://amzn.to/2PdXRzq)

- **Principal**, con un peque√±o espacio acolchado para port√°til de hasta 15" (puede que quepa algo m√°s ), otro peque√±o espacio para una tablet o cuaderno (Cabe hasta un iPad Pro), y un espacio donde he llegado a colocar mi equipaje para una semana.

- **Secundario**, con una rejilla y varios bolsillos donde pongo los cables, baterial portatil, etc...

- **Bolsillo _SafeZone_**. Un sitio curioso y reforzado donde puedes llevar tus gafas, tel√©fono, etc. Lo que quieras que est√© protegido ante golpes y que tambi√©n puedes bloquear as√≠ como desmontar si lo deseas..

- **Bolsillo exterior**, d√≥nde puedes colocar algo que necesites a primera mano. Para viajar por ejemplo es un buen sitio donde colocar los billetes de avion, pasaporte, etc.. o el mismo Kindle si quieres tenerlo a mano.

Adcionalmente tiene un par de bolsillos de malla en los laterales ideales para llevar un paraguas plegable o una botella para l√≠quidos.

La **mochila es impermeable** y el material del tejido tiene un tacto agradable. Parece que no es sencillo de manchar, lo cual me encanta. Te lo digo que tengo un perro que suelta una cantidad de pelo considerable al d√≠a üê∂

Las correas para los hombros tienen uno de los mejores materiales que he probado. No se clavan si llevas mucho peso y se las ve resistentes. Adem√°s tiene un enganche a la altura del pecho que te permite ajust√°rtela mejor.

Puedes comprar la [mochila Thule Crossover 25L en √©ste enlace de Amazon](https://amzn.to/2PdXRzq).

Tambi√©n te recomiendo [estos "pa√±os" que sirven tanto para limpiar la pantalla como para evitar que la suciedad de las teclas se quede marcada](https://amzn.to/3aa9UZv) en la misma cuando llevas el portatil cerrado.

## Qu√© llevo en la mochila

### Port√°til

Lo primero y principal, mi arma de trabajo üíª.

A fecha de actualizaci√≥n de este post tengo un **MacBook Pro de 15" del 2018**

- Sistema: **macOS Catalina (v10.15.5)**
- Procesador: **Intel Core i7 (8¬™ Generaci√≥n - 6 N√∫cleos) 2,2GHz**
- Memoria: **16GB 2400 MHz DDR4**
- T.Gr√°fica: **Radeon Pro 555x 4 GB**
- Almacenamiento: **512 GB SSD**

![ordenador portatil carlos azaustre](/images/mochila/macbookpro15.jpg)

Por ahora sigo contento con Mac porque de todos los port√°tiles que he tenido (Un _Toshiba_, un _Sony Vaio_, y el _Macbook_) Mac es el que menos guerra me ha dado. Antes de este tuve durante 7 a√±os un MacBookPro de 13".

### Elevador portatil

Es uno de los mejores art√≠culos que tengo. El **[Nexstand K2](https://amzn.to/2OH79mF)**.

[![Nextand](/images/mochila/nexstand.jpg)](https://amzn.to/2OH79mF)

Super port√°til, ya que una vez plegado no ocupa pr√°cticamente nada y es bastante regulable para que puedas ajustarlo a tu altura deseada.

Lo recomiendo mil veces. Aqu√≠ tienes una review que hice hace tiempo.

[Puedes adquirirlo desde aqui](https://amzn.to/2OH79mF)

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=gzdBxql5QY4)
/>

### Teclado externo

Tras tener una temporada uno de "marca blanca" que me di√≥ buenos resultados, los √∫ltimos meses me daba bastante problemas de conexi√≥n y al final tuve que prescindir de √©l por el tiempo que perd√≠a d√≠a a d√≠a reconfigurandolo.

[![Magic Keyboard](/images/mochila/apple-magic-keyboard.jpg)](https://amzn.to/2OCQQam)

Finalmente opt√© por adquirir uno [de Apple](https://amzn.to/2OCQQam) y aunque ha sido un gasto importante, ahora mismo no tengo problemas de conexi√≥n cando lo utilizo y al final no gasto tanto tiempo en ello.

Se recarga con cable _lighting_, por lo que te puedes olvidar de utilizar pilas.

### Rat√≥n

En mi setup habitual utilizo el Logitech [MX Vertical](https://amzn.to/2DDyeXQ), pero cuando viajo me llevo (o dejo siempre en la mochila) mi anterior Logitech [MX Master 2S](https://amzn.to/3inpYdj). Si buscas un rat√≥n ergon√≥mico que no te destroce la mu√±eca, estos dos son los mejores para m√≠ üëå

[![Logitech MX Master 2S](/images/mochila/mxmaster2s.jpg)](https://amzn.to/3inpYdj)

### iPad Pro

Tengo un [iPad Pro](https://amzn.to/3ktTT5q) de los primeros que salieron, el de 13" con L√°piz. Habitualmente lo uso para consumir contenido pero cuando estoy de viaje me viene genial como segunda pantalla.

Con el modo _sidecar_ que incorpora macOS Catalina y iOS puedo extender mi pantalla sin cables (funciona v√≠a WiFi).

### Soporte iPad

Y para poder tener la pantalla del port√°til y la del iPad a la misma altura, tengo un conjunto de soporte m√°s tr√≠pode que tambi√©n sirve para tel√©fonos m√≥vil.

![Traveler Setup](/images/mochila/travelling-setup.jpg)

Te dejo aqu√≠ los enlaces

- [Mini Tr√≠pode universal MOVO](https://amzn.to/2DL0uYq)
- [Soporte adaptador para tr√≠pode (tablets/m√≥viles)](https://amzn.to/3ac3aKI)

### Router M√≥vil

Cuando viajo, lo m√°s normal es que no haya conexi√≥n a internet o √©sta sea muy lenta. Por eso suelo tirar de mi tarifa de datos 4G. Para no tener el tel√©fono m√≥vil a todo momento en modo _hubspot_ tengo un [router inal√°mbrico](https://amzn.to/30Hisnz) el cual le puedes insertar una tarjeta SIM y emite una red WiFi.

[![Router 4G](/images/mochila/router4g.jpg)](https://amzn.to/30Hisnz)

Funciona con bater√≠a que da para varias horas, pero si est√°s dentro de una casa, puedes tenerlo enchufado.

Como tarifa de datos, depende mucho, o uso un duplicado de tarjeta de mi propia SIM o un n√∫mero diferente para tener m√°s datos.

### Auriculares

Renov√© mis anteriores [Bos√© QuietComfort 35 II](https://amzn.to/2BeietF), por el nuevo modelo Bos√© 700.
[![auriculares-bose-700](/images/mochila/bose700.jpg)](https://amzn.to/3a9I5R0)

No son precisamente ec√≥n√≥micos, pero la inversi√≥n merece la pena. Son inal√°mbricos v√≠a Bluetooth, se cargan mediante USB-C y tienen 15 niveles de cancelacion de ruido. Tienen gestos mediante los cuales puedes subir/bajar el volumen, pasar de canci√≥n,... deslizando el dedo por el auricular derecho.

La verdad es que eliminan bastante el ruido de fondo, sirven muy bien para concentrarse adem√°s de que son bastante c√≥modos (mejor que los QC35 que tuve antes). Muy recomendados. [Puedes adquirirlos como yo a trav√©s Amazon](https://amzn.to/3a9I5R0).

### Bater√≠a Portatil

En estos tiempos de hoy en d√≠a, llevar tu _smarthphone_ cargado al 100% no significa que te vaya aguantar todo el d√≠a.

Twitter, Instagram, Youtube, Google Maps, Hacer fotos... todo consume bater√≠a y si est√°s de viaje o pateando la ciudad necesitas regargar pilas (nunca mejor dicho).

Para ello dispongo de esta [bater√≠a portatil de 26,800mAh](https://amzn.to/2PDl7bD) que me permite hasta 4 cargas de mi tel√©fono con una sola carga.

[![Bateria port√°til de 15000 mAh](/images/mochila/bateria-portatil.jpg)](https://amzn.to/2PDl7bD)

Eso si, llenar la bateria al completo te puede llevar toda la noche, pero la espera merece la pena. [Puedes comprarla aqu√≠ en Amazon](https://amzn.to/2PDl7bD)

### Kindle

El que tengo ahora mismo es mi 3er Kindle. Ahora tengo la [versi√≥n Paperwhite y con luz](https://amzn.to/2OHbLJA), lo que me permite tambien leer en la cama por la noche sin tener que dar la luz y molestar.

[![Amazon Kindle Paperwhite](/images/mochila/kindle.jpg)](https://amzn.to/2OHbLJA)

Se nota algo de diferencia en cuanto a la resoluci√≥n del texto pero a mi parecer tampoco es una diferencia abismal con la version "no retina" anterior.

Pero lo de la luz si que est√° bien adem√°s de que es t√°ctil y para introducir la contrase√±a del WiFi o buscar por el cat√°logo es mucho mejor que ir movi√©ndose con las flechas.

El Kindle lo utilizo mucho para libros de ficci√≥n o novelas, no para libros t√©cnicos (Para eso prefiero una tablet o iPad que es a color y me permite pasar de p√°gina m√°s rapidamente).

Desde que lo tengo no he vuelto a leer un libro de papel.

La lectura es muy c√≥moda, y la manejabilidad y portabilidad que te aporta un eReader frente a un libro gordo y pesado, no tiene precio.

[Puedes comprarlo aqu√≠.](https://amzn.to/2OHbLJA)

### Disco Duro Externo

Otra de mis renovaciones.

Actualmente dispongo de un **[Seagate de 2 TB](https://amzn.to/2MmCaQ8)** para almacenamiento, sobre todo de videos, fotos y copias de seguridad del Mac.

[![disco-duro-externo](/images/mochila/disco-externo.jpg)](https://amzn.to/2MmCaQ8)

Es bantante ligero y portatil, por lo que llevarlo en la mochila no supone peso extra. Si buscas uno te lo recomiendo. No he tenido ning√∫n problema por el momento.

### Botella de agua

[![Botella Termo Chilly's](/images/mochila/chilly-botella.jpg)](https://amzn.to/33J8owu)

Actualmente llevo esta [botella-termo de 500ml para agua, caf√© lo que surja](https://amzn.to/33J8owu). Mantiene las bebidas calientes 12h y las fr√≠as 24h, as√≠ que genial. La compr√© en color amarillo JavaScript üòÖ

### Smartphone

Mi tel√©fono actual es un **[Google Pixel 3 XL](https://amzn.to/3kuRuaA)**. Estoy contento con el y de momento no tengo previsi√≥n de actualizarlo. El anterior fue el Pixel XL y si lo renuevo ser√° por un Pixel 5 o el que salga. La c√°mara es una maravilla.

[![Pixel 3XL](/images/mochila/pixel3xl.jpg)](https://amzn.to/3kuRuaA)

Despues de utilizar ambos sistemas operativos, prefiero Android a iOS. Utilizo mucho los servicios de GSuite (Gmail, Calendar, etc...) y su integraci√≥n con Android es mucho mejor a mi parecer.

---

Y esto es b√°sicamente lo que suelo llevar en mi mochila. Sobre todo cuando viajo y llevo pr√°cticamente todo.

¬øTienes alg√∫n gadget favorito? Comparte en los comentarios tus preferencias y recomendaciones.

</article>

---

<article slug="travis-despliegue-integracion-continua" date="2020-02-29" url="https://carlosazaustre.es/blog/travis-despliegue-integracion-continua">

# C√≥mo configurar Travis como herramienta para Integraci√≥n y Despliegue continuo

**Fecha:** 2020-02-29
Integraci√≥n Continua o _Continuous Integration (CI)_ y el Despliegue Continuo o _Continuous Deployment_ son dos t√©rminos que suelen ser mencionados juntos. Se refiere a una serie de tareas repetitivas como son testing, building y desplegar a producci√≥n una aplicaci√≥n/web/software.

Por qu√© esto es importante. Imagina que tienes el c√≥digo de tu app o librer√≠a _open source_ en Github, la gente la usa, descarga, prueba, etc... y en alg√∫n momento alguien hace un _fork_ y env√≠a una _pull request_ para a√±adir una nueva funcionalidad, corregir alg√∫n bug, etc... De primeras, hacer esto manual solo te lleva un poco de tiempo, pero a la larga vas a querer automatizar esto, para centrarte en tu c√≥digo y delegar las tareas que puedan ser "programadas".

## C√≥mo funciona

### Integraci√≥n Continua (CI)

Este proceso sirve para cuando un determinado software est√° desarrollado por varias personas y queremos automatizar su integraci√≥n siguiendo el siguiente procedimiento:

1 - Subimos nuestros cambios en una rama a Github
2 - Un proceso se dispara
3 - La rama es descargada, se construye el software, y se corren los tests.
4 - El resultado se env√≠a a d√≥nde decidamos.

Si los test son OK, esto significa que el c√≥digo puede ser _mergeado_ de forma segura.

### Despliegue Continuo (CD)

Este proceso se utiliza mayormente cuando mergeamos una rama a m√°ster:

1 - Se corren los test (idealmente de tipo E2E y m√°s exahustivos que los que se hacen en CI)
2 - Se construye y dependiendo del tipo (app, librer√≠a, etc...) se har√° una cosa u otra.
3 - Se despliega a un entorno de producci√≥n o pre-producci√≥n (_staging_, QA,...)

## C√≥mo configurar este proceso

Hay varias herramientas y _SaaS_ que te permiten configurar un entorno de integraci√≥n y despliegue continuo. En este tutorial te voy a ense√±ar a configurarlo con Github y [Travis CI](https://travis-ci.org)

![logo travis](/images/travis-despliegue-integracion-continua/logo-travis.png)

### Repositorio

Lo primero que necesitas es tener to c√≥digo en un repositorio. Si tu proyecto es _open source_, puedes usar [Github](https://github.com) y dejarlo libre sin costo, y eso te permite usar la versi√≥n _Open_ de Travis, para repositorios p√∫blicos.

### Conectar Travis CI a tu repositorio

Una vez tengas tu repo creado, dir√≠gete a [Travis-CI](https://travis-ci.org) e inicia sesi√≥n con tu cuenta de Github, esto permite a Travis ver tu lista de repos.
Busca el que quieres configurar y activalo con el switch a verde y despues clicka en _settings_.

![lista de repos](/images/travis-despliegue-integracion-continua/travis-01.png)

En las _settings_ te recomiendo que actives las opciones _Build pushed branches_ y _Build pushed pull requests_ para que Travis se ejecute en las PR que generes o te env√≠e y tambien cuando √©stas sean aceptadas y mergeadas a master.

### Fichero de configuraci√≥n

Aqu√≠ es donde entra la magia. Con un simple fichero que llamaremos `.travis.yml` y alojaremos en la raiz de nuestro proyecto, vamos a decirle a Travis lo que vamos a hacer. Al principio es un poco lioso, pero voy a explicarte paso a paso como hacerlo:

Veamos un ejemplo muy simple:

```yaml
language: node_js
node_js: "12"
script:
  - "npm run lint"
  - "npm test"
  - "npm run build"
```

¬øQu√© estamos diciendo aqu√≠?

- `language`: Si trabajamos con Javascript, lo m√°s com√∫n es decirle que es `node_js` y as√≠ Travis crea una _maquina virtual_ preparada para correr Node.js
- `node_js`: C√≥mo estamos usando Node/Javascript, tenemos que indicar que versi√≥n o versiones nos interesa que se pruebe nuestro software. En este caso le decimos que lo pruebe en `Node.js v12`
- `script`: Aqu√≠ pondremos la series de comandos que queramos que se ejecuten en el entorno que crea Travis. como ejemplo he puesto un `npm run lint` que corra ESLint por ejemplo, `npm test` para que ejecute una bateria de tests que tengamos preparados, y por √∫ltimo `npm run build` que contruir√≠a la versi√≥n de producci√≥n de nuestra app/librer√≠a o software en general.

Si alguno de estos scripts fallase, Travis abortar√≠a el proceso. S√≥lo sera OK si todos los scripts no reportan ning√∫n fallo.

### El proceso de integraci√≥n continua.

Todo este proceso es para asegurarnos de que no rompemos nada cuado estamos listos para _mergear_.
Para mi caso particular, [este blog](/gatsby-deploy-firebase) estoy usando `yarn`, por tanto, para poder hacer m√°s r√°pidas las integraciones, podemos cachear el directorio `yarn` o `npm`, o cualquier otro _package manager_ que utilices. Lo hacemos as√≠:

```yaml
language: node_js
node_js: "12"
cache: yarn
script:
  - "npm run lint"
  - "npm test"
  - "npm run build"
```

Ahora, cada vez que hagas un cambio y hagas _push_, Travis disparar√° el proceso de _build_

![Travis haciendo el build](/images/travis-despliegue-integracion-continua/travis-build.png)

Al haber configurando anteriormente el repositorio en Travis, al crear la _pull request_, nos aparecer√° lo siguiente:

![Travis informando en Github](/images/travis-despliegue-integracion-continua/travis-github-info.png)

Dependiendo de las restricciones que pongas al proyecto, yo por ejemplo tengo puedo no poder mergear si Travis no lanza un OK, podr√°s mergear o no.

![Travis da el OK, a mergear!](/images/travis-despliegue-integracion-continua/travis-github-ok.png)

En esta etapa, como hemos dicho anteriormente, es recomendable que se ejecuten todos los tests posible: unitarios, de integraci√≥n, etc... para asegurarnos de que todo est√° como queremos y no llevarnos sorpresas desagradables al subir a producci√≥n.

### El proceso de despliegue cont√≠nuo.

Hasta el momento hemos visto como asegurarnos de que la _pull request_ que hacemos, es "segura" que no rompe nada. Ahora vamos a ver como hacer un _merge_ en la rama principal y que esto se suba a producci√≥n.

Si por ejemplo como en [mi blog](/gatsby-deploy-firebase) queremos realizar el despliegue a Firebase, estos son los comandos que deber√≠amos a√±adir a nuestro fichero `yaml`:

```yaml
install:
  - yarn global add firebase-tools
after_success:
  - firebase deploy --token=${FIREBASE_API_TOKEN}
```

Aqu√≠ estamos instalando de forma global las `firebase-tools` en la m√°quina virtual que crea travis, para poder utilizar el comando `firebase` que nos permitir√° desplegar.

El token `FIREBASE_API_TOKEN` lo podemos configurar como variable de entorno en Travis dentro de la configuraci√≥n del proyecto.

![variables de entorno en travis](/images/travis-despliegue-integracion-continua/travis-env-vars.png)

El fichero `.travis.yml` tiene esta pinta hasta ahora:

```yaml
language: node_js
node_js: "12"
cache: yarn
script:
  - "npm run lint"
  - "npm test"
  - "npm run build"
install:
  - yarn global add firebase-tools
after_success:
  - firebase deploy --token=${FIREBASE_API_TOKEN}
```

Tal como est√° ahora, cada vez que hacemos _push_ de una rama que pasa los tests, estos cambios ser√°n desplegados en producci√≥n.

Pero... esto tiene un problema. Cualquiera que haga un _pull-request_, sin que lo aceptemos o mergeemos, si pasa los tests, se subir√° a producci√≥n de forma autom√°tica. ¬øPor qu√© es un problema? porque si, puede que pase los tests, pero se puede estar a√±adiendo algo o borrando que no queramos y necesitamos verificarlo.

Por tanto lo mejor es que la integraci√≥n y el despliegue est√©n separados.

### Jobs

Hay una funcionalidad en Travis, llamada _job_, es b√°sicamente un proceso que corre en la m√°quina virtual. Travis nos permite crear m√∫ltiples _jobs_ y definir etapas o _stages_ para cada uno de ellos. De esta manera podemos usar condicionales y operar con ellos seg√∫n nuestro inter√©s.

```yaml
language: node_js
node_js: 12
cache: yarn
jobs:
  include:
    - stage: test
      script:
        - "npm run lint"
        - "npm test"
        - "npm run build"
    - stage: deploy
      script:
        - yarn global add firebase-tools
        - firebase deploy --token=${FIREBASE_API_TOKEN}
```

¬øQu√© hemos cambiado? Hemos a√±adido la propiedad `jobs` con dos etapas: `test` y `deploy`
La primer ejecuta los test para asegurar la integraci√≥n y la segunda el despligue a Firebase.

Con esto hemos separado los dos procesos, pero todav√≠a nos sigue pasando lo mismo que antes, por cada _PR_ se ejecutar√° todo y se desplegar√° si no hay errores.

Es momento de indicar que debe hacer cada etapa:

```yaml
stages:
  - name: test
    if: type = pull_request
  - name: deploy
    if: type = push AND branch = master
```

Esta nueva propiedad, `stages` nos ayuda a definir condiciones para ejecutar cada etapa de nuestra configuraci√≥n. S√≥lo queremos que ejecute la etapa de `test` si es una _pull request_, y que se ejecute el `deploy` si se trata de un _push_ a _master_ (el _merge_ del PR a _master_)

De √©sta forma nos aseguramos que √∫nicamente _pusheando_ una rama a nuestro repositorio en Github, nada se ejecutar√° hasta que no abramos una _pull request_, de igual manera, la etapa de `deploy` solo se va a ejecutar si es un _push a master_, condici√≥n que se cumple cuando mergeamos una _pull request_ aprobada y v√°lida.

As√≠ quedar√≠a al completo el fichero `.travis.yml`

```yaml
language: node_js
node_js: 12
cache: yarn
jobs:
  include:
    - stage: test
      script:
        - "npm run lint"
        - "npm test"
        - "npm run build"
    - stage: deploy
      script:
        - yarn global add firebase-tools
        - firebase deploy --token=${FIREBASE_API_TOKEN}
stages:
  - name: test
    if: type = pull_request
  - name: deploy
    if: type = push AND branch = master
```

## Resumen

Ahora ya sabes como configurar Travis en tu proyecto para tener CI/CD (Integraci√≥n y Despliegue cont√≠nuos) de manera que los tests se ejecuten cuando se abra una _pull request_, y una vez la aceptemos y Travis de el OK, poderla mergear en _master_ y desplegar los cambios en producci√≥n o el entorno que elijas.

</article>

---

<article slug="lazy-loading-image" date="2020-02-25" url="https://carlosazaustre.es/blog/lazy-loading-image">

# Lazy loading de im√°genes ya forma parte del est√°ndar HTML

**Fecha:** 2020-02-25
El pasado 12 de Febrero de 2020 el atributo `loading` para im√°genes e iframes se hizo por fin parte del est√°ndar HTML. Si bien ya se pod√≠a utilizar activando un par de _flags_ en el navegador Chrome, hasta ahora no formaba parte de las funcionalidades que soporta el navegador.

```
chrome://flags/#enable-lazy-image-loading
chrome://flags/#enable-lazy-frame-loading
```

## ¬øQue soporte tiene por los navegadores?

Ahora bien, aunque se trate de un est√°ndar HTML, todav√≠a no tiene el soporte de todos los navegadores
![can i use loading](/images/lazy-loading-image/lazy-loading-images-caniuse.png)
_Fuente: [caniuse.com](https://caniuse.com/#feat=loading-lazy-attr)_

Por lo que si lo quieres utilizar, todav√≠a necesitas de un _polyfill_ y un poco de JavaScript.

## C√≥mo utilizar lazy-loading nativo para im√°genes

Para utilizar el `lazy-loading` nativo de HTML, lo m√°s apropiado primero es detectar si el navegador soporta la funcionalidad. Si no lo hace, entonces recurr√≠amos a un script de terceros, librer√≠a o una implementaci√≥n propia en el caso de que queramos ofrecer la misma experiencia a todos los navegadores.

Para ello, con el siguiente peque√±o `script` realizamos la comprobaci√≥n:

```html
<script>
  if ("loading" in HTMLImageElement.prototype) {
    console.log("El navegador soporta `lazy-loading`...");
  } else {
    console.log("`lazy-loading` no soportado...");
  }
</script>
```

Si el navegador lo soporta, no tenemos m√°s que implementar el atributo `loading` dentro del tag `img` de HTML

```html
<img loading="lazy" src="https://placekitten.com/441/441" width="320" alt="" />
```

Aqu√≠ tienes un ejemplo llamando al api de `placekitten` para mostrar 50 im√°genes (de gatos). El c√≥digo HTML ser√≠a el siguiente:

```html
<!DOCTYPE html>
<html lang="es">
  <head>
    <title>Lazy Loading Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="UTF-8" />
  </head>

  <body>
    <img
      loading="lazy"
      src="https://placekitten.com/400/400"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/401/401"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/402/402"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/403/403"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/404/404"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/405/405"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/406/406"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/407/407"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/408/408"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/409/409"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/410/410"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/411/411"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/412/412"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/413/413"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/414/414"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/415/415"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/415/415"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/420/420"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/421/421"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/422/422"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/423/423"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/424/424"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/425/425"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/426/426"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/427/427"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/428/429"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/430/430"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/431/431"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/432/432"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/433/433"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/434/434"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/435/435"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/436/436"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/437/437"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/438/438"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/439/439"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/440/440"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/441/441"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/442/442"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/443/443"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/444/444"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/445/445"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/446/446"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/447/447"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/448/448"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/449/449"
      width="320"
      alt=""
    />
    <img
      loading="lazy"
      src="https://placekitten.com/450/450"
      width="320"
      alt=""
    />
    <script>
      if ("loading" in HTMLImageElement.prototype) {
        console.log("Browser support `loading`...");
      } else {
        console.log("Not supported");
      }
    </script>
  </body>
</html>
```

Si probamos este c√≥digo en un navegador, y abrimos las _Developer Tools_ en la pesta√±a de _Network_ veremos que las primeras son cargadas autom√°ticamente, pero a medida que hacemos _scroll_ por la p√°gina, el resto se va descargando poco a poco.

En √©ste v√≠deo te dejo una demo:

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=bRhdooBHqnc)
/>

## ¬øY si mi navegador no soporta el _lazy-load_ nativo?

Si el navegador a√∫n no implementa este nuevo est√°ndar, gracias a la comprobaci√≥n que hemos hecho antes, podemos hacer que se cargue una librer√≠a externa que act√∫e como _polyfill_ y permita recrear el _lazy-load_ veamos un ejemplo:

```html
<img data-src="image-gato1.jpg" loading="lazy" alt=".." class="lazyload" />
<img data-src="image-gato2.jpg" loading="lazy" alt=".." class="lazyload" />
<img data-src="image-gato3.jpg" loading="lazy" alt=".." class="lazyload" />

<script>
  if ("loading" in HTMLImageElement.prototype) {
    // Si el navegador soporta lazy-load, tomamos todas las im√°genes que tienen la clase
    // `lazyload`, obtenemos el valor de su atributo `data-src` y lo inyectamos en el `src`.
    const images = document.querySelectorAll("img.lazyload");
    images.forEach((img) => {
      img.src = img.dataset.src;
    });
  } else {
    // Importamos din√°micamente la libreria `lazysizes`
    let script = document.createElement("script");
    script.async = true;
    script.src =
      "https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.2.0/lazysizes.min.js";
    document.body.appendChild(script);
  }
</script>
```

En este ejemplo te habr√°s percatado de que en los tags `img` no tenemos el atributo `src` si no uno llamado `data-src` esto lo hacemos para que funcione tanto de forma nativa como para la librer√≠a `lazysizes` que busca la imagen dentro de ese _data-atribute_

Si quieres ser m√°s _fancy_ puedes recorrer a un _import_ din√°mico de √©sta manera:

```html
...
<script>
  (async () => {
    if ("loading" in HTMLImageElement.prototype) {
      const images = document.querySelectorAll("img.lazyload");
      images.forEach((img) => {
        img.src = img.dataset.src;
      });
    } else {
      // Importamos din√°micamente la libreria `lazysizes`
      const lazySizesLib = await import("/lazysizes.min.js");
      // Se inicia lazysizes (lee el atributo `data-src` y la clase `lazyload`)
      lazySizes.init();
    }
  })();
</script>
```

## Atributo _loading_

El atributo loading permite al navegador retrasar la carga de im√°ges y de _iframes_ que est√°n fuera de pantalla, hasta que el usuario haga _scroll_ cerca de ellas. √âste atributo soporta 3 valores:

- `lazy`: Retrasa la carga de la imagen hasta que el usuario alcanza con el _scroll_ una distancia calculada desde el _viewport_.
- `eager`: Carga la imagen inmediatamente, sin importar donde est√° situada o colocada en la pantalla. En resumen, no hace _lazy-loading_.
- `auto`: Implementa el comportamiento por defecto del navegador para la carga de las im√°genes. En resumen, poner `auto` es lo mismo que no poner el atributo `loading`.

### Distancia calculada

Las imag√©nes que est√°n situadas _above the fold_, es decir, en la vista actual sin hacer _scroll_ son cargadas autom√°ticamente. Las que est√°n por debajo no se cargan hasta que el usuario llega a ellas haciendo _scroll_.

Esta distancia calculada depende de varios factores: El tipo de recurso (si es una imagen o un iframe con un video por ejemplo), Si est√° habilitado el modo _lite_ en Chrome par Android, el tipo de conexi√≥n (3G, 4G, HSDPA,...)

## ¬øEl nuevo atributo `loading` solo sirve para im√°genes?

El nuevo atributo no s√≥lo sirve para el tag `img` de HTML. Tambi√©n se puede utilizar para im√°genes con `srcset`, dentro de `picture` y en `iframes`. Aqu√≠ tienes algunos ejemplos:

```html
<!-- Lazy-loading en im√°genes con picture. Se implementa dentro de <img> como fallback. -->
<picture>
  <source
    media="(min-width: 40em)"
    srcset="img-big.jpg 1x, img-big-hd.jpg 2x"
  />
  <source srcset="img-small.jpg 1x, img-small-hd.jpg 2x" />
  <img src="img-fallback.jpg" loading="lazy" />
</picture>

<!-- Lazy-loading en im√°genes que tienen un srcset -->
<img
  src="small.jpg"
  srcset="img-large.jpg 1024w, img-medium.jpg 640w, img-small.jpg 320w"
  sizes="(min-width: 36em) 33.3vw, 100vw"
  loading="lazy"
/>

<!-- Lazy-loading en iframes  -->
<iframe src="video-player.html" loading="lazy"></iframe>
```

## Conclusi√≥n

Si tu aplicaci√≥n se basa en una alta carga de im√°genes, como puede ser _Instagram_, √©sta funcionalidad te va a permitir ahorrar mucho tiempo de carga y que la experiencia de usuario sea buena. A√∫n queda recorrido para que sea implementada nativamente en todos los navegadores pero mientras tanto podemos usar un _polyfill_ si la funcionalidad no est√° en el navegador.

### Referencias

Te dejo una lista de enlaces con m√°s referencias sobre esto:

- [HTML Spec: Image Loading Attribute](https://html.spec.whatwg.org/multipage/embedded-content.html#attr-img-loading)
- [Native lazy-loading for the web, (web.dev)](https://web.dev/native-lazy-loading/)
- [MDN: WebPerformance, Lazy Loading](https://developer.mozilla.org/en-US/docs/Web/Performance/Lazy_loading#Images)
- [Native image lazy-loading for the web!, (Addy Osmani)](https://addyosmani.com/blog/lazy-loading/)

</article>

---

<article slug="gatsby-deploy-firebase" date="2020-02-13" url="https://carlosazaustre.es/blog/gatsby-deploy-firebase">

# C√≥mo desplegar tu sitio en Gatsby a Firebase Hosting

**Fecha:** 2020-02-13
Recientemente he migrado este blog a Gatsby para hacerlo m√°s _serverless_ y mi intenci√≥n era subirlo a un CDN e implementar _integraci√≥n continua_ para olvidarme de desplegar manualmente. En este art√≠culo te explico c√≥mo lo he montado yo con Firebase Hosting y Travis. ¬°Vamos a ello!

## Instalar Gatsby e iniciar proyecto

Lo primero es tener un sitio, o blog, con Gatsby. En futuros posts hablar√© sobre el y c√≥mo he configurado mi sitio. En √©ste art√≠culo vamos a centrarnos en el despliegue continuo, por ello voy a tomar de ejemplo el [gatsby-starter-blog](https://www.gatsbyjs.org/starters/gatsbyjs/gatsby-starter-blog/) como punto de partida.

Para ello, primero necesitamos tener instalado `node.js` en nuestro equipo para poder instalar el CLI de gatsby de forma global con:

```shell
$ npm install -g gatsby-cli
```

Una vez instalado podemos usar el siguiente comando para iniciar un nuevo proyecto en Gatsby empleando el starter. Esto nos ahorrar√° tener que crear los ficheros y carpetas.

```shell
$ gatsby new TU_BLOG https://github.com/gatsbyjs/gatsby-starter-blog
```

Sustituyendo `TU_BLOG` por el nombre que tu quieras. Una vez instalado si ejecutamos lo siguiente tendremos el blog corriendo en local en nuestro equipo en http://localhost:8000

```shell
$ yarn develop
```

![gatsby stater](/images/gatsby-deploy-firebase/gatsby-starter.png)

## Configurar Firebase Hosting

Vamos a utilizar la funcionalidad de Hosting de Firebase, que act√∫a como un CDN. Es decir, es un servidor de ficheros est√°ticos (html's, css's, javascript's) ya que Gatsby lo que hace es en tiempo de build, renderizar todo nuestros contenido como ficheros est√°ticos.

Para ello nos dirigimos a la [consola de Firebase](https://console.firebase.google.com) y con nuestra cuenta de Google creamos un nuevo proyecto. Ponle un nombre, elige tu regi√≥n y ya tienes tu hosting listo para deplegar contenido.

![Firebase console crear proyecto](/images/gatsby-deploy-firebase/gatsby-firebase-console.png)

Ahora ve a tu terminal de tu equipo instala las Firebase Tools:

```shell
$ npm install -g firebase-tools
```

Dir√≠gete a la carpeta de tu proyecto creado con Gatsby e inicia Firebase en √©l despu√©s de loguearte:

```shell
$ firebase login
$ firebase init
```

El comando `init` empezar√° a preguntarte cosas:

```shell
? Which Firebase CLI features do you want to set up for this folder? Press Space to select features, then Enter to confirm your choices. (Press <sp
ace> to select, <a> to toggle all, <i> to invert selection)
‚ùØ‚óØ Database: Deploy Firebase Realtime Database Rules
 ‚óØ Firestore: Deploy rules and create indexes for Firestore
 ‚óØ Functions: Configure and deploy Cloud Functions
 ‚óØ Hosting: Configure and deploy Firebase Hosting sites
 ‚óØ Storage: Deploy Cloud Storage security rules
 ‚óØ Emulators: Set up local emulators for Firebase features
```

Con la tecla espacio de tu teclado elige √∫nicamente la opci√≥n `Hosting`

Despu√©s elige la opc√≠on de un proyecto ya existente `Use an existing project`

```shell
? Please select an option: (Use arrow keys)
‚ùØ Use an existing project
  Create a new project
  Add Firebase to an existing Google Cloud Platform project
  Don't set up a default project
```

Y en la lista de proyectos, elige el que acabas de crear en la consola de Firebase.

En la siguiente pregunta, pulsa enter para elegir `public` que es donde Gatsby deposita los ficheros est√°ticos creados por el builder.

```shell
=== Hosting Setup

Your public directory is the folder (relative to your project directory) that
will contain Hosting assets to be uploaded with firebase deploy. If you
have a build process for your assets, use your build's output directory.

? What do you want to use as your public directory? (public)
```

Y en las siguientes preguntas escribe `N` para que firebase no te sobrescriba nada:

```shell
? Configure as a single-page app (rewrite all urls to /index.html)? (y/N)
? File public/index.html already exists. Overwrite? (y/N)
```

ya tienes iniciado tu proyecto con Firebase:

```shell
i  Skipping write of public/index.html

i  Writing configuration info to firebase.json...
i  Writing project information to .firebaserc...
```

Esto nos ha creado dos ficheros en nuestro proyecto:

```js
{
  "projects": {
    "default": "TU_PROYECTO_EN_FIREBASE"
  }
}
```

```js
{
  "hosting": {
    "public": "public",
    "ignore": [
      "firebase.json",
      "**/.*",
      "**/node_modules/**"
    ]
  }
}
```

Que b√°sicamente sirven para que Firebase sepa donde desplegar tu c√≥digo.

## Configurar Travis para despligue continuo.

Ahora vamos a configurar el despligue autom√°tico cada vez que actualicemos nuestro blog o a√±adamos una entrada nueva.

Primero de todo, tienes que crear un repositorio en Github y dejarlo p√∫blico. En mi caso, el c√≥digo de mi blog lo puedes encontrar [aqu√≠](https://github.com/carlosazaustre/carlosazaustre.es).

Una vez lo tengas, ve a la web de [Travis CI para proyectos open source](https://travis-ci.org) se distingue de la PRO, porque acaba en `.org` en lugar de `.com`. Esto hace que nuestros _builds_ sean ilimitados y gratuitos.

All√≠ enlaza con tu cuenta de GitHub y entre tus repositorios, busca el que acabas de crear para tu sitio Gatsby:

En mi caso, mi [url es √©sta](https://travis-ci.org/carlosazaustre/carlosazaustre.es). Tendr√°s que activar el repositorio para habilitar travis en √©l.

![activar travis en tu repositorio](/images/gatsby-deploy-firebase/gatsby-travis.png)

Seguidamente ve al men√∫ de opciones y elige `settings`:

![opciones de travis](/images/gatsby-deploy-firebase/gatsby-travis-options.png)

Aqu√≠ vamos a configurar las variables de entorno que usemos en nuestro c√≥digo, de manera que no queden en el repositorio p√∫blico a la vista. Una de ellas es el token de Firebase.

![Variables de entorno en Gatsby](/images/gatsby-deploy-firebase/gatsby-env.png)

Para conseguir el token de Firebase podemos hacerlo por l√≠nea de comandos con la siguiente instrucci√≥n.

```shell
$ firebase login:ci

Visit this URL on this device to log in:
https://accounts.google.com/o/oauth2/auth?client_id=....

Waiting for authentication...

‚úî  Success! Use this token to login on a CI server:

1//9d85ngk5UNXCkdjdur7bdNwF-L9Irud01Ji3UVC-e7oYNXcp_QGh0yx5ClsWZ8b98hypoaz-8475734_djd

Example: firebase deploy --token "$FIREBASE_TOKEN"
```

El texto que te aparezca del tipo `1//9d85ngk5UNXCkdjdur7bdNwF-L9Irud01Ji3UVC-e7oYNXcp_QGh0yx5ClsWZ8b98hypoaz-8475734_djd` es tu Token, y es el que vamos a guardar en la configuraci√≥n del dashboard de Travis.

![configura tokens como variables de entorno en travis](/images/gatsby-deploy-firebase/gatsby-env-firebase-token.png)

Ahora ya tenemos Travis listo, s√≥lo nos queda decirle qu√© tiene que hacer :)

## Travis.yml

Vamos a crear un fichero llamado `.travis.yml` que le sirve a Travis que ejecutar y cuando.

√âsta es la configuraci√≥n que tengo yo:

```yaml
language: node_js
node_js:
  - "10"
cache: yarn

branches:
  only:
    - master
before_script:
  - "yarn global add firebase-tools"
  - "yarn global add gatsby"
script:
  - "yarn build"
after_success:
  - "firebase deploy --token=${FIREBASE_API_TOKEN}"
```

Aqu√≠ basicamente le estamos diciendo que utilice `node.js v10` y que se ejecuten los comandos solo cuando hay un push o un mergeo a la rama `master` del repositorio.

El script que va a correr en cada _build_ es `yarn build` que lo que hace es _compilar_ Gatsby y generar todos los ficheros est√°ticos de tu blog y colocarlos en la carpeta public.

Antes de esto, con `before_script` le decimos que tiene que ejecutar para que los comandos funciones que son instalar globalmente las `firebase-tools` y `gatsby`

Cuando haya terminado todo (puede llevar varios minutos) y se haya resuelto satisfactoriamente se ejecutar√°n los comandos en `after_success` y aqu√≠ lo que hacemos es correr el comando de despliegue de firebase utilizando el token que acabamos de guardar en Travis con `--token=${FIREBASE_API_TOKEN}`

Esto sube el contenido de public al hosting de Firebase.

## Primer despliegue

Para ejecutar tu primer despliegue, haz algun cambio como crear un post de prueba dentro de la carpeta `content/posts`. Haz commit de los cambios y s√∫belo a tu repo con push.

Esto disparar√° el build y en unos minutos ya estar√° disponible a trav√©s de una de las URLs que firebase te proporciona, del tipo `tu-proyecto.web.app` o `tu-proyecto.firebaseapp.com`.

Ya lo tienes! tu primer blog "serverless" desplegado autom√°ticamente en la nube con travis.

Adicionalmente, Firebase te permite a√±adir un dominio personalizado (con el SSL autom√°tico) si tienes uno en propiedad. Simplemente debes a√±adir los DNS a tu proveedor de dominios y esperar unas horas a que quede propagado el cambio.

Espero que te animes a probarlo y si te gusta, no dudes en compartir este art√≠culo en tus redes sociales.

</article>

---

<article slug="google-cloud-run" date="2019-07-08" url="https://carlosazaustre.es/blog/google-cloud-run">

# C√≥mo lanzar una aplicaci√≥n web en Google Cloud Run con Cloud Build

**Fecha:** 2019-07-08
En el pasado evento del Cloud Next, Google anunci√≥ un nuevo producto dentro de sus servicios: [Cloud Run](https://cloud.google.com/run/). Una evoluci√≥n de App Engine que b√°sicamente permite correr cualquier lenguage de backend sobre un contenedor de Docker.

En este art√≠culo voy a describir como empezar con √©ste servicio y correr tu primera aplicaci√≥n Node.js con ello. ¬°Vamos all√°!

### Crear el proyecto en Google Cloud

Vamos a la consola de [Google Cloud](https://console.cloud.google.com) y creamos un nuevo proyecto, yo lo he llamado `hello-cloud-run` pero puedes llamarle como quieras. Recuerda el `Project ID` que lo utilizaremos despues.

![crear proyecto en Google Cloud](/images/google-cloud-run/Screenshot-2019-07-02-at-21.02.43.png)

![Nuevo proyecto en Google Cloud](/images/google-cloud-run/Screenshot-2019-07-02-at-21.03.12.png)

![Creando el proyecto](/images/google-cloud-run/Screenshot-2019-07-02-at-21.03.25.png)

![Proyecto creado y Project ID](/images/google-cloud-run/Screenshot-2019-07-02-at-21.03.51.png)

> Para poder usar Google Cloud necesitas una cuenta de gmail, activar el _billing_. Si es la primera vez que te registras tienes [300$ de _free trial_](https://console.developers.google.com/billing/freetrial?hl=en).

### Activar APIs

Tenemos que activar un par de APIs para no tener problemas, la de Cloud Run y la de Cloud Build que utilizaremos m√°s tarde.

![Activaci√≥n de APIs en Google Cloud](/images/google-cloud-run/Screenshot-2019-07-02-at-21.05.19.png)

Clickamos en _Enable APIs and Services_ y buscamos Cloud Run

![Cloud Run](/images/google-cloud-run/Screenshot-2019-07-02-at-21.05.50.png)

Activamos el API de Cloud Run y hacemos lo mismo con Cloud Build

![Activar API de Cloud Run](/images/google-cloud-run/Screenshot-2019-07-02-at-21.05.58.png)

![Activar API de Cloud Build](/images/google-cloud-run/Screenshot-2019-07-02-at-21.34.05.png)

### C√≥digo de nuestra app de ejemplo

Este es el c√≥digo que he preparado para este ejemplo. Es una aplicaci√≥n Node.js que al dirigirse el usuario a la URL raiz le devuelve un `JSON` con dos propiedades, la fecha de hoy y el tiempo que lleva activa la aplicaci√≥n.

Creamos un proyecto de Node, ejecutando el siguiente comando por consola:

```
$ npm init -y
```

Y seguidamente instalamos `express` como dependencia:

```
$ npm i express
```

Creamos un fichero `index.js` con el siguiente contenido:

```javascript
const express = require("express");
const app = express();
const port = process.env.PORT || 3000;

const dateUp = Date.now();

app.get("/", (req, res) => {
  const today = new Date();

  res.json({
    date: today,
    up: `${(Date.now() - dateUp) / 1000} seg.`,
  });
});

app.listen(port, () => {
  console.log(`Server running on port: ${port}`);
  console.log("Press CTRL + C to quit");
});
```

Modificamos un poco el fichero `package.json` para a√±adirle el script de inicio:

```json
...
"scripts": {
   "start": "NODE_ENV=production node index.js"
  },
...
```

De esta forma cuando ejecutemos el comando `npm start` correr√° la mini aplicaci√≥n en producci√≥n. Podemos probarlo en local para ver si todo va OK.

Lo siguiente es crear el fichero `Dockerfile` con el que vamso a definir el contenedor que va albergar esta mini aplicaci√≥n de ejemplo. Tendr√° el siguiente contenido:

```go
FROM node:10

WORKDIR /usr/src/app

ENV PORT 8080
ENV HOST 0.0.0.0

COPY package*.json ./

RUN npm install --only=production

# Copy the local code to the container
COPY . .

# Build production app
# RUN npm run Build

# Start the service
CMD npm start
```

Aqu√≠ estamos diciendo que tome como base `Node.js v10`, el directorio del contenedor donde estar√° el c√≥digo ser√° `/usr/src/app`. Definimos como variables de entorno el puerto `PORT 8080` y el `HOST 0.0.0.0`. Copiamos los ficheros `package.json` y `package-lock.json` al `WORKDIR` e instalamos las dependencias con `RUN npm install --only=production`.
Movemos el codigo de la app al contenedor con `COPY . .` y con el √∫ltimo comando se pone en marcha la app.

Podemos probar si todo est√° bien hasta ahora, generando la imagen y el contenedor de Docker. Eso lo conseguimos con los siguientes comandos en la terminal:

```shell
$ docker build --tag hello-cloud-run:01 .
$ docker run -p 8080:8080 hello-cloud-run:01
```

> Para que esto te funcione necesitas tener Docker instalado en tu equipo

Con el comando de `build` hemos creado una imagen siguiendo el `Dockerfile` con el nombre `hello-cloud-run:01` y el comando de `run` lo que hace es correrlo en [http://localhost:8080](http://localhost:8080)

Si todo va bien deber√≠a salirte algo tal que as√≠:

![Aplicacion Node.js corriendo en un contenedor Docker en Localhost](/images/google-cloud-run/Screenshot-2019-07-05-at-17.59.45.png)

### Automatizar el despliegue del contenedor al Container Registry

Con nuestro proyecto configurado en Google Cloud y el c√≥digo de la aplicaci√≥n escrito y contenerizado, lo siguiente es subirlo al _Container Registry_

Para hacer m√°s PRO este tutorial, vamos a utilizar un fichero YAML de configuraci√≥n con Google Cloud Build. Similar a como har√≠amos con Travis CI por ejemplo, pero personalizado para Cloud Build.

De esta forma, cada vez que hagamos push a master de nuestro repositorio de c√≥digo (en Github por ejemplo) se ejecutar√° Cloud Build y lo subir√° al Container Registry adem√°s de ejecutarlo en Cloud Run. Magic!

Primero creamos un trigger en Cloud Build dentro de la consola de Google Cloud:

![Cloud Build Triggers](/images/google-cloud-run/Screenshot-2019-07-02-at-22.57.51.png)

Al crearlo elegimos que la fuente ser√° un repositorio de GitHub:

![Crear Trigger](/images/google-cloud-run/Screenshot-2019-07-02-at-22.58.02.png)

Nos autenticamos en el servicio (En este caso GitHub) y elegimos el repositorio que lanzar√° el trigger.
Para ello primero debes crear tu repositorio en Github.

Puedes utilizar el de mi [mi repo](https://github.com/carlosazaustre/hello-cloud-run) (Haciendo un fork) como base, o crear el tuyo propio y luego elegirlo entre los que tienes en tu cuenta:

![Trigger Github repository](/images/google-cloud-run/Screenshot-2019-07-02-at-22.58.40.png)

Y en las _settings_ elige que para el **Build Configuration** vamos a utilizar un fichero, el `cloudbuild.yaml` que seguidamente crearemos.

![Screenshot-2019-07-02-at-23.30.39](/images/google-cloud-run/Screenshot-2019-07-02-at-23.30.39.png)

Y listo, ya lo tienes. En las opciones puedes elegir si quieres que se dispare cada vez que subes a una rama, o cada vez que hagas un `tag`

![Trigger creado](/images/google-cloud-run/Screenshot-2019-07-02-at-22.59.41.png).

#### A√±adimos permisos

Una vez activado el API de [Cloud Run](https://console.cloud.google.com/apis/library/run.googleapis.com?_ga=2.191926124.-772456817.1555320972) tenemos que realizar los siguientes pasos para permitir acceso desde el exterior a nuestra aplicaci√≥n.

1. Asignamos el rol de **Cloud Rn Admin** al Cloud Build service account:
   1. Desde la consola de Google Cloud, accede al [menu IAM](https://console.cloud.google.com/iam-admin/iam/project?_ga=2.217088720.-772456817.1555320972)
   2. En la lista de miembros, localiza y selecciona `[PROJECT_NUMBER]@cloudbuild.gserviceaccount.com`
   3. Clicka en el bot√≥n **EDIT** (Icono de l√°piz) de la fila para dar aprobar el nuevo rol a la cuenta.
   4. CLicka en **Add another role**
   5. Selecciona **Cloud Run** y luego **Cloud Run Admin**
   6. Clicka en **Save**
2. Asignamos el rol **IAM Service Account User** al Cloud Build Service Account desde el [Cloud Run Runtime service account](https://cloud.google.com/run/docs/securing/service-identity#runtime_service_account)
   1. Desde la consola de Google Cloud, accede al menu de [Service Accounts](https://cloud.google.com/run/docs/securing/service-identity#runtime_service_account)
   2. En la lista de miembros, localiza y selecciona `[PROJECT_NUMBER]-compute@developer.gserviceaccount.com`
   3. Clicka en **SHOW INFO PANEL** arriba a la derecha
   4. En el panel de **PERMISSIONS**, clicka en el bot√≥n de **Add Member**
   5. Introduce la service account de Cloud Build: `[PROJECT_NUMBER]@cloudbuild.gserviceaccount.com` en el nuevo campo de **New Member**
   6. En el desplegable de **Role**, selecciona **Service Accounts** y luego **Service Account User**.
   7. Clicka en **Save**

Ahora en nuestro c√≥digo vamos a crear el fichero `cloudbuild.yaml` que ejecutar√° los comandos necesarios para construir la imagen de docker, subirla al container registry y desplegarla en Cloud Run:

```yaml
steps:
  # build the container image
  - name: "gcr.io/cloud-builders/docker"
    args:
      ["build", "-t", "gcr.io/$PROJECT_ID/hello-cloud-run:${SHORT_SHA}", "."]
    # push the container image to Container Registry
  - name: "gcr.io/cloud-builders/docker"
    args: ["push", "gcr.io/$PROJECT_ID/hello-cloud-run"]
    # deploy container image to Cloud Run
  - name: "gcr.io/cloud-builders/gcloud"
    args:
      [
        "beta",
        "run",
        "deploy",
        "hello-cloud-run",
        "--image",
        "gcr.io/$PROJECT_ID/hello-cloud-run:${SHORT_SHA}",
        "--region",
        "us-central1",
        "--allow-unauthenticated",
      ]
    env:
      - "PORT=8080"
images:
  - gcr.io/$PROJECT_ID/hello-cloud-run
```

Siendo `<PROJECT_ID>` el identificador de tu proyecto que vimos al inicio.

### Probando que todo funcione

Lo que nos queda hacer es subir nuestro c√≥digo a un repositorio, que puede ser Github, como por ejemplo como lo tengo yo en [mi repo](https://github.com/carlosazaustre/hello-cloud-run) y cada vez que hagamos un cambio y lo subamos a la rama `Master`, el build se ejecutar√°, subir√° el c√≥digo al Container Registry y lo desplegar√° en Cloud Run!

Cuando hagas `push` revisa dentro de la consola de Google Cloud, si el Cloud Build ha disparado un evento:

![Hist√≥rico de triggers en Cloud Build](/images/google-cloud-run/Screenshot-2019-07-05-at-18.17.00.png)

Si ha sido correcto, puedes revisar en el Container Registry si la imagen de Docker ha sido creada:

![Imagen de Docker en el Container Registry](/images/google-cloud-run/Screenshot-2019-07-02-at-23.07.23.png)

Y por √∫ltimo, en Cloud Run revisa que se est√° ejecutando

![Cloud Run Ejecut√°ndose](/images/google-cloud-run/Screenshot-2019-07-02-at-23.18.36.png)

Un √∫ltimo detalle es permitir invocaciones externas al servicio porque por defecto (al menos creo que porque a√∫n es un servicio en Beta) el servicio queda privado.

Se podr√≠a configurar a trav√©s de Cloud Build pero no he conseguido hacerlo funcionar. Una opci√≥n m√°s r√°pida es una vez que el servicio est√° creado, desde la consola de Google Cloud, activarlo:

Se a√±ade `allUsers` a los nuevos miembros y el rol de `Cloud Run > Cloud Run Invoker`

![Permitir invocaciones externas](/images/google-cloud-run/Screenshot-2019-07-05-at-18.45.44.png)

Puedes ver una explicaci√≥n m√°s detallada en [√©ste post de Dev.to](https://dev.to/googlecloud/help-i-forgot-to-click-allow-unauthenticated-invocations-on-google-cloud-run-2hoj)

Y ya est√°! Haz click en la URL que aparece asociada a tu proyecto y si todo va bien tendr√°s algo as√≠ en el navegador:

![App corriendo](/images/google-cloud-run/Screenshot-2019-07-05-at-18.25.03.png)

#### Referencias

- [Cloud Run Docs](https://cloud.google.com/run/docs/)
- [Cloud Build Docs](https://cloud.google.com/cloud-build/docs/configuring-builds/build-test-deploy-artifacts)

</article>

---

<article slug="ecmascript6" date="2018-10-24" url="https://carlosazaustre.es/blog/ecmascript6">

# Aprende ECMAScript 6 (ES6 o ES2015), el nuevo est√°ndar de JavaScript

**Fecha:** 2018-10-24
**ECMAScript v6** (Abreviado como ES6 o ES2015) es el est√°ndar que sigue JavaScript desde Junio de 2015. Hasta ese momento la versi√≥n de JS que est√°bamos usando en nuestros navegadores y Node.js, era la v5.

## La evoluci√≥n de JavaScript

Primero un poco de historia. En 1995 (hace m√°s de 20 a√±os!) **[Brendan Eich](http://es.wikipedia.org/wiki/Brendan_Eich)** crea un lenguaje llamado **Mocha** cuando trabajaba en **Netscape**. En Septiembre de ese a√±o lo renombra a _LiveScript_ hasta que le cambiaron el nombre a _JavaScript_ debido a una estrategia de marketing, ya que Netscape fue adquirida por _Sun Microsystems_, propietaria del lenguaje **Java**, muy popular por aquel entonces.

> **¬°Advertencia!**: aclarar lo siguiente `Java != JavaScript`.
>
> ![JavaScript no es Java](/images/ecmascript6/meme-javascrip-java.jpg)

En 1997 se crea un comit√© (TC39) para estadarizar JavaScript por la _European Computer Manufacturers' Association_, ECMA. Se dise√±a el est√°ndar del DOM (_Document Object Model_) para evitar incompatibilidades entre navegadores. A partir de entonces los est√°ndares de JavaScript se rigen por ECMAScript.

![historia de JavaScript](/images/ecmascript6/cronologia-javascript-1.png)

En 1999 aparece la 3a versi√≥n del est√°ndar ECMAScript, que se mantendr√≠a vigente hasta hace pocos a√±os. Hubo peque√±os intentos de escribir la versi√≥n 4, pero hasta 2011 no se aprob√≥ y se estandariz√≥ la vers√≠on 5 (ES5) que es la que usamos hoy en d√≠a.

![historia de javascript](/images/ecmascript6/cronologia-javascript-2.png)

En junio de 2013 qued√≥ parado el borrador de la versi√≥n 6, pero en Diciembre de 2014 se aprob√≥ al fin y se espera su estandarizaci√≥n a partir de Junio de 2015.

## Principales novedades de ES6

> **¬øQuieres aprender JavaScript desde cero hasta el nuevo est√°ndar de ECMAScript 6?** Hazlo con mi ebook [_Aprendiendo JavaScript_](https://leanpub.com/aprendiendo-javascript) que ya tienen m√°s de 400 lectores. Cons√≠guelo [aqu√≠](https://leanpub.com/aprendiendo-javascript)

ES6 trae muchos cambios significativos al lenguaje. Veamos algunos de ellos:

### Funci√≥n Arrow

¬øCu√°ntas veces has programado un c√≥digo con una estructura similar a la siguiente?

```javascript
// ES5
// Imaginemos una variable data que incluye un array de objectos
var data = [{...}, {...}, {...}, ...];
data.forEach(function(elem){
	// Tratamos el elemento
    console.log(elem)
});
```

Con la funci√≥n _arrow_ `=>` de ES6, el c√≥digo anterior se sustituir√≠a por:

```javascript
//ES6
var data = [{...}, {...}, {...}, ...];
data.forEach(elem => {
	console.log(elem);
});
```

Mucho m√°s limpio y claro. CoffeeScript (un metalenguaje que compila a JavaScript) usa algo parecido.

Incluso la podemos utilizar as√≠:

```javascript
// ES5
var miFuncion = function (num) {
  return num + num;
};
```

```javascript
// ES6
var miFuncion = (num) => num + num;
```

### Clases

Ahora JavaScript tendr√° clases, muy parecidas las funciones constructoras de objectos que realizabamos en el est√°ndar anterior, pero ahora bajo el paradigma de clases, con todo lo que eso conlleva, como por ejemplo, herencia.
Aunque no deja de ser un _az√∫car sint√°ctico (Sugar Syntax)_ porque en JavaScript no tenemos clases, tenemos prototipos.

```javascript
class LibroTecnico extends Libro {
  constructor(tematica, paginas) {
    super(tematica, paginas);
    this.capitulos = [];
    this.precio = "";
    // ...
  }
  metodo() {
    // ...
  }
}
```

### This

La variable `this` muchas veces se vuelve un dolor de cabeza. ant√≠guamente ten√≠amos que cachearlo en otra variable ya que solo hace referencia al contexto en el que nos encontremos. Por ejemplo, en el siguiente c√≥digo si no hacemos `var that = this` dentro de la funci√≥n `document.addEventListener`, _this_ har√≠a referencia a la funci√≥n que pasamos por _Callback_ y no podr√≠amos llamar a `foo()`

```javascript
//ES3
var obj = {
	foo : function() {...},
    bar : function() {
    	var that = this;
        document.addEventListener("click", function(e) {
        	that.foo();
        });
    }
}
```

Con ECMAScript5 la cosa cambi√≥ un poco, y gracias al m√©todo `bind` pod√≠amos indicarle que `this` hace referencia a un contexto y no a otro.

```javascript
//ES5
var obj = {
	foo : function() {...},
    bar : function() {
        document.addEventListener("click", function(e) {
        	this.foo();
        }.bind(this));
    }
}
```

Ahora con ES6 y la funci√≥n _Arrow_ `=>` la cosa es todav√≠a m√°s visual y sencilla.

```javascript
//ES6
var obj = {
	foo : function() {...},
    bar : function() {
    	document.addEventListener("click", (e) => this.foo());
    }
}
```

### `let` y `const`

Ahora podemos declarar variables con `let` en lugar de `var` si no queremos que sean accesibles m√°s all√° de un √°mbito. Por ejemplo:

```javascript
//ES5
(function () {
  console.log(x); // x no est√° definida a√∫n.
  if (true) {
    var x = "hola mundo";
  }
  console.log(x);
  // Imprime "hola mundo", porque "var" hace que sea global
  // a la funci√≥n;
})();

//ES6
(function () {
  if (true) {
    let x = "hola mundo";
  }
  console.log(x);
  //Da error, porque "x" ha sido definida dentro del "if"
})();
```

Ahora con `const` podemos crear constantes que s√≥lo se puedan leer y no modificar a lo largo del c√≥digo. Veamos un ejemplo

```javascript
(function() {
	const PI;
    PI = 3.15;
    // ERROR, porque ha de asignarse un valor en la
    // declaraci√≥n
})();

(function() {
	const PI = 3.15;
    PI = 3.14159;
    // ERROR de nuevo, porque es s√≥lo-lectura
})();
```

### Template Strings

Con ES6 podemos interpolar _Strings_ de una forma m√°s sencilla que como est√°bamos haciendo hasta ahora. F√≠jate en este ejemplo:

```javascript
//ES6
let nombre1 = "JavaScript";
let nombre2 = "awesome";
console.log(`S√≥lo quiero decir que ${nombre1} is ${nombre2`);
// Solo quiero decir que JavaScript is awesome
```

Tambi√©n podemos tener `String` multil√≠nea sin necesidad de concatenarlos con `+`.

```javascript
//ES5
var saludo = "ola " +
"que " +
"ase ";

//ES6
var saludo = "ola
que
ase";

console.log("hola
que
ase");
```

### Destructuring

Tenemos nuevas formas de asignar valores a Arrays y a Objetos. Veamos unos ejemplos

```javascript
var [a, b] = ["hola", "mundo"];
console.log(a); // "hola"
console.log(b); // "mundo"

var obj = { nombre: "Carlos", apellido: "Azaustre" };
var { nombre, apellido } = obj;
console.log(nombre); // "Carlos"
```

¬øNo te ha estallado el cerebro todav√≠a? Pues mira esto:

```javascript
var foo = function () {
  return ["175", "75"];
};
var [estatura, peso] = foo();
console.log(estatura); //175
console.log(peso); //75
```

### Valores por defecto

Otra novedad es asignar valores por defecto a las variables que se pasan por par√°matros en las funciones. Antes ten√≠amos que comprobar si la variable ya ten√≠a un valor. Ahora con ES6 se la podemos asignar seg√∫n creemos la funci√≥n.

```javascript
//ES5
function(valor) {
	valor = valor || "foo";
}

//ES6
function(valor = "foo") {...};
```

### M√≥dulos

A esto lo llamo un `browserify` nativo. Ahora JavaScript se empieza a parecer a lenguajes como _Python_ o _Ruby_. Llamamos a las funciones desde los propios Scripts, sin tener que importarlos en el HTML, si usamos JavaScript en el navegador.

```javascript
//File: lib/person.js
module "person" {
	export function hello(nombre) {
    	return nombre;
    }
}
```

> Tambi√©n se puede exportar as√≠, seg√∫n una aclaraci√≥n de [Sergio Daniel Xalambr√≠](https://twitter.com/sergiodxa)
>
> `export function hello(nombre) {...};`
> o tambi√©n, si solo es una funci√≥n la que tiene el m√≥dulo: `export default function(nombre) {...};`

Y para importar en otro fichero:

```javascript
//File: app.js
import { hello } from "person";
var app = {
	foo: function() {
    	hello("Carlos");
    }
}
export app;
```

## C√≥mo empezar a usar ES6 hoy mismo

Todo esto es muy bonito, pero ¬øC√≥mo podemos empezar a utilizarlo hoy en d√≠a?. Lo primero m√°s recomendable es que te instales la √∫ltima versi√≥n de Chrome, que es uno de los navegadores que est√° implementando las nuevas _features_ de ES6 m√°s r√°pidamente. Te aconsejo incluso que instales **[Chrome Canary](https://www.google.com/chrome/browser/canary.html)**, que es la versi√≥n de Chrome que prueba funcionalidades antes de lanzarlas en el Chrome original.

Para probar directamente c√≥digo ES6 en la consola de tu navegador. Escribe en la barra de direcciones `chrome://flags` y tendr√°s una p√°gina como √©sta:

![Chrome Flags](/images/ecmascript6/chrome-flags.png)

Y activar el flag **Enable Experimental JavaScript**.

Esto te permitir√° probar algunas _features_ pero no todas porque algunas a√∫n est√°n en desarrollo.

La otra opci√≥n, m√°s extendida, es escribir en ES6 en tus ficheros JavaScript y despu√©s "compilarlos" a la versi√≥n ES5. Existen herramientas como [babel](https://babeljs.io/) que te permiten lograrlo.

Por medio de [plugings y paquetes](https://babeljs.io/docs/en/plugins) podemos utilizar estas _features_ incluso las que estean en desarrollo para pr√≥ximas versiones si [elegimos el paquete correspondiente](https://babeljs.io/setup).

Desde 2015, cada a√±o se introducen nuevas caracter√≠sticas en JavaScript. ES6 fue el cambio m√°s radical y es normal encontrar referencias a esta versi√≥n como ES6 o ES2015, las siguientes versiones al principio se les llamaba ES7 y ES8, pero se ha optado por indicarlas con el a√±o en el que son lanzados.

Por eso, hasta el momento podemos encontrar ES2015, ES2016, ES2017 y el m√°s reciente ES2018, aunque como digo, desde la versi√≥n de 2015 los cambios son menores.

![ES6 next stop](/images/ecmascript6/autopista-hacia-es6.png)

> **¬øQuieres aprender JavaScript desde cero hasta el nuevo est√°ndar de ECMAScript 6?** Hazlo con mi ebook [_Aprendiendo JavaScript_](https://leanpub.com/aprendiendo-javascript) que ya tienen **m√°s de 500 lectores**. Cons√≠guelo [aqu√≠](https://leanpub.com/aprendiendo-javascript)

</article>

---

<article slug="desarrollo-basado-en-componentes-con-vue-js" date="2018-10-17" url="https://carlosazaustre.es/blog/desarrollo-basado-en-componentes-con-vue-js">

# Desarrollo basado en Componentes con Vue.js

**Fecha:** 2018-10-17
Las arquitecturas web basadas en Componentes es lo que m√°s se emplea hoy en d√≠a en el desarrollo web moderno. Vue.js tambi√©n nos permite crear Componentes y montar nuestra aplicaci√≥n con ellos.

## C√≥mo crear un componente en Vue

Vue tiene un API para crear Componentes. No sigue el est√°ndar de la W3C de los WebComponents, pero el estilo es muy similar y puedes utilizar `templates` para ello.

En √©ste tutorial vamos a crear un peque√±o componente reutilizable que muestra la informaci√≥n de una pel√≠cula: Su t√≠tulo y una imagen.

Para ello, creamos un fichero `index.html` que contendr√° el elemento ra√≠z `#app` d√≥nde colocaremos nuestra aplicaci√≥n de Vue, el `script` con la librer√≠a y otro `script` m√°s d√≥nde tendremos nuestro c√≥digo:

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Componentes con Vue.js</title>
  </head>
  <body>
    <div id="app"></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.4.2/vue.js"></script>
    <script src="app.js"></script>
  </body>
</html>
```

A continuaci√≥n creamos un fichero `app.js` al mismo nivel que `index.html` para que el enlace del `<script>` funcione correctamente.

Aqu√≠ vamos a crear el componente `<movie-card>` e instanciar la aplicaci√≥n de Vue. Primero debemos crear el componente para que el c√≥digo se interprete correctamente. Si instanciamos antes la app de Vue y luego el componente tendremos errores porque Vue no lo reconocer√°.

Para crear un componente tenemos que usar la funci√≥n `Vue.component` que recibe un `string` con el nombre de nuestro componente, que ser√° el nombre que tendr√° el elemento en el DOM, y un objeto de configuraci√≥n que contendr√° el nombre de las props, el template, datos, m√©todos, etc...

Para crear un componente `movie-card` escribimos lo siguiente:

```javascript
Vue.component("movie-card", {
  props: ["image", "title"],
  template: `
    <div>
      <img width="100" v-bind:src="image" v-bind:alt="title"/>
      <h2>{{ title }}</h2>  
    </div>
  `,
});
```

El componente recibir√° como propiedades una `image` y un `title`, y su aspecto en el DOM ser√° el de un `<div>` que contiene un elemento `<img>` que mostrar√° la imagen y otro `h2` que mostrar√° el t√≠tulo de la pel√≠cula.

Para ver el componente en acci√≥n, podemos hacer varias cosas. Como primera opci√≥n, podemos insertar el componente `<movie-card>` en el HTML dentro del `<div id="app">` d√≥nde tenemos instanciado Vue.

Para instanciar Vue, en el c√≥digo de `app.js` justo debajo del componente que acabamos de crear, escribimos lo siguiente:

```javascript
new Vue({
  el: "#app",
});
```

Y as√≠ en `index.html` podemos escribir lo siguiente:

```html
<div id="app">
  <movie-card
    title="Regreso al Futuro"
    image="http://es.web.img3.acsta.net/pictures/14/04/03/13/45/034916.jpg"
  >
  </movie-card>
</div>
```

Esto nos mostrar√≠a la imagen junto al t√≠tulo de la pel√≠cula en el navegador. Pero si queremos mostrar varias `<movie-card>` cuyos datos obtengamos a trav√©s de un API externo u otro servicio, s√≥lo con esto no se podr√≠a.

En la instancia de Vue, utilizaremos la propiedad `data` para emplear un array de objetos con la informaci√≥n de varias pel√≠culas.

```javascript
new Vue({
  el: "#app",
  data: {
    movies: [
      {
        title: "Regreso al Futuro",
        image:
          "http://es.web.img3.acsta.net/pictures/14/04/03/13/45/034916.jpg",
      },
      {
        title: "Matrix",
        image:
          "http://t0.gstatic.com/images?q=tbn:ANd9GcQq3pIz-aKgkmYX1dJ-EL-AlHSPcOO7wdqRIJ5gJy9qNinXpmle",
      },
      {
        title: "Interestellar",
        image:
          "http://t1.gstatic.com/images?q=tbn:ANd9GcRf61mker2o4KH3CbVE7Zw5B1-VogMH8LfZHEaq3UdCMLxARZAB",
      },
    ],
  },
});
```

De esta forma podemos acceder a estos datos dentro de Vue, y lo siguiente que tenemos que hacer es pintarlos.

Para ello, tendr√≠amos que iterar por todos los elementos de √©ste array y pintar un componente `<movie-card>` por cada uno de ellos.

Eso lo vamos a conseguir con la directiva `v-for` que hace precisamente eso, y ser√≠a tan sencillo como lo siguiente en el fichero `index.html`:

```html
<div id="app">
  <movie-card
    v-for="(movie, index) in movies"
    :key="index"
    :title="movie.title"
    :image="movie.image"
  >
  </movie-card>
</div>
```

Si se quiere, en lugar de escribir esto en el HTML, podemos utilizar la propiedad `template` de Vue en el c√≥digo JavaScript y dejar el `index.html` √∫nicamente con el `<div id='app'>` sin nada en su interior, ya se encargar√° Vue de insertarlo:

```javascript
new Vue({
  el: "#app",
  data: {
    movies: [
      {
        title: "Regreso al Futuro",
        image:
          "http://es.web.img3.acsta.net/pictures/14/04/03/13/45/034916.jpg",
      },
      {
        title: "Matrix",
        image:
          "http://t0.gstatic.com/images?q=tbn:ANd9GcQq3pIz-aKgkmYX1dJ-EL-AlHSPcOO7wdqRIJ5gJy9qNinXpmle",
      },
      {
        title: "Interestellar",
        image:
          "http://t1.gstatic.com/images?q=tbn:ANd9GcRf61mker2o4KH3CbVE7Zw5B1-VogMH8LfZHEaq3UdCMLxARZAB",
      },
    ],
  },
  template: `
    <div>
      <movie-card v-for="(movie, index) in movies"
        :key="index"
        :title="movie.title"
        :image="movie.image">
      </movie-card>
    </div>
  `,
});
```

Esta es la forma que tiene Vue de crear componentes, que por supuesto no es la √∫nica, pero que para algo sencillo nos puede servir sin necesidad de m√°s herramientas.

M√°s adelante veremos que cuando nuestra aplicaci√≥n crece y tenemos varios componentes, con estilos propios, datos, eventos, etc... esto no es escalable ya que tendr√≠amos que tener las templates en el HTML o insertarlas en el c√≥digo JavaScript haciendo que el c√≥digo no fuera manejable.

Esto Vue lo soluciona de una manera muy interligente con los _Single File Components_ que veremos en un pr√≥ximo art√≠culo.

</article>

---

<article slug="vue-single-file-components" date="2018-10-10" url="https://carlosazaustre.es/blog/vue-single-file-components">

# Vue: Single File Components

**Fecha:** 2018-10-10
Con Vue podemos crear componentes de m√∫ltiples formas, la m√°s sencilla es c√≥mo vismo en un post anterior donde utilizamos el m√©todo `Vue.component()`.

Sin embargo esa forma, aunque es la m√°s sencilla y pr√°ctica, no es la m√°s escalable, ya que nos obliga a escribir el HTML dentro del m√©todo `Vue.component()` o a utilizar m√∫ltiples `<templates>` en el HTML.

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=b0ozkpDiplU)
/>

Para solventar esto, existe una soluci√≥n que junto con Webpack y un m√≥dulo (`vue-loader`) nos permite tener en un √∫nico fichero la vista (template), el dise√±o (css) y la l√≥gica (javascript). Estos ficheros tienen una extensi√≥n `.vue` y tienen la siguiente forma:

```html
<template>
  <!-- Marcado HTML -->
</template>

<script>
  /* C√≥digo JavaScript */
</script>

<style>
  /* Estilos CSS */
</style>
```

Lo bueno de √©ste fichero, es que al no ser un fichero final de producci√≥n, es un fichero de desarrollo que luego Webpack interpreta y extrae las diferentes partes a sus ficheros correspondientes, nos da mucha versatilidad, por ejemplo:

Si preferimos utilizar Pug/Jade para el marcado en lugar de HTML convencional, podemos hacerlo porque Webpack leer√° el fichero y gracias a los "loaders" _transpilar√°_ el c√≥digo al resultado final.

De igual manera, si prefieres utilizar TypeScript o CoffeeScript para el c√≥digo JavaScript, tambi√©n es posible, al igual que el estilo, puedes utilizar cualquier preprocesador que quieras: Less, Stylus, Sass, SCSS, PostCSS,...

Lo √∫nico que tienes que hacer es indicar en cada _tag_ que tipo est√°s utilizando con el atributo `lang`. Por ejemplo:

```html
<template lang="pug"> ... </template>

<script lang="ts"></script>

<style lang="scss"></style>
```

Esto lo hace muy vers√°til y pr√°ctico para equipos de trabajo d√≥nde haya personas dedicadas al dise√±o y maquetaci√≥n, y otras personas encargadas del c√≥digo. De esta manera, la persona dedicada al CSS puede utilizar el preprocesador que prefiera, el desarrollador utilizar TypeScript si lo prefiere, etc...

Entonces para este ejemplo vamos a tomar el componente que hicimos en el anterior post, que ten√≠a esta pinta:

```javascript
Vue.component("movie-card", {
  props: ["image", "title"],
  template: `
    <div>
      <img width="100" v-bind:src="image" v-bind:alt="title"/>
      <h2>{{ title }}</h2>  
    </div>
  `,
});
```

Y lo traducimos a un Vue Single File Component:

```html
<template>
  <div>
    <img width="100" v-bind:src="image" v-bind:alt="title" />
    <h2>{{ title }}</h2>
  </div>
</template>

<script>
  export default {
    name: "movie-card",
    props: {
      image: String,
      title: String,
    },
  };
</script>

<style scoped>
  h2 {
    font-size: 18pt;
  }
</style>
```

En la parte `<script>` utilizamos sint√°xis de ES6, ya que con Webpack y Babel se realizar√° el _transpiling_ aunque el navegador ya empieza a implementar √©stas novedades.

Exporta por defecto un objeto JavaScript que contiene varias propiedades. En este ejemplo le indicamos con `name` que el componente se llamar√° `<movie-card>` y con `props` las propiedades que podemos pasarle y el tipo que tienen √©stas.

Por supuesto, un Vue Component tiene muchas m√°s propiedades, c√≥mo datos de estado internos, met√≥dos, eventos, etc... pero para este ejemplo hemos utilizado un componente m√°s sencillo.

Para el estilo tenemos algo muy interesante y es que si usamos el atributo `scoped` como he puesto en el ejemplo, lo que nos permite es aislar los estilos del resto de componentes y de la aplicaci√≥n.

De esta manera no tenemos que preocuparnos de nombres de clases o de estilar elementos como el `<h2>` porque √∫nicamente se le dar√° el estilo al elemento `<h2>` de √©ste componente, dejando el resto de elementos `<h2>` que pueda haber en el resto de aplicaci√≥n con el estilo que tengan o el de por defecto.

M√°s adelante veremos c√≥mo integrar √©sto con Webpack y con la herramienta de l√≠nea de comandos de Vue.

</article>

---

<article slug="novedades-en-el-ecosistema-de-webcomponents-gracias-a-polymer-3-0" date="2018-10-05" url="https://carlosazaustre.es/blog/novedades-en-el-ecosistema-de-webcomponents-gracias-a-polymer-3-0">

# El futuro de los WebComponents gracias a Polymer 3.0

**Fecha:** 2018-10-05
Recientemente se ha celebrado el Polymer Dev Summit, una conferencia anual para desarrolladores de Polymer, la librer√≠a de Google basada en [WebComponents](/images/novedades-en-el-ecosistema-de-webcomponents-gracias-a-polymer-3-0/como-crear-webcomponent-de-forma-nativa/).

Pero esta conferencia es mucho m√°s. Google cre√≥ la librer√≠a Polymer como un Polyfill para su verdadera misi√≥n, estandarizar los WebComponents en la web. Cada a√±o que pasa Polymer deja de ser un poco "Polymer" y se acerca m√°s [a lo nativo que va ofreciendo el navegador](https://carlosazaustre.es/como-crear-webcomponent-de-forma-nativa/).

El est√°ndar de los WebComponents se basa en 4 tecnolog√≠as principales:

- Templates
- Shadow DOM
- Custom Elements
- HTML Imports

_Templates_ y _Custom Elements_ est√°n ya en todos los navegadores pr√°cticamente o en desarrollo activo. El problema est√° en el Shadow DOM y sobre todo los HTMLImports.

Polymer propon√≠a crear los WebComponents en ficheros HTML y ser importados v√≠a Links desde los propios ficheros HTML. Mozilla no estaba de acuerdo con esta tecnolog√≠a y decidi√≥ no desarrollarla.

![webcomponents-polymer-use-of-htmlimports](/images/novedades-en-el-ecosistema-de-webcomponents-gracias-a-polymer-3-0/webcomponents-polymer-use-of-htmlimports.png)

Personalmente a mi tampoco me convenc√≠a esa forma, [teniendo JavaScript y su ecosistema en continua evoluci√≥n](/ecmascript6), usar esa forma no parec√≠a muy pr√°ctica.

Eso hasta hoy.

Hoy han anunciado la pr√≥xima versi√≥n 3.0 de Polymer en la cual se han presentado importantes novedades que benefician a todo el ecosistema web.

## De HTMLImports a ES Modules

Se sustituyen los HTMLImports por m√≥dulos de JavaScript, empleando el sistema de m√≥dulos de ES2015, como se viene haciendo en el desarrollo web moderno con frameworks y librer√≠as como [React](https://carlosazaustre.es/tag/react-js/), Angular 2 o [Vue.js](https://carlosazaustre.es/tag/vue/).

![webcomponents-polymer-loading](/images/novedades-en-el-ecosistema-de-webcomponents-gracias-a-polymer-3-0/webcomponents-polymer-loading.png)

![webcomponents-polymer-esmodules](/images/novedades-en-el-ecosistema-de-webcomponents-gracias-a-polymer-3-0/webcomponents-polymer-esmodules.png)

Adem√°s han anunciado algo muy importante, los ES Modules funcionar√°n nativamente en el navegador Chrome a partir de Septiembre. Esto es una gran noticia ya que llevamos 2 a√±os con el est√°ndar pero esta era la √∫nica _feature_ que a√∫n no estaba implementada ni en el navegador [ni en Node.js pero poco a poco ya va viendo la luz sin necesidad de usar _Babel_ ni ningeun _transpiler_](https://github.com/standard-things/esm).

![Screen-Shot-2017-08-22-at-10.32.16](/images/novedades-en-el-ecosistema-de-webcomponents-gracias-a-polymer-3-0/Screen-Shot-2017-08-22-at-10.32.16.png)

A partir de ahora, gracias a esto, los componentes que creemos en Polymer podr√°n ser importados/exportados en JavaScript as√≠:

```javascript
// Antes
window.MiElemento = // ...
// Ahora
export const MiElemento = // ...
```

```html
<!-- Antes -->
<link rel="import" href="../@polymer/polymer/polymer-element.html" />
```

```javascript
// Ahora
import { Element } from "../@polymer/polymer/polymer-element";
```

Crear ahora un WebComponente con Polymer 3.0 es muy parecido a como se har√≠a de forma nativa, y cada vez con menos uso de _transpilers_ y _polyfills_

![webcomponents-polymer-movinghtml-to-esmodules](/images/novedades-en-el-ecosistema-de-webcomponents-gracias-a-polymer-3-0/webcomponents-polymer-movinghtml-to-esmodules.png)

```javascript
import { Element as PolymerElement } from "../@polymer/polymer/polymer-element.js";
export class MiElemento extends PolymerElement {
  static get template() {
    return `
      <h1>Hello World!</h1>
    `;
  }
}
customElements.define("mi-elemento", MiElemento);
```

## De Bower a NPM/Yarn

Otro gran movimiento viene desde la parte de gesti√≥n de paquetes. Hasta ahora Polymer estaba utilizando Bower como gestor de dependencias. Bower fue genial en su d√≠a, pero desde hace tiempo su uso en otros workflows se ha ido dejando en favor de NPM. Mucho m√°s pr√°ctico, usable y combina mejor con el uso de modulos de JavaScript.

![webcomponents-polymer-packaging](/images/novedades-en-el-ecosistema-de-webcomponents-gracias-a-polymer-3-0/webcomponents-polymer-packaging.png)

![webcomponents-polymer-yarn](/images/novedades-en-el-ecosistema-de-webcomponents-gracias-a-polymer-3-0/webcomponents-polymer-yarn.png)

Recomiendo ver este v√≠deo de [Fred Schott](https://twitter.com/fredkschott) en el que resume los pr√≥ximos avances de la nueva versi√≥n de Polymer

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=JH6jEcLxJEI)
/>

## Conclusi√≥n

Estos avances son muy buenos para el ecosistema web. El principal prop√≥sito de Polymer es estandarizar los WebComponents y cada vez m√°s se pueden implementar de forma nativa.

Esto hace que otros frameworks m√°s utilizados com React o Vue, poco a poco puedan ser m√°s cercanos a lo nativo que provee el navegador en lugar de crear su propia l√≥gica de creaci√≥n de componentes. Esto har√° que mejoren su rendimiento y sea m√°s sencillo operar con componentes de distintos frameworks en el mismo proyecto. Es decir, tener tu aplicaci√≥n en Vue y utilizar WebComponents nativos o de Polymer con facilidad debido a que usan el mismo sistema de modulos y gesti√≥n de dependencias.

Adem√°s, si [√©sta propuesta](https://github.com/TheLarkInn/unity-component-specification) de [Sean Larkin](https://twitter.com/TheLarkInn), el autor de Webpack, sale adelante, todo pinta muy bien. El sistema de creaci√≥n de Componentes que propone Vue.js con los _Single File Component_ que proporcionan una buena separaci√≥n de responsabilidades en un √∫nico fichero. La propuesta proponer poder usar ese tipo de fichero en otros frameworks. ¬øQu√© tal un fichero `.polymer`, `.react`?

Con lo que m√°s me quedo de estas _Keynotes_ es con el futuro soporte de los m√≥dulos JavaScript ES2015 en Chrome y posteriormente en el resto de navegadores. Cada vez JavaScript es m√°s grande.

M√°s info: _[Polymer 3.0 preview: npm and ES6 modules](https://www.polymer-project.org/blog/2017-08-22-npm-modules.html)_

</article>

---

<article slug="primeros-pasos-en-vue" date="2018-10-01" url="https://carlosazaustre.es/blog/primeros-pasos-en-vue">

# Primeros pasos en Vue

**Fecha:** 2018-10-01
Con √©ste art√≠culo quiero ense√±arte lo f√°cil que es empezar a trabajar con Vue para que veas su sencillez.

Para ver como funciona Vue no necesitas _Webpack_, ni _Babel_, ni _transpilers_, ni una estructura compleja de archivos y carpetas, √∫nicamente necesitas un fichero HTML de toda la vida, una hoja de estilos CSS, un fichero JavaScript para el c√≥digo e importar la librer√≠a desde un CDN como puede ser _cdnjs.org_.

¬°Empecemos!

> Para seguir este tutorial, puedes utilizar tu editor de texto preferido + navegador o utilizar JSBin si te es m√°s c√≥modo para probar cosas.
> Si prefieres ver el contenido en v√≠deo, dale al play!

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=L0F4OPPsm0c)
/>

Vamos a utilizar este fichero `index.html`:

```html
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>JS Bin</title>
  </head>
  <body>
    <div id="app"></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.0.3/vue.js"></script>
  </body>
</html>
```

Es un HTML normal, √∫nicamente a destacar que tenemos un elemento `<div>` con el id `app` y el enlace a librer√≠a `vue.js` en su versi√≥n 2.

Ahora vamos a a√±adir c√≥digo JavaScript y puedes escribirlo en el index.html dentro de un elemento `<script>` o utilizar un fichero JavaScript aparte y enlazarlo igual que la librer√≠a de Vue.

## Inicializaci√≥n de Vue

Para poder empezar a trabajar con Vue, tenemos que crear una nueva instancia y pasar ciertas propiedades al objeto de configuraci√≥n, entre ellas el elemento del DOM d√≥nde vamos a _renderizar_ o hacer uso de Vue. En este caso ser√≠a el `<div>` con el ID `app`:

```javascript
const app = new Vue({
  el: "#app",
});
```

Algo tan simple como eso es lo que se necesita para inicializar Vue en un proyecto web. Ahora vamos a ver m√°s cosas como por ejemplo como se muestran datos utilizando el doble _data-binding_:

## Mostrar datos

Tomando el HTML anterior y colocando lo siguiente entre el `<div id="app">`:

```html
<div id="app">{{ mensaje }}</div>
```

Estamos indicando que nuestra instancia de Vue va a tener un tipo de dato llamado `mensaje` y que podemos manipular desde el c√≥digo.

Para ello simplemente a√±adimos una nueva propiedad-objeto llamada `data` donde estar√°n todos las propiedades y/o modelos de datos que queramos utilizar en la vista

```javascript
const app = new Vue({
  el: "#app",
  data: {
    mensaje: "Hola Vue!",
  },
});
```

Esto mostrar√° en el navegador el texto: _Hola Vue!_

Si los datos se tienen que utilizar dentro de un elemento del DOM como propiedad, no podemos utilizar la sintaxis de las _dobles llaves_ para mostrar el valor. Necesitamos hacer uso de la directiva `v-bind` para ello.

Veamos un ejemplo con una imagen por ejemplo:

```javascript
const app = new Vue({
  el: "#app",
  data: {
    mensaje: "Hola Vue!",
    imagen:
      "http://laravelacademy.org/wp-content/uploads/2016/08/00-featured-vuejs-logo-simple-256x128.jpg",
  },
});
```

El dato `imagen` contiene la URL de una imagen `jpg`. Para poder mostrarla en la vista utilizando un elemento `<img>` necesitamos pasarle al atributo `src` el nombre de la variable, entre comillas, y utilizar la directiva de Vue `v-bind` para enlazar el modelo:

```html
<div id="app">
  {{ mensaje }}
  <img v-bind:src="imagen" />
</div>
```

De esta forma se podr√° ver la imagen en el navegador.

Tambi√©n podemos usar la forma abreviada que ofrece Vue, y es que cuando se trate de un atributo, podemos prescindir del texto `v-bind` y utilizar √∫nicamente dos puntos `:`

```html
<div id="app">
  {{ mensaje }}
  <img :src="imagen" />
</div>
```

Vale, esto est√° muy bien, pero ¬øSe pueden hacer m√°s cosas? Claro que si, hay un gran n√∫mero de directivas, por ejemplo si queremos mostrar algo o no dependiendo de un dato, podemos utilizar `v-if` o `v-show` y `v-hide`:

```javascript
const app = new Vue({
  el: "#app",
  data: {
    mostrar: false,
    mensaje: "Hola Vue!",
    imagen:
      "http://laravelacademy.org/wp-content/uploads/2016/08/00-featured-vuejs-logo-simple-256x128.jpg",
  },
});
```

```html
<div id="app">
  <div v-if="mostrar">
    {{ mensaje }}
    <img :src="imagen" />
  </div>
</div>
```

Aqu√≠ lo que hemos hecho es a√±adir un nuevo dato `mostrar` con el valor a `false` que har√° que no se muestre ni el mensaje ni la imagen en el navegador. Si cambiamos a `true` podemos verlo de nuevo.

## Eventos y M√©todos

La "gracia" de desarrollar una SPA es que haya cambios de forma din√°mica en nuestro proyecto. Esto lo podemos conseguir utilizando m√©todos que realizan cambios y eventos que disparen estos m√©todos.

Los m√©todos se indican al igual que los datos en un objeto-propiedad llamado `methods`.

Vamos a a√±adir un elemento `<button>` que escuche un evento de `click` y dispare un metodo `toggleMostrar` que lo √∫nico que har√° es cambiar el valor del dato `mostrar` al contrario para mostrar los elementos anteriores o no. Ser√≠a algo as√≠:

```html
<div id="app">
  <div v-if="mostrar">
    {{ mensaje }}
    <img :src="imagen" />
  </div>
  <button v-on:click="toggleMostrar">Mostrar/Ocultar</button>
</div>
```

El evento se a√±ade con la directiva `v-on:click` para el caso de responder ante un click del bot√≥n. Hay multitud de eventos: `hover`, `submit`, `change`, etc...

Tambi√©n podemos utilizar la forma abreviada que propone Vue que es `@click`, es decir se sustituye `v-on` por un `@`:

```html
<div id="app">
  <div v-if="mostrar">
    {{ mensaje }}
    <img :src="imagen" />
  </div>
  <button @click="toggleMostrar">Mostrar/Ocultar</button>
</div>
```

Ahora el c√≥digo JavaScript ser√≠a el siguiente:

```javascript
const app = new Vue({
  el: "#app",
  data: {
    mostrar: true,
    mensaje: "Hola Vue!",
    imagen:
      "http://laravelacademy.org/wp-content/uploads/2016/08/00-featured-vuejs-logo-simple-256x128.jpg",
  },
  methods: {
    toggleMostrar: function () {
      this.mostrar = !this.mostrar;
    },
  },
});
```

Darse cuenta que para hacer uso del dato `mostrar` dentro de los m√©todos, tenemos que utilizar el objeto `this` si no no podr√≠amos referenciarlo y utilizarlo.

Ahora, cada vez que hagamos click en el bot√≥n, en el navegador se mostrar√° u ocultar√° la informaci√≥n.

## Templates

Tambi√©n podemos trabajar con templates, es decir, tener el c√≥digo HTML en nuestra instancia de Vue. No es la mejor pr√°ctica, pero para algo puntual puede ser muy √∫til. As√≠, por ejemplo, se trabajaba con Angular v1 en sus inicios.

Podemos reducir el c√≥digo anterior al siguiente HTML y JavaScript

```html
<div id="app"></div>
```

```javascript
const app = new Vue({
  el: "#app",
  template: `
    <div>
      <div v-if="mostrar">
        {{ mensaje }}
        <img :src="imagen" />
      </div>
      <button @click="toggleMostrar">Mostrar/Ocultar</button>
    </div>
  `,
  data: {
    mostrar: true,
    mensaje: "Hola Vue!",
    imagen:
      "http://laravelacademy.org/wp-content/uploads/2016/08/00-featured-vuejs-logo-simple-256x128.jpg",
  },
  methods: {
    toggleMostrar: function () {
      this.mostrar = !this.mostrar;
    },
  },
});
```

Hemos utilizado la propiedad `template` de Vue para a√±adir el HTML. Ten en cuenta que al igual que en React, debe ir siempre incluido todo en un √∫nico elemento del DOM.

Si esto no te convence, puedes utilizar el elemento `<template>` de HTML5 y referenciarlo dentro de la instancia de Vue de la siguiente forma:

```html
<div id="app"></div>

<template id="ejemplo">
  <div>
    <div v-if="mostrar">
      {{ mensaje }}
      <img :src="imagen" />
    </div>
    <button @click="toggleMostrar">Mostrar/Ocultar</button>
  </div>
</template>
```

```javascript
const app = new Vue({
  el: "#app",
  template: "#ejemplo",
  data: {
    mostrar: true,
    mensaje: "Hola Vue!",
    imagen:
      "http://laravelacademy.org/wp-content/uploads/2016/08/00-featured-vuejs-logo-simple-256x128.jpg",
  },
  methods: {
    toggleMostrar: function () {
      this.mostrar = !this.mostrar;
    },
  },
});
```

## Recorrer listados de datos

Una de las cosas que m√°s se utilizan en proyectos es recorrer un listado de items para mostrarlos en la pantalla. En Vue es muy sencillo con al directiva `v-for` y se hace de una forma muy similar a c√≥mo se hace en Angular.

Imaginemos que tenemos un dato en nuestro modelo, que es un array de objetos llamado `cursos`:

```javascript
const app = new Vue({
  el: "#app",
  data: {
    cursos: [
      {
        name: "Fundamentos de React",
        url: "http://cursos.carlosazaustre.es/p/react-js",
      },
      {
        name: "Redux con React",
        url: "http://cursos.carlosazaustre.es/p/curso-profesional-de-redux-y-react",
      },
      {
        name: "React Native",
        url: "http://cursos.carlosazaustre.es/p/react-native",
      },
    ],
  },
});
```

Para mostrar la informaci√≥n en la vista HTML, con una lista por ejemplo y que cada item `<li>` sea un enlace hacia el curso, tendr√≠amos que hacer lo siguiente. (Date cuenta del `bind` de datos utilizando la sintaxis abreviada de `:` en lugar de `v-bind` en las directivas `key` y `href`):

```html
<div id="app">
  <ul>
    <li v-for="(curso, index) in cursos" :key="index">
      <a :href="curso.url">{{ curso.name }}</a>
    </li>
  </ul>
</div>
```

## Resumen

Vue es mucho m√°s, pero tan s√≥lo quer√≠a ense√±arte los primeros movimientos para que veas que sencillo es de utilizar.

Date cuenta que todo esto lo hemos podido ejecutar en un √∫nico fichero HTML sin necesidad de utilizar ning√∫n tipo de herramienta, ni NPM ni transpiler. Es puro HTML y JavaScript (y CSS si lo hubi√©semos utilizado) Y te permite tener un primer contacto con la librer√≠a y ver que es lo que se puede hacer con ella y c√≥mo funciona.

Espero que te haya gustado y te haya animado a trabajar con ella.

</article>

---

<article slug="empresa-estonia" date="2018-09-24" url="https://carlosazaustre.es/blog/empresa-estonia">

# C√≥mo crear una empresa en Estonia

**Fecha:** 2018-09-24
Una vez tienes claros las [ventajas e impuestos de crear una empresa en Estonia](/impuestos-estonia) y el [kit de e-residente](/e-residency), lo que te queda es montar la empresa. Y de eso vamos a hablar en √©ste art√≠culo: Pasos, costes y tiempos necesarios para crear tu empresa estona.

**Navega por el contenido**

- [Requisitos para crear una empresa en Estonia](#requisitosparacrearunaempresaenestonia)
- [Costes de crear una empresa en Estonia](#costesdecrearunaempresaenestonia)
  - [Tarjeta de E-Residente](#tarjetadeeresidente)
  - [Registro de la compa√±√≠a](#registrodelacompaa)
  - [Gastos fijos mensuales. ](#gastosfijosmensuales)
  - [Cuenta Bancaria](#cuentabancaria)
- [Pasos para crear una empresa en Estonia](#pasosparacrearunaempresaenestonia)
  - [Abrir cuenta bancaria](#abrircuentabancaria)

---

## Requisitos para crear una empresa en Estonia

Lo m√°s importante es tener la [tarjeta de e-residente](/e-residency). En un [art√≠culo anterior te explico c√≥mo conseguirla](/e-residency).

Ten en cuenta que este es el tr√°mite m√°s largo y puede llevarte aproximadamente un mes desde que la solicitas hasta que la recibes en la embajada o consulado de tu pa√≠s.

Despues has de tener claro que no cualquier negocio es apto para crear una compa√±√≠a en Estonia.

Como [expliqu√© tambi√©n en otro art√≠culo](/impuestos-estonia) deben ser negocios online que no operen en un pais determinado y con clientes de todo el mundo.

Una vez tienes todo eso en mente, ya est√°s lista/o para crear tu empresa estona. S√≥lo necesitas un nombre comercial y pagar algunas tasas que ahora te explico.

## Costes de crear una empresa en Estonia

Aunque los impuestos de tener una empresa estona son bajos, no quita que haya que pagar algunos tr√°mites al gobierno de Estonia. A continuaci√≥n te los detallo:

### Tarjeta de E-Residente

![Kit de e-residente](/images/empresa-estonia/IMG_20180912_173233-1.jpg)

**100‚Ç¨**. Esto es un tr√°mite que solo has de hacer una vez en la vida y por tanto pagar una √∫nica vez. Es un requisito indispensable si quieres crear y dirigir una empresa estona rem√≥tamente.

### Registro de la compa√±√≠a

Registrar la compa√±√≠a en Estonia tiene un coste de 190‚Ç¨ (+ IVA de estonia) y un fee de 25‚Ç¨ (+ IVA) por realizar el tr√°mite online. Esto de nuevo es un tr√°mite que se realiza una √∫nica vez y el coste total es `190 x 1.20 + 25 x 1.20 = ` **258 ‚Ç¨**

### Gastos fijos mensuales.

Una vez tienes tu compa√±√≠a incorporada, necesitas tener un domicilio fiscal en Estonia. Existen numerosos servicios que te proporcionan una **oficina virtual**. Los puedes encontrar en [la web del programa e-residency](https://e-resident.gov.ee/run-a-company/) y cuestan alrededor de 25‚Ç¨ al mes

Tambi√©n necesitar√°s **gestionar la contabilidad de tu empresa**. Yo siempre he sido partidario de hacer esto uno mismo, pero como no somos expertas/os en el sistema administrativo y fiscal de Estonia, es recomendable delegar esta tarea a alguien que controle el tema y se su trabajo diario.

Por suerte existen [multitud de proveedores](https://e-resident.gov.ee/run-a-company/) que te gestionan todo esto, desde el registro de la compa√±√≠a, la oficina virtual, la contabilidad y presentaci√≥n de impuestos as√≠ como resoluci√≥n de cualquier duda que tengas por un coste mensual.

El que te recomiendo, es m√°s r√°pido y que encima hablan tu idioma es **[COMPANIO (antigua "Tu empresa en Estonia"](https://carlosazaustre.es/companio)**. Nacho, su fundador, es un antiguo compa√±ero _Startupero_ de mi etapa en la pre-aceleradora Tetuan Valley.

Ellos se encargan de todo, incluso de asistirte al solicitar tu e-residency. Tu √∫nicamente has de enviarles todos los meses tus facturas de ingresos y gastos y el extracto bancario de tu cuenta de empresa.

> _Adem√°s, si te registras con **[este link](https://carlosazaustre.es/companio) te descuentan 50‚Ç¨** de su tarifa._

Resumiendo, dependiendo del volumen de tu negocio, tendr√°s unos costes mensuales de contabilidad, gesti√≥n y oficina virtual de entre **59‚Ç¨ - 150‚Ç¨** (m√°s IVA)

### Cuenta Bancaria

![Cuenta bancaria y tarjeta de cr√©dito Holvi](/images/empresa-estonia/hero-e-residents-1024x546@2x.jpg)

Necesitar√°s una cuenta bancaria para los ingresos y gastos de la empresa. Actualmente hay 3 alternativas:

- [LHV](https://www.lhv.ee/en/), es un banco de Estonia con el que puedes crear tu cuenta corporativa. No tiene ning√∫n gasto de mantenimiento mensual, pero la tarjeta de cr√©dito/d√©bito tiene un coste de 2‚Ç¨ al mes. El √∫nico inconveniente es que para abrir esta cuenta debes ir en persona a Estonia y tener una entrevista de unos 30 minutos con el banco.

- [TransferWise Borderless](https://transferwise.com/gb/borderless/) te permite crear una cuenta virtual y recibir y realizar pagos en pr√°cticamente cualquier divisa del mundo. Tiene unas comisiones muy peque√±as cuando realizas el cambio de divisa.

- [Holvi](https://about.holvi.com/e-residents/) Es otro banco online _fintech_ de origen Fin√©s, pero que tiene una cuenta especial para e-residentes. Este es el que he utilizado para abrir mi cuenta de empresa con Estonia, y se puede hacer totalmente online con tu tarjeta de e-residente. Tardan alrededor de 2-3 d√≠as en verificar tu cuenta ya la tienes operativa. Tienen interfaz en idioma espa√±ol y tiene un coste de **9‚Ç¨ al mes** (+ IVA) con tarjeta de cr√©dito/d√©bito gratuita.

Resumiendo:

- **Costes √∫nicos**:
  - E-Residency: 100‚Ç¨
  - Registro de Empresa: 258‚Ç¨
- **Costes Mensuales fijos**:
  - Contabilidad, Gesti√≥n y oficina Virtual: 59‚Ç¨ - 150‚Ç¨ /mes
  - Cuenta bancaria: 9‚Ç¨ /mes

### Registro de la empresa

Con **[COMPANIO](https://carlosazaustre.es/companio)** es muy sencillo, s√≥lo tienes que registraste [aqu√≠](https://carlosazaustre.es/companio) (_Si te registras con mi link obtienes 100‚Ç¨ de descuento en el registro ;)_) y ellos te asisten durante todo el proceso.

Incluso puedes ir creando tu empresa antes de soliciar la e-residency, y as√≠ el d√≠a que recojas tu tarjeta de e-residente en la embajada ya tendr√°s todo listo para empezar a operar.

![Proceso-para-abrir-una-empresa-en-estonia](/images/empresa-estonia/Proceso-para-el-blog.png)

Tras una serie de pasos, tendr√°s tu empresa lista. Si tienes dudas del proceso, te recomiendo [leas el post en el que lo explican al detalle](https://tuempresaenestonia.com/el-proceso-de-montar-tu-empresa-en-estonia/).

### Abrir cuenta bancaria

De los tres bancos que te he comentado, yo eleg√≠ [Holvi](https://about.holvi.com/e-residents/) por poder gestionarse y **abrirse de manera online** y tener un programa expresamente pensado para e-residentes.

Para ello simplemente has de registrarte, elegir tu email y en pais elegir Estonia (e-residents).

![Abrir una cuenta en Holvi](/images/empresa-estonia/Screen-Shot-2018-09-16-at-17.46.15.png)

Una vez abierta te solicitan que verifiques tu identidad, de nuevo utilizando el kit de e-residente y en **2-3 d√≠as tendr√°s la cuenta operativa**.

Solo tendr√°s que esperar a que el banco te env√≠e la tarjeta de cr√©dito/d√©bito a tu domicilio.

Y listo, ya tienes todo lo necesario para empezar a facturar tus servicios o productos digitales en nombre de tu empresa Estonia y √∫nicamente tendr√°s que proporcionar a [COMPANIO](https://carlosazaustre.es/companio) las facturas y gastos que tengas as√≠ como un extracto mensual bancario para que puedan conciliar los documentos.

</article>

---

<article slug="impuestos-estonia" date="2018-09-18" url="https://carlosazaustre.es/blog/impuestos-estonia">

# Impuestos de una empresa en Estonia

**Fecha:** 2018-09-18
Una vez tienes tu tarjeta de [e-residente de Estonia](/e-residency) el tr√°mite m√°s habitual es [crear una empresa en Estonia](/empresa-estonia).

En este art√≠culo te explico que **tipo de negocios son v√°lidos para una empresa Estonia**, que ventajas tiene y que impuestos existen.

**Navega por el contenido**

- [Qu√© tipos de negocios son v√°lidos para una empresa en Estonia](#qutiposdenegociosonvlidosparaunaempresaenestonia)
- [Qu√© impuestos tiene una empresa en Estonia](#quimpuestostieneunaempresaenestonia)
  - [Impuestos de la empresa](#impuestosdelaempresa)
    - [Impuesto de sociedades](#impuestodesociedades)
    - [Impuesto del valor a√±adido (IVA o VAT)](#impuestodelvarloaadidoivaovat)
    - [¬øCuota de aut√≥nomos?](#cuotadeautonomos)
    - [Gastos de empresa](#gastosdemepresa)
    - [Daily Allowance](#dailyallowance)
    - [Out-of-Pocket Expenses](#outofpocketexpenses)
- [Fuentes y referencias](#fuentesyreferencia)

---

## Qu√© tipos de negocios son v√°lidos para una empresa en Estonia

Esto es **muy importante** ya que no todos los negocios son v√°lidos para [crear una empresa en Estonia](/empresa-estonia). Por ejemplo, si todos tus clientes son de Espa√±a o un mismo pa√≠s, o tienes un lugar f√≠sico d√≥nde desarrollas tu actividad, una empresa en Estonia no es la opci√≥n.

Las empresas en Estonia, al menos las creadas y manejadas remotamente con el programa e-residency **deben ser negocios online, que funcionan independientemente de la localizaci√≥n y que tienen clientes en todo el mundo**.

Entonces ¬øCu√°les son los tipos de negocios que puedo gestionar en una empresa en Estonia?. Pues los siguientes:

- Si eres freelance y tienes clientes de varios paises.
- Vendes productos digitales (ebooks, cursos online, tutorias online,...)
- Desarrollas aplicaciones m√≥viles
- Eres blogger y monetizas a trav√©s de AdSense u otras plataformas de anuncios.

En definitiva, **cualquier negocio online que no requiera de una localizaci√≥n fisica**, los clientes sean mundiales y no se base en compra-venta de productos f√≠sicos.

Todo lo que puedas hacer desde un ordenador con conexi√≥n a internet desde cualquier parte del mundo.

> **DISCLAIMER**: Esto que comento es basado en mi experiencia y en lo que he descubierto preguntando y leyendo. Como siempre, si quieres estar 100% seguro de lo que haces, **lo recomendable es hablar con un asesor o gestor**. No me hago responsable de los posibles malentendidos o inconvenientes que surjan.

> **DISCLAIMER 2**: **Estonia no es un paraiso fiscal**, ni es ilegal crear una empresa en el pa√≠s. Como ciudadano/a del mundo puedes crear una empresa d√≥nde quieras. En algunos pa√≠ses es m√°s complicado que en otros, porque en muchos necesitas estar presente varias veces al a√±o. Estonia ha digitalizado toda la administraci√≥n y gracias al programa [e-residency](https://carlosazaustre.es/e-residency) no tienes que ir en persona al pa√≠s para realizar los tr√°mites

## Qu√© impuestos tiene una empresa en Estonia

Antes de hablar de impuestos, tienes que tener claro una cosa: **Una empresa es una entidad fiscal y tu, como persona trabajadora, eres otra entidad fiscal diferente**.

Esto quiere decir que la empresa tendr√° unos impuestos (computables en Estonia, ya que la empresa tiene la residencia fiscal ese pa√≠s) y tu tendr√°s otros impuestos (computables seg√∫n el pa√≠s de residencia en el que vivas).

### Impuestos de la empresa

Una vez que tenemos esto claro pasamos a explicar que impuestos debe pagar una empresa en Estonia.

#### Impuesto de Sociedades

La empresa tiene un **impuesto de sociedades del 0%**. Esto quiere decir que todo el dinero que ingresa la empresa y se quede en ella, no paga impuestos.

En Espa√±a, si tienes una S.L. por ejemplo, al final del a√±o si tu empresa tiene beneficios, has de pagar el 25% de ellos. Una cuarta parte. En Estonia por el contrario, en la misma situaci√≥n, no se paga ese impuesto.

#### Impuesto del valor a√±adido (IVA o VAT)

Si tu empresa Estonia factura menos de 40,000‚Ç¨ al a√±o, no est√° obligada a declarar el IVA.

El registro como operador VAT es opcional hasta que factures esa cantidad, pero es recomendable hacerlo para quedar registrado como operador intra-comunitario. ¬øPor qu√©?

##### Si vendes servicios (Desarrollo de software, dise√±os, consultor√≠a,...)

- Si facturas a una **empresa europea/aut√≥nomo europeo** y ella/el tambi√©n est√° registrada/o como operador **intra-comunitario, (tiene n√∫mero VAT) no se carga IVA en las facturas**. A√±adiendo la siguiente cla√∫sula a la factura: _The purchase is liable to Intra-Community supply 0%, Reverse charge_ Es suficiente.
- Si es un cliente individual (no es aut√≥nomo o empresa), en tu factura debe haber un **IVA del 20% (El IVA de Estonia)**
- Si el cliente est√° fuera de Europa (ya sea cliente o empresa/aut√≥nomo) el IVA es del 0%.

##### Si vendes productos digitales (ebooks, cursos online, etc...)

- Si el cliente es una **empresa europea/aut√≥nomo europeo con n√∫mero VAT** (o registrada como operador intracomunitario) el IVA es del 0% y se a√±ade la misma cla√∫sula anterior
- Si el cliente es individual o una empresa que no est√° registrada como intra-comunitaria (o no tiene n√∫mero VAT) hay que a√±adir el IVA del pa√≠s del cliente. Si el cliente es espa√±ol, pues el 21%.
- Si el cliente es de fuera de Europa, el IVA vuelve a ser el 0%.

E importante, si la factura es a una empresa estonia, el IVA ha de ser del 20%, ya que ambas se encuentran en el mismo pa√≠s.

#### ¬øCuota de aut√≥nomos?

**En Estonia no existe cuota de autonomos**, ni hay que pagar una cuota mensual por ser administrador de tu propia empresa. Ni hay que registrarse en ning√∫n r√©gimen especial ni nada.

¬øY cu√°ndo se paga?

**Se pagan impuestos cuando sacas dinero de la cuenta de la empresa** a tu cuenta personal, ya sea como sueldo, reparto de dividendos o porque te factures como aut√≥nomo en Espa√±a a tu empresa estonia.

##### Reparto de dividendos

Al principio del a√±o puedes hacer un reparto de dividendos de los beneficios que haya tenido tu empresa. Esto est√° sujeto a un 20% de impuestos, aunque posiblemente baje al 14% en 2019.

Este 20% se pagar√≠a en Estonia, pero al recibirlo en tu cuenta personal, si vives por ejemplo en Espa√±a, tendr√≠as que pagar impuestos en tu pa√≠s cuando hagas la declaraci√≥n de la renta.

##### Salario Mensual

Puedes ponerte un sueldo mensual cuando consideres que tu empresa tiene ingresos suficientes, y no tiene por qu√© ser peri√≥dico.

**Cuando pasas dinero de la cuenta de la empresa a tu cuenta personal como sueldo, pagas una serie de impuestos**.

Tu sueldo se dividide en "2 sueldos":

- **Board Member Salary**, es el salario que tienes como administrador de tu empresa. Suele ser el 30% del total que te pongas como sueldo. Esta parte tiene dos impuestos:
  - Un **25% de impuesto sobre ingresos** sobre el el sueldo de administrador
  - Un **33% de impuesto social** (lo m√°s parecido a una cuota de aut√≥nomos) sobre el sueldo m√°s el impuesto anterior.

El **impuesto del 33% te lo puedes ahorrar si ya contribuyes a la seguridad social en otro pa√≠s Europeo** (por ejemplo si pagas la cuota de aut√≥nomo en Espa√±a)

Estos dos impuestos son pagados en Estonia.

Como Espa√±a tiene un acuerdo de doble tasaci√≥n europeo con Estonia, no tienes que volver a pagar en Espa√±a los impuestos que ya pagas en Estonia.

- **Employee Salary**, es el salario que tienes como empleado de tu propia empresa. Suele corresponder al 70% de lo que te pongas como sueldo. Este sueldo no est√° sujeto impuestos en Estonia, pero si lo est√° en el pa√≠s d√≥nde residas ya que es ah√≠ d√≥nde lo vas a cobrar y disfrutar.

Se a√±adir√° a tu base imponible y dependiendo de lo que ganes/ingreses al final del a√±o, te saldr√° lo que tienes que pagar en la declaraci√≥n de la Renta anual.

Veamos un ejemplo pr√°ctico para ver m√°s claro todo el tema de impuestos.

> _Facundo Mart√≠nez tiene una empresa en Estonia por la que factura unos 4,000‚Ç¨ al mes por desarrollo de software freelance, ingresos por afiliaci√≥n e ingresos por AdSense. Esos 4,000‚Ç¨ van a la cuenta de la empresa._ > _Facundo decide ponerse un sueldo mensual de 1,500‚Ç¨ (para su cuenta personal). Estos 1,500‚Ç¨ hay que aplicarles la proporci√≥n 30/70:_ > _El sueldo de administrador ser√≠an 450‚Ç¨ (el 30%), y el sueldo de empleado ser√≠an 1,050‚Ç¨ (el 70%). √âste √∫ltimo no est√° tasado en Estonia sino en el pa√≠s de residencia de Facundo._ > _Al sueldo de administrador hay que aplicarle los impuestos:_
>
> - _Income Tax (Impuesto sobre ingresos): 25% de 450, que son 112.50‚Ç¨_
> - _Social Tax (Impuesto Social): 33% de la suma de los ingresos m√°s el resultado del impuesto anterior: `(450 + 112.50) _ 0.33 = 185,62‚Ç¨`.* *Pero resulta que Facundo es aut√≥nomo en Espa√±a, ya paga una cuota de 260‚Ç¨ al mes, entonces √©ste √∫ltimo impuesto no tiene que pagarlo.* *Por tanto, de los 4,000‚Ç¨ que Facundo factura al mes con su empresa, al ponerse un sueldo neto de 1,500‚Ç¨, √∫nicamente paga en cuestiones de impuestos 112.50‚Ç¨ mensuales, es decir, en la cuenta de su empresa quedan al m√©s `4000 - 1500 - 112.50 = 2387.50 ‚Ç¨` por los que no tiene que pagar ningun impuesto.\*

√âsto es solo un ejemplo, y se puede jugar con las cantidades. Por ejemplo, **la proporci√≥n 30/70 puede cambiarse a 20/80 (es decir, 20% del sueldo como administrador y 80% como empleado)** si puedes justificar que tus actividades en la empresa son puramente profesionales y no tanto administrativas.

De esta forma pagar√≠as menos impuestos en Estonia. Y por supuesto el sueldo que te asignes puede ser la cantidad que quieras, no tiene por qu√© ser una cifra concreta e incluso puedes no asignarte sueldo si no lo necesitas. En ese caso, todo lo que factures estar√≠a exento de impuestos siempre que se quede en la cuenta de la empresa.

#### Gastos de empresa

Ya hemos hablado de los impuestos por ingresos, pero no hemos hablado nada de gastos y todas las empresas tienen.

Como he citado al principio de √©ste art√≠culo, **Estonia no es un para√≠so fiscal** y comprueban exahustivamente que todos tus ingresos tengan una factura que los detalle, y lo mismo pasa con los gastos, todos ellos tienen que tener un recibo o factura que los justifique.

**No todos los gastos son justificables**, √∫nicamente los que est√©n relacionados con la actividad que realizas y siempre que no te vinculen a un pa√≠s o localizaci√≥n determinada durante periodos largos de tiempo.

Por ejemplo una oficina o sitio de coworking durante 6 meses o m√°s. Esto har√≠a que la actividad de tu negocio est√© ligada a una localizaci√≥n y pueden considerar que la residencia fiscal de tu empresa sea en ese pa√≠s.

**¬øQu√© gastos puedes justificar?**

- Servicios Web, como [Hosting](https://m.do.co/c/f716de9860aa), dominios, GSuite, [listas de correo](https://www.getrevue.co/referrals/9cXsDYCsDG3AcIh0xYAWPw), etc...
- Software de gestion y administraci√≥n.
- [Material de oficina](https://amzn.to/2MAVjsX).
- Gastos de pasarelas de pagos como PayPal, Braintree, Stripe, etc...
- Comidas de trabajo (la de tus clientes, las tuyas no).
- Gastos de viaje por motivos de trabajo, ya sean [vuelos](www.kiwi.com/deep?affilid=carlosazaustre), alquiler de coches, alojamiento (por ejemplo [Airbnb](https://www.airbnb.es/c/pgarcia233?s=8), 25‚Ç¨ de descuento si te registras con √©ste [link](https://www.airbnb.es/c/pgarcia233?s=8)), [Uber](https://www.uber.com/invite/w98eu), transporte p√∫blico, etc...

![Vuelos](/images/impuestos-estonia/Screen-Shot-2018-09-16-at-14.36.00.png)

**¬øQu√© gastos no son justificables?**

- Viajes de placer o vacacionales.
- Gasolina para viajes dentro del mismo pa√≠s de residencia.
- Local u oficina de caracter permanente. So alquilas un puesto de coworking durante un par de meses no habr√≠a problema, pero que no sea lo habitual.

#### Daily Allowance

Este concepto es interesante. Esto se refiere a la **cantidad de dinero que puedes sacar de tu empresa a diario sin que est√© sujeta a impuestos**. Una especie de "dietas" cuando viajas por negocios.

Por ejemplo, si vas a una conferencia de desarrolladores como puede ser el [Google I/O](https://www.youtube.com/playlist?list=PLzgu3iW-MF7Imoft4XyEDDsdd2rQJlaOw) durante 1 semana a Mountain View (California) y declaras el viaje con antelaci√≥n (vuelos, alojamientos y tickets al evento) se te **permite sacar 50‚Ç¨ al d√≠a los primeros 15 d√≠as y 32‚Ç¨ los restantes, libres de impuestos**.

![Google I/O](/images/impuestos-estonia/Screen-Shot-2018-09-16-at-14.40.52.png)

En el caso del viaje a California, si estamos 1 semana fuera, podemos utilizar `50 x 7 = 350‚Ç¨` libres de impuestos para gastos personales (comida, transportes, etc...)

#### Out-of-Pocket Expenses

Los gastos de bolsillo son otra opci√≥n interesante. Imagina que por un momento no llevas la tarjeta de cr√©dito/d√©bito de tu empresa a mano y necesitas realizar un gasto en tu viaje.

Pues puedes utilizar tu tarjeta personal y declarar el gasto con la factura o ticket como "Gasto de bolsillo" (out of pocket expenses) y despues desde tu cuenta de empresa, reembolsarte ese gasto, libre de impuestos.

![Retirar dinero del cajero](/images/impuestos-estonia/Screen-Shot-2018-09-16-at-14.39.56.png)

Estos son los impuestos que debe pagar una empresa en Estonia y los que se te computan a ti como persona una vez tienes el dinero a tu disposici√≥n en tu cuenta personal.

Una vez ya tenemos claros estos conceptos y la tarjeta de [e-residente](/e-residency) en nuestras manos, podemos lanzarnos a [crear nuestra empresa en estonia](/empresa-estonia). Puedes ver los [pasos a seguir en el siguiente art√≠culo](/empresa-estonia).

## Fuentes y Referencia

- [Corporate Income Tax](https://investinestonia.com/business-in-estonia/taxation/)
- [Labour Taxes](https://investinestonia.com/business-in-estonia/taxation/labour-taxes)
- [Value added tax (VAT)](https://investinestonia.com/business-in-estonia/taxation/vat)
- [Salary Calculator](https://www.kalkulaator.ee/en/salary-calculator)
- [Tax Residency](https://www.emta.ee/eng/tax-residency)
- [IVA e impuestos de una empresa en Estonia](https://tuempresaenestonia.com/iva-e-impuestos-de-una-empresa-en-estonia/)

</article>

---

<article slug="e-residency" date="2018-09-12" url="https://carlosazaustre.es/blog/e-residency">

# Qu√© es la e-residency de Estonia y como conseguirla

**Fecha:** 2018-09-12
[Estonia](https://es.wikipedia.org/wiki/Estonia) es un peque√±o pa√≠s de la Uni√≥n Europea, pero muy grande en cuanto a digitalizaci√≥n de la burocracia y administraci√≥n p√∫blica.

Desde hace unos a√±os tienen un programa llamado _e-residency_ que permite a cualquier persona del mundo convertirse en "residente digital" de Estonia.

¬øY eso qu√© es?

**Indice de contenido**

- [Para qu√© me sirve la Ciudadan√≠a Digital](#paraqumesirvelaciudadanadigital)
- [Qu√© puedo hacer con la e-residency](#qupuedohacerconlaeresidency)
- [C√≥mo solicito la e-residency](#cmosolicitolaeresidency)
- [Comprobando que est√° todo OK](#comprobandoqueesttodook)

---

## Para qu√© me sirve la Ciudadan√≠a Digital

La ciudadan√≠a digital no te da el permiso de residencia en Estonia ni la nacionalidad (Si tienes nacionalidad de alg√∫n pa√≠s de la Uni√≥n Europea, puedes residir sin m√°s que tu pasaporte o DNI)

Pero te permite tratar con la administraci√≥n Estonia como si vivieras all√≠.

El programa _e-residency_ te otorga **una tarjeta con chip y certificado electr√≥nico que te permite firmar a distancia documentos y autorizacione**s.

No necesitas vivir en Estonia, pedir cita previa en la administraci√≥n de turno, ni nada.

![e-residency card](/images/e-residency/IMG_20180912_173310.jpg)

Desde tu casa, desde d√≥nde est√©s viajando, siempre que tengas conexi√≥n a internet y tu portatil con USB, puedes usar la tarjeta y el lector que te incluye con el kit para realizar estos tr√°mites.

Y funciona en Mac y Chrome! A la primera!!! (Un saludo a Agencia Tributaria Espa√±ola üëã)

## Qu√© puedo hacer con la e-residency

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=iRt77425yyw)
/>

Vale, todo esto est√° muy bien, pero ¬øPara que quiero firmar telem√°ticamente documentos en Estonia?

Bien, adem√°s de este programa, Estonia es un pa√≠s d√≥nde puedes [crear una Empresa](/empresa-estonia) con un negocio online unipersonal detr√°s con unas condiciones muy interesantes.

Con la _e-residency_ **puedes hacer esto desde cualquier parte del planeta y seas y vivas en el pa√≠s que sea**.

Si te lo est√°s preguntando, **es totalmente legal**, y m√°s adelante, en otro art√≠culo, te contar√© como crear tu empresa en Estonia y las condiciones que tiene: Impuestos, bancos, y todo eso.

## C√≥mo solicito la e-residency

En este articulo te quiero contar **c√≥mo solicitar la tarjeta**, ya que es el primer paso antes de hacer nada y es el que m√°s se tarda. Una vez hecho ya tienes lo necesario por si en un futuro te resulta interesante crear la empresa.

Lo primero que tienes que hacer es ir a la pagina del programa en [http://e-resident.gov.ee/](http://e-resident.gov.ee/)

![Aplica para ser e-residente](/images/e-residency/Screen-Shot-2018-09-11-at-3.36.14-PM.png)

Para solicitarla te pedir√°n una copia de un documento identificativo de tu pa√≠s de residencia. En Espa√±a y paises de la UE puede ser el Documento Nacional de Identidad (DNI) o el mismo pasaporte.

Tambi√©n necesitar√°s una fotograf√≠a tipo carnet. Esto es Importante, **no env√≠es la misma fotograf√≠a que utilizas en el pasaporte** o documento que envies, **ni ninguna foto donde salgas sonriendo** o que se te vean los dientes. Esto suele ser motivo para que te lo rechazen (a mi me pas√≥, envi√© una en la que sonre√≠a y no val√≠a).

No pasa nada, puedes enviar otra cuando te lo avisen, lo √∫nico que pasa es que el proceso se puede alargar varios d√≠as m√°s,

Los siguientes pasos que te piden son los datos personales (Nombre, Pais, ciudadan√≠a, datos de contacto,...) Los datos de tu pasaporte con ID-Card si eres ciudadano de la uni√≥n Europea (Es decir, el DNI de Espa√±a)

![Formulario de aplicaci√≥n para e-residency de Estonia](/images/e-residency/Screen-Shot-2018-09-11-at-3.44.54-PM.png)

Tambi√©n se piden enlaces a tus redes sociales como Facebook, Twitter, Linkedin, etc... pero no son obligatorias.

![Formulario de aplicaci√≥n para e-residency de Estonia](/images/e-residency/Screen-Shot-2018-09-11-at-3.45.16-PM.png)

Y por √∫ltimo te piden las razones y motivaciones por las que pides la e-residency.

![Formulario de aplicaci√≥n para e-residency de Estonia](/images/e-residency/Screen-Shot-2018-09-11-at-3.45.22-PM.png)

Aqu√≠ tienes que poner lo que vas a hacer con ella, que b√°sicamente es poder crear una empresa en Estonia para llevar a cabo tu negocio online unipersonal que no necesita de una localizaci√≥n espec√≠fica (en ingl√©s, eso si)

Y listo, despues tienes que pagar un **fee al gobierno de Estonia de 100‚Ç¨**, y en cuesti√≥n de 1 mes aproximadamente tendr√°s tu e-residency.

Despues te pedir√°n d√≥nde recojerlo, que suele ser la embajada de Estonia en tu pais. En mi caso seleccion√© [la embajada que tienen en Madrid](http://www.estemb.es/), que es la que m√°s cerca ten√≠a.

Te avisar√°n por email cuando est√© listo para que reserves una cita (d√≠a y hora) para pasar a recoger personalmente el kit.

Este paso es muy sencillo, llegas a la embajada en la cita seleccionada, llamas al timbre y dices que vienes a recoger tu tarjeta de e-residente (Puedes hacerlo en espa√±ol).

![Embajada de Estonia en Madrid](/images/e-residency/Screen-Shot-2018-09-12-at-4.23.50-PM.png)

La persona que te atienda en la embajada te pedir√° tu DNI o Pasaporte y te solicitar√° firmar los terminos y condiciones del uso del certificado digital (la tarjeta).

Finalmente te entregar√° el kit, que consiste en una caja (muy chula) con tu tarjeta a tu nombre y un lector USB portable, adem√°s de un sobre con varios n√∫meros PIN:

- **PIN1**: Numero de 4 cifras que te sirve para autenticarte en las webs que te pidan loguearte con tu tarjeta de e-residency
- **PIN2**: N√∫mero de 6 cifras utilizado para firmar la documentaci√≥n que te requieran
- **PUK**: N√∫mero m√°s largo en caso de que olvides los anteriores o necesites cambiarlos.

![e-residency kit](/images/e-residency/IMG_20180912_173233.jpg)
![e-residency kit](/images/e-residency/IMG_20180912_173247.jpg)

## Comprobando que est√° todo OK

Para probar si todo es correcto, puedes comprobar que tu tarjeta est√° activa desde [aqu√≠](https://www2.politsei.ee/en/teenused/inquiries/). Te recomiendo que esperes unas horas ya que no es inmediato, puede llevar de 2 a 3h desde que recibes la tarjeta hasta que te la activan.

Despues tienes que descargarte unos programas y extensiones para el navegador.

En [√©ste otro enlace](https://installer.id.ee/?lang=eng) puedes encontrar las aplicaciones para tu sistema operativo y las instrucciones para instalar las extensiones de tu navegador favorito.

Para comprobar, puedes abrir la aplicacion **DigiDoc4 Client** e insertar tu tarjeta de e-residente en el lector USB. Si todo est√° bien ver√°s ahi tus datos como en la imagen de a continuaci√≥n:

![digidoc4 client](/images/e-residency/digidoc.png)

Como puedes ver es un proceso sencillo, con un **coste √∫nico de 100‚Ç¨** que te permite tener una herramienta con la que crear una empresa en Estonia de manera totalmente remota y online.

El proceso es un poco lento, **lleva aproximadamente un mes**, pero s√≥lo tienes que hacerlo una vez en la vida.

En los siguientes art√≠culos te cuento [como crear tu empresa en estonia](/empresa-estonia), [condiciones, para qu√© tipo de negocios es adecuada](/impuestos-estonia) y b√°sicamente todo lo necesario para decidir.

</article>

---

<article slug="docker-como-entorno-de-desarrollo-local" date="2018-09-01" url="https://carlosazaustre.es/blog/docker-como-entorno-de-desarrollo-local">

# Docker como entorno de desarrollo local

**Fecha:** 2018-09-01
En este art√≠culo quiero compartir como implementar un entorno de desarrollo local en tu ordenador para tus aplicaciones empleando para ello Docker. Lo configuraremos de manera que funcione como un _LiveReload_, a cada cambio que hagamos en el c√≥digo de nuestra aplicaci√≥n, el contenedor lo refleje.

En otros art√≠culos he comentado [c√≥mo crear contenedores de Docker en Mac OSX](/manejando-docker-desde-os-x-creando-nuestro-primer-contenedor/) e incluso [c√≥mo desplegarlos en producci√≥n en Digital Ocean](/desplegando-contenedores-docker-en-digital-ocean/).

Hoy quiero hablar de Docker como una alternativa a [Vagrant como entorno de desarrollo](/como-configurar-un-entorno-de-desarrollo-virtual-con-vagrant/) y provisionamiento.

Docker ha evolucionado mucho en poco tiempo. En un principio solo era posible utilizarlo en un sistema Linux, debido a que utiliza la tecnolog√≠a de contenedores del sistema operativo. Hace poco empez√≥ a ser utilizable en sistemas Mac y Windows gracias la m√°quina virtual `boot2docker`. Y hoy en d√≠a gracias a **[Docker Toolbox](https://docs.docker.com/mac/step_one/)** es posible utilizarlo en cualquier sistema.

## Definiendo el entorno de desarrollo con Docker Compose

En el ejemplo de este art√≠culo voy a utilizar **Ubuntu 14.04** como sistema operativo base y una aplicaci√≥n **Node.js** muy sencilla que ilustre lo que queremos hacer.

Primero de todo vamos a crear una carpeta para nuestro proyecto, en el directorio que prefieras de tu m√°quina local. En el vamos a incluir un fichero `Dockerfile`, un fichero `docker-compose.yml` y una carpeta para el c√≥digo fuente de nuestra aplicaci√≥n que puede ser de nombre `app/`.

Dentro de `app/` vamos a crear un fichero `package.json` muy simple con el siguiente c√≥digo:

```javascript
{
  "name": "project",
  "scripts": {
    "start": "nodemon app.js"
  },
  "dependencies": {
    "express": "^4.x.x"
  },
  "devDependencies": {
    "nodemon": "*"
  }
}
```

Y un fichero con el c√≥digo de la aplicaci√≥n de nombre `app.js` con el siguiente contenido (de momento):

```javascript
console.log("Hola Mundo!");
```

Ahora procedemos con el fichero de la imagen Docker, el `Dockerfile`, que tendr√° el siguiene contenido:

<pre class="language-shell">
  <code class="language-shell">
    FROM node:4.4.0 MAINTAINER cazaustre@gmail.com WORKDIR /app COPY app/ .
  </code>
</pre>

En √©ste fichero b√°sicamente estamos diciendo que utilice la imagen de Node versi√≥n 4.4.0 como base, y que se coloque en el directorio `/app` para trabajar all√≠. Lo siguiente ser√° que copie el contenido de la carpeta `app` local en el directorio actual del contenedor (que sera `app` por la instrucci√≥n anterior)

Dejamos este fichero as√≠ y continuamos con el fichero `docker-compose.yml`:

<pre class="language-shell">
  <code class="language-shell">
    web: build: . command: 'npm start' volumes: - ./app:/app
  </code>
</pre>

Este fichero nos ayuda a reducir c√≥digo del Dockerfile y de comandos a la hora de correr el contenedor. M√°s adelante tambi√©n nos servir√° para defiir otros contenedores y enlazarlos.

Creamos un contenedor de nombre `web` que realiza lo siguiente:

- Con `build` indicamos que imagen de Dockerfile tiene que utilizar. Con la notaci√≥n `.` leer√° el fichero Dockerfile de directorio principal (donde se encuentre el fichero `docker-compose.yml`)

- Con `command` indicamos que comando tiene que ejecutarse al correr el contenedor. En este caso `npm start` que ejecuta el script `start` definido en el `package.json` (`nodemon app.js`)

- Y `volumes` es la parte m√°s importante, ya que nos permite enlazar un directorio local con un directorio dentro del contenedor. En este caso, el directorio `app` donde est√° definido el c√≥digo de la aplicaci√≥n, lo enlazamos con `app` dentro del contenedor. Este es el directorio de trabajo que ya definimos con `WORKDIR` en el fichero `Dockerfile`.

Para poner en marcha este workflow, primero ejecutamos `$ docker-compose build` para construir los contenedores:

<pre class="language-shell">
  <code class="language-shell">
    root@ubuntu:/home/carlosazaustre/Development/project# docker-compose build
    Building web Step 1 : FROM node:4.4.0 ---> 564c70a84ab7 Step 2 : MAINTAINER
    cazaustre@gmail.com ---> Using cache ---> 62f115911e67 Step 3 : WORKDIR /app
    ---> Using cache ---> eb7e7144e107 Step 4 : COPY app/ . ---> b151f82fbff3
    Removing intermediate container 9afda7bedfff Successfully built b151f82fbff3
  </code>
</pre>

Y despu√©s `$ docker-compose up` para ponerlo en marcha:

<pre class="language-shell">
  <code class="language-shell">
    root@ubuntu:/home/carlosazaustre/Development/project# docker-compose up
    Recreating project_web_1 Attaching to project_web_1 web_1 | npm info it
    worked if it ends with ok web_1 | npm info using npm@2.14.20 web_1 | npm
    info using node@v4.4.0 web_1 | npm info prestart project@ web_1 | npm info
    start project@ web_1 | web_1 | > project@ start /app web_1 | > nodemon
    app.js web_1 | web_1 | [nodemon] 1.9.1 web_1 | [nodemon] to restart at any
    time, enter `rs` web_1 | [nodemon] watching: *.* web_1 | [nodemon] starting
    `node app.js` web_1 | Hola Mundo! web_1 | [nodemon] clean exit - waiting for
    changes before restart
  </code>
</pre>

Si todo sale bien, al final en el terminal tiene que aparecer el mensaje `Hola Mundo!` que es lo que hace el fichero `app.js`

## Creando nuestra App Node.js

Ahora vamos a modificar un poco el fichero `app.js` para que cree un peque√±o servidor web con `Express`:

```javascript
const express = require("express");
const app = express();
const port = 3000;

app.set("port", port);

app.get("/", (req, res) => {
  res.send("Hola Mundo!");
});

app.listen(app.get("port"), (err) => {
  console.log(`Server running on port ${app.get("port")}`);
});
```

Y cambiamos el c√≥digo del fichero `docker-compose.yml` para definir un par de cosas nuevas:

<pre class="language-shell">
  <code class="language-shell">
    web: build: . command: sh -c 'npm install; npm start' ports: - '3000:3000'
    volumes: - ./app:/app
  </code>
</pre>

- El comando que ejecutaremos ahora es `sh -c 'npm install; npm start'` que lo que hace es abrir un terminal de shell en el contenedor y ejecutar los comandos `npm install` para instalar las dependencias definidas en el `package.json` y `npm start` para correr el script `start`.

- Con `ports` exponemos fuera del contenedor el puerto que est√° utilizando la aplicaci√≥n, en este caso el `3000`

Si ahora ejecutamos de nuevo `$ docker-compose build` y `$ docker-compose up` tendremos la siguiente salida

<pre class="language-shell">
  <code class="language-shell">
    Recreating project_web_1 Attaching to project_web_1 web_1 | npm info it
    worked if it ends with ok web_1 | npm info using npm@2.14.20 web_1 | npm
    info using node@v4.4.0 web_1 | npm info prestart project@ web_1 | npm info
    start project@ web_1 | web_1 | > project@ start /app web_1 | > nodemon
    app.js web_1 | web_1 | [nodemon] 1.9.1 web_1 | [nodemon] to restart at any
    time, enter `rs` web_1 | [nodemon] watching: *.* web_1 | [nodemon] starting
    `node app.js` web_1 | Server running on port 3000
  </code>
</pre>

Como se puede ver, el servidor est√° escuchando en el puerto `3000`. Si abrimos un navegador en la direcci√≥n `http://localhost:3000` veremos lo siguiente.

> **La IP no ser√° `localhost` si estamos en Mac o Windows**, debido a que Docker necesita una m√°quina virtual linux para ejecutarse. En ese caso ser√° la IP que nos proporcione la m√°quina virtual.

> Para este ejemplo estoy usando Linux Ubuntu, por eso empleo `localhost`

![Docker Hola Mundo](/images/docker-como-entorno-de-desarrollo-local/docker-entorno-desarrollo-hola-mundo.png)

## Realizando cambios en nuestra App

Como tenemos el contenedor corriendo, el volumen enlazado, y el script `nodemon` ejecut√°ndose, si hacemos cambios en el c√≥digo, se ver√°n reflejados en el contenedor.

Vamos a cambiar el c√≥digo de `app.js` para que a la ruta `/:nombre` nos muestre el nombre que pasamos en la URL:

```javascript
const express = require("express");
const app = express();
const port = 3000;

app.set("port", port);

app.get("/:nombre", (req, res) => {
  res.send(`Hola ${req.params.nombre}!`);
});

app.listen(app.get("port"), (err) => {
  console.log(`Server running on port ${app.get("port")}`);
});
```

En cuanto salvemos, la terminal mostrar√° el siguiente mensaje:

<pre class="language-shell">
  <code class="language-shell">
    ... web_1 | [nodemon] restarting due to changes... web_1 | [nodemon]
    starting `node app.js` web_1 | Server running on port 3000
  </code>
</pre>

Y si en el navegador cambiamos la URL a `http://localhost:3000/Carlos` tendremos lo siguiente:

![Docker como entorno de desarrollo](/images/docker-como-entorno-de-desarrollo-local/docker-entorno-desarrollo-livereload.png)

De esta manera, tenemos un entorno de desarrollo definido gracias a Dockerfile, que luego podremos trasladar a producci√≥n, pero a su vez lo podemos utilizar al mismo tiempo que vamos cambiando nuestro c√≥digo como si el entorno estuviese instalado en nuestra m√°quina virtual.

</article>

---

<article slug="es6-tagged-template-literals" date="2018-09-01" url="https://carlosazaustre.es/blog/es6-tagged-template-literals">

# ES6 Tagged Template Literals

**Fecha:** 2018-09-01
[ECMAScript v6, la nueva versi√≥n del est√°ndar de JavaScript](/ecmascript6), ha tra√≠do muchas novedades y hay una de ellas que ha pasado desapercibida y me parece muy interesante.

Son las _ES6 Tagged Template Literals_.

Pero antes veamos un poco de introducci√≥n.

## Template Strings

Como sabr√°s si has estado pendiente de las novedades que trae ES6, con esta nueva versi√≥n tenemos una nueva forma de escribir _strings_ en JavaScript. A mi parecer m√°s c√≥moda y legible que c√≥mo se hac√≠a antes.

Por ejemplo, si antes quer√≠amos imprimir un _string_ con varias variables, ten√≠amos que hacer esto:

```javascript
console.log(
  "Hola, me llamo " +
    nombre +
    ", tengo " +
    edad +
    " a√±os y soy de " +
    pais +
    "."
);
```

Con ES6 utilizando **template strings** podemos escibir lo mismo de una forma m√°s c√≥moda utilizando las comillas invertidas y el s√≠mbolo del d√≥lar `$` seguido de las llaves `{}` sin necesidad de usar el operador `+` para concatenar los _strings_.

```javascript
console.log(`Hola me llamo ${nombre}, tengo ${edad} a√±os y soy de ${pais}`);
```

Tambi√©n es muy √∫til a la hora de imprimir _strings_ multil√≠nea que antes resultaban muy engorrosos. Pod√≠amos hacer as√≠:

```javascript
console.log("Esto es una l√≠nea\nEsto es otra l√≠nea\n y esto es la 3a l√≠nea");
```

o as√≠, para poderlo leer "mejor":

```javascript
console.log(
  "Esto es una l√≠nea\n" + "Esto es otra l√≠nea\n" + "y esto es la 3a l√≠nea"
);
```

El operador de la comilla invertida que utilizamos en los _template strings_ nos permite a√±adir espacios y saltos de l√≠nea sin usar operadores especiales ni el `+` para concatenarlos.

```javascript
console.log(`Esto es una l√≠nea
     Esto es otra l√≠nea
     y esto es la 3a l√≠nea`);
```

Bien, pues sabiendo esto, te presento los ES6 Tagged Template Literals.

## Tagged Templates

¬øY esto qu√© es? Pues no son m√°s que funciones como cualquier otra, pero que son diferentes la forma en la que se las llama.

Imagina que tienes √©sta funci√≥n:

```javascript
function miTaggedTemplateLiteral(strings) {
  return console.log(strings);
}
```

La podr√≠amos llamar directamente pas√°ndole el _string_ con las comillas invertidas, sin necesidad de utilizar los par√©ntesis `()` y nos devolver√≠a un array con los strings pasados como par√°metro:

```javascript
miTaggedTemplateLiteral`Hola`;
// ['Hola']
miTaggedTemplateLiteral`Hola k ase`;
// ['Hola k ase'];
```

Si le pasamos variables, se vuelve m√°s interesante, porque estas variables la funci√≥n es capaz de separarlas, colocando en un array los _strings_ y las variables por separado

```javascript
function miTaggedTemplateLiteral(strings, value, value2) {
  return console.log(strings, value, value2);
}

let nombre = "Carlos";
let edad = 32;
miTaggedTemplateLiteral`Hola soy ${nombre} y tengo ${edad} a√±os`;

// ["Hola soy ", " y tengo ", " a√±os"]
// "Carlos"
// 32
```

Si no sabes cuantos variables vas a utilizar puedes utilizar _rest parameters_ y la funci√≥n quedar√≠a as√≠ y funcionar√≠a igual:

```javascript
function miTaggedTemplateLiteral(strings, ...values) {
  return console.log(strings, ...values);
}
```

## Utilidad

¬øY esto para que puede serme √∫til? Pues es una buena forma de utilizar JavaScript y la potencia de ES6 para construir templates. Veamos como:

Si juntamos la funcionalidad de los _template strings_ de poder escribir en varias l√≠neas, el operador _rest_ y con la posibilidad de utilizar este tipo de funciones, podemos crear una funci√≥n que manipule estos datos y llamarla de esta manera:

```javascript
const data = {
  nombre: "Google Pixel L",
  imagen: "http://example.com/miImagen.png",
  precio: 699,
};

const miProducto = generaTemplate`<article>
  <h1>${nombre}</h1>
  <img src="${imagen}" />
  <span>${precio} ‚Ç¨ </span>
</article>`(data);

console.log(miProducto);
/* "<article>
  <h1>Google Pixel L</h1>
  <img src=http://example.com/miImagen.png />
  <span>699 ‚Ç¨ </span>
</article>"
*/
```

Y la funci√≥n `generaTemplate` ser√≠a algo como esto:

```javascript
function generaTemplate(strings, ...keys) {
  return function (data) {
    let temp = strings.slice();
    keys.forEach((key, i) => {
      temp[i] = temp[i] + data[key];
    });
    return temp.join("");
  };
}
```

Puedes ver esto en funcionamiento en el siguiente [JSBin](http://jsbin.com/mutedicali/1/edit?js,console)

Esta misma funcionalidad y mucho mejor implementada es lo que hace la [librer√≠a `html` de JavaScript](https://www.npmjs.com/package/html) creada por [Max Ogden](https://github.com/maxogden) tambi√©n creador de librer√≠as como [yo-yo](https://github.com/maxogden/yo-yo) similar a React pero mucho m√°s sencilla que en lugar de utilizar JSX utiliza √©sta funcionalidad que hemos visto de las _Tagged Template Literals_ y tambi√©n es utilizada en un peque√±o framework web muy interesante llamado [Choo](https://github.com/yoshuawuyts/choo) creado por [Yoshua Wuyts](https://github.com/yoshuawuyts) que si tengo tiempo me gustar√≠a probar y hablar de el en pr√≥ximos posts.

## Recursos

A continuaci√≥n te comparto una serie de links d√≥nde puedes profundizar sobre √©ste tema:

- [Exploring ES6: Tagged Templates](http://exploringjs.com/es6/ch_template-literals.html#sec_tagged-templates-examples)
- [2ality: Computing tag functions for ES6 template literals](http://www.2ality.com/2016/11/computing-tag-functions.html)
- [MDN: Template Literals](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Template_literals)

</article>

---

<article slug="webcomponents-nativos-como-pasar-propiedades" date="2018-08-31" url="https://carlosazaustre.es/blog/webcomponents-nativos-como-pasar-propiedades">

# WebComponents Nativos: C√≥mo pasar propiedades

**Fecha:** 2018-08-31
En un [post anterior vimos como crear un webcomponent de forma nativa](/como-crear-webcomponent-de-forma-nativa/), sin librer√≠as. Utilizando puro JavaScript y las APIS del navegador (**CustomElements v1** y **ShadowDOM v1**)

Este art√≠culo extiende el anterior para ver como podr√≠amos pasar propiedades a un **WebComponent**.

## A√±adiendo una propiedad al Web Component

Voy a tomar el [ejemplo anterior](/como-crear-webcomponent-de-forma-nativa/) para a√±adir una propiedad al elemento.

Antes ten√≠amos `<sell-button></sell-button>` ahora quiero a√±adir el texto del bot√≥n como propiedad tal que as√≠: `<sell-button text="Lo quiero!"></sell-button>`

As√≠ que tomando el c√≥digo de `sell-button.html` que ten√≠amos:

```javascript
class SellButton extends HTMLElement {
  constructor() {
    super();
    this.importDocument = document.currentScript.ownerDocument;
  }

  connectedCallback() {
    let shadowRoot = this.attachShadow({ mode: "open" });
    const t = this.importDocument.querySelector("#sellBtn");
    const instance = t.content.cloneNode(true);
    shadowRoot.appendChild(instance);
  }
}

window.customElements.define("sell-button", SellButton);
```

Vamos a realizar algunos cambios para que acepte propiedades. Modificamos un poco el `<template>` eliminando el texto del `button` y colocando un tag `slot` que nos permite a√±adir texto desde el exterior:

```markup
<div class="btn-container">
  <button class="btn"><slot></slot></button>
</div>
```

Los elementos pueden reaccionar ante cambios en sus atributos, si estos han sido definidos en otra de las funciones del ciclo de vida de un `customElement` en concreto en la funci√≥n `attributeChangedCallback` que recibe como par√°metros el nombre del atributo o propiedad, el valor que ten√≠a anteriormente y el nuevo valor.

Aqui lo que vamos a hacer es cambiar el contenido textual del componente (gracias al tag `<slot>` que hemos a√±adido al `template`) por el nuevo valor

### Observando cambios

```javascript
attributeChangedCallback(name, oldValue, newValue) {
  this.textContent = newValue;
}
```

√âste m√©todo s√≥lo se disparar√° si hemos declarado el atributo o propiedad `attrName` en la funci√≥n `observedAttributes` de la clase del elemento.

```javascript
static get observedAttributes () {
   return ['text'];
}
```

Es una funci√≥n `get` de ECMAScript6, lo que significa que va a ser invocada autom√°ticamente, en este caso cuando se dispare `attributeChangedCallback` y se ejecutar√° por cada uno de los atributos que tengamos en el array que devuelve la funci√≥n. En este caso solo el atributo `text`.

Resumiendo, el contenido actualizado del **Web Component** `sell-button` ser√° el siguiente:

```javascript
<html>
  <template id="sellBtn">
    <style>
      :host {
        --orange: #e67e22;
        --space: 1.5em;
      }
      .btn-container {
        border: 2px dashed var(--orange);
        padding: var(--space);
        text-align: center;
      }
      .btn {
        background-color: var(--orange);
        border: 0;
        border-radius: 5px;
        color: white;
        padding: var(--space);
        text-transform: uppercase;
      }
    </style>

    <div class="btn-container">
     <button class="btn"><slot></slot></button>
   </div>
  </template>

  <script>
    class SellButton extends HTMLElement {
      constructor() {
        super();
        this.importDocument = document.currentScript.ownerDocument;
      }

      static get observedAttributes () {
        return ['text'];
      }

      attributeChangedCallback (name, oldValue, newValue) {
        this.textContent = newValue;
      }

      connectedCallback () {
        let shadowRoot = this.attachShadow({mode: 'open'});
        const t = this.importDocument.querySelector('#sellBtn');
        const instance = t.content.cloneNode(true);

        shadowRoot.appendChild(instance);
      }

    }

    customElements.define('sell-button', SellButton);
  </script>

</html>

```

Y para verificar que si se cambia el atributo, se refleja en el interior del `template` del componente, vamos a crear una funci√≥n de `setTimeout` que pasados 3 segundos, modifique el valor de la propiedad `text`:

```javascript
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>WebComponents</title>
    <link rel="import" href="components/sell-button.html">
  </head>
  <body>
    <sell-button text="Comprar Ahora"></sell-button>

    <script type="text/javascript">
      setTimeout(() => {
        let anotherEl = document.querySelector('sell-button');
        anotherEl.setAttribute('text', 'Lo quiero ahora!');
      }, 3000);
    </script>
  </body>
</html>
```

De esta forma, al cargar la p√°gina tendremos esto:
![](/images/webcomponents-nativos-como-pasar-propiedades/Screen-Shot-2017-03-22-at-13.15.40.png)

Y despu√©s, tras cambiar el valor de `text` por el texto: "Lo quiero ahora!" tendr√≠amos esto:

![](/images/webcomponents-nativos-como-pasar-propiedades/Screen-Shot-2017-03-22-at-13.15.44.png)

Puedes ver esto en funcionamiento en el siguiente **[CodePen](https://codepen.io/carlosazaustre/project/editor/ArjknA/)**

> **RECUERDA**:

> Prueba este ejemplo en una versi√≥n reciente de Chrome o en su defecto en Chrome Canary, ya que los `HTMLImports` no est√°n soportados en Safari, Firefox ni Edge. Para eso necesitas usar el Polyfill de `webcomponents`

## A√±adiendo m√°s de una propiedad

¬øY qu√© pasa si queremos utilizar m√°s de una propiedad?
En ese caso hay que hacer algo m√°s de "fontaner√≠a". Imaginemos que ahora nuestro _custom-element_ queremos que tenga √©sta pinta y que ademas sus propiedades sean _observables_:

```html
<sell-button intro="Oferta" text="Comprar Ahora"></sell-button>
```

Bien, primero vamos a modificar el `<template>` ya que ahora con un √∫nico elemento `<slot>` no nos sirve, ya que tendremos dos propiedades. Vamos a a√±adir otro y los vamos a distinguir por la propiedad `name`:

```html
<div class="btn-container">
  <h1><slot name="intro"></slot></h1>
  <button class="btn"><slot name="text"></slot></button>
</div>
```

Despu√©s a√±adimos la nueva propiedad `intro` a la funci√≥n `observedAttributtes`:

```javascript
static get observedAttributes () {
  return ['intro', 'text'];
}
```

Tambi√©n vamos a actualizar el constructor, a√±adiendo un par de variables "privadas" que guarden el valor de estos atributos para uso interno:

```javascript
constructor() {
  super();
  this._text = null;
  this._intro = null;
  this.importDocument = document.currentScript.ownerDocument;
}
```

Despu√©s vamos a implementar dos funciones _getter_ y _setter_ de ECMAScript 6 que se invocar√°n cada vez que vayamos a acceder a la propiedad en cuesti√≥n. Es decir, si queremos acceder a `this.intro` o cambiar el valor de `this.intro`, se llamar√° autom√°ticamente a la funci√≥n `get intro()` en el primer caso y a la funci√≥n `set intro(val)` en el segundo:

```javascript
get text () {
  return this.getAttribute('text');
}
set text (val) {
  this._text = val;
}

get intro () {
  return this.getAttribute('intro');
}
set intro (val) {
  this._intro = val;
}
```

Lo √∫nico que hacemos aqu√≠ es que cuando queramos leer el valor de `text` o `intro` devolvemos el valor que tiene el atributo con `this.getAttribute`. Y cuando lo queramos modificar le pasamos el valor a la variable "privada" que habiamos declarado en el constructor.

Despu√©s modificamos la funci√≥n `attributeChangedCallback` para que ante los cambios (si se producen) sea capaz de reflejarlos en el ShadowDOM:

```javascript
attributeChangedCallback (name, oldValue, newValue) {
  if (this.shadowRoot) {

  this.shadowRoot.querySelector(`[name="${name}"]`).innerHTML = this[name];
  }
}
```

Como `name` cambia seg√∫n los atributos que se devuelven en el array de `observedAttributes`, `name` ser√° `text` o `intro` seg√∫n lo que se actualice.

Aqu√≠ hacemos una comprobaci√≥n si existe el `shadowRoot` ya que en un primer momento, cuando declaramos el componente con propiedades, este m√©todo se invoca pero el ShadowDOM no est√° listo, entonces hay que hacer esta peque√±a comprobaci√≥n, para cuando lo est√© poder hacer una llamada a `querySelector` buscar el `<slot>` con el nombre que hayamos definidos y pasarle el valor de `this.intro` o `this.text` seg√∫n el atributo que se haya cambiado.

Y por √∫ltimo, actualizamos el m√©todo `connectedCallback` para que a√±ada los valores de las propiedades al ShadowDOM en su creaci√≥n:

```javascript
connectedCallback () {
  let shadowRoot = this.attachShadow({mode: 'open'});
  const t = this.importDocument.querySelector('#sellBtn');
  const instance = t.content.cloneNode(true);

  instance.querySelector('[name="text"]').innerHTML = this.text;
  instance.querySelector('[name="intro"]').innerHTML = this.intro;

  shadowRoot.appendChild(instance);
}
```

Resumiendo, el componente completo ser√≠a as√≠:

```javascript
<html>
  <template id="sellBtn">
    <style>
      :host {
        --orange: #e67e22;
        --space: 1.5em;
      }
      .btn-container {
        border: 2px dashed var(--orange);
        padding: var(--space);
        text-align: center;
      }
      .btn {
        background-color: var(--orange);
        border: 0;
        border-radius: 5px;
        color: white;
        padding: var(--space);
        text-transform: uppercase;
      }
    </style>

    <div class="btn-container">
      <h1><slot name="intro"></slot></h1>
     <button class="btn"><slot name="text"></slot></button>
   </div>
  </template>

  <script>
    'use strict';

    class SellButton extends HTMLElement {
      constructor() {
        super();
        this._text = null;
        this._intro = null;
        this.importDocument = document.currentScript.ownerDocument;
      }

      static get observedAttributes () {
        return ['intro', 'text'];
      }

      attributeChangedCallback (name, oldValue, newValue) {
        if (this.shadowRoot) {
          this.shadowRoot.querySelector(`[name="${name}"]`).innerHTML = this[name];
        }
      }

      connectedCallback () {
        let shadowRoot = this.attachShadow({mode: 'open'});
        const t = this.importDocument.querySelector('#sellBtn');
        const instance = t.content.cloneNode(true);

        instance.querySelector('[name="text"]').innerHTML = this.text;
        instance.querySelector('[name="intro"]').innerHTML = this.intro;

        shadowRoot.appendChild(instance);
      }

      get text () {
        console.log('get text()')
        return this.getAttribute('text');
      }
      set text (val) {
        console.log(`set text(${val})`);
        this._text = val;
      }

      get intro () {
        console.log('get intro()');
        return this.getAttribute('intro');
      }
      set intro (val) {
        console.log(`set intro(${val})`);
        this._intro = val;
      }
    }

    customElements.define('sell-button', SellButton);
  </script>

</html>
```

Si en nuestro `index.html` modificamos el componente con el nuevo atributo, tendr√≠amos este resultado:

```markup
<sell-button intro="Oferta" text="Comprar Ahora"></sell-button>
```

![](/images/webcomponents-nativos-como-pasar-propiedades/Screen-Shot-2017-03-22-at-17.41.05.png)

Y si hacemos como con el ejemplo anterior, una funci√≥n de _timeout_ que cambie las propiedades pasados 2 segundos, tendremos el nuevo resultado:

![](/images/webcomponents-nativos-como-pasar-propiedades/Screen-Shot-2017-03-23-at-09.18.08.png)

En el mismo [CodePen](https://codepen.io/carlosazaustre/project/editor/ArjknA/) tienes el c√≥digo y demo de este ejemplo (En este caso en el archivo `sell-button-copy.html`.

## Conclusi√≥n

Con esto hemos visto como funciona el est√°ndar de _Web Components_ de la W3C. Usando las APIs nativas que provee el navegador. Como has podido ver, hay bastante c√≥digo que puede ser algo repetitivo si por ejemplo tenemos varias propiedades a observar.

Este tipo de cosas son las que implementan librer√≠as como [Polymer](https://www.polymer-project.org/) que sobre todo en su versi√≥n 2.0 han eliminado muchas cosas para dar mayor protagonismo al soporte nativo del navegador.

---

## Referencias

Si quieres profundizar m√°s sobre √©sta nueva tecnolog√≠a te dejo los siguientes enlaces:

- [Especificaci√≥n de la W3C sobre CustomElements](https://www.w3.org/TR/custom-elements/)
- [_Observing Changes to Attributes_: Custom Elements v1 Reusable Web Components por Google Developers](https://developers.google.com/web/fundamentals/getting-started/primers/customelements#upgrades)
- [Custom Elements, by Mozilla Developer Network](https://developer.mozilla.org/en-US/docs/Web/Web_Components/Custom_Elements)

</article>

---

<article slug="banco-online-sin-comisiones" date="2018-08-24" url="https://carlosazaustre.es/blog/banco-online-sin-comisiones">

# Eligiendo un banco online sin comisiones. Mi experiencia con N26

**Fecha:** 2018-08-24
Desde hace una semana soy usuario de [N26, un banco online sin comisiones](https://carlosazaustre.es/n26) y poco a poco lo estoy utilizando como mi cuenta principal.

En este art√≠culo quiero contarte mi experiencia con este nuevo banco.

**Navega por el contenido**

- [Banco online sin comisiones](#quesunbancoonlinesincomisiones)
  - [Registro](#registro)
- [Qu√© tiene de especial](#qutienedeespecial)
  - [Retirada de Efectivo](#retiradadeefectivo)
  - [Cambio de divisa real](#cambiodedivisareal)
  - [N√∫mero IBAN](#nmerodeiban)
  - [Interfaz de usuario](#interfazdeusuario)
  - [M√°s servicios](#msservicios)
- [Mejor cuenta y tarjeta para aut√≥nomos](#mejorcuentaytarjetaparaautnomos)
- [Opci√≥n premium](#opcinpremium)
- [Conclusi√≥n: Una gran experiencia](#conclusinunagranexperiencia)

## Qu√© es un banco online sin comisiones

Como su nombre indica es un banco online sin comisiones, es un banco de los de toda la vida (guardan tu dinero, lo invierten, puedes disponer de el cuando lo necesites etc...) pero **funcionan totalmente online** (no tienen oficina f√≠sica)

Y sin comisiones, lo mismo, **no tienes que pagar una cuota por tener la cuenta, por tener la tarjeta, por hacer transferencias**, etc...

Y N26 es justamente eso. Ni m√°s ni menos. Pero tiene una experiencia de usuario, a mi parecer, excelente.

### C√≥mo registrarse y obtener una cuenta

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=xIM4mbwqG7Y)
/>

Hacerse una cuenta en N26 es super sencillo.

Puedes utilizar la aplicaci√≥n de N26 tanto v√≠a web como app m√≥vil nativa para Android y iPhone. [Yo **me registr√© a trav√©s del movil** mientras estaba de vacaciones](https://carlosazaustre.es/n26). Se tarda poco m√°s de 5 minutos y listo.

En una semana aproximadamente te llegar√° tu tarjeta de d√©bito de MasterCard. No tienes que pagar nada con ella, ni siquiera el env√≠o (al menos en Espa√±a).

[![tarjeta de debito N26](/images/banco-online-sin-comisiones/n26.png)](https://carlosazaustre.es/n26)

> La tarjeta es una chulada. Si, es transparente, le da un toque muy personal.

## Qu√© tiene de especial

N26 comparte muchas caracter√≠siticas con [Revolut](https://www.revolut.com/es/) del cual soy tambi√©n usuario. Revolut fue la pionera en √©ste mercado de bancos online sin comisiones. Como son competencia, de vez en cuando una saca una nueva _feature_ que la pone en cabeza.

A d√≠a de hoy ambas tienen m√°s o menos las mismas funcionalidades, pero en general creo que N26 es un paso m√°s, dependiendo del uso que quieras darle.

### Retirada de Efectivo

Una de las cosas que me encanta es que **te permite retirar dinero efectivo (en euros) de cualquier cajero autom√°tico sin cobrarte** comisi√≥n.

Te permiten hasta **5 retiradas al mes** sin cobrarte nada. En Espa√±a anteriormente ten√≠amos ING que era parecido pero cada vez es m√°s complicado encontrar un cajero que no te cobre comisi√≥n, la mayor√≠a te cobra 0.85‚Ç¨ y otros como el Santander te cobran 2‚Ç¨.

Con N26, **despues de las 5 retiradas mensuales** (que creo que son suficientes) **te cobran 2‚Ç¨ por cada retirada**.

### N√∫mero de IBAN

**N26 te provee un numero de IBAN completo y personal**, con lo que puedes hacer transferencias desde tu banco actual al IBAN de tu cuenta N26 y operar como cualquier otro banco.

### Divisas al tipo de cambio real

Si [viajas al extranjero](/viajar-estados-unidos), es bueno tener algo de efectivo en la divisa del pa√≠s que visitas.

O si compras online y el precio est√° en otra divisa, normalmente el banco cobra una comisi√≥n por el cambio y el valor no suele estar actualizado.

Al igual que Revolut que he mencionado antes, **N26 te permite cambio de divisa al tipo real** en tus compras. Lo que hace que en numerosas ocasiones puedas salir beneficiado.

Si **retiras efectivo de un cajero en otra divisa distinta del Euro, te cobran 1.7% del dinero retirado**. Es decir si sacas $50, te cobrar√°n una comisi√≥n de $0.85.

### Interfaz de usuario

La interfaz de la aplicaci√≥n, tanto la versi√≥n web como la app m√≥vil.

![Aplicaci√≥n N26](/images/banco-online-sin-comisiones/Screen-Shot-2018-08-23-at-16.04.05.png)

### Subcuentas

Recientemente han a√±adido la funcionalidad de crear subcuentas. Es decir, **cuentas dentro de tu cuenta bancaria** pero no linkadas directamente a tu tarjeta de d√©bido.

Si eras o eres usuarix de ING, ser√≠a algo similar a la "Cuenta Naranja" pero sin intereses. Aunque para lo que est√° dando ING √∫ltimamente de inter√©s...

### Google Pay y Apple Pay

La tarjeta de N26 es compatible con [los servicios de pago de Google y Apple](https://carlosazaustre.es/n26), por lo que puedes pagar en comercios con tu smartphone (que tenga NFC) ya sea Android o iPhone.

[![N26 en google pay](https://carlosazaustre.es/content/images/2018/08/N26-Google_Pay-Web_Product-EN__1_.png)](https://bit.ly/tarjetaN26)

Es una ventaja porque es una tarjeta menos que llevas encima, pero con lo que mola la tarjeta yo casi no uso esa funcionalidad :P

### M√°s servicios

Otros servicios que tiene N26 son:

- **Reseteo de PIN**: En otros bancos, la tarjeta viene con un PIN por defecto y para cambiarlo tienes que hacerlo desde un cajero. Con N26 tu configuras el PIN desde la aplicaci√≥n y puedes cambiarlo cuando quieras
- **Categorizaci√≥n de gastos**: Como muchas aplicaciones _fintech_ puedes categorizar tus gastos y as√≠ puedes ver mes a mes en que te gastas el dinero.
- **L√≠mites**: Puedes establecer l√≠mites de gasto diarios y de retiradas para darle m√°s seguridad a tu cuenta. Puedes activar/desactivar cuando quieras los pagos en el extranjero, en linea o las retiradas de efectivo.
- **Notificaciones**: Recibes en tu tel√©fono una notificaci√≥n push cada vez que se realiza una transferencia o cobro

![Opciones de la tarjeta N26](/images/banco-online-sin-comisiones/Screen-Shot-2018-08-23-at-16.07.15.png)

## Mejor cuenta y tarjeta para aut√≥nomos.

Reci√©ntemente N26 ha lanzado la [cuenta **N26 Business Smart** enfocada a profesionales aut√≥nomos](https://carlosazaustre.es/n26).

B√°sicamente es igual que una cuenta N26 Est√°ndar pero enfocada m√°s **para recibir ingresos de tus clientes** y utilizarla para pagar **los gastos derivados de tu actividad como aut√≥nomo o freelance**.

Tiene una ventaja y es que **te reembolsan el 0.1% de tus compras directamente en tu cuenta al final de cada trimestre**. Por ejemplo si te compras un portatil de 1000‚Ç¨, N26 te reembolsa 10‚Ç¨. No es que sea la _panacea_ pero menos da una piedra.

La √∫nica desventaja que tiene, por ahora al menos, es que solo puedes tener una cuenta con N26. Y tienes que elegir si la quieres Business o la Estandar.

Espero que m√°s adelante lo revisen y permitan tener al menos dos por persona, una personal y otra para negocios.

## Opci√≥n premium

La opci√≥n premium, o [**tarjeta N26 You - Travel Account**, es una opci√≥n muy interesante si viajas mucho](https://carlosazaustre.es/n26). Tiene un coste mensual de 9.90‚Ç¨ y a cambio tienes 0% de comisi√≥n en retiradas de efectivo en moneda extranjera.

![n26 black card](/images/banco-online-sin-comisiones/black-card-back-es.png)

¬øCu√°ndo sale √©sto rentable? Si haces el c√°lculo de la sucripci√≥n entre la comisi√≥n te sale `9.90/0.0017 = 582`, es decir que tendr√≠as que retirar 582‚Ç¨ al mes.

Pero esa suscripci√≥n no s√≥lo tiene esa ventaja. La tarjeta Black te provee de varios seguros:

- **Seguro m√©dico de viaje**: Si tienes una urgencia en el extranjero, te reembolsan los gastos m√©dicos o de hospital.
- **Seguro de viaje**: Si compras un vuelo con la tarjeta black y tienes un retraso de m√°s de 4 horas te reembolsan los gastos ocasionados. Y tambi√©n si tu equipaje facturado llega con 6 horas de retraso. En mi √∫ltimo viaje a Estados Unidos me hubiese venido bien cuando perdieron el carrito de la ni√±a...
- **Robo de tel√©fono m√≥vil**: Si compras un tel√©fono m√≥vil con tu tarjeta N26 Black y te lo roban, te reembolsan el importe.
- **Robo de efectivo**: Si por mala suerte te atracan cuando retiras efectivo con tu tarjeta N26 Black te reembolsan el importe hasta 4 horas despues de la retirada.
- **Protecci√≥n de compras**: N26 te da un a√±o adicional de garant√≠a a los productos que compres con tu tarjeta black y tambi√©n te lo cubre si te lo roban o tiene alg√∫n da√±o.

Todo eso por 9.90‚Ç¨ al mes merece la pena pens√°rselo. No soy usuario de la Black (todav√≠a) pero es algo que tengo en mente para m√°s adelante.

## Conclusi√≥n: Una gran experiencia

Durante mi vida he abierto cuentas en varios bancos (La Caixa, ING, Openbank...) y aunque algunos han sido m√°s eficientes que otros, al final siempre hay un "_pestillo casposo_" que los rodea.

Por no hablar que la gran parte de ellos no te abren una cuenta si no tienes una n√≥mina fija, ingresos mensuales recurrentes o una cantidad depositada que no puedes tocar.

Los nuevos bancos online, como N26, no te preguntan ni te exigen tanto. Con **N26 no tuve que aportar m√°s que mi direcci√≥n para que me enviasen la tarjeta**.

Estoy **empezando a utilizar N26 como mi cuenta principal**, sobre todo por la retirada de efectivo y porque [cuando viajamos](/tags/‚úàÔ∏è-viajes), poder pagar al tipo de cambio real y retirar efectivo de un cajero sin comisi√≥n es una ventaja.

Si est√°s pensando en cambiar de banco o probar una alternativa a lo tradicional, m√°s moderna y de acorde a los tiempos en los que estamos donde **el mundo no tiene fronteras**, [te recomiendo que abras una cuenta](https://carlosazaustre.es/n26), porque es totalmente gratis y hagas como yo, probarlo, y si te gusta, utilizarla como cuenta habitual.

</article>

---

<article slug="viajar-estados-unidos" date="2018-08-18" url="https://carlosazaustre.es/blog/viajar-estados-unidos">

# Viajar a Estados Unidos de forma barata. Nuestra experiencia

**Fecha:** 2018-08-18
_Actualizado: Agosto 2018_

En 2013, despu√©s de [un a√±o en Irlanda trabajando como Freelance](/como-ser-autonomo-en-irlanda/), tanto [Paola](http://twitter.com/ggarciapaola) como yo, necesit√°bamos un descanso y un cambio de aires para recuperar energ√≠a.

Nunca hab√≠a estado en **Estados Unidos** üá∫üá∏ y ten√≠a muchas ganas de viajar por all√≠. Ya que el vuelo consume muchas horas, quer√≠amos aprovechar y pasar m√°s tiempo que la t√≠pica semana o 15 d√≠as, as√≠ que lo organizamos de tal manera que pudi√©semos estar poco m√°s de 1 mes por all√≠ sin que supusiera demasiado coste para nuestros bolsillos _freelancers_ :P

Con √©ste art√≠culo quiero compartir como fue nuestra experiencia por all√°, el coste de las cosas m√°s esenciales y c√≥mo organizarse para realizar un viaje largo y lo m√°s barato. ¬°All√° vamos!

**Navega por el contenido:**

- [Mejores fechas para viajar a Estados Unidos](#mejoresfechasparaviajaraestadosunidos)
- [C√∫anto cuesta volar a Estados Unidos](#cuantocuestavolaraestadosunidos)
- [Visado ESTA](#visadoesta)
- [Alojamiento barato en Estados Unidos](#alojamientobaratoenestadosunidos)
  - [Cosas a destacar](#cosasadestacar)
- [Dinero en USA](#dineroenusa)
- [Equipaje](#equipaje)
- [Transporte en Estados Unidos](#transporteenestadosunidos)
  - [Coche de alquiler](#cochedealquiler)
  - [Abonos transporte](#abonostransporte)
- [Organizaci√≥n con las Comidas](#organizacinconlascomidas)
- [Presupuesto](#presupuesto)

---

## Mejores fechas para viajar a Estados Unidos

Lo primero que decidimos fueron las fechas del viaje.

Hay que tener en cuenta que cualquier destino tiene temporada alta y baja, Es importante conocer el momento y elegir la temporada baja ya que todo ser√° m√°s barato, hay menos saturaci√≥n, etc.

Como üë®üèª‚Äçüíª üë©‚Äçüíª _freelances_ tenemos la ventaja de poder ‚Äúelegir‚Äù con mayor flexibilidad nuestras salidas. Algo bueno tiene que haber al no tener sueldo fijo.

Por tanto decidimos **viajar en Octubre**, que ya ha terminado la temporada de verano, y sigue teniendo buena temperatura para viajar.

## Cuanto cuesta volar a Estados Unidos

**Reservamos los vuelos con 3 meses de antelaci√≥n**, a mediados de Junio, para que no supusieran una "millonada".

A d√≠a de hoy los precios pueden variar, pero utilizando [**Kiwi como buscador de vuelos baratos**, en su versi√≥n _multicity_](http://www.kiwi.com/deep?affilid=carlosazaustre) puedes encontrar vuelos con un coste similar al que tuvimos a finales de 2013.

Nuestros vuelos fueron:

- **MAD** Madrid, Barajas ‚úàÔ∏è **JFK** New York (Salida 30 de Septiembre 2013)
- **JFK** New York ‚úàÔ∏è **LAX** Los Angeles (Salida 8 de Octubre de 2013)
- **SFO** San Francisco ‚úàÔ∏è **ORD** Chicago, O‚ÄôHare ‚úàÔ∏è **MAD** Madrid, Barajas (Salida 5 de Noviembre de 2013)

[![kiwi-rutas](/images/viajar-estados-unidos/kiwi-rutas.png)](http://www.kiwi.com/deep?affilid=carlosazaustre)

Como digo, en su momento nos cost√≥ **700‚Ç¨** (por persona). Si, 4 vuelos por un total de 700‚Ç¨ con tasas y todo dem√°s incluidas.

![cartel-facebook-palo-alto](/images/viajar-estados-unidos/1004991_10151910966114376_1247098009_n_ihwtuw.jpg)

## Visado ESTA

Antes de viajar a Estados Unidos necesitas un visado. Desde Espa√±a y paises de Europa puedes pedir el **ESTA** que es un tipo de visado que te permite estar 3 meses en el pa√≠s como turista. Lo puedes [solicitar online desde √©sta web del gobierno estadounidense](https://esta.cbp.dhs.gov/esta/).

## Alojamiento barato en Estados Unidos

![airbnb-nuevayork](/images/viajar-estados-unidos/airbnb-nuevayork.jpg)

Una de las mejores opciones para viajar de forma barata por Estados Unidos es utilizar [Airbnb](https://www.airbnb.es/c/pgarcia233?s=8)\* (**Consigue 25‚Ç¨** para tu primer viaje, [aqu√≠](https://www.airbnb.es/c/pgarcia233?s=8)).

En 2013, cuando viajamos a Estados Unidos, todav√≠a no lo hab√≠amos probado y quer√≠amos conocerlo de primera mano.

Fue una de las mejores experiencias del viaje. Si nunca lo has probado **te recomiendo que elijas habitaciones privadas**, d√≥nde puedas compartir la casa con los due√±os.

Principalmente por dos motivos: Es m√°s barato de esta forma que un apartamento entero (sobre todo si viajas s√≥lo o con tu pareja) y porque, al menos en Estados Unidos, los due√±os son super-amables y super-atentos.

Adem√°s de sentirte como en casa, con acceso posibilidad de utilizar la cocina, el sal√≥n. Puedes tener agradables conversaciones con el/la host muy enriquecedoras. etc‚Ä¶

Como digo, **fue la parte que m√°s nos gust√≥ del viaje**.

Cada casa era diferente, cada _host_ era diferente pero aprendimos mucho, diferentes culturas y costumbres que nos hicieron salir de la _zona de confort_ y que te enriquecen.

Compartimos casa con un _newyorkino_ que trabajaba desde su casa. En Los Angeles con una familia jud√≠a encantadora y muy culta. Con una pareja de nuestra edad que viv√≠a en una caba√±a en un pueblo de Arizona. Con un _hippie_ en un Tipi. Con una abuela encantadora que nos prepar√≥ un desayuno incre√≠ble. Cerca de San Francisco, una mujer china muy simp√°tica y servicial. Y con un artista/surfero y su mujer en San Francisco muy majos.

Es muy diferente a la "frialdad" de un hotel.

En todas las habitaciones que nos alojamos nos sentimos como en casa. Por nuestra parte, os recomendamos todas ellas.

Lamentablemente, como el viaje fue en 2013, muchos de ellos ya no tienen su habitaci√≥n/casa listada en [Airbnb](https://www.airbnb.es/c/pgarcia233?s=8)

A continuaci√≥n he recopilado todos los alojamientos que he podido rescatar. Si viajas a Estados Unidos y te alojas en uno de ellos, dadle recuerdos al host de nuestra parte. (Y si te registras en la web con √©ste [enlace](https://www.airbnb.es/c/pgarcia233?s=8) tendr√°s 25‚Ç¨ gratis para gastar en tu primer alojamiento :)

| Alojamiento                                                                                                                     | Noches | Precio Total | Precio por persona |
| ------------------------------------------------------------------------------------------------------------------------------- | ------ | ------------ | ------------------ |
| üè† Alojamiento en **Nueva York** (Harlem, W 148th St.)                                                                          | 8      | 624‚Ç¨         | 312‚Ç¨               |
| üè† [Alojamiento en](https://www.airbnb.com/rooms/71504) **[Los Angeles CA](https://www.airbnb.com/rooms/71504)**, Beverly Hills | 3      | 175‚Ç¨         | 87.50‚Ç¨             |
| üè† Alojamiento en **Ventura, CA**                                                                                               | 1      | 57‚Ç¨          | 28.50‚Ç¨             |
| üè† Alojamiento en **Flagstaff, AZ** (Caba√±a)                                                                                    | 1      | 62‚Ç¨          | 31‚Ç¨                |
| üè† Alojamiento en **Joshua Tree, CA** (Tipi)                                                                                    | 1      | 75‚Ç¨          | 37.50‚Ç¨             |
| üè† [Alojamiento en **Santa Barbara, CA**](https://www.airbnb.com/rooms/229922)                                                  | 1      | 50‚Ç¨          | 25‚Ç¨                |
| üè† [Alojamiento en **Seaside CA**](https://www.airbnb.com/rooms/1696870)                                                        | 1      | 58‚Ç¨          | 29‚Ç¨                |
| üè† Alojamiento en **San Francisco, CA**, Inner Richmond District                                                                | 14     | 950‚Ç¨         | 475‚Ç¨               |

Adem√°s de los _[Airbnb](https://www.airbnb.es/c/pgarcia233?s=8)_, otros d√≠as nos alojamos en moteles y hoteles.

| Ciudad                            | Tipo             | Noches | Precio Total | Precio por persona |
| --------------------------------- | ---------------- | ------ | ------------ | ------------------ |
| üè® **San Diego, CA**              | Motel            | 2      | $90          | $45                |
| üè® **Las Vegas, NV**              | Hotel Montecarlo | 2      | $150         | $75                |
| üè® **Grand Canyon National Park** | Motel            | 1      | $80          | $40                |
| üè® **Page, AZ**                   | Motel            | 1      | $60          | $30                |

### Cosas a destacar

#### Moteles

Si te vas a alojar en un Motel, Estados Unidos tiene dos cadenas principales que puedes econtrar en cualquier estado y ciudad. Son [Motel 6](https://www.motel6.com/) y [Best Western](https://www.bestwestern.com/en_US.html).

La mayor√≠a los puedes reservar _on-the-go_ pero te recomiendo que si vas a un sitio concreto y ya tienes fechas, **mejor reserves con antelaci√≥n**

#### Las Vegas

En Las vegas la mejor opci√≥n para alojarse es hacerlo en un hotel.

Nosotros nos alojamos en el _Montecarlo_, pero despues descubrimos que alojarse en el _Caesar's Palace_ nos pod√≠a haber costado lo mismo.

En **Las Vegas lo que quieren es que te gastes el dinero en el Casino, no en el hotel**, por eso las habitaciones son m√°s baratas de lo que uno se piensa. (Depende de la fecha, claro)

#### Nueva York

Tanto **Nueva York como San Francisco son las ciudades m√°s caras** donde alojarse. Ya sea en Hotel, Motel o Airbnb.

Nosotros en Nueva York nos alojamos en el Harlem, al norte de Manhattan.

Si repetimos viaje, seguramente eligir√≠amos la zona de **Brooklyn** m√°s cercana a Manhattan.

¬øPor qu√©? El precio ser√≠a similar, pero esa zona de Brooklyn est√° mucho m√°s cerca del centro de la ciudad que el Harlem.

Si vas a moverte mucho, lo ideal es no perder tiempo en transporte a diario y creemos que Brooklyn, eligiendo bien puede ser una buena opci√≥n.

#### San Francisco

Como digo arriba, San Francisco junto a Nueva York son las ciudades m√°s caras de Estados Unidos.

Elegir un buen barrio en la ciudad puede determinar el presupuesto de tu viaje.

Nosotros nos alojamos en **Inner Richmond District**. Un barrio residencial a menos de 30 minutos en BUS del centro.

Si te alojas cerca del centro o cerca de la estaci√≥n, vete preparando la billetera. Elige un barrio perif√©rico que te permita moverte por la ciudad y no te cueste una fortuna.

#### Airbnb

Los alojamientos de Airbnb los reservamos _on-the-go_ la mayor√≠a de ellos uno o dos d√≠as antes. Aunque por ejemplo el de Ventura ¬°Lo reservamos 2 horas antes!

Los que si reservamos con antelaci√≥n fueron los de **Nueva York** y **San Francisco** al ser las ciudades m√°s tur√≠sticas y por ello las m√°s demandadas puede ser complicado encontrar sitio.

Tambi√©n a destacar, tuvimos un percance en Los Angeles. Reservamos la habitaci√≥n cuando est√°bamos en Nueva York y a los 2 d√≠as el host nos la cancel√≥ sin darnos explicaci√≥n.

Por suerte Airbnb nos regal√≥ una noche gratis y nos ofreci√≥ alojamientos alternativos y elegimos [√©ste](https://www.airbnb.com/rooms/71504) y la verdad es que salimos ganando con la experiencia :)

## Dinero en USA

Esto es una pregunta recurrente. ¬øLlevo dinero en met√°lico a mi viaje? ¬øHago un cambio de divisa en el aeropuerto? ¬øEn origen o en Destino? ¬øMejor saco de un cajero?

Llevar dinero en efectivo en la divisa del p√°is que visitas, es un atraso. Ya sea tu banco de toda la vida, o una casa de cambio, te van a cobrar unas comisiones brutales, o te van a obligar a retirar un m√≠nimo que no necesitas y te acabar√° sobrando...

¬øQu√© es lo mejor? **Paga todo lo que puedas con tarjeta**. Y si tienes que utilizar dinero met√°lico, **ret√≠ralo de un cajero autom√°tico con tu tarjeta**.

Tu banco te cobrar√° una comisi√≥n por el cambio de divisa. Si no quieres pagar ninguna comisi√≥n, lo mejor es que te hagas una **cuenta en un banco online sin comisiones**.

El mejor para mi ahora mismo es **[N26](https://carlosazaustre.es/n26)**. Es un banco online alem√°n que te provee un IBAN, una tarjeta MasterCard gratuita, retirada de efectivo hasta 5 veces en un mes sin comisiones y cambio de divisa real. [Te puedes registrar aqu√≠, y recibes 15‚Ç¨ una vez actives la cuenta](https://bit.ly/tarjetaN26).

Se tarda unos minutos y la tarjeta llega a tu casa en menos de 1 semana.

[![tarjeta de d√©bito n26](/images/viajar-estados-unidos/n26.png)](https://carlosazaustre.es/n26)

> Si, la tarjeta es transparente. Muy Top!

## Equipaje

Si vas a hacer un viaje de √©ste tipo, vas a cambiar de alojamiento cada 2-3 d√≠as, por lo que llevar excesivo equipaje es contraproducente.

Mi recomendaci√≥n es que **lleves equipaje para 7 d√≠as**. Da igual que viajes 1 semana, 15 d√≠as o 2 meses. Con la ropa para 7 d√≠as tienes de sobra.

En Estados Unidos tienes lavander√≠as en cada calle y por _4 duros_ puedes hacer la colada de toda la semana y llev√°rtela seca a casa.

Esto te permite viajar ligero y con una [maleta de mano](https://amzn.to/2nPVpTs) y una [mochila](/mochila) tienes m√°s que suficiente.

Muy **recomendado es tener un set de bolsas para organizar tu ropa** tanto en la maleta como en la mochila. Yo personalmente tengo [√©stos b√°sicos de Amazon desde hace tiempo](https://amzn.to/2w9apj2) y son geniales.

## Transporte en Estados Unidos

### Coche de Alquiler

**Alquilar un coche en Estados Unidos es rid√≠culamente barato**.

Alquilamos un coche durante **15 d√≠as** con la compa√±√≠a [Alamo](https://www.alamo.com/en_US/car-rental/home.html) y el precio era b√°sicamente como si alquilaras uno 4 d√≠as en Espa√±a.

![gran-canon](/images/viajar-estados-unidos/gran-canon.jpg)

En total, con todos los seguros habidos y por haber contratados (nunca se sabe), sin l√≠mite de kilometraje y con la opci√≥n de devolverlo sin llenar el dep√≥sito, nos cost√≥ **525‚Ç¨** (262.50‚Ç¨)

Menci√≥n aparte la gasolina. Si el coche es barato, la gasolina directamente te la regalan.

En USA no miden en litros, si no en galones, y aproximadamente un gal√≥n de gasolina son 3.7 litros.

En 2013 echamos gasolina por unos $**3.60 USD el Gal√≥n**, a veces m√°s caro sobre 4 o $4.20 USD, esto quiere decir que la mayor√≠a de las veces nos cost√≥ $1 USD el litro, que al cambio fueron **0.60‚Ç¨**!!!

![roadtrip-USA](/images/viajar-estados-unidos/roadtrip-USA.png)

Recorrimos kil√≥metros (o millas) como si nos los prohibieran y en todo el viaje gastamos alerededor de **150‚Ç¨ en gasolina.**

### Abonos Transporte

En **Nueva York** compramos un [Unlimited-Pass 7 dias ](http://www.mta.info/metrocard/mcgtreng.htm#7day) para el metro, que nos cost√≥ $30 USD, unos **20‚Ç¨**

Y en **San Francisco** dos [7-Day Visitor Pass](https://www.sfmta.com/getting-around/transit/fares-passes/visitor-day-passes) para el Bus que nos cost√≥ $28 USD cada uno, en total unos **35‚Ç¨.**

Para visitar **Palo Alto, Mountain View y el resto del _Silicon Valley_**, lo mejor es coger un tren que no entra dentro del visitor pass pero que cuesta unos $7 USD ida y vuelta. Es pr√°cticamente como un AVE (Tren de Alta Velocidad), en 1 hora est√°s all√≠.

## Organizaci√≥n con las Comidas

La mayor√≠a de las veces **compr√°bamos comida en alg√∫n supermercado**, 7-Eleven, et...c para no dejarnos mucha _pasta_ en Restaurantes y no comer demasiada comida-r√°pida.

La comida no es cara por all√≠, no es m√°s cara que en una ciudad como Madrid y los restaurantes tipo _The Cheesecake Factory_, o los _Starbucks_ son mucho m√°s baratos que en Madrid o Barcelona.

Que no te enga√±en con que ‚Äúfuera de Espa√±a todo es m√°s caro‚Äù porque no es as√≠, es m√°s, me atrever√≠a a decir que en ocasiones es hasta m√°s barato si vienes de una ciudad grande.

No recuerdo cuanto nos gastamos en comer por all√≠ durante un mes, pero m√°s o menos sobrevivimos con **20‚Ç¨ al d√≠a (pongamos unos 720‚Ç¨ en total)**

## Presupuesto

Resumiendo, b√°sicamente los gastos fijos de vuelos, alojamiento, transporte y comida por el mes y 1 semana que estuvimos viajando por Estados Unidos fueron.

| Gasto                                                 | Total | Por Persona |
| ----------------------------------------------------- | ----- | ----------- |
| Billetes de Avi√≥n                                     |       | 700‚Ç¨        |
| [Alojamiento](https://www.airbnb.es/c/pgarcia233?s=8) | 2431‚Ç¨ | 1215‚Ç¨       |
| Coche y Gasolina                                      | 675‚Ç¨  | 337‚Ç¨        |
| Transporte                                            |       | 90‚Ç¨         |
| Comida                                                |       | 720‚Ç¨        |
|                                                       | TOTAL | **3062‚Ç¨**   |

En total, 3,062‚Ç¨ por **37 d√≠as** de viaje por Estados Unidos.

Puede parecer caro de golpe, pero date cuenta que est√° todo incluido, transporte, gasolina, comidas...

Personalmente he visto vuelos Madrid - San Francisco por 1,400‚Ç¨, o viajes por agencia de 5 d√≠as y 3 noches en Nueva York desde 900‚Ç¨.

Si que es cierto que las agencias te lo dan todo hecho y no tienes que preocuparte de mucho m√°s y si te lo quieres planificar tu tienes que invertir tiempo, pero es **mucho m√°s personalizado y econ√≥mico de √©sta manera**.

![1378630_10151861522339376_1104554363_n](/images/viajar-estados-unidos/1378630_10151861522339376_1104554363_n_vsrewb.jpg)

Si ahorras poco a poco y te organizas, puedes disfrutar de un viaje en el que te da tiempo a todo y del que poder disfrutar de otras costumbres y culturas que siempre vienen bien para abrir la mente y **salir de tu zona de comfort**.

</article>

---

<article slug="como-funciona-flux" date="2018-05-25" url="https://carlosazaustre.es/blog/como-funciona-flux">

# ¬øQu√© es Flux? Entendiendo su arquitectura

**Fecha:** 2018-05-25
Como suele pasar en el desarrollo Front-End de los √∫ltimos a√±os, [existe un gran n√∫mero de librer√≠as, frameworks](/frameworks-de-javascript/) y herramientas que si uno no est√° m√°s o menos pendiente y al d√≠a, resulte abrumador.

El motivo de este post es explicar qu√© es exactamente Flux y c√≥mo funciona.

## Arquitectura Flux

![Flux](/images/como-funciona-flux/flux-logo.png)

[Flux](https://facebook.github.io/flux/docs/in-depth-overview.html#content) es una arquitectura para el manejo y el flujo de los datos en una aplicaci√≥n web, particularmente en el Front-End. Fue ideada por Facebook y vendr√≠a a sustituir el patr√≥n MVC (o MVVM).

El patr√≥n MVC para el Front-End empez√≥ a ser necesario cuando las aplicaciones web empezaron a hacerse m√°s grandes y con librer√≠as como jQuery o el propio _Vanilla JavaScript_ se hac√≠an dif√≠ciles de manejar. Por eso nacieron frameworks como Backbone, Ember y/o Angular.

Todos ellos siguen una arquitectura Modelo-Vista-Controlador, o algo parecido (MVVM, MV\*). Haciendo m√°s sencillo el manejo de datos en aplicaciones web con cierto grado de complejidad.

![Modelo Vista Controlador](/images/como-funciona-flux/mvc.png)

Flux naci√≥ desde Facebook por un problema que se les presentaba al tener una comunicaci√≥n bidireccional entre los modelos y los controladores, haci√©ndoles muy dif√≠cil poder depurar y rastrear errores.

Flux propone una arquitectura en la que el **flujo de datos es unidireccional**. Los datos viajan desde la vista por medio de acciones y llegan a un _Store_ desde el cual se actualizar√° la vista de nuevo.

![Data flow en Flux](/images/como-funciona-flux/1-rictDFcDHCvOacMUaWxZEQ.png)

Teniendo un √∫nico camino, y un sitio donde se almacena el _estado_ de la aplicaci√≥n, es m√°s sencillo depurar errores y saber que est√° pasando en cada momento.

Como digo, Flux es un patr√≥n de dise√±o o forma de "arquitecturar" una aplicaci√≥n web, en concreto la forma en la que se manejan los datos o estado de la aplicaci√≥n (datos de un usuario, datos recogidos a partir de un API REST o _webservice_, etc...) No se trata de una librer√≠a ni framework.

Al igual que un patr√≥n MVC est√° formado por un Modelo, una Vista y un Controlador, en Flux tenemos distintos actores:

### Vista

La vista ser√≠an los **componentes web**, ya sean [construidos nativamente](/como-crear-webcomponent-de-forma-nativa/), con Polymer, con [Angular](/desarrollo-por-componentes-con-angular-1-5-con-es6-es2015/), React, etc...

### Store

La _Store_ ser√≠a **lo m√°s parecido al modelo de la aplicaci√≥n**. Guarda los datos/estado de la aplicaci√≥n y en Flux puede haber varias (Luego veremos que en algunas implementaciones s√≥lo hay un √∫nico store).

No hay m√©todos en la _Store_ que permitan modificar los datos en ella, eso se hace a trav√©s de _dispatchers_ y acciones.

### Acciones

Un acci√≥n es simplemente un **objeto JavaScript que indica una intenci√≥n de realizar algo** y que lleva datos asociados si es necesario. Por ejemplo si tenemos una aplicaci√≥n tipo _Carrito de la compra_, y a√±adimos un item al carrito, la acci√≥n que representar√≠a esto ser√≠a:

```javascript
{
    type: 'ADD_ITEM',
    item: item
}
```

### Dispatcher

Las acciones como la anterior son enviadas a un _dispatcher_ que se encarga de _dispararla_ o propagarla hasta la Store.

La vista es la que se encarga de enviar las acciones al _dispatcher_.

Un _dispatcher_ no es m√°s que un **mediador entre la _Store_ o _Stores_ y las acciones**. Sirve para desacoplar la Store de la vista, ya que as√≠ no es necesario conocer que Store maneja una acci√≥n concreta.

En Resumen, el patr√≥n FLUX sigue el siguiente recorrido:

- La vista, mediante un evento env√≠a una acci√≥n con la intenci√≥n de realizar un cambio en el estado
- La acci√≥n contiene el tipo y los datos (si los hubiere) y es enviada al dispatcher.
- El dispatcher propaga la acci√≥n al Store y se procesa en orden de llegada.
- El Store recibe la acci√≥n y dependiendo del tipo recibido, actualiza el estado y notifica a las vistas de ese cambio.
- La vista recibe la notificaci√≥n y se actualiza con los cambios.

Todo en un √∫nico sentido.

## Implementaciones de Flux

Existen numerosas implementaciones de este patr√≥n de desarrollo en JavaScript. Muchas de ellas ya no est√°n mantenidas y poco a poco una de ellas se ha ido posicionando como referencia.

Posiblemente te suenen librer√≠as como:

- Reflux
- McFly
- Marty.js
- Delorean
- Fluxxor
- Lux.js
- Fluxible
- Omniscent
- Redux
- ...

### Redux

Hoy por hoy la m√°s utilizada y que pr√°cticamente se ha convertido en un est√°ndar es [Redux](http://redux.js.org), creada por [Dan Abramov](https://twitter.com/dan_abramov) (Actualmente dentro del equipo de React.js)

![Redux](/images/como-funciona-flux/logo_redux.png)

Es una librer√≠a muy peque√±a (apenas 2Kb de tama√±o) con muy pocos m√©todos que implementa el patr√≥n Flux con algunas modificaciones que la hacen m√°s sencilla de manejar. Es agn√≥stica al framework o librer√≠a que utilices para tus desarrollos, ya que es √∫nicamente JavaScript por lo que puedes utilizarla junto a Angular, con Polymer y con React.

En pr√≥ximos art√≠culos hablar√© m√°s en detalle de Redux y sus caracter√≠sticas.

</article>

---

<article slug="como-crear-una-api-rest-usando-node-js" date="2017-09-21" url="https://carlosazaustre.es/blog/como-crear-una-api-rest-usando-node-js">

# C√≥mo crear un API REST usando Node.js, Express y MongoDB

**Fecha:** 2017-09-21
> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=SKoK6braZlk)
/>

El primer paso para implementar un <a href="/desarrollo-full-stack-javascript-tambien-conocido-como-mean/">sitio web moderno</a> es la construcci√≥n de un API REST que podemos consumir desde una aplicaci√≥n web, mobile o nativa.

En √©ste tutorial explicar√© como desarrollar servidor web que sirva una <a href="http://en.wikipedia.org/wiki/REST_API">API RESTful</a> usando para ello la tecnolog√≠a de <a href="http://nodejs.org/">Node.js</a> y <a href="http://www.mongodb.org/">MongoDB</a> como base de datos. Es el llamado <b>MEAN Stack</b> Tambi√©n es una buena opci√≥n para empezar y aprender Node.js desde cero.

Como framework para Node, voy a emplear **Express** en su versi√≥n 4.x y para conectarme a Mongo y mapear los modelos de datos, utilizar√© [Mongoose](http://mongoosejs.com/).

Una API RESTful es aquella que emplea todos los verbos HTTP (GET, POST, PUT y DELETE mayormente) Como ejemplo para este tutorial, desarrollar√© una aplicaci√≥n [**CRUD** (Create/Read/Update/Delete)](http://en.wikipedia.org/wiki/Create,_read,_update_and_delete) que utiliza todos los verbos HTTP, para mostrar como trabaja. Vamos all√°!

## Cambios en Express versi√≥n 4 con respecto a la versi√≥n 3.x

![Tutorial desarrollo de un API REST con NodeJS, Express y MongoBD](/images/como-crear-una-api-rest-usando-node-js/tutorial-api-res-node-js-express-mongo-mongoose.png)

Esto es importante En la versi√≥n 4, varios _middlewares_ fueron eliminados de Express y ahora son dependencias separadas, como es el caso de _bodyParser, compress, logger, session, favicon, methodOverride, etc‚Ä¶_

Ya no se encuentran dentro del paquete *Express*¬†y¬†hay que importarlos como un m√≥dulo aparte si tenemos pensado utilizarlos. De esta manera _Express_ es ahora un m√≥dulo m√°s ligero.

## Desarrollando nuestro API RESTful

### Iniciando el proyecto

El primer paso es crear un directorio en tu entorno local para la aplicaci√≥n, e iniciar un repositorio para guardar los cambios y que luego podamos desplegarlo por ejemplo en Heroku. Yo personalmente uso [Git](http://git-scm.com/) porque es una maravilla de la creaci√≥n y porque a Heroku es lo que le mola ;)

```js
$ mkdir node-api-rest-example
$ cd node-api-rest-example
$ git init
```

Antes de empezar, necesitas tener Node instalado en tu ordenador, para que funcione en tu entorno local de desarrollo. Para ello si tienes Mac te recomiendo que lo hagas de la siguiente manera:

```js
$ brew update
$ brew install node
```

Puede que lleve unos minutos mientras se descargan los paquetes. Una vez tengas node instalado, podemos empezar :)

El primer c√≥digo que necesitamos escribir en una aplicaci√≥n basada en Node es el archivo `package.json`. √âste archivo nos indica que dependencias vamos a utilizar en ella. Este archivo va en el directorio ra√≠z de la aplicaci√≥n:

Por lo tanto `package.json` tendr√°:

```js
{
 "name": "node-api-rest-example",
 "version": "2.0.0",
 "dependencies": {
 "mongoose": "~3.6.11",
 "express": "^4.7.1",
 "method-override": "^2.1.2",
 "body-parser": "^1.5.1"
 }
}
```

Y ahora para descargar las dependencias escribimos lo siguiente en la consola y NPM (el gestor de paquetes de Node) se encargar√° de instalarlas.

```shell
$ npm install
```

### Nuestro servidor Node.js

Con todo listo, podemos comenzar a _codear_ de verdad. Creamos un fichero llamado `app.js` en el directorio ra√≠z que ser√° el que ejecute nuestra aplicaci√≥n y arranque nuestro server. Crearemos en primer lugar un sencillo servidor web para comprobar que tenemos todo lo necesario instalado, y a continuaci√≥n iremos escribiendo m√°s c√≥digo.

```js
var express = require("express"),
  app = express(),
  bodyParser = require("body-parser"),
  methodOverride = require("method-override");
mongoose = require("mongoose");

app.use(bodyParser.urlencoded({ extended: false }));
app.use(bodyParser.json());
app.use(methodOverride());

var router = express.Router();

router.get("/", function (req, res) {
  res.send("Hello World!");
});

app.use(router);

app.listen(3000, function () {
  console.log("Node server running on http://localhost:3000");
});
```

¬øQu√© hace este c√≥digo? Muy sencillo, las primeras l√≠neas se encargan de incluir las dependencias que vamos a usar, algo as√≠ como los includes en C o PHP, o los import de Python. Importamos [Express](http://expressjs.com/) para facilitarnos crear el servidor y realizr llamadas HTTP. Con `http` creamos el servidor que posteriormente escuchar√° en el puerto 3000 de nuestro ordenador (O el que nosotros definamos).

Con `bodyParser` permitimos que pueda _parsear_ JSON, `methodOverride()` nos permite implementar y personalizar m√©todos HTTP.

Podemos declarar las rutas con `app.route(nombre_de_la_ruta)` seguido de los verbos `.get()`, `.post()`, etc‚Ä¶ y podemos crear una instancia para ellas con `express.Router()`. En este primer ejemplo vamos hacer que s√≥lo reciba una petici√≥n `GET` del navegador y muestre en el mismo la frase `Hello World`

Para ejecutar este peque√±o c√≥digo s√≥lo tienes que escribir en consola lo siguiente y abrir un navegador con la url [http://localhost:3000](http://localhost:3000)

```js
$ node app.js
Node server running on http://localhost:3000
```

Si todo va bien, esto es lo que se ver√°:

![Tutorial de NodeJS creando API REST - Hello World Node](/images/como-crear-una-api-rest-usando-node-js/tutorial_api_rest_en_node-holamundo.png)

Y como usamos GIT, no hay que olvidarse de hacer _commit_ de nuestro c√≥digo. Puedes descargar el c√≥digo fuente de este proyecto en el [repositorio que tengo en GitHub](https://github.com/carlosazaustre/node-api-rest-example/tree/feature-express4)

```js
$ git add .
$ git commit -m 'Initial commit'
```

### Creando los modelos de nuestra API REST

En esta parte vamos a crear un modelo usando [Mongoose](http://mongoosejs.com/) para poder guardar la informaci√≥n en la base de datos siguiendo el esquema. Como base de datos vamos a utilizar [MongoDB](http://www.mongodb.org/).[ MongoDB es una base de datos Open Source NoSQL orientada a documentos tipo JSON](http://en.wikipedia.org/wiki/MongoDB), lo cual nos viene que ni pintado para entregar los datos en este formato en las llamadas a la API. Si quieres ver un buen resumen de MongoDB te recomiendo [√©sta presentaci√≥n de **Israel Gutierrez**](http://www.slideshare.net/gootyfer/full-metal-mongo) (amigo y profe) que incluye las nociones b√°sicas.

Para este ejemplo vamos a crear una base de datos de series de TV, por tanto vamos a crear un modelo (Archivo: `models/tvshow.js`) que incluya la informaci√≥n de una serie de TV, como pueden ser su t√≠tulo, el a√±o de inicio, pa√≠s de producci√≥n, una imagen promocional, n√∫mero de temporadas, g√©nero y resumen del argumento:

```js
var mongoose = require("mongoose"),
  Schema = mongoose.Schema;

var tvshowSchema = new Schema({
  title: { type: String },
  year: { type: Number },
  country: { type: String },
  poster: { type: String },
  seasons: { type: Number },
  genre: {
    type: String,
    enum: ["Drama", "Fantasy", "Sci-Fi", "Thriller", "Comedy"],
  },
  summary: { type: String },
});

module.exports = mongoose.model("TVShow", tvshowSchema);
```

Con esto ya podemos implementar la conexi√≥n a la base de datos en el archivo `app.j`\* a√±adiendo las siguientes l√≠neas:

```js
var mongoose = require("mongoose");
mongoose.connect("mongodb://localhost/tvshows");
```

Quedando as√≠ el c√≥digo de _app.js_:

```js
var express = require("express"),
  app = express(),
  http = require("http"),
  server = http.createServer(app),
  mongoose = require("mongoose");

app.use(bodyParser.urlencoded({ extended: false }));
app.use(bodyParser.json());
app.use(methodOverride());

var router = express.Router();

router.get("/", function (req, res) {
  res.send("Hello World!");
});

app.use(router);

mongoose.connect("mongodb://localhost/tvshows", function (err, res) {
  if (err) {
    console.log("ERROR: connecting to Database. " + err);
  }
  app.listen(3000, function () {
    console.log("Node server running on http://localhost:3000");
  });
});
```

Para que esto funcione en nuestro entorno local, necesitamos tener instalado MongoDB. Dependiendo de vuestro sistema operativo de hace de una forma u otra. [Aqu√≠ ten√©is la documentaci√≥n oficial](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-os-x/). Si tienes Mac, se instala de la misma manera que Node.js:

```shell
$ brew update
$ brew install mongodb
```

Una vez hecho esto, para poder iniciar MongoDB debes ejecutar en otra terminal:

```js
$ mongod
all output going to: /usr/local/var/log/mongodb/mongo.log
```

Con Mongo arrancado ya podemos ejecutar la aplicaci√≥n como en la parte anterior con `node app.js` desde la terminal, si todo va bien tendremos algo en la pantalla como esto:

```js
$ node app.js
Node server running on http://localhost:3000
Connected to Database
```

Ahora desde otra terminal, podemos entrar al shell de MongoDB y comprobar que la base de datos se ha creado correctamente. Para ello ejecutamos el comando `mongo`

```js
$ mongo
MongoDB shell version: 2.4.1
connecting to: test
> use tvshows
switched to db tvshows
> show dbs
local	0.078125GB
tvshows	(empty)
>_
```

Ya tenemos todo configurado y listo para albergar los datos, s√≥lo nos queda crear las rutas que definir√°n las llamadas a la API para poder guardar y consultar la informaci√≥n

### Implementando los controladores de nuestas rutas o _endpoints_

los controladores de las rutas de nuestro API los vamos a crear en un archivo separad que llamaremos `controllers/tvshows.js`. Gracias a `exports` conseguimos modularizarlo y que pueda ser llamado desde el archivo principal de la aplicaci√≥n. El c√≥digo de a continuaci√≥n es el comienzo del archivo con la primera funci√≥n que ser√° la que devuelva todos los registros almacenados:

```js
//File: controllers/tvshows.js
var mongoose = require("mongoose");
var TVShow = mongoose.model("TVShow");

//GET - Return all tvshows in the DB
exports.findAllTVShows = function (req, res) {
  TVShow.find(function (err, tvshows) {
    if (err) res.send(500, err.message);

    console.log("GET /tvshows");
    res.status(200).jsonp(tvshows);
  });
};
```

De esta manera tan sencilla, al llamar a la funci√≥n `findAllTVShows` se envia como respuesta toda la colecci√≥n de `tvshows` almacenada y en formato [JSON](http://www.json.org/). Si queremos que s√≥lo nos devuelva un registro con un identificador √∫nico, tenemos que crear una funci√≥n tal que la siguiente:

```js
//GET - Return a TVShow with specified ID
exports.findById = function(req, res) {
	TVShow.findById(req.params.id, function(err, tvshow) {
    if(err) return res.send(500. err.message);

    console.log('GET /tvshow/' + req.params.id);
		res.status(200).jsonp(tvshow);
	});
};
```

Con las funciones `find()` y `findById()` podemos buscar en la base de datos a partir de un modelo. Ahora desarrollar√© el resto de funciones que permiten insertar, actualizar y borrar registros de la base de datos. La funci√≥n de a continuaci√≥n ser√≠a la correspondiente al m√©todo POST y lo que hace es a√±adir un nuevo objeto a la base de datos:

```js
//POST - Insert a new TVShow in the DB
exports.addTVShow = function (req, res) {
  console.log("POST");
  console.log(req.body);

  var tvshow = new TVShow({
    title: req.body.title,
    year: req.body.year,
    country: req.body.country,
    poster: req.body.poster,
    seasons: req.body.seasons,
    genre: req.body.genre,
    summary: req.body.summary,
  });

  tvshow.save(function (err, tvshow) {
    if (err) return res.status(500).send(err.message);
    res.status(200).jsonp(tvshow);
  });
};
```

Primero creamos un nuevo objeto `tvshow` siguiendo el patr√≥n del modelo, recogiendo los valores del cuerpo de la petici√≥n, lo salvamos en la base de datos con el comando `.save()` y por √∫ltimo lo enviamos en la respuesta de la funci√≥n.

La siguiente funci√≥n nos permitir√° actualizar un registro a partir de un ID. Primero buscamos en la base de datos el registro dado el ID, y actualizamos sus campos con los valores que devuelve el cuerpo de la petici√≥n:

```js
//PUT - Update a register already exists
exports.updateTVShow = function (req, res) {
  TVShow.findById(req.params.id, function (err, tvshow) {
    tvshow.title = req.body.petId;
    tvshow.year = req.body.year;
    tvshow.country = req.body.country;
    tvshow.poster = req.body.poster;
    tvshow.seasons = req.body.seasons;
    tvshow.genre = req.body.genre;
    tvshow.summary = req.body.summary;

    tvshow.save(function (err) {
      if (err) return res.status(500).send(err.message);
      res.status(200).jsonp(tvshow);
    });
  });
};
```

Y por √∫ltimo para completar la funcionalidad CRUD de nuestra API, necesitamos la funci√≥n que nos permita elminar registros de la base de datos y eso lo podemos hacer con el c√≥digo de a continuaci√≥n:

```js
//DELETE - Delete a TVShow with specified ID
exports.deleteTVShow = function (req, res) {
  TVShow.findById(req.params.id, function (err, tvshow) {
    tvshow.remove(function (err) {
      if (err) return res.status(500).send(err.message);
      res.status(200).send();
    });
  });
};
```

Como puedes ver, usamos de nuevo el m√©todo `.findById()` para buscar en la base de datos y para borrarlo usamos `.remove()` de la misma forma que usamos el `.save()` para salvar.

Ahora tenemos que unir estas funciones a las peticiones que ser√°n nuestras llamadas al API. Volvemos a nuestro archivo principal, `app.js` y declaramos las rutas, siguiendo las pautas de Express v.4

```js
var TVShowCtrl = require("./controllers/tvshows");

// API routes
var tvshows = express.Router();

tvshows
  .route("/tvshows")
  .get(TVShowCtrl.findAllTVShows)
  .post(TVShowCtrl.addTVShow);

tvshows
  .route("/tvshows/:id")
  .get(TVShowCtrl.findById)
  .put(TVShowCtrl.updateTVShow)
  .delete(TVShowCtrl.deleteTVShow);

app.use("/api", tvshows);
```

El archivo completo [**controllers/tvshows.js**](https://github.com/carlosazaustre/node-api-rest-example/blob/feature-express4/controllers/tvshows.js) lo puedes ver y descargar [desde el repositorio en GitHub](https://github.com/carlosazaustre/node-api-rest-example/blob/feature-express4/controllers/tvshows.js).

#### Probando nuestro API REST en el navegador

A continuaci√≥n voy a probar una herramienta online que nos permite _jugar_ con las llamadas al API y poder consultar y almacenar datos para probarla y ver su funcionamiento un poco m√°s claro.

Para ello nos dirijimos a [restconsole.com](http://restoconsole.com) que es una extensi√≥n de [Google Chrome](https://www.google.com/intl/en/chrome/browser/), que permite hacer lo que queremos de una manera visual y sencilla.

![Tutorial desarrollo de un API REST con NodeJS - REST Console](/images/como-crear-una-api-rest-usando-node-js/tutorial_api_rest_en_node-restconsole.png)

Antes de probarlo, debemos tener mongo y el servidor node de nuestra app corriendo. Una vez hecho esto introducimos los siguientes datos para hacer una llamada POST que almacene un registro en la base de datos.

- **Target**: http://localhost:3000/tvshow (D√≥nde est√° ejecut√°ndose la aplicaci√≥n y la llamada al m√©todo POST que hemos programado)
- **Content-Type**: application/json (en los dos input que nos dan)
- **Request-Payload**: Aqu√≠ va el cuerpo de nuestra petici√≥n, con el objeto JSON siguiente (por ejemplo):

```js
{
  "title": "LOST",
  "year": 2004,
  "country": "USA",
  "poster": "http://ia.media-imdb.com/images/M/MV5BMjA3NzMyMzU1MV5BMl5BanBnXkFtZTcwNjc1ODUwMg@@._V1_SY317_CR17,0,214,317_.jpg",
  "seasons": 6,
  "genre": "Sci-Fi",
  "summary": "The survivors of a plane crash are forced to live with each other on a remote island, a dangerous new world that poses unique threats of its own."
}
```

![Tutorial desarrollo de un API REST con NodeJS REST Console POST](/images/como-crear-una-api-rest-usando-node-js/tutorial_api_rest_en_node-restconsole-post.png)

Pulsamos `SEND` y si todo va bien, la petici√≥n se realizar√° y abajo de la aplicaci√≥n _REST Console_ veremos algo como esto:

![Tutorial desarrollo de un API REST con NodeJS - REST Console Response a POST](/images/como-crear-una-api-rest-usando-node-js/tutorial_api_rest_en_node-restconsole-response.png)

¬øC√≥mo comprobamos si se ha guardado en nuestra base de datos? Muy sencillo, en nuestro terminal ejecutamos el Shell de mongo con el comando `mongod` e introducimos los siguiente comandos:

```shell
$ mongo
MongoDB shell version: 2.4.1
connecting to: test
> show databases
tvshows	0.203125GB
> use tvshows
switched to db tvshows
> show collections
system.indexes
tvshows
> db.tvshows.find()
{ "title" : "LOST", "year" : 2004, "country" : "USA", "poster" : "http://ia.media-imdb.com/images/M/MV5BMjA3NzMyMzU1MV5BMl5BanBnXkFtZTcwNjc1ODUwMg@@._V1_SY317_CR17,0,214,317_.jpg", "seasons" : 6, "genre" : "Sci-Fi", "summary" : "The survivors of a plane crash are forced to live with each other on a remote island, a dangerous new world that poses unique threats of its own.", "_id" : ObjectId("51b44d7899ac57fb18000002"), "__v" : 0 }

```

Y ahi la tenemos, puedes probar a introducir alguna m√°s, para tener mayor contenido con el que probar. Una vez introduzcas varios registros, puedes probar a llamarlos a trav√©s de la petici√≥n GET que hemos preparado: `http://localhost:3000/tvshows` la cu√°l te mostrar√° algo parecido a esto:

![Tutorial de NodeJS, creando un API REST - Petici√≥n GET](/images/como-crear-una-api-rest-usando-node-js/tutorial_api_rest_en_node-response_get.png)
Tambi√©n podemos llamar a un s√≥lo registro gracias a la petici√≥n `GET tvshows/:id` que programamos, si ejecutamos por ejemplo **http://localhost:3000/tvshow/51b44d7899ac57fb18000002** nos devolver√° un √∫nico objeto:

![Tutorial de NodeJS, creando un API REST - Petici√≥n GET con ID ](/images/como-crear-una-api-rest-usando-node-js/tutorial_api_rest_en_node-response-get-id.png)

Los m√©todos restantes `PUT` y `DELETE` funcionan de manera parecida al `POST` s√≥lo que hay que pasarte el valor del ID del objeto que queremos actualizar o borrar. Te invito a que lo pruebes en la [Tutorial de NodeJS, creando un API REST - REST Console](http://restconsole.com).

Con esto tendr√≠amos el funcionamiento b√°sico y programaci√≥n de lo que ser√≠a una API REST. Como puedes ver es bastante sencillo y utilizas Javascript en todas partes, como lenguaje de servidor ([Node](http://nodejs.org)), como formato de datos ([JSON](http://json.org)) y como base de datos ([MongoDB](http://www.mongodb.org/))

A continuaci√≥n te dejo una serie de video tutoriales de [mi canal de YouTube](https://www.youtube.com/user/azaman1984) sobre √©ste tema

> Todo el c√≥digo utilizado est√° subido en el[ repositorio que he creado en GitHub](https://github.com/carlosazaustre/node-api-rest-example/tree/feature-express4), te animo a descargarlo, probarlo y modificarlo para aprender :)

</article>

---

<article slug="que-es-lo-que-me-gusta-de-vue-js" date="2017-08-16" url="https://carlosazaustre.es/blog/que-es-lo-que-me-gusta-de-vue-js">

# Qu√© es lo que me gusta de Vue.js

**Fecha:** 2017-08-16
Todos los veranos me gusta aprovechar para aprender algo nuevo. [El a√±o pasado le d√≠ una oportunidad a React](https://carlosazaustre.es/mi-inmersion-en-react/) y me gust√≥ mucho, tanto que opt√© por dejar Angular (v1.x) a un lado y trabajar con React.js. Este verano le ha tocado a Vue, y en √©ste post te quiero contar por qu√© me ha _conVUEncido_ üòâ.

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=3D5aos_rbrw)
/>

## Framework Progresivo

[Vue.js](https://vuejs.org) es un framework progresivo, eso quiere decir que podemos usarlo para algo m√∫y b√°sico, igual que antes se usaba jQuery para cosas sencillas, o para algo m√°s complejo como el desarrollo de una SPA, o para _Server-Rendering._ Siempre con un rendimiento y experiencia de desarrollo muy buena.

![995016_ebf4](/images/que-es-lo-que-me-gusta-de-vue-js/995016_ebf4.jpg)

Si queremos hacer un uso muy b√°sico de Vue y crear una aplicaci√≥n muy sencilla, no falta que utilicemos Webpack, ni necesitamos instalar _transpilers_ ni nada. Simplemente con importar la librer√≠a en el HTML (Desde un CDN como _cdnjs_ o _unkpg_) ya podemos utilizar Vue.

```html
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.4.2/vue.min.js"></script>
```

Si nuestra aplicaci√≥n crece y queremos orientarla a componentes, podemos hacerlo sin cambiar nuestro _workflow_.

Si vamos manejar muchos ficheros podemos crear archivos con _.vue_ y que Webpack se encarge de gestionarlo y empaquetarlo. Podemos utilizar _vue-router_ si vamos a tener muchas vistas para manejar el routing del cliente, _vuex_ para manejar el estado de la aplicaci√≥n al estilo de Redux/Flux e incluso _server-rendering_ utilizando librer√≠as como Nuxt.js. Todo ello de una manera muy simple.

En resumen, si necesitamos algo muy b√°sico, Vue es perfecto y no es necesario instalar nada m√°s. Y si necesitamos desarrollar un proyecto m√°s complejo, Vue cubre con creces nuestras necesidades y podemos ir ampliandolo con plugins a medida que nuestra aplicaci√≥n nos lo pida.

## Similitud con React: Ciclo de vida

Una de las cosas que m√°s me gusta de React son sus m√©todos de ciclo de vida de los componentes. Gracias a ellos puedes manejar el comportamiento del mismo dependiendo del momento. Puedes acceder a √©l en el momento de su creaci√≥n, de su actualizaci√≥n, destrucci√≥n, etc... Vue tambien los tiene y de una manera m√°s intuitiva que React, a mi parecer.

![Vue m√©todo del lifecycle](/images/que-es-lo-que-me-gusta-de-vue-js/lifecycle.png)

√âste gr√°fico est√° sacado de la [documentaci√≥n oficial](https://vuejs.org/v2/guide/instance.html#Instance-Lifecycle-Hooks) (tambi√©n muy clara y f√°cil de seguir) d√≥nde se puede ver todos los momentos en los que podemos acceder para a√±adir o eliminar funcionalidades.

## Methods y Data

Tambi√©n me gusta mucho c√≥mo tienen organizados los diferentes elementos los componentes en Vue. Los datos o modelos del componente est√°n dentro de un objeto `data`, y las funciones o m√©todos que creamos los colocamos en un objeto `methods`.

Aqu√≠ se abandona la idea o sintaxis de clases de ES6 como se ven√≠a utilizando en React con `React.Component` por una esctructura de objetos similar al m√©todo `createClass` de las primeras versiones de React.

Parece un paso atr√°s, pero personalmente, tal y c√≥mo funciona Vue, me parece una forma muy correcta de uso. [Aqu√≠](https://github.com/vuejs/vue/issues/2371#issuecomment-186238466) y Evan You, al autor de Vue, explica sus razones]

```javascript
Vue.component("mi-component", {
  data: {},
  methods: {},
});
```

## Components

Aunque Vue puede utilizarse como una librer√≠a muy simple, su potencia viene cuando utlizamos componentes. La orientacion a Componentes en arquitecturas web est√° muy extendida y podemos estructurar nuestra aplicaci√≥n de igual manera que se emplea en React, Angular 2/4 o en Polymer.

## Vue templates

Esta es una de las _features_ que m√°s me gusta y que en un primer momento me caus√≥ rechazo, viniendo de React d√≥nde todo es JS.

El equipo de Vue y de Webpack han creado una plantilla que con la extensi√≥n de fichero `.vue` podemos tener nuestro HTML, CSS y c√≥digo JavaScript en un √∫nico archivo.

√âsto es muy poderoso porque unimos, a mi parecer 2 mundos. En React tenemos todo en un mismo fichero, pero implica que personas del equipo de dise√±o y/o maquetacion necesitaran saber React y JSX para poder a√±adir estilos y dise√±ar el _layout_ de las vistas.

En Vue puedes crear un fichero `.vue` de la siguiente forma

```html
<template>
  <!--- Aqui va el HTML, puedes utilizar sintaxis Pug/Jade -->
</template>

<script>
  // Aqui el c√≥digo JavaScript, (puedes usar Babel, TypeScript,...)
</script>

<style>
  /* Aqui el CSS, puedes usar stylus, Sass, Less, etc... */
</style>
```

El _loader_ de webpack (`vue-loader`) se encarga de extraer cada parte a su correspondiente formato y fichero para producci√≥n, permiti√©ndote tener tus ficheros separado por componentes.

Es una forma muy similar a c√≥mo Polymer define los _WebComponents_ en los ficheros _.html_. Sigue una estructura muy parecida.

Pero como digo, esto es para tu entorno de desarrollo y _workflow_. Tu c√≥digo final de producci√≥n no incluye ficheros `.vue`, si no ficheros JavaScript y CSS y un √∫nico fichero `index.html`.

## Similitud con Angular: Directivas

Una de las cosas que me gustaba de Angular eran sus directivas, que extend√≠an el HTML para decidir si un elemento se mostraba o no, utilizar _fors_ para recorrer un listado de elementos, asociar m√©todos a eventos, enlazar modelos, etc...

Eso mismo lo tenemos en Vue tambi√©n y de una forma muy similar.

Si queremos que un elemento responda a un evento click, por ejemplo, debemos utilizar la directiva `v-on:click` o de la forma reducida `@click` seguida del metodo manejador asociado:

```html
<button @click="miMetodo()">Haz Click</button>
```

Al contrario de React, donde utilizamos el m√©todo `render()` del componente, sintaxis JSX para definir la vista y mezclamos cierta l√≥gica al permitirnos utilizar JavaScript. En Vue, al igual que Angular, tenemos separado Vista de Controlador utilizando puro HTML + directivas para la vista y JavaScript para la l√≥gica.

## Vuex

Una de las cosas que m√°s me gust√≥ del ecosistema de React, fue Redux. Manejar el estado de una aplicaci√≥n compleja con esta librer√≠a lo hac√≠a todo m√°s f√°cil.

Sin embargo hay cosas que no me gustan del todo cuando se integra con React, y es algo parecido a lo que pasa con Polymer.

Existen componentes o WebComponents para todo, hasta para cosas que no tienen una representaci√≥n visual, como una conexi√≥n con Firebase (elemento de `polymer-fire`) o un sistema de routing (`react-router`)

Esto es una opini√≥n personal, pero creo que los componentes/webcomponents fueron creados para representar elementos gr√°ficamente. Como por ejemplo un `<google-maps></google-maps>` para representar un mapa. El resto de cosas deber√≠an ser configuradas mediante JavaScript.

Vue acierta en eso a mi parecer. _Vue-Router_ utiliza un objeto para configurar las rutas que tenemos en la aplicaci√≥n.

Y lo mismo pasa con _Vuex_, la librer√≠a que implementa el patron _Flux_ para Vue, (Es el _Redux de Vue_). En este caso no tenemos un componente `<Provider>` que engloba todos nuestros componentes para pasar la _store_ a todos los elementos.

![vuex](/images/que-es-lo-que-me-gusta-de-vue-js/vuex.png)

[Vuex](https://vuex.vuejs.org) se instala como un _plugin_, extendiendo el funcionamiento de Vue y esto nos permite acceder al estado y m√©todos mutacionales del mismo desde el compoenente que se necesite. No es necesario crear _containers_ como se hace en `react-redux` para tener el estado como propiedades del componente. Por medio de _getters_ podemos acceder a √©l de una manera, a mi parecer, m√°s sencilla.

Los cambios en el estado se realizan de manera mutacional, es decir, no es como en React d√≥nde siempre deb√≠amos devolver una nueva copia del estado a partir del anterior. En Vuex y Vue en general, debemos modificarlo (mutarlo) para que sea _reactivo_ y la vista refleje los cambios. Es un cambio importante cuando vienes de React.

Y las operaciones as√≠ncronas se manejan de una forma m√°s sencilla que en React/Redux, d√≥nde necesitamos hacer uso de _Thunks_ o _Sagas_ para manejarlo.

En Vuex no es necesario el uso de ninguna otra librer√≠a ni _hack_ para poder realizar llamadas as√≠ncronas que manipulen el estado. Se puede hacer algo tan simple c√≥mo:

```javascript
// Action para traer datos via AJAX de un servidor externo
fetchBoards ({ commit }, { user }) {
    commit(types.FETCH_BOARDS_REQUEST)

    API.getBoardsByUser(user)
      .then(data => commit(types.FETCH_BOARDS_SUCCESS, { boards: data }))
      .catch(error => commit(types.FETCH_BOARDS_FAILURE, { error }))
}
```

Mucho m√°s limpio y claro que con `redux-thunk` por ejemplo.

## Vue-CLI

Todos los frameworks del momento tienen su propio CLI (Herramienta de l√≠nea de comandos) para iniciar un proyecto y ahorrarnos crear la estructura de carpetas y ficheros adem√°s de la configuraci√≥n de Webapack u otras herramientas de desarrollo.

En React tenemos `create-react-app` que nos ahorra mucho tiempo, en Polymer tienen su propio CLI para crear componentes y aplicaciones, y tambi√©n existe en Angular.

El oficial de Vue es Vue-CLI y por medio de un sistema de plantillas creadas por la comunidad y por el propio equipo de Vue, tenemos nuestro _esqueleto de proyecto_ en segundos.

La plantilla o template que m√°s utilizo es la de `webpack` que te genera ya el fichero de configuraci√≥n y las tareas necesarias para desarrollo y producci√≥n sin tener que escribir ni configurar nada.

Y lo mejor es que ni tienes que instalar los templates por separado, el CLI los busca y te los instala.

Para utilizarlo ser√≠a aglo tan simple como:

```shell
# Instala de forma global VUE-CLI para poder llamarlo desde cualquier path
$ npm install --global vue-cli
# Genera un proyecto con Webpack configurado y listo para codear
$ vue init webpack
```

## Conclusi√≥n

Vue me ha parecido una librer√≠a/framework muy potente que me permite utilizarlo para algo muy sencillo, como una _landing page_ donde necesite algo de contenido din√°mico, sin necesidad de instalar nada m√°s ni configurar ning√∫n _workflow_, simplemente HTML+CSS+JS y en ese sentido ser√≠a como utilizar _jQuery_ pero mucho mas potente y vers√°til.

Tambi√©n me permite utilizarlo en aplicaciones SPA m√°s complejas de una manera muy limpia y sencilla, ya que utilizar `vue-router` y `vuex` es muy intuitivo y no hay que escribir mucho _boilerplate_ para configurarlo. Sus APIs son muy sencillas y puedes enfocarte directamente en el c√≥digo de tus apps.

La grandes preguntas siempre son ¬øVue o React?, ¬øAngular o Vue? o ¬øAngular o React? A lo que siempre respondo lo msimo.

Todas son excelentes librer√≠as/frameworks. Son muy potentes y est√°n soportadas por la comunidad. Todas te permiten crear una aplicaci√≥n y ninguna es peor o mejor que otra.

Peronalmente he probado Angular 1x, React y actualmente Vue y todas me han servido en su momento para desarrollar lo que hac√≠a. Si que es cierto que React me facilit√≥ cosas que con Angular 1x me parec√≠an m√°s complicadas y Vue actualmente me hace m√°s sencillo ciertas cosas que con React son m√°s complejas.

Pero tambi√©n influye la experiencia. Hace unos a√±os los Componentes ni se planteaban, todo era MVC, y cosas como Redux o Vuex no estaban. Entonces los proyectos crecen y evolucionan y cada vez tenemos nuevas herramientas a nuestro alcence para crearlos.

Para finalizar, comparto este _Tweet_ de [Rafael Casuso](https://twitter.com/Rafael_Casuso), organizador de [VueJS Madrid](https://www.meetup.com/VueJS-Madrid/) que tambi√©n ha trabajado con muchos proyectos y en todos ha utilizado frameworks y librer√≠as diferentes:

<blockquote class="twitter-tweet" data-lang="en">
  <p lang="es" dir="ltr">
    No te ancles ideol√≥gicamente a ning√∫n framework o lenguaje. Aprende,
    evoluciona, prueba, compara. No existe la bala de plata.
  </p>
  &mdash; Rafael Casuso (@Rafael_Casuso) <a href="https://twitter.com/Rafael_Casuso/status/886951748170125312">July 17, 2017</a>
</blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

Opini√≥n que comparto 100%.

Y t√∫ ¬øYa has probado Vue?

</article>

---

<article slug="que-son-las-firebase-cloud-functions" date="2017-06-19" url="https://carlosazaustre.es/blog/que-son-las-firebase-cloud-functions">

# ¬øQu√© son las Firebase Cloud Functions?

**Fecha:** 2017-06-19
Las Cloud Functions de Firebase son un nueva funcionalidad que ofrece la plataforma de Google y que anunciaron en el pasado [Google Cloud Next'17](https://www.youtube.com/watch?v=GNR9El3XWYo).

Esta nueva funcionalidad permite crear funciones escritas en JavaScript, en un entorno Node.js, que son invocadas por eventos de Firebase (Cuando se escribe en la base de datos, cuando se crea un usuario, cuando se sube un fichero, etc).

Esto nos permite tener una soluci√≥n _Backend as a Service_ bastante completa con Firebase.

![Cloud Functions for Firebase](/images/que-son-las-firebase-cloud-functions/firebase_cloud_functions_for_startups.jpg)

Las Cloud Functions son el siguiente nivel en lo que se refiere a Computaci√≥n en la nube. Tendr√≠amos 3 niveles:

- **Infraestructura como Servicio (IaaS)**:
  En √©ste nivel tienes acceso completo a la m√°quina virtual d√≥nde puedes elegir el Sistema Operativo e instalar lo que quieras.
  La ventaja es que tienes libertad total y la desventaja es que necesitas controlar muchas cosas (Seguridad, Actualizaciones del S.O., del entorno, etc..)
  Algunos ejemplos de servicios IaaS ser√≠an:

  - Amazon EC2
  - Google Cloud Compute Engine
  - Digital Ocean

- **Plataforma como Servicio (PaaS)**:
  En √©ste segundo nivel no tienes que preocuparte del Sistema Operativo ni los parches de seguridad relativos, simplemente te enfocas en tu App (backend+frontend) y la despliegas en el entorno que te ofrece el proveedor, la gran mayor√≠a permiten todo tipo de lenguajes (Node.js, Python, Ruby, Java, etc...)
  Algunos ejemplos de servicios PaaS son:

  - Google Cloud App Engine
  - Heroku

- **Funciones como Servicio (FaaS)**:
  Este tercer nivel te abstrae por completo del sistema operativo, del desarrollo del backend completo y de mantenimiento de un sistema monol√≠tico. Con las funciones, puedes tener dividido tu Backend en microservicios que ser√≠an las diferentes funciones y cada una de ellas se encargar√≠a de una tarea concreta.
  Los servicios que ofrecen esto ahora mismo son:
  - Amazon Lambda
  - Google Cloud Functions
  - Cloud Functions for Firebase

## ¬øQu√© puedo hacer con las Cloud Functions?

Una vez puestos en situaci√≥n, vamos a ver que tipo de cosas nos permiten hacer las Cloud Functions, en concreto las que proporciona Firebase.

- **Notificaciones**:
  Podemos enviar notificaciones Push a los dispositivos de nuestros usuarios uniendo Firebase Cloud Messaging y el trigger de la base de datos que salte cuando escribamos en un determinado registro, por ejemplo cuando un usuario tiene un nuevo "follower":
  ![Notificaciones con Firebase Cloud Functions](/images/que-son-las-firebase-cloud-functions/notify.png)

- **Filtrado de mensajes**:
  Uniendo los triggers de la base de datos con las Cloud Functions de nuevo podemos hacer que cuando se escriba un mensaje en un registro de la base de datos, poderlo "sanitizar" (eliminar c√≥digo HTML o JS malicioso, ocultar informaci√≥n tipo emails o n√∫meros de tel√©fono, etc...) y escribirlo ya "limpio" en la base de datos:
  ![Sanitizacion de mensajes](/images/que-son-las-firebase-cloud-functions/sanitization.png)

- **Tratamiento de im√°genes**:
  Combinando triggers de Firebase Storage con la base de datos y las Cloud Functions, podemos hacer que cada vez que un usuario suba una imagen al Storage, descargarla, reducirla de tama√±o y colocarla de nuevo en Storage y escribir un registro en la base de datos. Todo con una funci√≥n.
  ![Thumbnail de im√°genes](/images/que-son-las-firebase-cloud-functions/intensive.png)

Y much√≠simas m√°s que se disparan si lo unes a las [APIs de Machine Learning que tiene Google Cloud](https://cloud.google.com/products/machine-learning/) (Vision, Video, Speech, Translate, etc..) Pero eso es tema para otro post :)

## ¬øC√≥mo creo mi primera Cloud Function?

Para poder crear funciones con Firebase, necesitas primero de todo tener instalado Node.js y NPM en tu equipo para poder instalar la librer√≠a `firebase-tools`:

```
$ npm install -g firebase-tools
```

Esto nos va a permitir utilizar el comando `firebase` en la terminal.

Primero nos situamos en un directorio de nuestro equipo donde queramos tener nuestro proyecto y ejecutamos:

```
$ firebase login
```

Nos pedir√° autenticarnos con una cuenta de Google y ya tendremos acceso los proyectos que creemos en el [panel de control de Firebase](https://console.firebase.google.com)

Por √∫ltimo corremos el comando `firebase init` con la opci√≥n de `functions` y nos crear√° un proyecto de firebase listo para crear funciones:

```shell
$ firebase init functions
```

Y la estructura de archivos generada ser√° la siguiente:

```shell
myProyecto
 +- .firebaserc    # Fichero oculto para ayudarnos a cambiar
 |                 # de proyecto con el comando `firebase use`
 |
 +- firebase.json  # Describe las propiedades de nuestro proyecto
 |
 +- functions/     # Directorio que contiene el c√≥digo de las Functions
      |
      +- package.json  # Fichero de npm que describe las dependencias.
      |
      +- index.js      # Fichero principal del c√≥digo de Funciones
      |
      +- node_modules/ # Directorio d√≥nde se encuentran instaladas las dependencias (Declaradas en
                       # package.json)
```

Una vez tenemos esto, empezamos a escribir en el fichero `miProyecto/functions/index.js`

Lo primero que debemos a√±adir son las dependencias de `firebase-functions` y `firebase-admin` para poder utilizar los triggers que disparan las funciones y tener acceso de administrador la base de datos de nuestro proyecto:

```javascript
const functions = require("firebase-functions");
const admin = require("firebase-admin");

admin.initializeApp(functions.config().firebase);
```

Y un ejemplo de funci√≥n, siguiendo la documentaci√≥n oficial de Firebase, ser√≠a poner en may√∫sculas un texto que se escriba en la base de datos, eso lo podr√≠amos hacer de la siguiente manera:

```javascript
exports.makeUppercase = functions.database
  .ref("/messages/{pushId}/original")
  .onWrite((event) => {
    // Grab the current value of what was written to the Realtime Database.
    const original = event.data.val();
    console.log("Uppercasing", event.params.pushId, original);
    const uppercase = original.toUpperCase();
    return event.data.ref.parent.child("uppercase").set(uppercase);
  });
```

Cuando se escriba en la base de datos, en el registro `/messages/{pushId}/original` se dispara el evento `onWrite` que recoge la funci√≥n `makeUppercase` que exportamos.

Y luego la funci√≥n lo que hace es tomar el texto, que viene en el objeto `event.data.val()`, pasarlo a may√∫sculas y escribirlo en el registro `/messages/{pushId}/uppercase` ya que `event.data.ref` hace referencia al registro con el que definimos el trigger que es `/messages/{pushId}/original` y con `.parent.child` vamos hacia arriba y creamos un nuevo hijo.

Y con esto es b√°sicamente el inicio de cualquier funci√≥n que desarrollemos. Despu√©s ya el grado de complejidad y la integraci√≥n de librer√≠as ser√° menor o mayor.

## Talleres de Firebase Cloud Functions para Startups

Durante la 2¬™ quincena de Julio, [Paola](https://twitter.com/ggarciapaola) y yo vamos a estar impartiendo unos talleres sobre [Firebase Cloud Functions para Startups](https://functionsforstartups.firebaseapp.com/) en varias ciudades de Europa.

Este es nuestro calendario por ahora:

- Mi√©rcoles **21 de Junio** - **GDG Madrid**
  [Taller en Campus Madrid](https://www.campus.co/madrid/es/events/ag1zfmd3ZWItY2FtcHVzcj8LEgZDYW1wdXMiBFJvb3QMCxIGQ2FtcHVzIgZtYWRyaWQMCxIFRXZlbnQiEmExOWYxMDAwMDA0MElZWkFBMgw) (Classroom de la 3¬™ planta)

- Viernes **23 de Junio** - **GDG Aalborg (Dinamarca)** [Workshop @ CREATE Aalborg University](https://www.meetup.com/GDG-Aalborg/events/240662900/)

- S√°bado **1 de Julio** - **GDG Braga (Portugal)** [Workshop @ Braga I/O](https://www.meetup.com/GDG-Braga/events/240588970/)

Si eres organizador de un GDG, contacta conmigo para ver si es posible que impartamos este taller en tu comunidad :)

_M√°s informaci√≥n y fuentes: [Cloud Functions for Firebase Documentation](https://firebase.google.com/docs/functions/)._

</article>

---

<article slug="mi-experiencia-cambiando-de-angularjs-a-reactjs" date="2017-03-17" url="https://carlosazaustre.es/blog/mi-experiencia-cambiando-de-angularjs-a-reactjs">

# Mi experiencia cambiando de AngularJS a ReactJS

**Fecha:** 2017-03-17
> En este art√≠culo quiero contar mi experiencia de trabajar con Angular durante un tiempo y mi cambio a React hace unos meses. No se trata de un post de "Angular vs React" ambas me parecen buenas tecnolog√≠as, si no simplemente quiero mostrar que cosas hicieron que dejase Angular y probase otros stack diferentes para el Front-End.

Empec√© con Angular pr√°cticamente en sus inicios, all√° por 2012, entre las versiones 1.0.8 y 1.2, durante una temporada que pas√© trabajando en Irlanda y tuve tiempo para dedicar a formarme leyendo libros t√©cnicos, haciendo cursos y siguiendo tutoriales.

En esa √©poca tambi√©n empez√≥ a pegar fuerte Node.js y se form√≥ el llamado [stack MEAN (con MongoDB, ExpressJS, Angular y Node.js)](/desarrollo-full-stack-javascript-tambien-conocido-como-mean/) y apost√© por el.

## Que hab√≠a antes de Angular

![jQuery y Backbone JS](/images/mi-experiencia-cambiando-de-angularjs-a-reactjs/spaguetti-jquery-backbone.png)
Angular es genial, porque en su momento, la alternativa "buena" era Backbone y la "mala" JQuery.

Me explico con lo de "buena" y "mala".

Hace unos a√±os no hab√≠a tanta l√≥gica de negocio en el lado Front-End de las aplicaciones web como ahora, pero si quer√≠as hacer algo, pod√≠as hacerlo en JavaScript puro o ayudarte de librer√≠as como jQuery que reduc√≠an el c√≥digo _cross-browser_ y te ayudaban a manipular el DOM.

Lo malo de jQuery era que al final te olvidabas de programar en JavaScript y acababas usando jQuery para todo y tu c√≥digo comenzaba a _spaguettizarse_ si no ten√≠as un poco de cuidado.

![Spaguetti Code](http://i.imgur.com/N5KEXLU.gif)

Backbone solucionaba esto, implementando una arquitectura MVC para el Front-End. El problema es que JavaScript hace unos a√±os no ten√≠a la potencia ni las herramientas que tenemos ahora. Entonces si quer√≠as modularizar tu c√≥digo, ten√≠as que hacer uso de Require.js, lo cual, en mi opini√≥n, era un dolor.

## La llegada de Angular.js

![Angular JS](/images/mi-experiencia-cambiando-de-angularjs-a-reactjs/angular-js.png)
Entonces apareci√≥ Angular, que en su momento era una forma de extender el HTML a trav√©s de directivas. Proporcionaba tambi√©n un patr√≥n MVC, llamado MVVM (Model View-View Model), implementaba _doble data-binding_, gesti√≥n de m√≥dulos, promesas, etc... Muchas cosas que por entonces no estaban en JavaScript y que si quisi√©ramos utilizar jQuery o JavaScript Vanilla para hacerlo, ser√≠a mucho c√≥digo.

Como digo, he estado trabajando con Angular varios a√±os, desde principios de la versi√≥n 1.2 a la 1.5 y me ha servido mucho para aprender JavaScript y como arquitecturar aplicaciones modernas en el Front-End, sobre todo siguiendo las gu√≠as de estilo de [Todd Motto](https://github.com/toddmotto/angular-styleguide) y [John Papa](https://github.com/johnpapa/angular-styleguide).

El problema lleg√≥ cuando JavaScript evolucion√≥ y la llegada del [nuevo est√°ndar (ES6)](/ecmascript6/) a√±adi√≥ de forma nativa funcionalidades que implementaba Angular.

## JavaScript evoluciona: ES6

![](/images/mi-experiencia-cambiando-de-angularjs-a-reactjs/ecmascript-6.png)
Ahora tenemos gesti√≥n de m√≥dulos de forma nativa (No es soportado actualmente pero est√° ahi). Tenemos [Promesas](/manejando-la-asincronia-en-javascript/) tambi√©n de forma nativa, el [API de Fetch](/consumiendo-un-api-rest-desde-react-js-con-ecmascript6/), etc... Un mont√≥n de nuevas funcionalidades de las que no necesitamos ninguna librer√≠a o framework para ayudarnos (Salvo _Babel_ para transpilar c√≥digo).

Si quieres usar ES6 en Angular 1x, la cosa se complica bastante. Angular tiene su propio sistema de m√≥dulos y si quieres utilizar los de ES6 (o utilizar `require` con Browserify) Tienes que meter pr√°cticamente cada controlador en un m√≥dulo de Angular, y luego exportarlo con ES6, etc...

Si ES6 te facilita la vida a la hora de programar en JavaScript, unirlo con Angular lo complicaba m√°s.

![Angular Pen!](/images/mi-experiencia-cambiando-de-angularjs-a-reactjs/angular-1-es6-8-638.jpg)

## El nacimiento de los WebComponents y Angular 2

![](/images/mi-experiencia-cambiando-de-angularjs-a-reactjs/web-components.png)
Paralelamente al desarrollo de Angular, se propuso la especificaci√≥n de los [WebComponents](/como-crear-webcomponent-de-forma-nativa/) y fue el inicio de la programaci√≥n orientada a componentes. Polymer y React segu√≠an esa arquitectura y en Angular 1x se pod√≠a conseguir, [utilizando directivas como componentes](/angular-js-directivas-como-componentes/). Al final una directiva de Angular es un componente (tiene un tag HTML) y encapsula una plantilla HTML y un controlador con JavaScript.

De hecho a partir de la versi√≥n 1.5 aparece la funci√≥n `component()` que permite hacer justo eso, transformar una directiva en componente.

Viendo como evolucionaba JavaScript y el est√°ndar de WebComponents, se propuso reescribir Angular siguiendo los nuevos est√°ndares, es lo que se conoce como Angular v2 o simplemente Angular.

El problema es que, a mi parecer, se complicaba mucho la sintaxis. La nueva versi√≥n de Angular no se parec√≠a nada a la anterior. Se hicieron intentos de que la transici√≥n fuera m√°s sencilla (Desarrollando versiones 1.5, 1.6 y 1.7 que fueran incorporando las novedades de Angular 2 gradualmente).

Pero si en ese momento estabas trabajando con la v1.x, sientes que est√°s trabajando con un framework condenado a la extinci√≥n. Y la alternativa, si quer√≠as seguir con Angular, era aprender Angular 2.

Yo lo intent√©, e hice peque√±as pruebas, pero me parec√≠a muy complicado, adem√°s segu√≠a en Beta y no era conveniente usar en producci√≥n.

Durante todo ese tiempo, React fue una de las librer√≠as que m√°s despeg√≥ y empez√≥ a hacerse madura y su ecosistema y comunidad crecieron mucho. Empez√≥ a convertirse en un proyecto estable y como tiempo atr√°s le di un vistazo, quise darle una oportunidad.

## Mis primeros pasos con React

![](/images/mi-experiencia-cambiando-de-angularjs-a-reactjs/react-first-steps.png)
Entonces, poco antes del verano de 2016, [empec√© a probar React](/mi-inmersion-en-react/), vi lo mucho que hab√≠a evolucionado desde la primera vez que lo vi en 2015. Pude ver lo bien que se integraba con el nuevo est√°ndar de JavaScript y la sencillez con la que se pod√≠an hacer las cosas.

Las √∫nicas pegas que encontr√© en inicio, eran la [sint√°xis JSX](/jsx-para-novatos/). Al principio crees que es HTML y claro, a√±adir HTML a c√≥digo JavaScript no es lo que se debe hacer, pero luego comprendes que no es HTML, es c√≥digo JavaScript pero escrito de una forma m√°s sencilla de programar y de entender.

React no es el sustituto de Angular, porque React es s√≥lo una librer√≠a que hace una √∫nica cosa: Renderizar componentes en el DOM. Pero lo hace muy bien.

Para implementar con React y su ecosistema, una aplicaci√≥n web como har√≠amos con Angular, necesitamos m√°s librer√≠as y programar m√°s.

Esto para algunas personas puede parecer una desventaja, pero a mi personalmente me parece lo contrario.

Con un framework, ya sea Angular o cualquier otro. Si quieres usar por ejemplo un sistema de routing, tienes que usar el que est√° construido para el propio framework.

Con React, si quieres implementar Routing, puedes hacerlo tu mismo con JavaScript Vanilla, o utilizar una librer√≠a, la que tu prefieras. Puede ser la que ha creado la comunidad con react-router, o puedes usar page.js o la que tu prefieras. No est√°s atado a nada.

React te permite ser m√°s modular e ir a√±adiendo lo que necesites poco a poco. Si necesitas utilizar promesas puedes utilizar las que ES6 te provee de forma nativa, si necesitas hacer llamadas AJAX, puedes utilizar fetch o una librer√≠a como `request` o `axios` o incluso jQuery son `$.ajax()`.

## Conclusi√≥n

Esta forma es la que me parece m√°s correcta, porque te permite ser m√°s independiente y la arquitectura de tu aplicaci√≥n ya no depende de una √∫nica librer√≠a o herramientas.

Tambi√©n programar de esta forma me ha hecho aprender m√°s sobre arquitecturas front-end y mejorar como profesional.

Como siempre digo, √©sta es mi opini√≥n, basada en mi experiencia con ambas tecnolog√≠as. Angular 2 es un excelente framework (si no, nadie lo usar√≠a) y React es una tecnolog√≠a m√°s dentro del gran ecosistema que existe en el Frontend (Polymer, Vue, Backbone, etc...)

Dependiendo del tipo de aplicaci√≥n que quieras hacer, quiz√° una de ellas te complique m√°s el desarrollo y otra te lo simplifique mucho m√°s. Todo es cuesti√≥n de probar y ver cu√°l es √∫til en cada momento.

</article>

---

<article slug="como-funciona-redux-conceptos-basicos" date="2017-03-09" url="https://carlosazaustre.es/blog/como-funciona-redux-conceptos-basicos">

# ¬øC√≥mo funciona Redux? Conceptos b√°sicos

**Fecha:** 2017-03-09
En el [anterior post vimos que era y c√≥mo funcionaba la arquitectura Flux](/como-funciona-flux/). Siendo de alguna manera, un sustituto o evoluci√≥n del patr√≥n Modelo-Vista-Controlador.

Al igual que existe la programaci√≥n orientada a objetos y existen lenguajes que lo implementan (Como Java por ejemplo), o el patr√≥n MVC y existen frameworks o librer√≠as que lo implementan (como AngularJS o Backbone por ejemplo), **[Redux](http://redux.js.org) es una librer√≠a que implementa el patr√≥n de dise√±o Flux**, con algunas variaciones que veremos a lo largo del art√≠culo.

Redux es una librer√≠a JavaScript muy peque√±a (Apenas 2KB en total), con muy poco c√≥digo. Su API apenas son 5 funciones y lo m√°s importante es que es JavaScript puro, por lo que es agn√≥stica al framework y puede utilizarse con cualquier librer√≠a framework (Angular, Polymer, React, etc...)

![Redux Logo](/images/como-funciona-redux-conceptos-basicos/logo_redux.png)

## ¬øQu√© hace Redux?

Redux se encarga en cierta manera de desacoplar el estado global de una aplicaci√≥n web (en Front-End) de la parte visual, es decir los componentes.

Seguramente te preguntes ¬øQu√© es el estado de la aplicaci√≥n?

### El estado de la aplicaci√≥n

El estado en una web o aplicaci√≥n pueden ser varias cosas, normalmente se trata **los datos que puedes recibir a trav√©s de un API REST o WebService** (por ejemplo un listado de productos), tambi√©n se refiere al **estado de la UI** en un determinado momento, por ejemplo: un panel est√° desplegado o no, tiene que aparecer la informaci√≥n del usuario o no, un mensaje de error, etc...

Para llevar a cabo esta gesti√≥n del estado, Redux implementa Flux pero con algunas modificaciones:

## Los 3 conceptos clave de Redux

Redux se base en tres conceptos principales:

### 1. Una √∫nica "fuente de la verdad"

Flux propone que haya varios _Stores_ para almacenar el estado. Sin embargo Redux simplifica esto utilizando un √∫nico _Store_. Todo el estado queda almacenado en un √°rbol. En JavaScript esto se conseguir√≠a con un objeto JavaScript como el siguiente:

```javascript
const initialState = {
  user: {
    error: null,
    isLoading: true,
    avatar: null,
    email: null,
  },
  products: {
    list: [],
    error: null,
    isLoading: true,
  },
};
```

### 2. El estado es de s√≥lo lectura.

No podemos modificar el estado directamente, s√≥lo podemos leer de √©l para representarlo en la vista y si queremos modificarlo, lo tenemos que hacer a trav√©s de **acciones**.

Una acci√≥n es simplemente un objeto JavaScript que incluye al menos un atributo `type` que indica el tipo de acci√≥n que estamos emitiendo y en caso de que haya datos asociados al cambio o modificaci√≥n, un atributo `payload` con esos datos:

```javascript
{
   type: 'LOAD_PRODUCTS',
   products: products
}
```

Estas acciones suelen devolverse a trav√©s de un _Action Creator_ que ser√≠a de este tipo:

```javascript
function loadProducts(products) {
  return {
    type: "LOAD_PRODUCTS",
    products,
  };
}
```

### 3. Cambios con funciones puras.

Ya que no podemos modificar el estado directamente (tiene que ser a trav√©s de acciones) y el estado est√° almacenado en un √∫nico _Store_, para especificar como realizar los cambios en el √°rbol del estado utilizamos funciones puras llamadas **reducers**.

Una funci√≥n pura es simplemente una funci√≥n que ante los mismos datos de entrada devuelve el mismo resultado. Es decir, la siguiente funci√≥n ser√≠a una funci√≥n pura de ejemplo:

```javascript
function suma(a, b) {
  return a + b;
}
```

Esta funci√≥n para los mismos par√°metros, devuelve siempre lo mismo. Si llamamos a `suma(1,2)` siempre devolver√° 3. De √©sta manera es m√°s sencillo depurar y encontrar errores, y es m√°s f√°cil testear.

El **reducer** es simplemente eso, una funci√≥n que recibe dos par√°metros, el estado inicial y una acci√≥n y dependiendo del tipo de acci√≥n realizar√° una operaci√≥n u otra en el estado. Siempre de manera inmutable, no podemos modificar el estado, si no crear una copia a partir del anterior. De esta forma es m√°s f√°cil rastrear posibles errores.

Un _reducer_ tiene esta pinta:

```javascript
function reducer (state, action) {
   switch(action.type) {
     case 'ADD_ITEM':
       return state.concat(action.item);
     case 'REMOVE_ITEM':
     ...
     default:
       return state;
   }
}
```

## API de Redux

Como comentaba anteriormente, el API o funciones que exporta Redux son muy pocas. Vamos a explicar aqu√≠ las m√°s utilizadas cuando creas una aplicaci√≥n con Redux:

### createStore

Esta funci√≥n, como su nombre indica, crea la _store_ central donde se almacenar√° el estado global de la aplicaci√≥n.

La funci√≥n recibe como par√°metro un _reducer_ y opcionalmente un estado inicial y un _enhancer_ que nos sirve para m√°s adelante a√±adir _Middlewares_. Y devuelve la _store_ creada.

```javascript
const store = redux.createStore(reducer, [initialState], [enhancer]);
```

Con la _Store_ creada tenemos [varios m√©todos](https://redux.js.org/api/store#store-methods) que podemos utilizar:

- `store.getState()`: Nos devuelve el estado actual de la _store_.
- `store.dispatch(action)`: Emite una acci√≥n, es la √∫nica forma de intentar cambiar el estado.
- `store.subscribe(listener)`: Permite suscribirse a los cambios que ocurran. El `listener` es llamado cada vez que una acci√≥n sea emitida y una parte del estado pueda haber sido cambiada.

Hay otros m√°s pero estos son los m√°s utilizados.

### combineReducers

Como en Redux tenemos un √∫nico _store_ para almacenar todo el estado de la aplicaci√≥n. Es una buena pr√°ctica tener varios _reducers_ (uno por cada parte desglosada del estado) y con esta funci√≥n podemos combinarlos en un √∫nico _reducer_ que pasar como par√°metro a la funci√≥n `createStore`.

**¬øPor qu√© hay que hacer varios _reducers_?** Porque de esta forma dividimos nuestro problema en varias partes y es m√°s sencillo modularizar nuestra aplicaci√≥n.

Por ejemplo si tenemos un estado como el siguiente:

```javascript
const initialState = {
  user: {
    error: null,
    email: null,
  },
  products: {
    list: [],
    loading: true,
    error: null,
  },
  currentProduct: {
    product: null,
    loading: true,
    error: null,
  },
  cart: {
    items: [],
    total: 0,
  },
};
```

Ser√≠a interesante tener un _reducer_ que controle la parte del estado dedicada al `user`, otro reducer para todas las acciones asociadas a la manipulaci√≥n de los `products`. Otro m√°s para el producto actual y otro para la gesti√≥n del carrito, de tal manera que podamos hacer lo siguiente:

```javascript
function userReducer (state = initialState.user, action) {...}
function productsReducer (state = initialState.products, action) {...}
function currentProductReducer (state = initialState.currentProduct, action) {...}
function cartReducer (state = initialState.cart, action) {...}

const rootReducer = combineReducers({
  user: userReducer,
  products: productsReducer,
  currentProduct: currentProductReducer,
  cart: cartReducer
});
```

### applyMiddleware

Esta funci√≥n nos permite a√±adir _Middlewares_ a Redux. Los _middlewares_ son funciones que se ejecutan entre que se emite una acci√≥n y cambia el estado. Podemos a√±adir multitud de ellos, y uno de los m√°s usados ser√≠a **Redux-Thunk** que veremos en otro post ;)

### bindActionCreators

Esta funci√≥n nos permite enlazar la funci√≥n `dispatch` de la _store_ con los creadores de acci√≥n (esto son funciones que devuelven el objeto acci√≥n) de manera que no tengamos que estar importando la _store_ en todas las partes que necesitemos emitir una acci√≥n.

Es muy utilizada con React y sobre todo con la librer√≠a `react-redux` que nos permite escribir menos c√≥digo si utilizamos Redux con React.

### compose

Dependiendo del tipo o tipos de _middlewares_ que estemos incluyendo en la creaci√≥n del nuestra _store_, ser√° necesario unirlos para que funcione correctamente (por ejemplo la extensi√≥n de Chrome Redux Developer Tools hay que incluirla en la _store_ con √©sta funci√≥n).

En resumen, lo que necesitas para utilizar Redux es:

- Definir tu **estado inicial**.
- Trocear ese estado inicial para crear **varios reducers** (o uno solo si tu estado no es muy complejo)
- Definir las acciones (tipos y datos a recibir) y tambi√©n crear las funciones creadoras de acci√≥n (_Actions Creators_).
- Component los reducers si tienes varios, en uno solo.
- Crear la store

Luego ya dependiendo de si te ayudas de librer√≠as espec√≠ficas para cada framework o librer√≠a que utilices, ya funciona de una forma u otra.

Y b√°sicamente esto es Redux. Resulta un tanto lioso y abrumante al principio, pero en un pr√≥ximo tutorial crear√© una aplicaci√≥n de ejemplo, explicada paso a paso para entender como se conecta todo esto.

</article>

---

<article slug="como-crear-webcomponent-de-forma-nativa" date="2017-02-01" url="https://carlosazaustre.es/blog/como-crear-webcomponent-de-forma-nativa">

# C√≥mo crear un WebComponent de forma nativa

**Fecha:** 2017-02-01
Gracias a los `custom elements` cualquier desarrollador web puede crear sus propios componentes HTML. Es decir, un nuevo `tag` HTML que "esconde" dentro su propia funcionalidad, dise√±o y layout.

En este art√≠culo te voy a contar como puedes crear tu propio **Web Component desde cero, sin necesidad de utilizar librer√≠as adicionales**, √∫nicamente utilizando JavaScript, HTML y CSS.

- [Demo en JSBin](http://jsbin.com/zitenoromo/edit?html,js,output)
- [C√≥digo en Github](https://github.com/carlosazaustre/webcomponents-example)
- Tambi√©n puedes ver el videotutorial en [mi canal de YouTube](https://youtube.com/carlosazaustre?sub_confirmation=1)

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=8bcfgXePHnk)
/>

## Definiendo el Custom Element

Con la **[Custom Elements v1 Spec](https://html.spec.whatwg.org/multipage/scripting.html#custom-elements)** el navegador ahora tiene el objeto o clase **HTMLElement** del cual podemos "extender" y crear nuestros _web components_.
No est√° a√∫n soportado por todos, pero poco a poco los fabricantes lo est√°n incorporando. [En _Can I Use_ puedes ver las versiones que lo soportan en este momento](http://caniuse.com/#feat=custom-elementsv1)

Con el objeto global **customElement** le indicamos al navegador que nueva _tag_ estamos creando y a que clase heredada de `HTMLElement` hacemos referencia.

Dejamos la teor√≠a por ahora y nos ponemos manos a la obra. Vamos a crear un _Web Component_ reutilizable que represente un bot√≥n de compra. Empezamos por el c√≥digo JavaScript:

```javascript
class SellButton extends HTMLElement {
  // Aqu√≠ ir√≠a el c√≥digo del elemento
  // Eventos, funciones, etc...
}

window.customElement.define("sell-button", SellButton);
```

De esta manera podr√≠amos usar en nuestro HTML el siguiente tag:

```html
<sell-button></sell-button>
```

Pero de momento no ver√≠amos nada. As√≠ que vamos a empezar a a√±adir cosas.

`HTMLElement` posee m√©todos de ciclo de vida, como tambi√©n tienen librer√≠as como React. Son los siguientes:

- **connectedCallback**: Se llama cada vez que el elemento se inserta en el DOM. Aqu√≠ podemos hacer llamadas AJAX para pedir datos, configurar cosas, etc.. Funcionar√≠a similar al _componentWillMount_ de React.js

- **disconnectedCallback**: Este m√©todo se llamar√≠a cuando el componente es eliminado del DOM. Su comparaci√≥n con React ser√≠a el m√©todo _componentWillUnmount_

- **attributeChangedCallback**: Este otro m√©todo se llamar√≠a cuando se a√±adiera un nuevo atributo, se actualizase o se eliminara. Algo similar a _componentWillReceiveProps_, _shouldComponentUpdate_, _componentDidUpdate_ en React.

Entonces en `connectedCallback` vamos a a√±adir un poco de HTML con la funci√≥n `innerHTML`:

```javascript
class SellButton extends HTMLElement {
  constructor() {
    super();
  }

  connectedCallback() {
    this.innerHTML = `
      <div>
        <button>Comprar Ahora</button>
      </div>
    `;
  }
}

window.customElements.define("sell-button", SellButton);
```

Y esto es lo que ver√≠amos ahora en el navegador:

![Custom Element](/images/como-crear-webcomponent-de-forma-nativa/customElement.png)

## Encapsulando el Markup en el Shadow DOM

Pero esto no es todo lo elegante que nos gustar√≠a. Entre las propiedades que nos ofrecen los _Web Components_ est√° el llamado **Shadow DOM** que nos es m√°s que una forma de encapsular el DOM del componente (con su funcionalidad y estilos) y que por ejemplo, estos estilos no se "pisen" con otros estilos del documento.

Veamos como implementarlo en nuestro _Web Component_:

```javascript
class SellButton extends HTMLElement {
  constructor() {
    super();
  }

  connectedCallback() {
    let shadowRoot = this.attachShadow({ mode: "open" });
    shadowRoot.innerHTML = `
      <style>
        :host {
          --orange: #e67e22;
          --space: 1.5em;
        }
        .btn-container {
          border: 2px dashed var(--orange);
          padding: var(--space);
          text-align: center;
        }
        .btn {
          background-color: var(--orange);
          border: 0;
          border-radius: 5px;
          color: white;
          padding: var(--space);
          text-transform: uppercase;
        }
      </style>
      <div class="btn-container">
        <button class="btn">Comprar Ahora</button>
      </div>
    `;
  }
}

window.customElements.define("sell-button", SellButton);
```

Como puedes ver, usamos la funci√≥n `attachShadow` para poder adjuntar el DOM que vamos a crear como Shadow DOM al WebComponent, y a continuaci√≥n insertamos el HTML, d√≥nde podemos a√±adir una tag de `<styles>` ya que estos estilos solo funcionar√°n en este Shadow DOM y no entrar√°n en conflicto con otros estilos. Adem√°s podemos usar la propiedad `:host` y definir variables para utilizar dentro del estilo del componente, haciendo uso de nuevas propiedades de CSS.

Ahora el componente tiene esta pinta en el HTML:

![Custom Element y Shadow DOM](/images/como-crear-webcomponent-de-forma-nativa/customElement-shadow-dom.png)

## Usando Template

Si no te gusta escribir el HTML como string, puedes utilizar **template** en tu HTML, llamarlo y "popularlo" dentro del objeto _HTMLElement_ que estamos definiendo.

Ser√≠a as√≠:

```html
<!-- Documento HTML con la plantilla -->
<template id="sellBtn">
  <style>
    :host {
      --orange: #e67e22;
      --space: 1.5em;
    }
    .btn-container {
      border: 2px dashed var(--orange);
      padding: var(--space);
      text-align: center;
    }
    .btn {
      background-color: var(--orange);
      border: 0;
      border-radius: 5px;
      color: white;
      padding: var(--space);
      text-transform: uppercase;
    }
  </style>
  <div class="btn-container">
    <button class="btn">Comprar Ahora</button>
  </div>
</template>
```

Y el c√≥digo JavaScript:

```javascript
class SellButton extends HTMLElement {
  constructor() {
    super();
  }

  connectedCallback() {
    let shadowRoot = this.attachShadow({ mode: "open" });
    const t = document.querySelector("#sellBtn");
    const instance = t.content.cloneNode(true);
    shadowRoot.appendChild(instance);
  }
}

window.customElements.define("sell-button", SellButton);
```

## Modularizar el WebComponent e importarlo desde otro archivo

Incluso podr√≠as incluir todo el c√≥digo de tu _WebComponent_ (Template y Script) en un mismo fichero HTML.

En este caso, tienes que encapsular el `<template>` y el `<script>` dentro de un tag `<html>`.

Tambi√©n tendremos que modificar un poco el c√≥digo JavaScript si queremos importar este documento como un **[HTMLImport](https://developer.mozilla.org/en-US/docs/Web/Web_Components/HTML_Imports)** ya que si usamos `document.querySelector('#sellBtn')` `document` va a hacer referencia al documento HTML desde el que se importa y no va encontrar nuestro _template_.

Como queremos hacer referencia al documento importado, no al que lo importa, necesitamos a√±adir esta l√≠nea:

```javascript
let importDocument = document.currentScript.ownerDocument;
```

Con esto ya podemos tener un fichero `components/sell-button.html` por ejemplo, con la siguiente estructura:

```html
<html>
  <template id="sellBtn">
    <style>
      :host {
        --orange: #e67e22;
        --space: 1.5em;
      }
      .btn-container {
        border: 2px dashed var(--orange);
        padding: var(--space);
        text-align: center;
      }
      .btn {
        background-color: var(--orange);
        border: 0;
        border-radius: 5px;
        color: white;
        padding: var(--space);
        text-transform: uppercase;
      }
    </style>

    <div class="btn-container">
      <button class="btn">Comprar Ahora</button>
    </div>
  </template>

  <script>
    class SellButton extends HTMLElement {
      constructor() {
        super();
        this.importDocument = document.currentScript.ownerDocument;
      }

      connectedCallback() {
        let shadowRoot = this.attachShadow({ mode: "open" });
        const t = this.importDocument.querySelector("#sellBtn");
        const instance = t.content.cloneNode(true);
        shadowRoot.appendChild(instance);
      }
    }

    window.customElements.define("sell-button", SellButton);
  </script>
</html>
```

y en tu `index.html` solo tend√≠as que importar este document con HTMLImports y usar el nuevo tag:

```html
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Mi primer Vanilla Webcomponent</title>
    <link rel="import" href="components/sell-button.html" />
  </head>
  <body>
    <sell-button></sell-button>
  </body>
</html>
```

> **¬°OJO!** los [`HTMLImports` solo funcionan en Chrome y Opera](http://caniuse.com/#feat=imports). En Firefox, Safari e Internet Explorer/Edge no. Te recomiendo que pruebes esto en un navegador Chrome actualizado

> Si quieres usar `customElements` sin problema puedes hacer uso de un [polyfill](https://github.com/webcomponents/custom-elements)

## Resumen

¬øQu√© hemos hecho? Hemos usado la plataforma web (HTML, CSS y JavaScript) para crear un _WebComponent_ reutilizable. No confundir con un _Component_ de React o Angular. Eso es una forma de construir aplicaciones web modularizadas. El prop√≥sito de un _WebComponent_ es que sea reutilizable en cualquier proyecto web. De igual manera que usamos elementos HTML como `<select>`, `<input>`, `<video>`, `<a>`, etc... que tienen un determinado estilo y comportamiento, con los _WebComponents_ se trata de extender ese ecosistema.

Unos buenos ejemplos son componentes web como `<google-map>` o `<youtube-video>` que podr√≠amos usar en cualquier proyecto que hagamos.

## Enlaces √∫tiles

Puedes encontrar m√°s _WebComponents_ creados por la comunidad, ya sea con VanillaJS o utilizando librer√≠as como _Polymer_ en la web [WebComponents.org](https://www.webcomponents.org/)

En √©ste [enlace te dejo un JSBin](http://jsbin.com/zitenoromo/edit?html,js,output) para que puedas "jugar" con ello, y en [√©ste repositorio de GitHub]() te dejo el c√≥digo de √©ste ejemplo.

Y ampliar tu informaci√≥n sobre **[customElements](https://developers.google.com/web/fundamentals/getting-started/primers/customelements)** y **[Shadow DOM](https://developers.google.com/web/fundamentals/getting-started/primers/shadowdom)** en la web de **Google Developers**.

</article>

---

<article slug="formas-de-crear-un-componente-en-react" date="2017-01-24" url="https://carlosazaustre.es/blog/formas-de-crear-un-componente-en-react">

# 4 Formas de crear un Componente en React

**Fecha:** 2017-01-24
Un componente en React puede crearse de diferentes formas dependiendo de la versi√≥n de JavaScript que estemos utilizando y del prop√≥sito del componente.

En este art√≠culo recopilo las diferentes formas que existen y en que situaci√≥n se suele utilizar cada una de ellas. Vamos all√°

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=sOMA7amhGzU)
/>

##Componente de React con ES5
Esta es la primera forma que hubo y que puedes encontrar en muchos tutoriales por la red. Se basa en el m√©todo `createClass` de la librer√≠a React y la estructura ser√≠a la siguiente:

```javascript
var MiComponente = React.createClass({
  propTypes: {...},
  getDefaultProps: {...},
  getInitialState: function () {...},
  render: function () {...}
});
```

Al m√©todo `createClass` se le pasa un objeto que contiene las funciones t√≠picas del ciclo de vida si se han de utilizar, el m√©todo `render`, los `propTypes`, el estado inicial se configurar√≠a en la funci√≥n `getInitialState` y las `props` por defecto se definen en `getDefaultProps`.

##React con ES6 (o ES2015)
Con el nuevo est√°ndar de JavaScript podemos utilizar `classes` y en este caso, podemos _"heredar"_ del objeto `React.Component`. La creaci√≥n de un componente utilizando √©sta sintaxis ser√≠a la siguiente:

```javascript
class MiComponente extends React.Component {
  constructor (props) {
     super(props);
     this.state = {...};
  }
  render () {...}
}
MiComponent.propTypes = {...};
MiComponent.defaultProps = {...};
```

Al utilizar la sint√°xis de clases, tenemos un m√©todo `constructor` d√≥nde configuramos el estado inicial y se reciben las propiedades. El m√©todo `render` es una funci√≥n m√°s dentro de la clase y en este caso las `propTypes` se definen fuera de la clase como una propiedad al igual que las `defaultProps`.

## Componente de React como funci√≥n

Otra forma de crear un componente en React, con el nuevo est√°ndar es crearlo como una funci√≥n. Esta forma se utiliza cuando el componente es puramente representacional o sin estado.

¬øCu√°ndo es mejor crear un componente de esta manera? Si en tu componente √∫nicamente utilizas el m√©todo render, y no est√°s haciendo uso del estado, es mejor que lo definas como una funci√≥n. De esta manera tu aplicaci√≥n final tendr√° mejor _performance_.

```javascript
const MiComponente = function (props) {
 return (...);
};
```

Incluso puedes aplicar las √∫ltimas funcionalidades de ES2015 como el _object destructuring_ para las propiedades y las _arrow functions_ para definir la funci√≥n.

Ser√≠a algo as√≠:

```javascript
const MiComponente = ({prop1, prop2 }) => (...);
```

## Utilizando ES7

Aunque la versi√≥n 7 de ECMAScript a√∫n no est√° aprobada ni implementada por los navegadores, podemos utilizarla en nuestro c√≥digo utilizando [Babel](http://babeljs.io) y el preset `stage-0` para ello.

¬øQue diferencia hay con respecto a ES6? ES7 introduce las [_Property Initialiazers_](https://github.com/tc39/proposal-class-public-fields) que podemos aplicar a las `defaultProps` y a las `propTypes` para que est√©n incluidas dentro de la definici√≥n de la clase.

Y tambi√©n puede aplicarse al estado inicial, definiendo √©ste fuera del m√©todo `constructor`.

Esta ser√≠a la sintaxis:

```javascript
class MiComponent extends React.Component {
  static propTypes = {...}

  static defaultProps = {...}

  state = {...}

  constructor (props) {
    super(props);
  }

  render () { ... }

}
```

Como ves, hay varias formas de crear un componente de React, todas son v√°lidas, tan solo depende del caso de uso y de la especificaci√≥n de ECMAScript que quieras utilizar.

Lo m√°s habitual hoy en d√≠a es utilizar la versi√≥n de clase de ES2015 o la versi√≥n como funci√≥n en el caso de componentes sin estado. Aunque si utilizas el `stage-0` de babel nada impide que utilices las `Property Initialiazers` y prepares a tus componentes para ES7 :)

¬øQuieres aprender m√°s sobre React? [Te espero en mi **curso online** sobre **Fundamentos de React.js**](http://cursos.carlosazaustre.es/p/react-js/)

</article>

---

<article slug="2016" date="2017-01-03" url="https://carlosazaustre.es/blog/2016">

# Resumen de 2016 y prop√≥sitos para 2017

**Fecha:** 2017-01-03
Como viene siendo habitual por estas fechas, voy a compartir las m√©tricas en torno al blog durante 2016. Si quieres ver como fue en anteriores a√±os, aqu√≠ te dejo los enlaces:

- [M√©tricas del 2014 y objetivos para el 2015](https://carlosazaustre.es/2014)
- [M√©tricas del 2015 y objetivos para el 2016](https://carlosazaustre.es/2015)

Ahora si, es momento de recapitular de nuevo y ver que tal se ha dado 2016 y sobre todo, comprobar si los objetivos que me marqu√© se han conseguido :)

### As√≠ ha ido 2016

Esto es una captura de Google Analytics desde el 1 de Enero de 2016 hasta el 31 de diciembre:

![Anal√≠ticas de 2016](/images/2016/carlosazaustre-es-analytics.png)

**M√°s de 800.000 visitas √∫nicas** en todo el a√±o y m√°s de 1.200.000 de visitas totales, casi el doble que las 450.000 del a√±o pasado, de nuevo un **80% de crecimiento**.

Como nota a destacar, en Agosto hubo una bajada debida a que el servidor donde tengo alojado el blog se cay√≥ y me pill√≥ en pleno [Camino de Santiago (#peregrinosTech)](https://twitter.com/search?q=peregrinostech&src=typd) por lo que hasta que no pude volver a Madrid y solucionarlo, hubo un par de d√≠as con 0 visitas.

![Comparaci√≥n 2015 - 2016](/images/2016/carlosazautre-es-comparacion2016-2015.png)

Visto en resumen, las estad√≠sticas mes a mes son estas:

![Estad√≠sticas mes a mes](/images/2016/estadisticas-mensuales-carlosazaustre-es.png)

Aqu√≠ se puede ver que de nuevo mes a mes (salvo los meses de verano y el √∫ltimo mes del a√±o por las vacaciones de navidad) **el crecimiento ha seguido subiendo**. De nuevo, la nota curiosa, es que **la media mensual** de visitas √∫nicas (67.800) **es m√°s alta que el mes m√°s activo de 2015** que fue Noviembre con 45.874 visitas.

Este a√±o, despu√©s del verano ,el crecimiento no ha sido tan alto en relaci√≥n con el anterior, tambi√©n debido a que el tema de posts lo he tenido un poco parado. Desde Septiembre s√≥lo he publicado 7 posts y eso se nota. **Estuve varios meses centrado en crear y publicar mi [curso online de Fundamentos de React.js](https://carlosazaustre.es/curso-react)**

De nuevo, la **lista de correo se ha triplicado**, pasando de 1500 suscriptores a principios de a√±o a los casi 4.500, tras hacer varias "limpiezas" de algunos usuarios inactivos. El crecimiento ha sido brutal sobre todo a partir de septiembre cuando lanc√© la gu√≠a "Crea tu primera App con React en 10 minutos" como obsequio al suscribirse.

Este a√±o me he tomado m√°s en serio [Youtube](http://youtube.com/carlosazaustre) que en el anterior. El canal ha crecido desde los 1800 suscriptores **hasta los m√°s de 6000** a d√≠a de hoy. A√∫n as√≠ no he estado todo el a√±o centrado en Youtube, √∫nicamente a partir de Septiembre cuando inici√© mi [curso gratuito de Desarrollo de APIs REST con Node.js](https://www.youtube.com/playlist?list=PLUdlARNXMVkk7E88zOrphPyGdS50Tadlr) y los v√≠deos de [#NavidadConFirebase](https://www.youtube.com/playlist?list=PLUdlARNXMVkmmBGGnr1ky-RQJ65XW6BE4).

[Twitter](http://twitter.com/carlosazaustre) y [Facebook](http://facebook.com/carlosazaustre) siguen para arriba y conozco mucha gente interesante gracias a ellas.

### Revisi√≥n de los OKRs de 2016

Estos fueron los objetivos ([OKR](https://es.wikipedia.org/wiki/OKR)) que me propuse a inicios del 2016 para todo el a√±o:

> **100.000 visitas mensuales**.

> Hace 1 a√±o me propuse llegar a las 100.000 visitas mensuales en el blog. En visitas √∫nicas (usuarios √∫nicos), la media han sido 67.883 y en p√°ginas vistas las media fue 102.172 (Un usuario entra 3 veces en el blog, cuenta como una visita √∫nica o sesi√≥n y c√≥mo 3 p√°ginas vistas). Si tomo en cuenta las p√°ginas vistas el objetivo ha sido m√°s que superado, y si tomo en cuenta las sesiones, he llegado al 68% casi el 70% del OKR, por lo que se puede decir que **OBJETIVO CUMPLIDO**

---

> **5000 suscriptores en Youtube**

> A finales de 2016 el canal lleg√≥ a los casi 6200 suscriptores. Por tanto he cumplido el 126% del OKR, eso significa que el objetivo no era tan ambicioso. Se considera un √©xito llegar al 60% - 70% del objetivo marcado. En todo caso: **OBJETIVO CUMPLIDO**

---

> **Terminar libro de JavaScript y escribir otro**
> En Abril publiqu√© el ebook [Aprendiendo JavaScript](http://leanpub.com/aprendiendo-javascript) y me plantee actualizar el de Angular que publiqu√© hace 2 a√±os, pero no lo hice, porque a mediados de a√±o [cambi√© mi stack por React](https://carlosazaustre.es/blog/mi-inmersion-en-react/), en su lugar publiqu√© un mini-ebook en formato gu√≠a como obsequio al suscribirte a mi lista de correo. Por tanto, si el objetivo era publicar 2 (O al menos "uno y medio") y he publicado uno y "uno peque√±o", podemos decir que ha sido cerca del 60% del OKR planteado, as√≠ que digamos que **OBJETIVO CUMPLIDO**

---

> **Organizar un Workshop presencial**

> Este a√±o, con el nacimiento de mi hija Aroa, no he tenido mucho tiempo de asistir a eventos, charlas y dar formaciones. A√∫n as√≠, en Julio fui a la [AngularCamp de Barcelona](http://angularcamp.org) e impart√≠ un [workshop en las jornadas sobre Angular 1x](https://carlosazaustre.es/desarrollo-por-componentes-con-angular-1-5-con-es6-es2015/).
> Tambi√©n, aunque no es un workshop, en la recta final del a√±o lanc√© el [curso online de React.js](https://carlosazaustre.es/curso-react). Por tanto **OBJETIVO CUMPLIDO**

---

> **Renovaci√≥n de la web/blog**

> Finalmente renov√© el aspecto de mi blog. Primero desarroll√© una peque√±a app Node.js para las secciones de mi web y el theme del blog lo modifiqu√© un poco, para la portada que antes era [as√≠](https://web.archive.org/web/20160112115427/https://carlosazaustre.es/blog/) y de los posts [as√≠](https://web.archive.org/web/20160131054535/https://carlosazaustre.es/blog/angular-js-directivas-como-componentes/). As√≠ que otro **OBJETIVO CUMPLIDO**

5 grandes retos para el a√±o y todos cumplidos, as√≠ que puedo decir que ha sido un buen a√±o :)

### OKRs para 2017

Empieza el a√±o y es el momento de reflexionar sobre lo conseguido en 2016 y plantearse los retos para todo el a√±o:

- **Youtube**: Este a√±o quiero que sea el a√±o del canal de Youtube. Para conseguirlo, y en alianza con el blog, voy a crear muchos m√°s v√≠deos y tutoriales y en la medida de lo posible ir√°n acompa√±ados de un post en el blog. Quiero completar el curso gratuito de Node.js, crear otras series de v√≠deos sobre ES6/7, React, GraphQL, Servicios como Google Cloud, Firebase, Reviews sobre productos y gadgets que compre, etc... Mi reto es que el canal llegue a los **20.000 suscriptores** y es mi gran objetivo del a√±o

- **Visitas del Blog**: Como digo en el anterior OKR, y siguiendo la t√≥nica que ha experimentado el blog en los √∫ltimos a√±os, considerando que la media mensual del a√±o es m√°s alta que el mes m√°s activo del anterior, voy a proponerme que el blog consiga una media de **160.000 p√°ginas vistas mensuales** y llegar los **2.000.000 de visitas al a√±o**

- **Publicaci√≥n de un nuevo eBook**: Mi intenci√≥n es crear 2 ebooks, uno completo sobre React y otro sobre ES6/7. Vamos a intentarlo :)

- **Cursos Online**: Este objetivo depender√° mucho del anterior, sobre todo por el tiempo de dedicaci√≥n. Me encantar√≠a llegar a todo pero con Startup, Familia y Beb√© ser√° complicado. Mi intenci√≥n es **crear y lanzar 3 cursos online** al estilo del de Fundamentos de React.js a lo largo del a√±o.

- **Workshop Presencial**: Por √∫ltimo como otro gran objetivo para 2017 ser√° lanzar un curso presencial, en principio en Madrid. Ya tengo experiencia dando formaci√≥n en empresas y me gustar√≠a dar el paso de organizarlo yo mismo y para un n√∫mero reducido de personas. Junto a Youtube, es mi gran reto para este a√±o.

Siempre que me siento a pensar que quiero conseguir en el a√±o da un poco de v√©rtigo. Estamos empezando el 2017, con muchas ilusiones y da un poco de susto ver los retos, pero tengo 12 meses por delante para trabajar duro y conseguirlo. As√≠ que a por ello.

Y tu, ¬øYa te has planteado que quieres conseguir durante 2017? Te animo a que lo compartas en los comentarios. La mejor manera de conseguir algo es proponerlo y decirlo de manera p√∫blica :)

Feliz 2017!

</article>

---

<article slug="mi-experiencia-como-mentor-en-google-launchpad-week" date="2016-10-26" url="https://carlosazaustre.es/blog/mi-experiencia-como-mentor-en-google-launchpad-week">

# Mi experiencia c√≥mo mentor en Google Launchpad Week

**Fecha:** 2016-10-26
El post de hoy no es muy t√©cnico pero ten√≠a ganas de comentar mi experiencia como **mentor en Google Launchpad**

Hace unas semanas se organiz√≥ en Madrid una [Google Launchpad Week](https://events.withgoogle.com/launchpad-fintech-madrid/) orientada al mundo _Fintech_ con la colaboraci√≥n de Google Developers, el [centro de Innovaci√≥n BBVA](http://www.centrodeinnovacionbbva.com/eventos/evento-google-launchpad-week-fintech-0) y el coworking [La Terminal](https://laterminal.org/).

![Google Launchpad Week Fintech Madrid](/images/mi-experiencia-como-mentor-en-google-launchpad-week/unnamed.png)

El a√±o pasado tuve la oportunidad de participar como Startup con Chefly en la primera edici√≥n que se hac√≠a de esta semana intensiva de _mentorship_ apoyada por Google en mi ciudad, Madrid. Puedes [leer mis impresiones en la serie de posts que escrib√≠ entonces](/google-launchpad-week-dia-1-producto/)

Este a√±o _he subido de nivel_ y he participado como mentor. Las **Launchpad Week** duran 5 d√≠as y cada d√≠a se trata una tem√°tica y se asesora y ayuda a las startups en ese tema. El primer d√≠a se trabaja el **Producto**, el segundo d√≠a la **UX**, el tercer d√≠a **Marketing** y por √∫ltimo, los d√≠as 4 y 5 se trabaja la **Tecnolog√≠a**. Como has podido intuir, yo particip√© los dos √∫ltimos d√≠as :D

![Centro de Innovaci√≥n BBVA](/images/mi-experiencia-como-mentor-en-google-launchpad-week/CtRPlZ5WIAADRXP.jpg)

Como os he comentado, el evento tuvo lugar en el Centro de Innovaci√≥n del BBVA en Madrid, y alli tuve la suerte de poder mentorizar a 4 startups de las que participaron en la semana, entre ellas [NoySi](https://noysi.com/), [CheckIT](https://www.checkitbancario.com/), [Big Bang Trading](http://bigbangtrading.com/) y [Moneymatic](https://www.moneymatic.es/) Todas ellas con un gran equipo detr√°s.

Fue gratificante ver como valoraban los comentarios que les hac√≠amos los mentores, consejos de cara a escalar en un futuro y poder mantener su c√≥digo, etc...

Tras mi experiencia en "ambos bandos" creo que **toda startup o proyecto tiene que pasar una vez en su vida por una _Launchpad Week_**. El programa es intenso, pero la cantidad de informaci√≥n, consejos, pautas, hojas de ruta, etc.. que se logran en esos 5 d√≠as, tiene un gran valor.

![Mentores Google Launchpad](/images/mi-experiencia-como-mentor-en-google-launchpad-week/CtOdkKDWEAA_4-I.jpg)

Y desde el lado "mentor", la cantidad de sinergias, contactos y lo que se aprende de las propias Startups participantes, no tiene precio.

Sin duda, repetir√© si los organizadores me lo permiten en un futuro :)

</article>

---

<article slug="usando-firebase-storage-con-react-js" date="2016-10-13" url="https://carlosazaustre.es/blog/usando-firebase-storage-con-react-js">

# Usando Firebase Storage con React.js

**Fecha:** 2016-10-13
En este art√≠culo vamos a ver como utilizar la funcionalidad de Storage de Firebase para poder subir y almacenar archivos en la nube, y como integrarlo con React.

**Firebase Storage** es algo similar a lo que puedes conseguir con Amazon S3. Un espacio en la nube donde almacenar archivos binarios (im√°genes, ficheros de audio, video, etc...)

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=GA7jYWk3BO8)
/>

A trav√©s de su API es muy sencillo subir archivos desde una SPA, y en particular con **React**. Vamos a ello.

## Configuraci√≥n de Firebase.

Lo primero que necesitamos en entrar en [la consola de firebase](https://firebase.google.com) y crear un proyecto web nuevo, despu√©s copiar la configuraci√≥n y a√±adirla a nuestro c√≥digo. Esto es igual para todas las apps que hagamos con Firebase, por tanto para √©sta parte puedes guiarte del [tutorial que escrib√≠ anteriormente y que puedes encontrar **aqu√≠**](/conectando-firebase-a-react/)

### Componente FileUpload

Vamos a crear un componente llamado `FileUpload`, cuyo formato ser√° el siguiente:

```javascript
class FileUpload extends React.Component {
  render() {
    return (
      <div>
        <progress value={this.state.uploadValue} max="100">
          {this.state.uploadValue} %
        </progress>
        <br />
        <input type="file" onChange={this.handleOnChange.bind(this)} />
        <br />
        <img width="90" src={this.state.picture} />
      </div>
    );
  }
}
```

Vamos a tener un elemento de tipo [`progress`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/progress) para mostrar el porcentaje de progreso de la subida del archivo y un `input` de tipo `file` para cargar los archivos. Por √∫ltimo tendremos un `img` donde mostraremos el archivo una vez subido con su URL apuntando a firebase.

El valor de `progress` va a estar referenciado por el estado del componente, de esta manera, cada vez que cambie, el componente se re-renderizar√° con el nuevo valor.

De igual manera, el atributo `src` del elemento `img` tambi√©n es una referencia al estado del componente, para que s√≥lo se muestre cuando est√© subido.

Por tanto, nuestro Componente `FileUpload` debe tener un constructor donde inicialicemos el estado:

```javascript
class FileUpload extends React.Component {
  constructor () {
    super()
    this.state = {
       uploadValue: 0
    }
  }

  render() {...}
}
```

### Gesti√≥n del evento

En el `input` de tipo `file` tenemos un evento `onChange` que se disparar√° cada vez que carguemos un fichero nuevo. Este evento va a llamar a la funci√≥n `handleOnChange` que vamos a definir a continuaci√≥n

En √©sta funci√≥n lo primero que vamos a hacer es tomar las referencias del fichero que estamos a√±adiendo en el input, una referencia al storage de nuestro proyecto en firebase donde tendremos un _bucket_ o carpeta que llamaremos `pictures` y el nombre del fichero que vamos a subir y la referencia a la tarea de subida:

```javascript
handleOnChange (event) {
    const file = event.target.files[0]
    const storageRef = firebase.storage().ref(`pictures/${file.name}`)
    const task = storageRef.put(file)
}
```

La tarea que acabamos de crear, tiene una serie de listener que se disparar√°n en cuanto ocurra un evento. El que nos interesa es `state_changed` que nos avisa en todo momento de la subida del fichero y nos da un _snapshot_ con los bytes transferidos hasta el momento. Esto nos permite actualizar el estado y la barra de progreso.

Adem√°s de eso, nos proprociona un callback para gestionar los errores si los hubiese y una √∫ltima funci√≥n para indicarnos que la subida se ha realizado

```javascript
task.on(
  "state_changed",
  (snapshot) => {
    // Se lanza durante el progreso de subida
  },
  (error) => {
    // Si ha ocurrido un error aqu√≠ lo tratamos
  },
  () => {
    // Una vez se haya subido el archivo,
    // se invoca √©sta funci√≥n
  }
);
```

Para la primera funci√≥n, simplemente vamos a hacer una operaci√≥n que nos devuelva el porcentaje subido sobre el total del tama√±o del archivo y actualice el estado y as√≠ la barra de progreso:

```javascript
task.on("state_changed", (snapshot) => {
  let percentage = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
  this.setState({
    uploadValue: percentage,
  });
});
```

Y cuando el fichero se haya subido totalmente, vamos a actualizar nuevamente el estado con la URL de la imagen en firebase storage, que tomamos de la referencia a la tarea:

```javascript
task.on('state_changed', (snapshot) => {
  ...
}, (error) => {
  ...
}, () => {
  this.setState({
    picture: task.snapshot.downloadURL
  })
})
```

Y listo! ya tenemos nuestro cargador de ficheros :)

![Firebase Storage File Upload](https://firebasestorage.googleapis.com/v0/b/react-firebase-94af6.appspot.com/o/pictures%2Fezgif.com-resize.gif?alt=media&token=d62a1a19-2e24-47cf-9d1c-4c960f51c0d0)

El c√≥digo completo de √©ste ejemplo lo tienes a continuaci√≥n:

```javascript
import React, { Component } from 'react'
import ReactDOM from 'react-dom'
import * as firebase from 'firebase'

firebase.initializeApp({
  apiKey: 'AIzaS*******************',
  authDomain: '*****',
  databaseURL: '******',
  storageBucket: '******',
  messagingSenderId: '**********'
})

class FileUpload extends Component {
  constructor () {
    super()
    this.state = {
      uploadValue: 0
    }
  }

  handleOnChange (e) {
    const file = event.target.files[0]
    const storageRef = firebase.storage().ref(`pictures/${file.name}`)
    const task = storageRef.put(file)

    task.on('state_changed', (snapshot) => {
      let percentage = (snapshot.bytesTransferred / snapshot.totalBytes) * 100
      this.setState({
        uploadValue: percentage
      })
    }, (error) => {
      console.error(error.message)
    }, () => {
      // Upload complete
      this.setState({
        picture: task.snapshot.downloadURL
      })
    })
  }

  render () {
    return (
      <div>
        <progress value={this.state.uploadValue} max='100'>
          {this.state.uploadValue} %
        </progress>
        <br />
        <input type='file' onChange={this.handleOnChange.bind(this)}/>
        <br />
        <img width='90' src={this.state.picture} />
      </div>
    )
  }
}

ReactDOM.render(, document.getElementById('root))
```

¬øQuieres aprender m√°s sobre React? Te lo ense√±o en mi [**curso online** sobre fundamentos de **React.js**](http://cursos.carlosazaustre.es/p/react-js/)

</article>

---

<article slug="conectando-firebase-a-react" date="2016-10-04" url="https://carlosazaustre.es/blog/conectando-firebase-a-react">

# C√≥mo conectar Firebase a una aplicaci√≥n React

**Fecha:** 2016-10-04
[Firebase](https://firebase.google.com/) es un set herramientas e infraestructura de Google que nos ayuda a los desarrolladores a implementar un Backend r√°pidamente sin necesidad de _codear_.

Empez√≥ como una Base de Datos Realtime _as a Service_ pero tras el Evento de Google I/O 2016 se anunciaron multitud de _features_ convirtiendolo en un _Backend As A Service_ vitaminado con Analytics, Grow Tools, Monetizaci√≥n, etc...

En el art√≠culo de hoy voy a utilizar una de sus funcionalidades, como es la base de datos realtime, en conjunto con React.js para probar su funcionamiento

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=qPV-pKUmAv4)
/>

## Creando un proyecto en Firebase

Lo primero que tenemos que hacer es dirigirnos a la web de Firebase en [https://firebase.google.com/](https://firebase.google.com/) y con nuestra cuenta de Google acceder a la consola

![Web de Firebase](/images/conectando-firebase-a-react/1-firebase-login.png)

Una vez dentro de la consola, creamos un nuevo proyecto:
![Consola de Firebase](/images/conectando-firebase-a-react/2-firebase-create-project.png)

Y elegimos el nombre que queramos darle. Para este ejemplo voy a llamarlo `react-firebase` pero puedes ponerle el nombre que prefieras para identificarlo. Tambi√©n nos pedir√° una zona geogr√°fica o pa√≠s para que se acomode a nuestras necesidades seg√∫n los pa√≠ses de nuestra audiencia.

![Crear proyecto](/images/conectando-firebase-a-react/3-data-project.png)

Una vez creado el proyecto, entramos al dashboard del mismo. Podemos ver que como primer paso nos da la opci√≥n de elegir el c√≥digo para una aplicaci√≥n iOS, una aplicaci√≥n Android o una aplicaci√≥n web.

En este ejemplo vamos a crear una web app con React, por tanto elijo la tercera opci√≥n:

![Copiar c√≥digo](/images/conectando-firebase-a-react/4-select-code-web.png)

Al elegir la opci√≥n web nos facilita el `script` que debemos utilizar en un documento HTML si queremos iniciar Firebase:

![Api Keys](/images/conectando-firebase-a-react/5-code-apikey.png)

Nosotros, al utilizar React, √∫nicamente vamos a necesitar el objeto `config` y la funci√≥n `firebase.initializeApp(config)`. As√≠ que √∫nicamente copiamos ese c√≥digo que incluye las URLs de nuestro proyecto en Firebase, as√≠ como los IDs y API Key necesarios para acceder a su API:

```javascript
const config = {
  apiKey: "AIzaSy***********************",
  authDomain: "react-firebase-94af6.firebaseapp.com",
  databaseURL: "https://react-firebase-94af6.firebaseio.com",
  storageBucket: "react-firebase-94af6.appspot.com",
  messagingSenderId: "796************",
};
firebase.initializeApp(config);
```

M√°s adelante utilizaremos √©ste c√≥digo.

## Creando la Base de Datos Realtime

Dentro del panel del control de nuestro proyecto, en el men√∫ de la izquierda, tenemos la opci√≥n **Database**, si hacemos click en la opci√≥n accedemos al dashboard para crear y administrar nuestra base de datos.

La [base de datos que ofrece Firebase](https://firebase.google.com/docs/database/) es del tipo NoSQL y guarda los datos en formato JSON. Algo parecido a MongoDB por ejemplo.

Para empezar crearemos un objeto con el nombre `object` con una propiedad `name` cuyo valor sea, por ejemplo: `Carlos`. Esto lo veremos reflejado en nuestra app m√°s adelante.

![Administrador de la base de datos](/images/conectando-firebase-a-react/6-database-console.png)

## Creando nuestra WebApp React

Ahora pasamos a crear nuestra aplicaci√≥n React.js, lo primero que hacemos es iniciar un proyecto con NPM escribiendo en la terminal:

```shell
$ npm init -y
```

Y seguidamente, como cualquier proyecto que hagamos en React, y utilicemos Babel y Webpack instalamos las dependencias:

```shell
$ npm i -S react react-dom
$ npm i -D webpack webpack-dev-server babel-cli babel-preset-es2015 babel-preset-stage-2 babel-loader
```

Y creamos un fichero `webpack.config.js` t√≠pico como el que expliqu√© en mi [anterior art√≠culo](/primeros-pasos-con-webpack/)

Vamos a implementar toda la funcionalidad en un mismo fichero para reducir la complejidad del tutorial. El fichero en cuesti√≥n lo vamos a llamar `app.jsx`

En este fichero vamos a crear un componente React sencillo y despu√©s le a√±adiremos la conexi√≥n a Firebase. Tiene la siguiente pinta:

```javascript
// app.jsx
import React, { Component } from "react";
import ReactDOM from "react-dom";

class App extends Component {
  render() {
    return <h1>Hola!</h1>;
  }
}

ReactDOM.render(, document.getElementById("app"));
```

√âste c√≥digo, despu√©s de aplicar el _transpiler_ con babel, de momento va a mostrar en el navegador una etiqueta `<h1>` con el texto `Hola!`.

Ahora le aplicamos la magia de Firebase

## Conectando Firebase a React

Lo primero en esta parte es instalar la dependencia de Firebase desde npm, con ella podemos acceder al API de Firebase y utilizar sus funcionalidades

```shell
$ npm install --save firebase
```

Despu√©s, adem√°s de importar la librer√≠a reci√©n instalada y antes de crear el componente, vamos a a√±adir la configuraci√≥n que copiamos anteriormente del panel de control de Firebase:

```javascript
import React, { Component } from 'react'
import ReactDOM from 'react-dom'
import * as firebase from 'firebase'

const config = {
  apiKey: 'AIzaSy*********************',
  authDomain: 'react-firebase-94af6.firebaseapp.com',
  databaseURL: 'https://react-firebase-94af6.firebaseio.com',
  storageBucket: 'react-firebase-94af6.appspot.com',
  messagingSenderId: '7968**********'
}
firebase.initializeApp(config)

class App extends Component { ... }
```

Seguidamente, vamos implementar el constructor del componente, para a√±adirle una propiedad al estado.
Como vimos en un [art√≠culo anterior](/estructura-de-un-componente-en-react/), el estado es importante porque a cada cambio que se produzca en √©l, se invocar√° al m√©todo `render()` autom√°ticamente y mostrar√° la nueva informaci√≥n en el navegador.

Por tanto, a√±adimos al estado la propiedad `name` con el valor `Pepe`.

```javascript
class App extends Component {
  constructor() {
    super();
    this.state = { name: "Pepe" };
  }
}
```

Y cambiamos en el m√©todo `render()` el texto a renderizar para que muestre el estado:

```javascript
render () {
  return <h1>{this.state.name}</h1>
}
```

Ahora... ¬øC√≥mo hacemos para modificar el estado seg√∫n el valor que tengamos en la base de datos?

Para ello vamos a utilizar un m√©todo del ciclo de vida del componente React: `componentDidMount()`. √âste m√©todo solo se ejecuta una √∫nica vez en una aplicaci√≥n cliente. Cuando se ejecuta, el componente ya est√° representado en el DOM y ya podemos acceder a √©l. En √©ste m√©todo es d√≥nde podemos utilizar llamadas AJAX, integrar otras librer√≠as, a√±adir _listeners_, etc..

Por tanto, aqu√≠ es buen lugar para acceder a Firebase. Como ya tenemos inicializado Firebase unas l√≠neas m√°s arriba, cada vez que realicemos una llamada a `firebase` estaremos accediendo a nuestra base de datos.

Vamos a crear una referencia al objeto que contiene el nombre, eso lo hacemos con la siguiente funci√≥n:

```javascript
const nameRef = firebase.database().ref().child("object").child("name");
```

Con este objeto, podemos a√±adir un _listener_ que se dispare cada vez que cambie el valor del nombre. Eso lo podemos conseguir con el _listener_ `value`. √âste listener nos va a dar un _snapshot_ que guarda la informaci√≥n del instante en el que se dispar√≥ el evento y es cuando podremos actualizar el estado:

```javascript
nameRef.on("value", (snapshot) => {
  this.setState({
    name: snapshot.val(),
  });
});
```

De √©sta manera, cada vez que se actualice el valor del nombre en la base de datos, se disparar√° el evento del listener, y tendremos un snapshot del valor actual. Cuando √©sto ocurra, actualizamos el estado con el nuevo valor y √©sto produce un _re-renderizado_ del componente en el navegador donde veremos reflejado el valor cambiado

Antes de probarlo, debemos modificar las opciones de privacidad de la base de datos. Como no estamos implementando autenticaci√≥n, vamos dejar a `true` los campos de `read` y `write`:

![Permisos](/images/conectando-firebase-a-react/7-permisos.png)

Una vez hecho, podemos ver los cambios refeljados en tiempo real:

![Firebase Realtime Database](/images/conectando-firebase-a-react/ezgif-com-crop.gif)

Esto es s√≥lo la base de la conexi√≥n de Firebase con React. A partir de aqu√≠ las posibilidades son ilimitadas :)

¬øQuieres aprender m√°s sobre React? Te lo ense√±o en mi [**curso online** sobre fundamentos de **React.js**](http://cursos.carlosazaustre.es/p/react-js/)

</article>

---

<article slug="estructura-de-un-componente-en-react" date="2016-09-28" url="https://carlosazaustre.es/blog/estructura-de-un-componente-en-react">

# Estructura y funcionamiento de un componente en React

**Fecha:** 2016-09-28
Un componente de **React** se puede crear de varias formas. Una de ellas es con el m√©todo `createClass` que ofrece la librer√≠a.

```javascript
const React = require('react')

const MyComponent = React.createClass({
...
})
```

Y la otra es utilizando las clases que ofrece ECMAScript 6 (ES2015). En este caso heredan de la clase `Component` de React y necesitan llamar al constructor padre en el m√©todo `constructor` Si usamos Webpack con Babel podemos tambi√©n usar el sistema de m√≥dulos de ES2015:

```javascript
import React form 'react'

class MyComponent extends React.Component {
  constructor () {
    super()
  }
  ...
}
```

A lo largo de los art√≠culos y tutoriales que escriba, siempre usar√© la notaci√≥n de clases, que me parece mucho m√°s clara y adem√°s sigue el est√°ndar de ES2015.

### Render

Todo componente de React, tiene un m√©todo `Render` que es el que se encarga de renderizar en el navegador el HTML correspondiente al componente.

Este m√©todo se llama autom√°ticamente cuando se crea un componente y cuando el estado del componente se actualiza (veremos esto m√°s adelante).

En este m√©todo es donde usamos JSX para facilitar el desarrollo y creaci√≥n de elementos HTML. Veamos un ejemplo:

```javascript
import React from "react";

class MyComponent extends React.Component {
  constructor() {
    super();
  }

  render() {
    return (
      <div>
        <span>Hola!, soy un componente</span>
      </div>
    );
  }
}
```

### Propiedades

Un componente en React puede recibir propiedades como par√°metros desde un componente padre para poder insertar valores y eventos en su HTML.

Imagina que tienes un componente que representa un men√∫ con varias opciones, y √©stas opciones las pasamos por par√°metros como una propiedad llamada `options`:

Veamos esto en c√≥digo:

```javascript
import React from "react";

class App extends React.Component {
  constructor() {
    super();
  }

  render() {
    let menuOptions = ["Opci√≥n 1", "Opci√≥n 2", "Opci√≥n 3"];
    return ;
  }
}
```

¬øC√≥mo accedemos a estas propiedades en el componente hijo a la hora de renderizarlo? Por medio de las `props`. Veamos como con el c√≥digo del componente ``:

```javascript
import React from "react";

class Menu extends React.Component {
  constructor(props) {
    super(props);
  }

  render() {
    let options = this.props.options;
    return (
      <ul>
        {options.map((option) => (
          <li>{option}</li>
        ))}
      </ul>
    );
  }
}
```

En el m√©todo `render` creamos una variable `options` con el valor que tenga `this.props.options`. √âste _options_ dentro de _props_ es el mismo atributo _options_ que tiene el componente ``y es a trav√©s de `props` como le pasamos el valor desde el _padre_ al componente _hijo_.

El c√≥digo final de este ejemplo ser√≠a:

```javascript
import React from 'react'
import ReactDOM from 'react-dom'

class App extends React.Component {
  constructor(props) {
    super(props)
  }

  render() {
    let menuOptions = ['Opci√≥n 1', 'Opci√≥n 2', 'Opci√≥n 3']
    return 
  }
}

class Menu extends React.Component {
  constructor(props) {
    super(props)
  }

  render() {
    let options = this.props.options
    return (
      <ul>
        {options.map(option => <li>{option}</li>)}
      </ul>
    )
  }
}

ReactDOM.render(, document.getElementById('app')
```

Y esto muestra en el navegador algo como lo siguiente:

- Opci√≥n 1
- Opci√≥n 2
- Opci√≥n 3

Puedes ver el c√≥digo en el siguiente JSBin: [C√≥digo](http://jsbin.com/xegicihalo/edit?html,js,output)

### Estado

Adem√°s de las `props`, los componentes en React pueden tener estado. Lo caracter√≠stico del estado es que si √©ste cambia, el componente se renderiza autom√°ticamente. Veamos un ejemplo de esto.

Si tomamos el c√≥digo anterior y en el componente ``guardamos en su estado las opciones de menu, el c√≥digo de _App_ ser√≠a as√≠:

```javascript
class App extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      menuOptions: ["Opci√≥n 1", "Opci√≥n 2", "Opci√≥n 3"],
    };
  }

  render() {
    return ;
  }
}
```

De √©sta manera, las "opciones" pertenecen al estado de la aplicaci√≥n (App) y se pueden pasar a componentes hijos (Menu) a trav√©s de las _props_.

Ahora, si queremos cambiar el estado, a√±adiendo una nueva opci√≥n al men√∫ tenemos a nuestra disposici√≥n la funci√≥n `setState`, que nos permite modificarlo.

Aprovechando esto, vamos a modificar el estado a trav√©s de un evento disparado desde el componente hijo hacia el padre

### Eventos

Si las propiedades pasan de padres a hijos, es decir hacia abajo, los eventos se disparan hacia arriba, es decir de hijos a padres. Un evento que dispare un componente, puede ser recogido por el padre.

Ve√°moslo con un ejemplo. El componente `` va a tener una nueva propiedad llamada `onAddOption`:

```javascript
render() {
    return (
      
  )
  }
```

Esta propiedad va a llamar a la funci√≥n `handleAddOption` en `` para poder modificar el estado:

```javascript
handleAddOption () {
    this.setState({
      menuOptions: this.state.menuOptions.concat(['Nueva Opci√≥n'])
    })
  }
```

Cada vez que se llame a la funci√≥n, a√±adir√° al estado el item `Nueva Opci√≥n`. C√≥mo dijimos al inicio, cada vez que se modifique el estado, se _"re-renderizar√°"_ el componente y veremos en el navegador la nueva opci√≥n a√±adida.

Para poder llamar a esa funci√≥n, necesitamos disparar un evento desde el hijo. Voy a a√±adir un elemento `<button>` y utilizar el evento `onClick` de JSX, que simula al listener de click del rat√≥n y ahi llamar√© a la funci√≥n "propiedad" `onAddOption` del padre.

El c√≥digo de completo es:

```javascript
class App extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      menuOptions: ["Opci√≥n 1", "Opci√≥n 2", "Opci√≥n 3"],
    };
  }

  render() {
    return (
      
    );
  }

  handleAddOption() {
    this.setState({
      menuOptions: this.state.menuOptions.concat(["Nueva Opci√≥n"]),
    });
  }
}

class Menu extends React.Component {
  constructor(props) {
    super(props);
  }

  render() {
    let options = this.props.options;
    return (
      <div>
        <ul>
          {options.map((option) => (
            <li>{option}</li>
          ))}
        </ul>
        <button onClick={this.props.onAddOption}>Nueva Opci√≥n</button>
      </div>
    );
  }
}

ReactDOM.render(, document.getElementById("app"));
```

Cada vez que hagamos click en el bot√≥n, llamar√° a la funci√≥n que le llega por _props_. √âsta funci√≥n, llama en el componente padre (App) a la funci√≥n `handleAddOption` y la _bindeamos_ con `this`, para que pueda llamar a `this.setState` dentro de la funci√≥n. √âste `setState` modifica el estado y llama internamente a la funci√≥n `render` lo que provoca que se vuelva a "pintar" todo de nuevo.

Y as√≠ es como funciona b√°sicamente un componente de React. M√°s adelante veremos cuales son lo m√©todos de ciclo de vida y c√≥mo utilizarlos.

Tienes el c√≥digo de √©ste otro ejemplo a tu disposici√≥n en el siguiente JSBin: [C√≥digo](http://jsbin.com/kagejehusa/edit?js,console,output)

¬øQuieres aprender m√°s sobre React? Te lo ense√±o en mi [**curso online** sobre fundamentos de **React.js**](http://cursos.carlosazaustre.es/p/react-js/)

</article>

---

<article slug="primeros-pasos-con-webpack" date="2016-09-22" url="https://carlosazaustre.es/blog/primeros-pasos-con-webpack">

# Primeros pasos con Webpack

**Fecha:** 2016-09-22
**[Webpack](http://webpack.github.io)** es un sistema de _bundling_ para preparar el desarrollo de una aplicaci√≥n web para producci√≥n. En cierta medida se puede considerar un Browserify avanzado ya que tiene muchas opciones de configuraci√≥n.

Tambi√©n se puede considerar una evoluci√≥n de Grunt y Gulp, ya que permite de alguna manera automatizar los procesos principales que son transpilar y preprocesar c√≥digo de `.scss` a `.css`, de ES7 a ES5/6, etc...

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=2M5L_uz6GO0)
/>

Para poder utilizar _Webpack_ en tu proyecto web debes tener instalado Node.js en tu equipo y con el comando `npm install -g webpack` tendr√°s _Webpack_ instalado de forma global en tu equipo (Tambi√©n puedes instalarlo a nivel de proyecto y correrlo con NPM scripts).

El comando m√°s sencillo para realizar un bundle de tus archivos JavaScript es el siguiente:

```shell
$ webpack ./index.js ./build/app.js
```

Este comando lo que hace es leer tu fichero `index.js` que ser√≠a el principal de tu aplicaci√≥n e importar todos los m√≥dulos que est√©n definidos y crear el fichero de "producci√≥n" `app.js` en la carpeta `build`.

Por supuesto esto se puede complicar mucho m√°s. En lugar de escribir todo como comandos, podemos tener un fichero `webpack.config.js` donde escribamos toda la configuraci√≥n que necesitemos.

Webpack permite que trabajemos con cualquier tipo de archivo (CSS, preprocesadores CSS, preprocesadores de JavaScript, im√°genes, etc...) Con indicarle que _loader_ debe utilizar e instalarlo, nos es suficiente.

Gracias a esto podemos por ejemplo preprocesar el c√≥digo JSX de nuestros componentes de React facilmente. Veamos que fichero de configuraci√≥n de Webpack debemos escribir para ello y a continuaci√≥n te explico cada l√≠nea:

```javascript
// webpack.config.js
module.exports = {
  resolve: {
    extensions: ['', '.js', '.jsx']
  },
  context: __dirname,
  entry: {
    app: ['./index.jsx']
  },
  output: {
    path: './build',
    filename: 'app.js',
    publicPath: '/build/
  },
  module: {
    loaders: [
      {
        test: /(\.js|.jsx)$/,
        loader: 'babel',
        query: {
          presets: ['es2015', 'stage-2', 'react']
        }
      }
    ]
  }
}
```

El fichero exporta un objeto JavaScript con las siguientes configuraciones:

```javascript
resolve: {
  extensions: ['', '.js', '.jsx']
},
context: __dirname
```

Con esto le indicamos a webpack que se fije en los ficheros con extensi√≥n `.js` y `.jsx` desde el directorio en el que se encuentra el fichero webpack.config.js hacia dentro. El resto los va ignorar en el proceso de _bundling_.

```javascript
entry: {
  app: ['./index.jsx']
},
```

Aqu√≠ le indicamos que el punto de entrada desde el que debe empezar a leer y realizar el proceso es el fichero `index.jsx`

```javascript
output: {
  path: './build',
  filename: 'app.js',
  publicPath: '/build/
},
```

Con √©sta configuraci√≥n le estamos indicando donde ha de situarse el fichero de salida, y ser√° en la carpeta `build` con el nombre `app.js`. Si lo servimos desde un servidor de desarrollo, la ruta p√∫blica ser√° `/build`.

```javascript
module: {
  loaders: [
    {
      test: /(\.js|.jsx)$/,
      loader: "babel",
      query: {
        presets: ["es2015", "stage-2", "react"],
      },
    },
  ];
}
```

Llegamos a la parte m√°s interesante, los _loaders_. Aqu√≠ en el objeto `loaders` podemos incluir tantos como queramos, dependiendo del tipo de archivo que queramos modificar. Podemos tener un loader para ficheros JavaScript y JSX como el ejemplo, podemos tener otro para ficheros de estilos y montar el CSS, podemos tener otro para im√°genes, etc...

En este caso le estamos indicando con la expresi√≥n regular `/(\.js|.jsx)$/` que a todos los ficheros con extensi√≥n `.js` y/o `.jsx` les pase el _loader_ de Babel, que instalaremos con el paquete de npm `babel-loader`. Adem√°s le a√±adimos unas opciones de configuraci√≥n a Babel con el objeto `query`. Le indicamos que utilice el preset de `es2015` para transpilar la sintaxis de JavaScript que a√∫n no soporten los browsers a la versi√≥n que si soportan, tambi√©n el preset `stage-2` que nos permite utilizar algunas cosas de la pr√≥xima versi√≥n de ECMAScript7, y por √∫ltimo el preset `react` que permite el preprocesamiento de JSX a JavaScript.

Para poder utilizar estos presets debemos instalar los siguientes paquetes desde NPM:

```shell
$ npm install --save-dev babel-cli
$ npm install --save-dev babel-preset-es2015
$ npm install --save-dev babel-preset-stage-2
$ npm install --save-dev babel-preset-react
```

con esto, si corremos el comando `webpack` en nuestra terminal, tendremos el fichero final en pocos segundos. Si creamos un npm script con el comando:

```javascript
"scripts": {
  "build": "webpack --watch --colors"
}
```

Al correr `npm run build` tendremos ejecutando webpack en modo `watch` lo que significa que a cada cambio que hagamos en nuestro c√≥digo, webpack crear√° el bundle de nuevo pero de una manera m√°s r√°pida que por ejemplo con Browserify o Gulp ya que lo mantiene en memoria. Y con el flag `--colors` vemos de una manera m√°s gr√°fica el resultado en la consola:

```shell
> webpack --watch --colors

Hash: 29e741b4cf44e481459f
Version: webpack 1.13.2
Time: 7316ms
 Asset    Size  Chunks             Chunk Names
app.js  751 kB       0  [emitted]  app
   [0] multi app 28 bytes {0} [built]
    + 172 hidden modules
```

## Webpack como servidor de desarrollo

Tambi√©n tenemos la opci√≥n de crear un servidor web de desarrollo con webpack. Para ello debemos instalar otra dependencia que es `webpack-dev-server`:

```shell
$ npm install --save-dev webpack-dev-server
```

Y modificar nuestro fichero `webpack.config.js` con el siguiente bloque:

```javascript
devServer: {
  host: '0.0.0.0',
  port: 8080,
  inline: true
},
```

Esto nos va a crear un servidor (basado en Node.js y Express) de desarrollo en local, en el puerto `8080` que servir√° nuestra carpeta `build`. Necesitaremos crear un sencillo fichero `index.html` en la carpeta `/build` con lo siguiente para poder ver el resultado en el navegador:

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Ejemplo Webpack</title>
  </head>
  <body>
    <script src="/build/app.js"></script>
  </body>
</html>
```

Con esto y el comando `webpack-dev-server` corriendo tendremos un servidor mostrando el contenido de la caperta build y recreando el fichero de bundle en cada cambio que hagamos.

Para probar esto, tengamos por ejemplo en el fichero `index.jsx` lo siguiente:

```javascript
import Persona from "./persona";

const carlos = new Persona("Carlos");
carlos.saluda();
```

Y en el m√≥dulo `persona.jsx` lo siguiente:

```javascript
export default class Persona {
  constructor(nombre) {
    this.nombre = nombre;
  }

  saluda() {
    console.log(`Hola! Soy ${this.nombre}`);
  }
}
```

En ambos ficheros no estamos utilizando React, pero si la extensi√≥n JSX y la versi√≥n ES2015 de JavaScript.

Al salvar estos ficheros, se recrear√° el bundle y si en el navegador escribimos la URL: `http://0.0.0.0:8080/build` veremos en la consola JavaScript del navegador el mensaje:

```shell
Hola! Soy Carlos
```

A medida que vayamos desarrollando, creando componentes de React, ficheros CSS, etc... √©ste entorno de desarrollo nos agiliza el desarrollo y nos permite ir m√°s r√°pido y enfocarnos en nuestro c√≥digo.

Puedes encontrar el c√≥digo de este ejemplo en mi [repositorio en GitHub](https://github.com/carlosazaustre/webpack-example).

Si quieres ampliar informaci√≥n sobre Webpack, puedes aprender mucho m√°s en la web [SurviveJS](http://survivejs.com/webpack/introduction/)

</article>

---

<article slug="jsx-para-novatos" date="2016-09-19" url="https://carlosazaustre.es/blog/jsx-para-novatos">

# JSX para novatos

**Fecha:** 2016-09-19
**JSX** es una extensi√≥n de JavaScript creada por Facebook para el uso con su librer√≠a **React**. Sirve de preprocesador (como Sass o Stylus a CSS) y transforma el c√≥digo a JavaScript.

De primeras te puede parecer que est√°s mezclando c√≥digo HTML dentro de tus ficheros JavaScript, pero nada m√°s lejos de la realidad. A continuaci√≥n te lo explico.

React al basar el desarrollo de apps en componentes, necesitamos crear elementos HTML que definan nuestro componente, por ejemplo `<div>`, `<p>`, `<img>`, etc...

Tambi√©n necesitaremos indicar cuando se trata de componentes creados por nosotros con React, como puede ser un ``, ``, etc...

Todo esto podemos hacerlo con JavaScript con los m√©todos que nos ofrece React como `React.createElement`. Veamos un ejemplo:

Imagina que quieres crear un componente `` que est√° definido por un `div`, un `img` y algunas clases de CSS. Con JavaScript ser√≠a algo as√≠:

```javascript
var image = React.createElement("img", {
  src: "react-icon.png",
  className: "icon-image",
});

var container = React.createElement(
  "div",
  {
    className: "icon-container",
  },
  image
);

var icon = React.createElement(
  "Icon",
  {
    className: "avatarContainer",
  },
  container
);

ReactDOM.render(icon, document.getElementById("app"));
```

Con esto tendr√≠amos un componente `` que se traducir√≠a al siguiente c√≥digo HTML:

```html
<div class="icon-container">
  <img src="icon-react.png" class="icon-image" />
</div>
```

Si tuvi√©semos el siguiente CSS:

```css
.icon-image {
  width: 100px;
}
.icon-container {
  background-color: #222;
  width: 100px;
}
```

El resultado en el navegador ser√≠a as√≠:
![resultado react jsx](/images/jsx-para-novatos/ejemplo-jsx.png)

Ahora veamos como se har√≠a lo mismo pero empleando sintaxis JSX:

```javascript
var Icon = (
  <div className="icon-container">
    <img src="icon-react.png" className="icon-image" />
  </div>
);

ReactDOM.render(Icon, document.getElementById("app"));
```

Como puedes ver es mucho m√°s pr√°ctico y legible esta sintaxis. Es pr√°cticamente como escribir HTML pero no est√°s escribiendo HTML, es JavaScript.

Lo √∫nico que has de tener en cuenta es que hay algunas palabras reservadas en JavaScript y JSX te obliga a nombrar algunos atributos de otra manera, como es el caso de las `class` que para definir clases de CSS que con JSX debemos escribir `className`.

A medida que nuestra aplicaci√≥n va creciendo y tenemos componentes m√°s grandes, que manejan distintos eventos, esta forma de usar JSX nos va a ayudar mucho a agilizar nuestros desarrollos.

Recuerda, no es escribir HTML dentro de JS, es una forma de crear JS de una manera m√°s pr√°ctica ;)

Para poder utilizar JSX, necesitar√≠as a√±adir una librer√≠a extra a tu HTML, pero es m√°s aconsejable utilizar un _bundler_ integrado en tu entorno de desarrollo, como puede ser WebPack o [Browserify](/browserify-desarrollando-tu-frontend-como-en-node-js/), y que √©ste le aplique la transformaci√≥n antes de publicar tu c√≥digo en producci√≥n. De esto hablar√© en pr√≥ximas entradas.

Si quieres **profundizar m√°s sobre JSX**, tienes este [tutorial interactivo](http://buildwithreact.com/tutorial/jsx) y tambi√©n la [documentaci√≥n oficial de Facebook](https://facebook.github.io/react/docs/jsx-in-depth.html).

</article>

---

<article slug="mi-inmersion-en-react" date="2016-09-13" url="https://carlosazaustre.es/blog/mi-inmersion-en-react">

# Mi inmersi√≥n en React

**Fecha:** 2016-09-13
_Antes de nada quiero aclarar que AngularJS me gusta (por si no se nota de mis anteriores posts :P)._

Apost√© por Angular cuando mucha gente todav√≠a renegaba de JavaScript y del [stack MEAN](/desarrollo-full-stack-javascript-tambien-conocido-como-mean/). He aprendido mucho utilizando este framework en mis desarrollos, de patrones de dise√±o, de programaci√≥n b√°sica y avanzada, etc...

He trabajado con las versiones de la v1.2 a la v1.5, y me parece excelente como ha evolucionado y como se ha ido integrando poco a poco con ECMAScript 6 (ES2015) y ha ido abandonando Bower para utilizar NPM.

Con las versiones 1.4 y 1.5 puedes trabajar con una [arquitectura de frontend basada en componentes](/desarrollo-por-componentes-con-angular-1-5-con-es6-es2015/) haciendo tus aplicaciones m√°s mantenibles y escalables. Me resulta m√°s c√≥moda √©sta forma de trabajar que el t√≠pico MVC.

Sin embargo, siempre me gusta explorar nuevas cosas y no quedarme estancado. Sent√≠a que con Angular me estaba quedando muy limitado a ese framework, y viendo la evoluci√≥n de ECMAScript quise probar a utilizar JavaScript Puro (o _VanillaJS_) combin√°ndolo con peque√±as librer√≠as que resolvieran problemas concretos.

<blockquote class="twitter-tweet" data-lang="en">
  <p lang="es" dir="ltr">
    √öltimamente estoy empleando m√°s VanillaJS (ES6) + peque√±as librer√≠as en
    lugar de Frameworks ¬øEstar√© madurando?
  </p>
  &mdash; Carlos Azaustre (@carlosazaustre) <a href="https://twitter.com/carlosazaustre/status/742671743605694465">June 14, 2016</a>
</blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

Antes del verano empec√© a utilizar [yo-yo.js](https://github.com/maxogden/yo-yo), una librer√≠a para renderizar HTML (al estilo React, pero m√°s ligera) que conoc√≠ gracias a un [curso en Platzi](https://platzi.com/cursos/javascript/). Empec√© a seguir este patr√≥n y para el estado de la aplicaci√≥n utilic√© [store-emitter](https://github.com/sethvincent/store-emitter) (algo parecido a _Redux_), [page.js](https://visionmedia.github.io/page.js/) para las rutas, y [request-promise](https://www.npmjs.com/package/request-promise) para realizar peticiones HTTP (o el propio [fetch de ES2015](/ejemplo-de-aplicacion-con-react-js-en-ecmascript-6/)).

Me encant√≥ esta forma de trabajar, pudiendo utilizar lo que quisiera para armar una web app.

Con esta experiencia, me anim√© este verano a profundizar en React, que [ya lo hab√≠a probado tiempo atr√°s](/empezando-con-react-js-y-ecmascript-6/) y me gust√≥.

He descubierto que aunque React es una librer√≠a que se encarga del tema de renderizado de las vistas (y lo hace realmente bien), tiene un ecosistema y comunidad enormes.

![React, Redux, GraphQL](/images/mi-inmersion-en-react/react-redux-graphql-1.png)

Mi problema con Angular es que yo me quedar√≠a en la v1.5 (o en la v1.6 que pr√≥ximamente lanzar√°n), aunque sea algo complicado utilizar ECMAScript 6 (que me encanta) con ello. Se puede hacer, pero se enrevesa mucho el c√≥digo, sobre todo a la hora de crear m√≥dulos.

Angular2 soluciona esto ya que utiliza el sistema de m√≥dulos de ES2015, pero para mi gusto, se complica mucho la forma de programar. TypeScript ayuda, pero tampoco me gusta TypeScript (soy as√≠...) Cierto es que no es necesario utilizar TypeScript de forma obligatoria, [pero la alternativa no es mejor...](/angular-2-primeros-pasos/)

En esto creo que gana React, ya que se integra muy bien con ES2015 y el [desarrollo de componentes es muy intuitivo](/ejemplo-de-aplicacion-con-react-js-en-ecmascript-6/).

El resto de cosas que hace el framework las puedes encontrar en el ecosistema de React, para manejar el estado de la aplicaci√≥n puedes utilizar lo que quieras, pero creo que el patr√≥n Flux y su implementaci√≥n en Redux se integran perfectamente con esta forma de programar. Tambi√©n el enrutado lo tienes cubierto.

Con React tambi√©n puedes crear aplicaciones isom√≥rficas o universales junto con Express y Node.js. Con Angular2 tambi√©n se va a poder, pero ya digo que _Ng2_ no me gusta mucho su sintaxis, la veo muy complicada (para mi gusto).

Y ya lo √∫ltimo es React Native. Si, es una librer√≠a diferente, pero si sabes programar con React y Redux, puedes crear una aplicaci√≥n nativa (no un WebView, una aplicaci√≥n nativa) para iOS y Android con JavaScript. En el mundo Angular tenemos _ionic_, pero no dejar de ser un _WebView_. Tambi√©n tenemos NativeScript pero no puedo hablar porque no lo conozco mucho. Conozco React Native porque lo he probado y es realmente poderoso.

En resumen, mi cambio a React no se debe a una moda (React lleva en el mercado alrededor de 2 a√±os) pero siento que es una librer√≠a muy madura, permite usar otras librer√≠as con ella y hacer tu aplicaci√≥n m√°s modular, se integra muy bien con ECMAScript 6 y tiene un gran ecosistema y muchas cosas por venir (No he hablando a√∫n de GraphQL...)

Hoy por hoy, prefiero trabajar con peque√±as librer√≠as y utilizar todo lo que pueda de ECMAScript 6 que es el est√°ndar de JavaScript.

Seguir√© los pasos que de Angular 2 estoy seguro que cuando sea estable y en futuras versiones (2.1 o 2.2), ser√° muy potente ya que tiene una gran comunidad.

Como siempre digo, hay que intentar probar todas las herramientas que tenemos a nuestra disposici√≥n y quedarse con lo que m√°s c√≥modo nos sea seg√∫n nuestra forma de trabajar. Personalmente prefiero trabajar con ES2015 y peque√±as librer√≠as y tener m√°s libertad.

En cuanto la tem√°tica del blog a partir de ahora, escribir√© m√°s sobre React y su escosistema (Redux, GraphQL, UniversalJS, ReactNative,...) ya que siempre he escrito en mi blog sobre las tecnolog√≠as con las que trabajo, lo que voy a aprendiendo y sobre todo lo que m√°s me divierta :)

</article>

---

<article slug="desarrollo-por-componentes-con-angular-1-5-con-es6-es2015" date="2016-07-04" url="https://carlosazaustre.es/blog/desarrollo-por-componentes-con-angular-1-5-con-es6-es2015">

# Desarrollo por componentes con Angular 1.5 y ES6/ES2015

**Fecha:** 2016-07-04
En el pasado [AngularCamp](http://angularcamp.org) impart√≠ un workshop ense√±ando una aplicaci√≥n web de ejemplo empleando la √∫ltima versi√≥n de Angular 1x, la 1.5.6 que introduce el m√©todo `.component()` para desarrollar basado en componentes (Como har√≠a _React_ o _Angular2_) y empleando para ello ECMAScript6 (o ES2015), para que nuestro c√≥digo con Angular 1x cada vez se parezca m√°s a Angular2.

En el ejemplo uso **UIRouter** para las rutas, en su √∫ltima versi√≥n _alpha_ a d√≠a de hoy. Emplear√© Babel para traducir ES6 a ES5. No usar√© TypeScript.

La aplicaci√≥n es una lista de los speakers de la pasada AngularCamp y cada speaker tiene su vista detalle.

Sin nada m√°s, vamos manos a la obra!

## Arquitectura de Componentes

Con Angular 1.5 podemos dividir nuestra aplicaci√≥n en componentes, haciendo uso del m√©todo `.component()`. [Antes pod√≠amos hacerlo por directivas ](/angular-js-directivas-como-componentes/) pero de esta forma el c√≥digo est√° mejor adaptado y nos prepara para el salto a Angular2, sobre todo si empleamos el nuevo est√°ndar de JavaScript para ello y la excelente [gu√≠a de estilo de Todd Motto](https://github.com/toddmotto/angular-styleguide).

La aplicaci√≥n de ejemplo tendr√° los siguientes componentes:

![Arquitectura de componentes en una web app Angular 1.5](/images/desarrollo-por-componentes-con-angular-1-5-con-es6-es2015/app_angular_components.png)

- `AppComponent` ser√° el componente ra√≠z donde reside toda la l√≥gica de la aplicaci√≥n.

- `HeaderComponent` y `FooterComponent` son componentes comunes que podemos reutilizar en otras aplicaciones.

- `SpeakerList`: Representa la vista principal compuesta por una lista de `SpeakerItems`.

- `SpeakerItem`: Cada uno de los Speakers representados en la lista.

- `SpeakerDetail`: Vista en detalle de cada speaker, accesible bajo una URL determinada.

## Iniciando el proyecto

Primero de todo creamos un proyecto con NPM en una carpeta e instalamos las **dependencias** que utilizaremos v√≠a NPM

```shell
$ npm init -y
$ npm i -S angular angular-ui-router@1.0.0-alpha.5
```

Las siguientes **dependencias** no son de Angular, si no de la **parte Backend** desde la que voy a servir el API. Tambi√©n las instalamos con NPM a trav√©s de la terminal.

```shell
$ npm i -S express body-parser
```

Y por √∫ltimo las siguientes **dependencias para desarrollo** que nos servir√°n para usar babel en conjunto con browserify y el conjunto de plugins para que entienda ES2015.

```shell
$ npm i -S babel-runtime babel-preset-es2015 browserify watchify nodemon parallelshell
```

A continuaci√≥n vamos a escribir una serie de **NPM scripts** en el fichero `package.json` para ayudarnos con la ejecuci√≥n de ciertas tareas:

```js
"scripts": {
    "create": "touch ./server/public/app.js",
    "build": "browserify -t babelify -t uglifyify ./app/app.js -o ./server/public/app.js",
    "watch": "watchify -t babelify ./app/app.js -o ./server/public/app.js --debug",
    "postinstall": "npm run create && npm run build",
    "dev": "nodemon ./server/index.js",
    "serve": "parallelshell 'npm run dev' 'npm run watch'"
  },
```

- `npm run create`: Genera un fichero `app.js` vac√≠o donde estar√° la versi√≥n transpilada y empaquetizada de nuestra app.

- `npm run build`: Genera el fichero final resultante de todos los ficheros JS de nuestra app. Le aplicamos la transformaci√≥n **babelify** que nos permite utilizar babel en conjunto con **Browserify**, de esta manera en lugar de usar `require` para importar los m√≥dulos, podemos usar la forma de ES6/ES2015.

- `npm run watch`: Ejecuta el mismo comando que `build` pero empleando **Watchify**. Que es como Browserify, pero en lugar de crear el bundle de nuevo de todo el proyecto, solo se preocupa de los cambios, lo que nos permite crear bundles m√°s r√°pidos para desarrollo.
  `postinstall`: Este comando se ejecutar√° despu√©s de realizar `npm install` y genera el fichero build final.

- `npm run dev`: ejecuta el servidor Node/Express b√°sico que ahora implementaremos, de manera que se reinicie a cada cambio que hagamos.

- `npm run serve`: Gracias a **parallelshell** podemos ejecutar en paralelo varios comandos, en este caso el servidor de desarrollo con `npm run dev` y el `watch` de los cambios de la parte frontend.

Y por √∫ltimo, s√≥lo nos queda que Babel ejecute los plugins que queremos, para ello creamos un fichero `.babelrc` en el directorio ra√≠z del proyecto con el siguiente contenido:

```js
{
  "presets": ["es2015"]
}
```

De esta manera le indicamos que utilice el **preset de plugins de ES2015/ES6**.

## Servidor Node/Express.

Creamos un servidor web muy sencillo con **Node.js y Express** que tendr√° una parte de ficheros est√°ticos donde estar√° el `index.html` de nuestra SPA y el fichero `.js` que genera Browserify.

Tambi√©n tendr√° 3 rutas, 2 de ellas de nuestro _pseudo-API_ y una para servir el index.html. Aqu√≠ va el c√≥digo:

```js
// server/index.js
"use strict";

const express = require("express");
const bodyParser = require("body-parser");
const path = require("path");

const app = express();

/** Express configuration */
app.use(bodyParser.urlencoded({ extended: false }));
app.use(bodyParser.json());
app.use(express.static(path.join(__dirname, "public")));

/** API routes */
// Muestra todos los speakers.
app.get("/api/speakers", (req, res) => {
  res.sendFile(path.join(__dirname, "db", "speakers.json"));
});

// Muestra info de un √∫nico speaker.
app.get("/api/speakers/:id", (req, res) => {
  res.sendFile(path.join(__dirname, "db", `${req.params.id}.json`));
});

// env√≠a el index.html para la SPA.
app.get("*", (req, res, next) => {
  if (req.accepts("html")) {
    res.sendFile(path.join(__dirname, "public", "index.html"));
  } else {
    next();
  }
});

/** Inicia el servidor */
app.listen(3000, () => console.log("Express running on port 3000"));
```

En `server/db/` tengo varios ficheros `.json` que simulan una base de datos. Todo este c√≥digo lo tienes en el [repositorio de √©ste proyecto]().

Y en `server/public/index.html` este es el documento:

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>AngularCamp</title>
  </head>
  <body>
    <ac-app></ac-app>
    <script type="text/javascript" src="app.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/css/materialize.min.css"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
    />
  </body>
</html>
```

Donde `<ac-app></ac-app>` es nuestro componente ra√≠z donde se encuentra toda la l√≥gica de nuestra SPA AngularjS.

## Componente Ra√≠z.

El componente principal de nuestra aplicaci√≥n, o componente ra√≠z ser√° el **AppComponent** y su representaci√≥n en html ser√° `<ac-app></ac-app>`. Donde `ac` significar√≠a AngularCamp.

La nueva funci√≥n `component()` de Angular 1.5 sigue la siguiente sintaxis:

```js
angular.component("nombreComponente", {
  bindings: {},
  controller: function MiControlador() {},
  template: `<html></html>`,
});
```

- `bindings`: Sustitiuye a `scope` y `bindToController` del m√©todo `.directive()`

- `controller`: define el controlador del componente si lo tiene, esto es igual que en `.directive`.

- `template`: Lo mismo, puedes usar `templateUrl` si quieres usar un fichero `.html` para definir la plantilla o simplemente `template` para escribirla directamente.

Si quieres ampliar la informaci√≥n, [Todd Motto tiene un art√≠culo](https://toddmotto.com/exploring-the-angular-1-5-component-method/) d√≥nde explica los cambios con respecto al m√©todo `.directive()`

Por tanto, nuestro **AppComponent** lo vamos a tener en el fichero `/app/app.component.js` y despu√©s lo importaremos v√≠a m√≥dulos de ES6/ES2015

```js
// /app/app.component.js
export const AppComponent = {
  template: `
    <ac-header></ac-header>
    <div ui-view></div>
    <ac-footer></ac-footer>
  `,
};
```

Simplemente es un template con un `div` que contiene el `ui-view` donde se insertar√°n las vistas y un par de componentes comunes que representan la cabecera y el footer: `<ac-header>` y `<ac-footer>`.

Este objeto lo importamos en `app.js` donde definimos el inicio de nuestra aplicaci√≥n AngularJS:

```js
// /app/app.js
import angular from "angular";
import uiRouter from "angular-ui-router";

import common from "./common/common";
import components from "./components/components";
import { AppComponent } from "./app.component";

const root = angular
  .module("angularCamp", [uiRouter, common, components])
  .component("acApp", AppComponent);

document.addEventListener("DOMContentLoaded", () =>
  angular.bootstrap(document, ["angularCamp"])
);

export default root;
```

importamos `angular` y `angular-ui-router` adem√°s de unos m√≥dulos que ahora crearemos: `common` y `components` y el fichero que acabamos de crear `app.component.js`.

Iniciamos la aplicaci√≥n por medio de `bootstrap` (No confundir con el framework de CSS) y listo.

## Componentes Common

Siguiendo la [gu√≠a de estilo de Todd Motto](https://github.com/toddmotto/angular-styleguide#common-module) es una buena pr√°ctica separar los componentes que podr√≠an ser reutilizables de los componentes propios de la aplicaci√≥n. Por tanto en `commons` vamos a tener el header y el footer, que siguen una estructura similar al _AppComponent_:

```js
// /app/common/footer/footer.component.js
export const FooterComponent = {
  template: `
    <footer class="page-footer blue-grey darken-2">
      <div class="footer-copyright blue-grey darken-1">
        <div class="container">
          ¬© 2016 Carlos Azaustre.
        </div>
      </div>
    </footer>
  `,
};
```

```js
// /app/common/header/header.component.js
export const HeaderComponent = {
  template: `
    <nav>
      <div class="nav-wrapper red darken-4">
        <a href="#" class="brand-logo center">AngularCamp 2016</a>
      </div>
    </nav>
  `,
};
```

```js
// /app/common/common.js
import angular from "angular";

import { HeaderComponent } from "./header/header.component";
import { FooterComponent } from "./footer/footer.component";

const common = angular
  .module("app.common", [])
  .component("acHeader", HeaderComponent)
  .component("acFooter", FooterComponent).name;

export default common;
```

> Al crear el m√≥dulo, usamos la funci√≥n `.name` Esto nos permite que al exportar el fichero via ES6, se exporte el nombre del m√≥dulo y as√≠ cuando se inyecta en un `angular.module` no de problemas

## SpeakerService

A continuaci√≥n vamos a crear un servicio que se encargar√° de realizar las peticiones al API. Con ES6 vamos a implementarlo como una clase.

En el constructor inyectaremos la dependencia de la directiva `$http` y tendremos dos m√©todos o funciones: `getSpeakers` que devuelve todos y `getSpeaker(id)` que devuelve uno s√≥lo:

```js
// /app/components/speaker/speaker.service.js
class SpeakerService {
  constructor($http) {
    this.$http = $http;
  }

  getSpeakers() {
    return this.$http.get("/api/speakers").then((response) => response.data);
  }

  getSpeaker(id) {
    return this.$http
      .get(`/api/speakers/${id}`)
      .then((response) => response.data);
  }
}

SpeakerService.$inject = ["$http"];

export default SpeakerService;
```

## SpeakerList Component

El primer componente espec√≠fico de nuestra aplicaci√≥n ser√° el **SpeakerList** cuya funci√≥n ser√° representar en forma de lista los speakers que recibe del API. Veamos como:

```js
// /app/components/speaker/speaker-list/speaker-list.component.js
import controller from "./speaker-list.controller";

export const SpeakerListComponent = {
  bindings: {
    speakers: "<",
  },
  controller,
  template: `
    <ul class="collection">
      <speaker-item ng-repeat="speaker in $ctrl.speakers" data="speaker">
      </speaker-item>
    </ul>
  `,
};
```

Importamos el controlador que ahora veremos y nos aprovechamos de la forma abreviada de asignaci√≥n de propiedades de ES6.

En `bindings` tendremos el objeto `speakers` que utilizaremos en el controlador que contiene el array de speakers, y con la notaci√≥n `<` le indicamos que utilice _one-way data binding_.

Por √∫ltimo el `template` no es m√°s que una lista donde por medio de la directiva `ng-repeat` repetimos un nuevo componente `<speaker-item>` por cada `speaker` que haya en `$ctrl.speakers` (Siendo `$ctrl` el alias de nuestro controlador) y le pasamos el objeto a la propiedad `data` del nuevo componente.

Para el **controlador** tendremos el siguiente fichero, que definimos como una clase de ES6:

```js
// /app/components/speaker/speaker-list/speaker-list.controller.js
class SpeakerListController {
  constructor(SpeakerService) {
    this.speakerService = SpeakerService;
    this.speakers = [];
    this.loadData;
  }

  loadData() {
    this.speakerService.getSpeakers();
    then((response) => {
      this.speakers = response.data;
    });
  }
}

SpeakerListController.$inject = ["SpeakerService"];

export default SpeakerListController;
```

## SpeakerItem Component

Este componente representa cada uno de los speakers en la lista. Tiene una propiedad `data` por donde recibe el objeto con la info del speaker que le env√≠a el componente padre, _SpeakerList_. Este es su c√≥digo:

```js
// /app/components/speaker/speaker-item/speaker-item.component.js
import controller from "./speaker-item.controller";

export const SpeakerItemComponent = {
  bindings: {
    data: "<",
  },
  template: `
    <li class="collection-item avatar" style="border-bottom: 1px solid #cccccc;">
      <img class="circle" width="96px" ng-src="{{$ctrl.data.photo}}" alt="{{$ctrl.data.name}}" />
      <span class="title">{{$ctrl.data.name}}</span>
      <p><a ng-href="#/speakers/{{$ctrl.data.id}}">{{$ctrl.data.talk}}</a></p>
    </li>
  `,
};
```

En este caso no nos hace falta controlador, ya que los datos le llegan del componente padre a trav√©s del _binding_ de `data`. Es lo que se conoce como un componente sin estado (_stateless_) ya que solo representa informaci√≥n sin realizar ninguna llamada externa para obtener datos.

## SpeakerDetail Component

El siguiente y √∫ltimo componente que tendremos para esta sencilla app, ser√° el que representan la vista detalle del speaker.

```js
// /app/components/speaker/speaker-detail/speaker-detail.component.js

export const SpeakerDetailComponent = {
  bindings: {
    speaker: "<",
  },
  template: `
    <article class="card">
      <figure class="card-image">
        <img width="250px" src="{{$ctrl.speaker.photo}}" alt="{{$ctrl.speaker.name}}" />
        <span ng-click="$ctrl.onClick();" class="card-title">{{$ctrl.speaker.name}}</span>
      </figure>
      <section class="card-content">
        <h5>{{$ctrl.speaker.talk}}</h5>
        <p>{{$ctrl.speaker.description}}</p>
      </section>
      <aside class="card-action">
        <a href="#">{{$ctrl.speaker.complexity}}</a>
      </aside>
    </article>
  `,
};
```

En el objeto `speaker` de los `bindings` estar√° la informaci√≥n del speaker, y en lugar de realizar la llamada al servicio desde el controlador para obtener los datos, lo vamos a hacer desde la configuraci√≥n de las rutas.

De esta manera nuestro controller es m√°s ligero y en el caso de que ese sea el √∫nico cometido, nos ahorramos tener un controlador.

Lo vemos en el siguiente fichero

## M√≥dulo Speaker.

Vamos a crear un m√≥dulo que defina todos los componentes vistos: `speaker-list`, `speaker-item` y `speaker-detail` adem√°s enlazaremos el servicio `speaker-service` y realizaremos la configuraci√≥n de rutas:

```js
// /app/components/speaker/index.js
import angular from "angular";

import { SpeakerItemComponent } from "./speaker-item/speaker-item.component";
import { SpeakerListComponent } from "./speaker-list/speaker-list.component";
import { SpeakerDetailComponent } from "./speaker-detail/speaker-detail.component";
import SpeakerService from "./speaker.service";

const speaker = angular
  .module("speakers", [])
  .service("SpeakerService", SpeakerService)
  .component("speakerItem", SpeakerItemComponent)
  .component("speakerList", SpeakerListComponent)
  .component("speakerDetail", SpeakerDetailComponent)
  .config(($stateProvider, $urlRouterProvider) => {
    $stateProvider
      .state("speakers", {
        url: "/",
        component: "speakerList",
      })
      .state("speaker", {
        url: "/speakers/:id",
        component: "speakerDetail",
        resolve: {
          speaker: (SpeakerService, $stateParams) =>
            SpeakerService.getSpeaker($stateParams.id),
        },
      });
    $urlRouterProvider.otherwise("/");
  }).name;

export default speaker;
```

Como puedes ver, en el estado `speaker` correspondiente a la vista detalle, tenemos una propiedad `resolve` donde obtenemos los datos antes de cargar la vista. Utilizando funciones arrow de ES6.

De esta manera podemos hacer lo mismo para el otro estado y ahorrarnos el controller.

Vamos a refactorizar. Modificamos el estado `speakers` a√±adiendo el `resolve`:

```js
$stateProvider.state("speakers", {
  url: "/",
  component: "speakerList",
  resolve: {
    speakers: (SpeakerService) => SpeakerService.getSpeakers(),
  },
});
```

Como puedes ver gracias a las _arrow functions_ de ES6 el c√≥digo se simplifica mucho, con ES5 ser√≠a as√≠:

```js
$stateProvider
      .state('speakers', {
        url: '/',
        component: 'speakerList',
        resolve: {
          speakers: function(SpeakerService) {
             return SpeakerService.getSpeakers()
          }
      })
```

De esta forma podemos eliminar el controlador `speaker-list.controller.js` ya que su contenido ser√≠a este:

```js
class SpeakerController {
  constructor() {}
}
export default SpeakerController;
```

## M√≥dulo Components

Como ya tenemos nuestros componentes implementados, procedemos a crear un m√≥dulo de angular que recoja todos ellos:

```js
// /app/components/components.js
import angular from "angular";

import speaker from "./speaker";

const components = angular.module("app.components", [speaker]).name;

export default components;
```

En este caso s√≥lo tenemos un m√≥dulo: `speaker`, pero si tuvieramos m√°s u otros componentes los inyectar√≠amos aqu√≠.

## Ejecutando la aplicaci√≥n.

Ya no nos queda m√°s que ejecutar y probar la aplicaci√≥n. Si has tenido la tarea `npm run serve` corriendo habr√°s visto que los cambios se han ido ejecutando. Para prevenir cualquier error, paramos la tarea y corremos las siguientes en la terminal:

```shell
$ npm run build
$ npm run serve
```

Si abrimos un navegador con la url `http://localhost:3000` tendremos lo siguiente:

![Angular 1.5 + ES6/ES2015](/images/desarrollo-por-componentes-con-angular-1-5-con-es6-es2015/ezgif-1440086715.gif)

Espero que hayas aprendido algo nuevo y √∫til :). En un pr√≥ximo art√≠culo, veremos como a√±adir m√°s funcionalidades por medio de eventos.

Recuerda que tienes el c√≥digo de este tutorial en el [siguiente repositorio de GitHub](https://github.com/carlosazaustre/angularcamp-workshop).

</article>

---

<article slug="manejando-la-asincronia-en-javascript" date="2016-06-23" url="https://carlosazaustre.es/blog/manejando-la-asincronia-en-javascript">

# Formas de manejar la asincron√≠a en JavaScript

**Fecha:** 2016-06-23
Si hay algo que caracteriza a JavaScript, es la asincron√≠a que presentan algunas funciones. Concretamente las que realizan operaciones de entrada/salida como escritura o lectura del disco o una petici√≥n AJAX.

En JavaScript existen varias formas de manejar estos procesos en nuestros desarrollos.
Veamos cuales son.

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=kJ389bfH7iE)
/>

## Callbacks

Es la primera y la forma m√°s com√∫n de controlar la asincron√≠a en JavaScript.

En el siguiente ejemplo tenemos una funci√≥n que recibe como par√°metros un dato de entrada: `data`, un array con datos `array` y una funci√≥n de callback: `callback`.

El funcionamiento de la funci√≥n es muy simple, al `array` se le a√±ade el `data` que viene por par√°metro y cuando termine, llama a la funci√≥n de `callback` que recibe por par√°metro, en ese caso la llama con el `array` modificado.

He a√±adido un peque√±o bloque para comprobar si el array existe y si no lanzar un error que pasaremos al callback.

```javascript
function addToArray (data, array, callback) {
  if (!array) {
    callback(new Error('No existe el array), null)
  } else {
    array.push(data)
    callback(null, array)
  }
}
```

En el siguiente c√≥digo vemos como llamara a este funci√≥n y tratar el callback:

```javascript
var array = [1, 2, 3];

addToArray(4, array, function (err) {
  if (err) return console.log(err.message);
  console.log(array);
});

// [1, 2, 3, 4]
```

¬øEsto que va a devolver? Cuando se termine de ejecutar la funci√≥n `addToArray` se ejecutar√° el callback y nos mostrar√° el array con el nuevo dato.

Parece una tonter√≠a porque podr√≠amos a√±adir el dato al array y despu√©s imprimirlo con `console.log`, pero imaginemos que esa operaci√≥n de a√±adir un item al array fuera asincr√≥nica, como podr√≠a ser una llamada v√≠a AJAX.

Para simular esto vamos a utilizar la funci√≥n `setTimeout` para a√±adir un retardo de 1 segundo:

```javascript
function addToArray (data, array, callback) {
  if (!array) {
    return callback(new Error('No existe el array', null)
  }
  setTimeout(function() {
    array.push(data)
    callback(null, array)
  }, 1000)
}

var array = [1,2,3];

addToArray(4, array, function (err) {
  if (err) return console.log(err.message)
  console.log(array)
})
// (1 seg de delay)-> [1, 2, 3, 4]
```

Si no tuvi√©ramos una funci√≥n de callback, y la funci√≥n `addToArray` fuera:

```javascript
function addToArray(data, array) {
  setTimeout(function () {
    array.push(data);
  }, 1000);
}
```

y ejecut√°ramos la funci√≥n, nos devolver√≠a lo siguiente:

```javascript
var array = [1, 2, 3];
addToArray(4, array);
console.log(array);

// [1, 2, 3]
```

Cuando imprimimos el array a√∫n no se ha a√±adido el nuevo item, por lo tanto el comportamiento que sucede no es el buscado. De esta forma los callbacks nos ayudan a lidiar con esto.

Pero si tenemos varias funciones as√≠... puede ocurrir lo siguiente:

```javascript
var array = [1,2,3];

addToArray(4, array, function (err) {
  if (err) ...
  addToArray(5, array, function (err) {
    if (err) ...
    addToArray(6, array, function (err) {
      if (err) ...
      addToArray(7, array, function () {
        // Hasta el infinito y m√°s all√°...
      })
    })
  })
});
```

El temido **Callback Hell** o **Pyramid of Doom**

![Callback hell](/images/manejando-la-asincronia-en-javascript/callback-hell.png)

Por suerte esto se ha podido resolver utilizando librer√≠as como [`async`](https://www.npmjs.com/package/async), o empleando promesas con librer√≠as como [`Q`](https://www.npmjs.com/package/q).

## Promesas

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=6O8ax3JYboc)
/>

Por suerte, en la [nueva especificaci√≥n de JavaScript (ES6 o ES2015)](/ecmascript6/) **las Promesas ya son nativas** y no necesitamos requerir librer√≠as de terceros.

Veamos el mismo ejemplo que antes pero utilizando Promesas nativas de ES2015

```javascript
function addToArray(data, array) {
  const promise = new Promise(function (resolve, reject) {
    setTimeout(function () {
      array.push(data);
      resolve(array);
    }, 1000);

    if (!array) {
      reject(new Error("No existe un array"));
    }
  });

  return promise;
}

const array = [1, 2, 3];
addToArray(4, array).then(function () {
  console.log(array);
});
```

Ahora la funci√≥n `addToArray` crea un objeto `Promise` que recibe como par√°metros una funci√≥n con las funciones `resolve` y `reject`.

`resolve` la llamaremos cuando nuestra ejecuci√≥n finalice correctamente.

De esta manera, podemos escribir c√≥digo de manera m√°s elegante, y el _Callback Hell_ anterior puede ser resuelto as√≠:

```javascript
const array = [1, 2, 3];
addToArray(4, array)
  .then(function () {
    return addToArray(5, array);
  })
  .then(function () {
    return addToArray(6, array);
  })
  .then(function () {
    return addToArray(7, array);
  })
  .then(function () {
    console.log(array);
  });

// (4 seg. de delay)-> [1,2,3,4,5,6,7]
```

Esto se conoce como _anidar promesas_.

La forma de tratar errores en una promesa, es por medio de la funci√≥n `catch` que recoge lo que enviamos en la funci√≥n `reject` dentro de la Promesa. Y esta funci√≥n solo hay que invocarla una vez, no necesitamos comprobar en cada llamada si existe error o no. Lo cual reduce mucho la cantidad de c√≥digo

```javascript
const array = ''
addToArray(4, array)
  .then(...)
  .then(...)
  .then(...)
  .catch(err => console.log(err.message))

// No existe el array
```

## Async/Await

El siguiente paso en el tratamiento de los procesos as√≠ncronos es usar los m√©todos `async/await`. √âsta forma no est√° disponible en el est√°ndar de ES6 o ES2015, si no que **forma parte de la pr√≥xima versi√≥n ES7 o ES2016**, pero que que podemos utilizar hoy d√≠a [con Babel y el preset de plugins `stage-3`](http://babeljs.io/docs/plugins/preset-stage-3/)

La sintaxis para una funci√≥n que utilice _async/await_ es la siguiente

```javascript
async function myFuncion () {
  try {
    var result = await functionAsincrona()
  } catch (err) {
    ...
  }
}
```

La funci√≥n ir√° precedida por la palabra reservada `async` y dentro de ella tendremos un bloque `try-catch`. Dentro del `try` llamararemos a la funci√≥n as√≠ncrona con la palabra reservada `await` delante, con esto hacemos que la funci√≥n _espere_ a que se ejecute y el resultado de la misma est√° disponible en este caso en la variable `result`.

Si ocurre alg√∫n error durante la ejecuci√≥n, se ejecutar√° el bloque `catch` donde trataremos el error.

Combinando `async/await` con una funci√≥n basada en Promesas, podemos hacer lo siguiente con el ejemplo que est√°bamos viendo:

```javascript
function addToArray(data, array) {
  const promise = new Promise(function (resolve, reject) {
    setTimeout(function () {
      array.push(data);
      resolve(array);
    }, 1000);

    if (!array) {
      reject(new Error("No existe un array"));
    }
  });

  return promise;
}

const array = [1, 2, 3];

async function processData(data, array) {
  try {
    const result = await addToArray(data, array);
    console.log(result);
  } catch (err) {
    return console.log(err.message);
  }
}

processData(4, array);
// [1,2,3,4]
processData(5, array);
// [1,2,3,4,5]
processData(6, array);
// [1,2,3,4,5,6]
```

De esta manera estamos escribiendo c√≥digo de manera secuencial pero JavaScript est√° _por debajo_ ejecutando c√≥digo asincr√≥nico.

Esto permite que, desarrolladores que est√©n menos familiarizados con JavaScript y su comportamiento, no tengan tantas barreras de entrada para empezar a trabajar con el lenguaje.

**¬øQu√© te parece la evoluci√≥n de JavaScript? √önete a la conversaci√≥n y no dudes en aportar tus impresiones.**

Si quieres conocer m√°s sobre el lenguaje, te [recomiendo mi ebook **Aprendiendo JavaScript** que ya tienen m√°s de 500 lectores](http://leanpub.com/aprendiendo-javascript) :)

</article>

---

<article slug="aprendiendo-y-compartiendo" date="2016-06-17" url="https://carlosazaustre.es/blog/aprendiendo-y-compartiendo">

# Aprendiendo y Compartiendo con la Comunidad

**Fecha:** 2016-06-17
Esto es un resumen de la charla _Ignite_ que di en la [**PlatziConf Madrid 2016**](https://platzi.com/blog/destaques-platziconf-madrid/) organizada por [Platzi](https://platzi.com) en el [Campus Madrid de Google](https://campus.co/madrid).

Una charla _Ignite_ son 5 minutos de duraci√≥n y sin control de las _slides_, cada una pasa autom√°ticamente cada 30 segundos. Por tanto hay que hablar muy r√°pido para que te de tiempo a contar todo.

En la charla quise compartir mi experiencia de aprendizaje en los √∫ltimos a√±os. Ya que **la gran mayor√≠a de lo que se ahora mismo lo he aprendido gracias a internet** e intento **devolver a la comunidad** compartiendo lo que voy aprendiendo.

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=PO5igRZtlEU)
/>

**Hace unos a√±os era como el _Se√±or Anderson_ en _Matrix_.** Trabaj√© en varias empresas
_grises_ que no me aportaban nada. Trabajando siempre con tecnolog√≠as para mi gusto "rancias", sin opci√≥n
de elegir ni de poder decidir nada.

Siempre lo mismo. Me sent√≠a girando en una _rueda de hamster_, d√≥nde la sociedad te presiona para que nolo dejes.

Llegaba a casa agotado. Sab√≠a que ten√≠a que haber algo mejor afuera, pero no ten√≠a tiempo ni fuerzas para investigarlo, hasta que un d√≠a despert√©.

![Elegimos nuestra pastilla roja](/images/aprendiendo-y-compartiendo/eligiendo-nuestra-pastilla-roja.jpg)

Cansado de esta situaci√≥n, mi pareja y yo tomamos una decisi√≥n. Dejar nuestros trabajos "estables" y dar un cambio. **Elegimos la pastilla roja** y optamos por salir de Espa√±a y **emigrar a Irlanda**.

**Fuimos sin nada**, sin tener casa buscada, ni trabajo. La gente nos insist√≠a a seguir en la _rueda de hamster_, con nuestros empleos, hipotecas, coche, etc... pero por primera vez nos sent√≠amos
libres.

![El mundo real no es tan bonito](/images/aprendiendo-y-compartiendo/el-mundo-real-no-es-tan-bonito.jpg)

Descubrimos otra vida y otra forma de ver las cosas. Por supuesto no todo es tan bonito como
lo suelen pintar los _gur√∫s del emprendimiento_.

> El mundo real al emprender no es un camino de rosas.

En nuestra nueva vida, como _Freelancers_ nos dimos cuenta de la **cantidad de tiempo que gan√°bamos sin tener que desplazarnos a una oficina**, haciendo todas las gestiones online, y disfrutando de los proyectos que eleg√≠amos a trav√©s de varias plataformas para "freelancers".

![La tecnolog√≠a a nuestro alcance](/images/aprendiendo-y-compartiendo/la-tecnologia-a-tu-alcance.jpg)

**Por fin tuve tiempo de aprender**, y en nuestra profesi√≥n como desarrolladores de software, tenemos la suerte de que todo el conocimiento a nuestro alcance sin movernos de casa: Cursos Online, Tutoriales en blogs, videotutoriales en Youtube,... Puedes estar al d√≠a con charlas y eventos sobre tecnolog√≠a retransmitidos online y en directo.

> Mucho del tiempo que pas√© en Irlanda lo invert√≠ en leer muchos libros.

Libros t√©cnicos (en ingl√©s), probando tecnolog√≠as, librer√≠as y frameworks que por aquel entonces estaban empezando a despegar como **AngularJS** y **Node.js**. Y muchos cursos online, entre ellos los de [Platzi](https://platzi.com/r/carlos.azaustre/) en espa√±ol y algunos en ingl√©s en plataformas como [Coursera](http://coursera.org) o [CodeSchool](http://codeschool.com).

![](/images/aprendiendo-y-compartiendo/0X48aG.gif)

Pero no por estar todo el conocimiento a nuestro alcance lo vamos a aprender de forma autom√°tica. No es tan f√°cil y esto le cuesta a veces a la gente le frustra.

> Las cosas
> como de verdad se aprenden es a trav√©s de la experiencia y **dedic√°ndole tiempo**. Mucho tiempo.

En el mundo del desarrollo web, qu√© es d√≥nde me suelo mover habitualmente, tenemos a nuestra disposici√≥n una **cantidad de herramientas, frameworks y librer√≠as impresionante**. Abrumadora en ciertas ocasiones, sobre todo cuando uno est√° empezando.

![Ensayo y error](/images/aprendiendo-y-compartiendo/prueba-y-error.gif)

La mejor manera de aprender es ir poco a poco. Probado y aprendiendo de los errores. No te van
a salir las cosas que quieres a la primera. Te dar√°s muchos golpes, pero es con ellos con los que
aprender√°s que es lo mejor y peor. En mi caso, cuando aprend√≠a algo nuevo, escrib√≠a un tutorial, resumiendo paso a paso como lo hab√≠a logrado. Estos tutoriales los he ido publicado en mi blog que abr√≠ hace ya m√°s de 3 a√±os.

Si me sirven a mi, pueden servirle a mucha gente m√°s.

![Ve c√≥digo](/images/aprendiendo-y-compartiendo/html-y-css.jpg)

Con el tiempo, aprendes a _esquivar las balas_. Empiezas un nuevo proyecto y sabes por donde
empezar, que librer√≠as utilizar, como organizarlo. Empiezas a comprender c√≥mo es Matrix. Llega un momento en el que lees c√≥digo y ya sabes como va funcionar, ves HTML y CSS y sabes como va a quedar maquetada una p√°gina.

![No te creas un crack](/images/aprendiendo-y-compartiendo/eres-un-crack.gif)

Pero no por eso tienes que creerte que eres mejor que el resto. Siempre hay cosas por aprender. Habr√° gente que sepa menos que tu, pero as√≠ es como te sent√≠as tu un tiempo atr√°s, y siempre va haber gente que sepa m√°s que tu.

![Ignite PLatziConf Carlos Azaustre](/images/aprendiendo-y-compartiendo/Cjj6W3RWUAEfZES.jpg)

> En resumen, lo importante es ser humildes, aprender poco a poco y compartir. **Cuanto m√°s des a la comunidad, m√°s recibir√°s a
> cambio**.

</article>

---

<article slug="aplicacion-node-como-servicio-upstart" date="2016-03-04" url="https://carlosazaustre.es/blog/aplicacion-node-como-servicio-upstart">

# Ejecuta tu App NodeJS como un Servicio en Linux

**Fecha:** 2016-03-04
Imagina que tienes una App escrita en Node.js y necesitas desplegarla en producci√≥n.

Ya sabes que con el comando `node app.js` no es una buena opci√≥n, ya que si la aplicaci√≥n se cae no hay manera de volverlo a arrancar autom√°ticamente. Necesitar√≠as entrar en el servidor y correr el comando de nuevo.

Hay opciones como `forever` y `pm2` que te permiten tener tu aplicaci√≥n Node corriendo continuamente y reiniciarse en caso de ca√≠da.

Sin embargo una opci√≥n m√°s elegante es correr tu aplicaci√≥n como servicio en tu sistema operativo. Como corre por ejemplo Nginx o MongoDB.

En este art√≠culo vemos como hacerlo para Linux (En concreto para Ubuntu) utilizando **upstart**.

![Upstart](/image/saplicacion-node-como-servicio-upstart/upstart80.png)

[_Upstart_](https://es.wikipedia.org/wiki/Upstart) es un _demonio_ basado en eventos que maneja el arranque de tareas y servicios durante el arranque del sistema, los detiene en el apagado y los supervisa mientras el sistema est√° funcionando. Originalmente fue desarrollado para las distribuciones Ubuntu pero se pretende que sea adecuado para su implementaci√≥n en todas las distribuciones Linux.

Tienes m√°s informaci√≥n en la p√°gina del proyecto [upstart](http://upstart.ubuntu.com/)

## Tu aplicaci√≥n Node

Partamos de una aplicaci√≥n Node.js muy simple. El siguiente c√≥digo nos sirve:

```javascript
// app.js
var express = require("express");
var app = express();
var port = process.env.PORT;

app.get("/", function (req, res) {
  res.send("Hola Mundo!");
});

app.listen(port);
```

Y este ser√≠a el fichero `package.json`:

```javascript
{
  "name": "mi-aplicacion",
  "version": "1.0.0",
  "dependencies": {
     "express": "^4.13.3"
  },
  "scripts": {
     "start": "node app.js"
  }
}
```

√âsta aplicaci√≥n simplemente muestra en el navegador `Hola Mundo!` cuando entramos a la URL principal (por ejemplo: `http://dominio.com/:port`) Siendo `port` el valor que recoja de una variable de entorno `PORT`.

## Fichero de configuraci√≥n Upstart

Creamos un fichero de configuraci√≥n de _upstart_ llamado `miAplicacion.conf` con el siguiente c√≥digo:

```shell
start on runlevel [2345]
stop on runlevel [!2345]

respawn
respawn limit 10 5

setuid ubuntu
chdir /opt/myAplicacion

env PORT=3000

exec npm start
```

Explicamos l√≠nea a l√≠nea que hace este fichero.

Los sistemas operativos tipo UNIX tienen diferentes [niveles de ejecuci√≥n](https://es.wikipedia.org/wiki/Nivel_de_ejecuci%C3%B3n) (_runlevels_). Los 7 niveles de ejecuci√≥n del sistema son:

- **0**: Nivel Alto: Para el apagado del sistema
- **1**: Nivel de usuario √∫nico.
- **2**: Nivel de modo multiusuario. (sin soporte de red).
- **3**: Nivel de modo multiusuario con soporte de red
- **4**: Igual que el Nivel 3.
- **5**: Igual que el Nivel 3 con soporte gr√°fico.
- **6**: Reinicia el sistema

En este caso vamos a asociarle los niveles `2`, `3`, `4` y `5`. con `start on runlevel [2345]` y `stop on runlevel ![2345]`

El comando`respawn` nos ayuda a que el servicio se reinicie en caso de que se caiga y con `respawn limit 10 5` le indicamos que no reinicie m√°s de 5 veces en 10 segundos. Esto nos sirve para que no se quede en un bucle de reinicios en caso de que haya un malfuncionamiento de la aplicaci√≥n. S√≥lo se reiniciar√° si es una ca√≠da puntual.

Con `setuid ubuntu` indicamos que usuario ejecuta la aplicaci√≥n. Es conveniente que este usuario no sea root, es m√°s recomendable por seguridad crear un usuario del sistema operativo con permisos limitados para ejecutar la aplicaci√≥n. En este caso el usuario es `ubuntu`

El siguiente paso es indicar en que directorio o carpeta del sistema est√° el c√≥digo de nuestra aplicaci√≥n node. Puede ser cualquiera pero es una buena opci√≥n tenerlo en la ruta `/opt/miAplicacion` siendo `miAplicacion` el nombre de nuestro proyecto.

A continuaci√≥n podemos _setear_ variables de entorno, como por ejemplo si estamos en producci√≥n o desarrollo, el puerto, claves secretas de APIs, etc... lo podemos hacer con el comando `env` seguido de la variable de entorno, un igual y el valor: `env PORT=3000`, con esto la variable de entorno `PORT` queda igualada a `3000` y la aplicaci√≥n correr√° en el puerto 3000.

Por √∫ltimo con el comando `exec` ejecutamos un comando. En este caso ejecutaremos el comando `npm start` que tenemos definido en el `package.json`.

(Internamente `npm start` llama al comando `node app.js` que tenemos configurado en el objeto `scripts` del `package.json`)

## Despliegue

Por √∫ltimo, para hacer funcionar todo, necesitas tener el c√≥digo de tu aplicaci√≥n node (el `app.js` y el `package.json`) en la carpeta `/opt/miAplicacion` de tu servidor.

Tener un usuario del sistema llamado `ubuntu` o el que tu prefieras, pero a ser posible que no sea `root`.

Y copiar el fichero de configuraci√≥n `miAplicacion.conf` en la carpeta `/etc/init/` del sistema que es donde se encuentran los servicios upstart.

Ya solo necesitas ejecutar el comando `service miAplicacion start` en tu servidor y tendr√°s tu aplicaci√≥n node.js corriendo como servicio en producci√≥n.

</article>

---

<article slug="formas-de-comunicar-componentes-en-angularjs-1-x" date="2016-01-27" url="https://carlosazaustre.es/blog/formas-de-comunicar-componentes-en-angularjs-1-x">

# 3 formas de comunicar componentes en AngularJS 1.x

**Fecha:** 2016-01-27
> Este es un post invitado escrito por <a href="https://twitter.com/erixdev">Emilio Grande</a>, autor del blog <a href="https://jsjutsu.com/blog/">JSJutsu</a> el cu√°l te invito a leer.

Emilio hace un buen resumen sobre las 3 principales maneras que existen en AngularJS 1.x para comunicar componentes (o directivas hasta la versi√≥n 1.4).

## Introducci√≥n

Dentro de las necesidades m√°s habituales en una aplicaci√≥n [AngularJS](https://angularjs.org/) est√° la de **comunicar diferentes componentes**.

En AngularJS podemos hacer esto de diferentes formas, y conviene conocerlas para saber cu√°l aplicar en cada caso.

**Una buena aplicaci√≥n JavaScript est√° [dividida en componentes](/angular-js-directivas-como-componentes/)** y es importante saber c√≥mo relacionarlos de la forma m√°s limpia posible.

Vamos a ver c√≥mo comunicar los componentes rojo y azul del siguiente ejemplo:

```html
<div ng-app="myApp">
  <div class="controllerOne" ng-controller="controllerOne as c1">
    <!-- Componente Rojo -->
    <div class="controllerTwo" ng-controller="controllerTwo as c2">
      <input type="text" />
      <button>Send Event</button>
    </div>
    <!-- /Componente Rojo -->

    <!-- Componente Azul -->
    <div class="controllerThree" ng-controller="controllerThree as c3">
      <div>Nothing here...</div>
    </div>
    <!-- /Componente Azul -->
  </div>
</div>
```

![Aplicaci√≥n Base](/images/formas-de-comunicar-componentes-en-angularjs-1-x/comm_ang_ejemploBase.png)

En este caso los componentes est√°n encapsulados en _controladores_, pero podr√≠an ser directivas perfectamente.

## Forma 1: a trav√©s del _scope_

La **forma m√°s sencilla** y m√°s utilizada para comunicar componentes **es usando el _scope_**.

Consiste en utilizar el **_scope_ com√∫n a los componentes m√°s pr√≥ximo**.

En AngularJS 1x, cada componente tiene su propio _scope_. El _scope_ **hereda en forma de √°rbol desde el _scope_ ra√≠z de la aplicaci√≥n, que es _$rootScope_**.

En concreto, en este ejemplo es as√≠:

![Herencia $scope](/images/formas-de-comunicar-componentes-en-angularjs-1-x/comm_ang_herenciaScope.png)

Por tanto, en este caso podemos comunicar C2 (Rojo) y C3 (Azul), a trav√©s del componente C1. Veamos c√≥mo:

```html
<div ng-app="myApp">
  <div class="controllerOne" ng-controller="controllerOne as c1">
    <!-- Componente Rojo -->
    <div class="controllerTwo" ng-controller="controllerTwo as c2">
      <input type="text" ng-model="c1.message" />
      <button ng-click="c1.sendEvent()">Send Event</button>
    </div>
    <!-- /Componente Rojo -->

    <!-- Componente Azul -->
    <div class="controllerThree" ng-controller="controllerThree as c3">
      <div>{{ c1.data }}</div>
    </div>
    <!-- /Componente Azul -->
  </div>
</div>
```

```javascript
controller("controllerOne", function () {
  var vm = this;
  vm.data = "Nothing here...";
  vm.sendEvent = function () {
    vm.data = vm.message;
  };
});
```

Lo que hemos hecho aqu√≠ es simplemente utilizar el _scope_ del componente padre (C1), al que tienen acceso los componentes hijos (C2 y C3).

![Comunicando con $scope](https://carlosazaustre.es/blog/content/images/2016/01/comm_ang_forma1.png)

### Ventajas e inconvenientes

Usar el _scope_ es **lo m√°s simple y lo que menos c√≥digo requiere**.

El problema es que en una **aplicaci√≥n grande los _scopes_ compartidos pueden r√°pidamente volverse inmanejables y establecer un grado de acoplamiento muy alto**, lo cual no es deseable.

## Forma 2: a trav√©s de eventos

AngularJS 1.x proporciona un [sistema de eventos](https://docs.angularjs.org/api/ng/type/$rootScope.Scope#$on) muy √∫til al que se accede mediante los **m√©todos _$broadcast_, _$on_ y _$emit_**.

Lo que haremos aqu√≠ es: **emitir eventos hacia abajo en el √°rbol** con _$broadcast_.

Veamos c√≥mo.

```html
<div ng-app="myApp">
  <div class="controllerOne" ng-controller="controllerOne as c1">
    <!-- Componente Rojo -->
    <div class="controllerTwo" ng-controller="controllerTwo as c2">
      <input type="text" ng-model="c2.message" />
      <button ng-click="c2.sendEvent()">Send Event</button>
    </div>
    <!-- /Componente Rojo -->

    <!-- Componente Azul -->
    <div class="controllerThree" ng-controller="controllerThree as c3">
      <div>{{ c3.data }}</div>
    </div>
    <!-- /Componente Azul -->
  </div>
</div>
```

```javascript
.controller('controllerTwo', function($scope){
  var vm = this;
  vm.sendEvent = function() {
    $scope.$parent.$broadcast('msg', vm.message);
  };
})
.controller('controllerThree', function($scope){
  var vm = this;
  vm.data = 'Nothing here...';
  $scope.$on('msg', function(evt, msg){
    vm.data = msg;
  });
});

```

En este caso el componente C2 emite un evento de tipo 'msg', a trav√©s del componente C1. El componente C3 est√° escuchando los eventos 'msg', y al recibirlos ejecuta su funci√≥n de _callback_.

![Comunicando con eventos](/images/formas-de-comunicar-componentes-en-angularjs-1-x/comm_ang_forma2.png)

### Ventajas e inconvenientes

Los eventos son √∫tiles para **comunicar eventos espec√≠ficos de componentes padres a hijos**.

En caso de tener que comunicar componentes a otro nivel y tener que recurrir a emit o scopes padres (como en el ejemplo), o incluso al $rootScope, una vez m√°s en una aplicaci√≥n grande podemos tener eventos que circulen por toda la aplicaci√≥n. Esto no nos interesa.

## Forma 3: a trav√©s de un servicio

La forma m√°s elaborada de comunicar componentes, y a la vez la m√°s mantenible, es mediante **servicios intermedios requeridos por ambos componentes**.

Veamos el ejemplo.

```html
<div ng-app="myApp">
  <div class="controllerOne" ng-controller="controllerOne as c1">
    <!-- Componente Rojo -->
    <div class="controllerTwo" ng-controller="controllerTwo as c2">
      <input type="text" ng-model="c2.message" />
      <button ng-click="c2.sendEvent()">Send Event</button>
    </div>
    !-- /Componente Rojo --> !-- Componente Azul -->
    <div class="controllerThree" ng-controller="controllerThree as c3">
      <div>{{ c3.data() }}</div>
    </div>
    !-- /Componente Azul -->
  </div>
</div>
```

```javascript
.factory('utilityService', function() {
  return {
    message: 'Nothing here...',
    getMessage: function() {
      return this.message;
    },
    setMessage: function(msg) {
      this.message = msg;
    }
  };
})

.controller('controllerTwo', function(utilityService){
  var vm = this;
  vm.sendEvent = function() {
    utilityService.setMessage(vm.message);
  };
})

.controller('controllerThree', function(utilityService){
  var vm = this;
  vm.data = function(){
    return utilityService.getMessage();
  }
});

```

Con esta √∫ltima forma, hemos creado un **servicio que inyectamos en ambos componentes**, y es el que se encarga de gestionar la informaci√≥n a compartir.

![Comunicando con servicios](/images/formas-de-comunicar-componentes-en-angularjs-1-x/comm_ang_forma3.png)

### Ventajas e inconvenientes

Los **servicios son la mejor manera de comunicar las diferentes piezas de nuestro puzzle** y pueden ser requeridos en cualquier sitio que se precise de la aplicaci√≥n.

La desventaja, que requieren de m√°s c√≥digo para prepararlos y en situaciones simples puede ser _"matar moscas a ca√±onazos"_.

## Conclusi√≥n

AngularJS es muy flexible y nos permite compartir y comunicar las diferentes piezas de nuestra aplicaci√≥n de forma organizada y controlable.

Como sabes por √©ste blog, [Angular 2 y sus componentes](/angular-2-rutas-y-componentes/) cambian la forma de trabajar totalmente, pero la idea es la misma: partir la aplicaci√≥n en componentes.

Adem√°s a Angular 1 todav√≠a le queda mucho recorrido por delante :)

</article>

---

<article slug="2015" date="2016-01-23" url="https://carlosazaustre.es/blog/2015">

# Retrospectiva del blog en 2015

**Fecha:** 2016-01-23
Hace un a√±o escrib√≠ un [art√≠culo con el resumen de como hab√≠a ido todo el 2014](/2014) en cuanto a visitas y m√©tricas de mi blog personal.

Por tanto es el momento de recapitular y ver como ha sido el 2015 y comprobar si los objetivos que me marqu√© se han cumplido :)

### As√≠ fue 2015

Este es el aspecto que muestras las gr√°ficas de Google Analytics para todo el 2015.

![Analytics del Blog 2015](/images/2015/analytics_carlosazaustre_2015.png)

Casi **medio mill√≥n de visitas en todo el a√±o**, que compar√°ndolo con el per√≠odo anterior es casi el doble, un crecimiento del 80%

![Comparaci√≥n 2014 con 2015](/images/2015/comparativa_2014-2015.png)

Resumi√©ndolo en una tabla como la siguiente, como nota curiosa veo que **la media mensual es m√°s alta que el mes m√°s activo del 2014**.

![Estad√≠sticas del Blog en 2015](/images/2015/metricas_carlosazaustre_2015.png)

Mes a mes ha ido creciendo pr√°cticamente todo, salvo el tiempo medio de estancia en la p√°gina. Me apunto eso para mejorar durante este a√±o.

Tambi√©n la **lista de correo** ha crecido mucho, **se ha triplicado durante todo 2015**. Pero el email sigue siendo mi nota pendiente. Este a√±o tengo que enfocarme en ella y cuidarla :)

[Youtube](https://www.youtube.com/user/azaman1984) sigo tendi√©ndolo en segundo plano, tengo pocos [videotutoriales](https://www.youtube.com/playlist?list=PLUdlARNXMVkl9MJl4r90Z1j1nmAfWEPV3) porque cuesta tiempo y trabajo preparar uno. Durante 2015 √∫nicamente publiqu√© un par de ellos, adem√°s varios videos de charlas y [Startuppeando](https://www.youtube.com/playlist?list=PLUdlARNXMVkm3JuBTDAX7iDsryy2czvYD). Cuando publiqu√© videos, que fue en los √∫ltimos meses se ve una fuerte subida tanto en visualizaciones mensuales como suscriptores. Otro punto m√°s a trabajar.

[Twitter](https://twitter.com/carlosazaustre) y [Facebook](https://facebook.com/carlosazaustre) siguen funcionando muy bien, sobre todo la red del pajarito. Comparto muchos links en [mi cuenta de twitter](https://twitter.com/carlosazaustre) y creo que soy bastante activo en la red, eso se refleja en las estad√≠sticas.

### OKRs 2015

Estos fueron los objetivos ([OKR](https://www.youtube.com/watch?v=_BbhkTOv_98)) que me plantee a primeros de 2015 para todo el a√±o:

> **Uno de mis OKR de cara al 2015 es doblar las visitas mensuales**, pasar de una media de 20.000 a 40.000. Creo que es ambicioso pero no por ello inlograble, teniendo en cuenta que ahora al mes este blog tiene el doble de visitas que todo el 2013 junto. Para conseguir eso debo proponerme y escribir m√°s art√≠culos de calidad, m√°s tutoriales y videotutoriales y crear m√°s recursos, como por ejemplo otro eBook que tengo en mente y alguna cosillas m√°s.

La media mensual en 2015 ha sido de **37.902 visitantes mensuales** por lo que si llegar a 40.000 visitas fuera el 100% he cumplido el **95% del Objetivo**. Seg√∫n la definici√≥n de OKR llegar al 70% estar√≠a OK, si se llega al 90% es que el objetivo no era tan ambicioso. A√∫n as√≠ estoy muy satisfecho por tanto: **OBJETIVO CUMPLIDO**

> Tambi√©n es importante el **tiempo de carga de la p√°gina**.

Ya hace un a√±o migr√© este blog de Wordpress a Ghost y not√© que la carga de la p√°gina baj√≥ bastante. Tambi√©n es cierto que Wordpress no lo ten√≠a _ultraoptimizado_, pero con Ghost noto que va m√°s fluido sin configurarlo al extremo.

Tambi√©n aument√© [mi Droplet en DigitalOcean](https://carlosazaustre.es/ir/digitalocean) de 5$ a 10$ al mes, teniendo as√≠ 1GB de RAM y 2TB de transferencia para mejorar el rendimiento.

Sin olvidar optimizaciones que hice p√°gina a p√°gina en art√≠culos que ten√≠an una mala puntuaci√≥n en PageSpeed.

El resultado ha sido el siguiente:

![Carga de p√°gina](/images/2015/carga-de-pagina-2015.png)

En Naranja son los datos semanales de tiempo de carga de p√°gina de 2014 y en Azul los de 2015, por lo que se ve que he mejorado en esto. **OBJETIVO CUMPLIDO**

Por tanto, los 2 objetivos que me marqu√© para el Blog los he cumplido :)

### OKRs para 2016

Llega el momento de ver que metas ponerse para este 2016 con respecto al blog que en el segundo semestre cumplir√° 4 a√±os!.

- **Visitas**
  Viendo como ha evolucionado el 2015 y el objetivo que me marqu√© el a√±o anterior, para 2016 me marco llegar a 100000 visitas mensuales.
  Hay que ser ambiciosos :D. Para ello tengo que seguir escribiendo art√≠culos y tutoriales interesantes y √∫tiles que ayuden a la comunidad y continuar movi√©ndolos.

- **Youtube**
  Este me va costar, ya que prepararse y grabar videos requiere mucho m√°s tiempo que un art√≠culo. Pero me gustar√≠a subir m√°s videotutoriales y llegar a 5000 suscriptores a final de a√±o

- **Ebooks**
  Tengo pendiente finalizar el [libro de JavaScript](https://leanpub.com/aprendiendojavascript). Uno de mis objetivos antes de la mitad de a√±o es completarlo y escribir alguno m√°s. M√≠nimo [uno de AngularJS](https://amzn.to/2L5m5IR) actualizado

- **Talleres y Workshops**
  El a√±o pasado [impart√≠ dos cursos en Platzi](/mi-experiencia-como-profesor-en-los-cursos-de-platzi/) desde Bogot√° (Colombia), y en Espa√±a varias formaciones presenciales para empresas. Fue una gran experiencia pero supone mucho tiempo de dedicaci√≥n y, llevando una Startup como [Chefly](https://chefly.co), esto consume mucho tiempo, por lo que este a√±o voy a reducir estas colaboraciones. A√∫n as√≠ me gustar√≠a organizar un Workshop presencial yo mismo a lo largo del a√±o en alg√∫n momento.

- **Renovaci√≥n de la web/blog**
  Tengo en mente hacer un cambio en el dise√±o de este blog. Mi objetivo es que en alg√∫n momento del 2016 hacer ese lavado de cara, veremos si lo cumplo :)

As√≠ que ¬°A por el 2016! ¬øCuales son tus objetivos para este a√±o?

</article>

---

<article slug="css-grid-layout-css" date="2015-12-28" url="https://carlosazaustre.es/blog/css-grid-layout-css">

# El futuro de CSS Grid Layout

**Fecha:** 2015-12-28
CSS4 como tal no existe. A partir de CSS3 el est√°ndar para hojas de estilo en cascada se divide en m√≥dulos, cada uno con su n√∫mero de versi√≥n.

Por ejemplo, **Flexbox** est√° en su versi√≥n 1 aunque por tecnolog√≠a est√© a camino entre CSS3 y lo que ser√≠a CSS4. [Aqu√≠ puedes leer un excelente art√≠culo sobre Flexbox por Fili Santill√°n](http://filisantillan.com/el-gran-poder-de-css3-flexbox/)

Dentro de estos **nuevos m√≥dulos CSS4** nos encontramos con **Grid Layout**, tambi√©n en su primera versi√≥n. Es una nueva forma de maquetar y colocar la informaci√≥n en nuestras p√°ginas webs.

No sustituye a Flexbox, si no que lo complementa y es una alternativa para el mismo problema.

La especificaci√≥n completa (en borrador) la tienes en [la web de la W3C](http://www.w3.org/TR/2015/WD-css-grid-1-20150917/), pero como es bastante densa, en este art√≠culo voy a explicar a modo de tutorial como se maquetar√≠a y se dar√≠a estilo con CSS Grid Layout

## C√≥mo usar CSS Grid Layout

Para empezar hay que saber que **√©sta propuesta viene desde Microsoft**, por lo que actualmente **s√≥lo es soportado en Internet Explorer 11 y 12 y el nuevo Microsoft Edge**.

Pero si somos _Chrome Addicts_, **podemos utilizarlo en Chrome** (no toda la especificaci√≥n) en nuestro navegador favorito **si activamos una determinada _flag_**, vamos a ello.

Procura tener instalada la √∫ltima versi√≥n de Chrome, y dir√≠gete a la URL `chrome://flags`

![Chrome Flags](/images/css-grid-layout-css/chrome-flags-1.png)

Dentro de las numerosas funcionalidades que nos ofrece, debemos activar la que dice **Enable experimental Web Platform features.**

Despu√©s de activarla, reiniciamos Chrome y ya tendremos habilitada esa funcionalidad.

## Ejemplo de maquetaci√≥n

Vamos a maquetar un sitio sencillo, compuesto por un _header_, un men√∫ lateral, un contenido principal y un _footer_.

El c√≥digo HTML para este ejemplo ser√≠a:

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Grid Layout</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container">
      <header class="header">
        <h2>Cabecera</h2>
      </header>
      <div class="main">
        <h2>Main</h2>
        <p>Este es el contenido principal. Lorem ipsum</p>
      </div>
      <aside class="sidebar">
        <h2>Menu</h2>
        <ul>
          <li>Opcion 1</li>
          <li>Opcion 2</li>
          <li>Opcion 3</li>
          <li>Opcion 4</li>
        </ul>
      </aside>
      <footer class="footer">
        <h2>Footer</h2>
      </footer>
    </div>
  </body>
</html>
```

Con CSS Grid Layout no importa el orden que ocupen los bloques en el HTML, pues el m√≥dulo a trav√©s de sus propiedades se encarga de colocarlo en la posici√≥n que queramos.

Pero tenemos que ser pr√°cticos y lo m√°s habitual y recomendado es escribir el HTML en el orden sem√°ntico, de cara tambi√©n a mantenibilidad, rastreo de buscadores e indexabilidad en los mismos.

Ahora vayamos al CSS, en primer lugar vamos a darle unos colores de fondo a cada bloque a fin de distinguirlos en el ejemplo

```css
.header,
.footer,
.sidebar,
.main {
  padding: 1.2em;
}

.header {
  color: white;
  background-color: #0d47a1;
}
.footer {
  background-color: #2196f3;
}
.main {
  background-color: #bbdefb;
}
.sidebar {
  background-color: #eeeeee;
}
```

Ahora pasamos a maquetar en formato de grilla o _Grid_.

Imaginemos un _Grid_ compuesto por 3 columnas y 5 filas. En un _wireframe_ ser√≠a algo as√≠:

![Wireframe de un grid layout 3x5](/images/css-grid-layout-css/2015/10/wireframe-css-grid-layout.png)

Usaremos la columna 2 y las filas 2 y 4 como espaciadores.

Para codificar esto en CSS ser√≠a de la siguiente forma:

```css
body {
  margin: 0 auto;
}

.container {
  display: grid;
  /* Grid de 3x5 */
  /* 3 columnas: 1a de 200px, 2a como margen (1%), 3a ocupa el espacio restante */
  grid-template-columns: 200px 1% 1fr;
  /* 5 filas: grid-rows: 1a, 3a y 5a ancho autom√°tico, 2a y 4a como margen de 15px */
  grid-template-rows: auto 15px auto 15px auto;
}
```

El _header_ y el _footer_ ocupar√°n todo el ancho de la fila, es decir 3 columnas. Si la especificaci√≥n estuviese completa podr√≠amos decir lo siguiente:

```css
.header,
.footer {
  grid-column-span: 3;
}
```

Pero el selector `grid-column-span` a√∫n no est√° implementado en Chrome, por lo que tenemos que hacer un peque√±o _hack_.

Diremos que los bloques empezar√°n en la columna y acaban en la columna 3+1. De esta manera:

```css
.header,
.footer {
  grid-column-start: 1;
  grid-column-end: 4;
}
```

As√≠ logramos el efecto que busc√°bamos.

El _header_ estar√° colocado en la fila 1, y el _footer_ en la √∫ltima fila, la 5. En CSS se traduce as√≠:

```css
.header {
  grid-row: 1;
}

.footer {
  grid-row: 5;
}
```

Ahora queremos que el _sidebar_ o men√∫ est√© en lo que ser√≠a la primera columna del _Grid_ y la tercera fila:

```css
.sidebar {
  grid-column: 1;
  grid-row: 3;
}
```

Y por √∫ltimo, el contenido principal encerrado en el `<div>` con la clase `main` queremos situarlo en la tercera columna y tercera fila, al lado del _sidebar_:

```css
.main {
  grid-column: 3;
  grid-row: 3;
}
```

El resultado final en nuestro navegador ser√° como el que vemos en la imagen de a continuaci√≥n

![P√°gina web con CSS Grid Layout](/images/css-grid-layout-css/2015/10/css-grid-layout.png)

## Y... ¬øEsto es Responsive?

Por supuesto, y muy f√°cil. S√≥lo hay que pensar como ser√≠a el _Grid_ en cada tama√±o de pantalla y seg√∫n la _media-query_ cambiar el orden.

En este ejemplo no he aplicado el patr√≥n _Mobile First_, pero si aplicamos _Graceful Degradation_ podemos hacer algo tal que as√≠:

```css
@media (max-width: 400px) {
  .container {
    display: block;
  }
}
```

Cuando el tama√±o de pantalla sea menor de 400px (o como m√°ximo 400px) le quitamos la propiedad `display: grid` a la clase `container` que lo engloba todo, por `display: block`.

![CSS Grid Layout Responsive](/images/css-grid-layout-css/responsive-grid-layout.png)

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=CUzfyp2gMoU)
/>

## Siguientes pasos

Como he dicho, esto no es un est√°ndar actualmente. Es un [borrador de propuesta](http://www.w3.org/TR/2015/WD-css-grid-1-20150917/), a√∫n sin implementar en muchos navegadores, pero no est√° de m√°s conocer que se est√° _cociendo_ por ah√≠.

Si quieres seguir profundizando en este tema, esta web es muy completa: [Grid by Example](http://gridbyexample.com/examples/)

</article>

---

<article slug="angular-js-directivas-como-componentes" date="2015-11-17" url="https://carlosazaustre.es/blog/angular-js-directivas-como-componentes">

# C√≥mo programar orientado a Componentes con Directivas de Angular 1.x

**Fecha:** 2015-11-17
En este art√≠culo vamos a ver como desarrollar nuestras aplicaciones web en Angular JS siguiendo varios consejos de **buenas pr√°cticas** y c√≥mo **utilizar directivas para componentizar** nuestra web.

## Introducci√≥n

Normalmente si sigues el tutorial de la [p√°gina de AngularJS](https://docs.angularjs.org/tutorial) o los cursos online de [CodeSchool](https://www.codeschool.com/courses/shaping-up-with-angular-js) y [CodeAcademy](https://www.codecademy.com/learn/learn-angularjs) para aprender a usar AngularJS, encontrar√°s que todos los ejemplos los hacen utilizando `$scope`.

`$scope` es un servicio de AngularJS que nos permite comunicar la vista (HTML) con el c√≥digo de controlador (JavaScript).

El problema es que en **la nueva versi√≥n de Angular (La 2.0) el `$scope` ya no existe** y hay varias gu√≠as de **buenas pr√°cticas** d√≥nde nos recomiendan no utilizarlo y emplear en su lugar el objeto `this` en el controlador y la directiva `controller as` para utilizar un alias en la vista.

Desde hace tiempo, a la hora de programar en AngularJS utilizo estas buenas pr√°cticas. [En concreto las de **John Papa**](https://github.com/johnpapa/angular-styleguide), un Google Developer Expert. Si las sigues, **tu c√≥digo de AngularJS ser√° m√°s limpio, legible y mantenible**. Adem√°s lo tendr√°s preparado para cuando quieras dar el salto a Angular 2.0, ya que la nueva versi√≥n sigue esta metodolog√≠a en cierta medida.

Otra [buena gu√≠a de buenas pr√°cticas en AngularJS es la de **Todd Motto**](https://github.com/toddmotto/angularjs-styleguide), otro Google Developer Expert. Ambas son grandes gu√≠as y pueden complementarse.

## Forma tradicional

Imaginemos una peque√±a aplicaci√≥n web con AngularJS que pinte una lista de productos. Simplemente tenemos nuestro `index.html` y nuestro c√≥digo javascript en `app.js` donde estar√° el controlador de la vista y un servicio que simula la entrega de los datos.

Siguiendo la forma tradicional, utilizamos `$scope` para acoplar la vista al c√≥digo.

Esto ser√≠a el HTML

```html
<div ng-app="myApp" ng-controller="MyController">
  <h1>Listado de Productos</h1>
  <ul>
    <li ng-repeat="producto in productos">
      <strong>{{ producto.titulo }}</strong>: {{ producto.precio | currency }}
    </li>
  </ul>
</div>
```

Y esto nuestro fichero `app.js`

```javascript
angular
  .module("myApp", [])
  .controller("MyController", MyController)
  .service("MyService", MyService);

function MyController($scope, MyService) {
  $scope.productos = MyService.getData();
}

function MyService() {
  return {
    getData: getData,
  };

  function getData() {
    var datos = [
      { titulo: "Producto 1", precio: 2 },
      { titulo: "Producto 2", precio: 1.5 },
      { titulo: "Producto 3", precio: 4.2 },
      { titulo: "Producto 4", precio: 3 },
      { titulo: "Producto 5", precio: 2.5 },
    ];
    return datos;
  }
}
```

## Prescindiendo de $scope

La **alternativa a `$scope` es utilizar un alias en el controlador** con `Controller As` y emplear el objeto `this` en el controlador para acceder a los elementos de la vista.

Este ser√≠a el cambio en la vista HTML:

```html
<div ng-app="myApp" ng-controller="MyController as my">
  <h1>Listado de Productos</h1>
  <ul>
    <li ng-repeat="producto in my.productos">
      <strong>{{ producto.titulo }}</strong>: {{ producto.precio | currency }}
    </li>
  </ul>
</div>
```

Y en el c√≥digo de `app.js` vemos el cambio de `$scope` por `this`.

```javascript
angular
  .module("myApp", [])
  .controller("MyController", MyController)
  .service("MyService", MyService);

function MyController(MyService) {
  this.productos = MyService.getData();
}

function MyService() {
  return {
    getData: getData,
  };

  function getData() {
    var datos = [
      { titulo: "Producto 1", precio: 2 },
      { titulo: "Producto 2", precio: 1.5 },
      { titulo: "Producto 3", precio: 4.2 },
      { titulo: "Producto 4", precio: 3 },
      { titulo: "Producto 5", precio: 2.5 },
    ];
    return datos;
  }
}
```

Esto es una buena pr√°ctica porque nos permite tener controladores anidados y que no entren en conflicto.

Adem√°s **el c√≥digo es m√°s legible** y te prepara para poder usar los **controladores como [clases de ECMAScript 6](/ecmascript6)** que ser√° lo que utilicemos en el futuro con Angular 2.0.

### Usando rutas y vistas

Cuando nuestra aplicaci√≥n se va volviendo m√°s compleja necesitamos echar mano de rutas. Para ello en nuestro HTML debemos a√±adir la directiva `ng-view` para indicar a Angular d√≥nde se insertar√°n las vistas asociadas a las rutas.

Aparte debemos incluir entre los scripts la librer√≠a de `angular-route.js` ya que √©ste m√≥dulo no forma parte del core de Angular.

```html
<div ng-app="myApp">
  <div ng-view></div>
</div>
```

En nuestro c√≥digo JavaScript debemos incluir el m√≥dulo `ngRoute` dentro de las dependencias de nuestro m√≥dulo principal `myApp`, para poder acceder al servicio `$routeProvider`

Las rutas se configuran dentro del `config` de m√≥dulo, y cada ruta lleva su URL al template HTML que se cargar√° con determinada ruta, su controlador y su alias.

El c√≥digo para utilizar el controlador y plantilla que est√°bamos usando hasta ahora, pero con rutas, ser√≠a el siguiente:

```javascript
angular
  .module("myApp", ["ngRoute"])
  .config(appConfig)
  .controller("MyController", MyController)
  .service("MyService", MyService);

function appConfig($routeProvider) {
  $routeProvider.when("/", {
    templateUrl: "tpl/listado.html",
    controller: "MyController",
    controllerAs: "my",
  });
}

function MyController(MyService) {
  this.productos = MyService.getData();
}

function MyService() {
  return {
    getData: getData,
  };

  function getData() {
    var datos = [
      { titulo: "Producto 1", precio: 2 },
      { titulo: "Producto 2", precio: 1.5 },
      { titulo: "Producto 3", precio: 4.2 },
      { titulo: "Producto 4", precio: 3 },
      { titulo: "Producto 5", precio: 2.5 },
    ];
    return datos;
  }
}
```

Y el HTML de la plantilla, ser√≠a tal que as√≠ en un fichero `tpl/listado.html` como hemos definido en el `$routeProvider`.

```markup
<h1>Listado de Productos</h1>
<ul>
  <li ng-repeat="producto in my.productos">
    <strong>{{ producto.titulo }}</strong>: {{ producto.precio | currency }}
  </li>
</ul>
```

## Creando una directiva

En Angular tenemos directivas, que actualmente son lo que conocemos como WebComponents, pero en el momento que se cre√≥ Angular esto a√∫n no exist√≠a, es por ello que **en Angular 2 se utilizar√°n los WebComponents de forma nativa para ello**.

Creando directivas, podemos reutilizar controladores y vistas, creando de esta forma componentes reutilizables. Es el m√©todo de **programaci√≥n orientada a componentes** que siguen librer√≠as como Polymer o [React](/empezando-con-react-js-y-ecmascript-6/)

Con AngularJS podemos seguir esta metodolog√≠a utilizando directivas.

Si asociamos el controlador anterior y el HTML de la plantilla en una directiva, el c√≥digo ser√≠a el siguiente:

```javascript
function miDirectiva() {
  return {
    scope: {},
    templateUrl: "tpl/listado.html",
    controller: "MyController",
    controllerAs: "my",
  };
}
```

De esta manera, tendr√≠amos una directiva o tag HTML as√≠: `<mi-directiva></mi-directiva>`, que nada nos impide utilizarlo en la configuraci√≥n de las rutas en `$routeProvider` con la propiedad `template`, quedando m√°s legible esta configuraci√≥n.

```javascript
function appConfig($routeProvider) {
  $routeProvider.when("/", {
    template: "<mi-directiva></mi-directiva>",
  });
}
```

Esta forma de utilizar las directivas en rutas [la utiliza mucho el equipo de ingenier√≠a de PayPal como comentan en **√©ste** art√≠culo.](https://medium.com/@bluepnume/sane-scalable-angular-apps-are-tricky-but-not-impossible-lessons-learned-from-paypal-checkout-c5320558d4ef)

## Simplificando la directiva como componente

Aunque hemos creado una directiva seguimos utilizando una plantilla HTML externa y un controlador.

En las directivas de Angular podemos englobar todo dentro de la misma funci√≥n utilizando los atributos `controller`, `controller as` y `template`.

El `app.js` complto con la configuraci√≥n, el servicio y la directiva ser√≠a el siguiente:

```javascript
angular
  .module("myApp", ["ngRoute"])
  .config(appConfig)
  .service("MyService", MyService)
  .directive("miDirectiva", miDirectiva);

function appConfig($routeProvider) {
  $routeProvider.when("/", {
    template: "<mi-directiva></mi-directiva>",
  });
}

function miDirectiva() {
  return {
    scope: {},
    controller: function (MyService) {
      this.productos = MyService.getData();
    },
    controllerAs: "vm",
    template: [
      "<h1>Listado de Productos</h1>",
      "<ul>",
      '<li ng-repeat="producto in vm.productos">',
      "<strong>{{ producto.titulo }}</strong>: {{ producto.precio | currency }}",
      "</li>",
      "</ul>",
    ].join(""),
  };
}

function MyService() {
  return {
    getData: getData,
  };

  function getData() {
    var datos = [
      { titulo: "Producto 1", precio: 2 },
      { titulo: "Producto 2", precio: 1.5 },
      { titulo: "Producto 3", precio: 4.2 },
      { titulo: "Producto 4", precio: 3 },
      { titulo: "Producto 5", precio: 2.5 },
    ];
    return datos;
  }
}
```

Trabajando de esta manera me recuerda a la [forma de trabajar con React](/ejemplo-de-aplicacion-con-react-js-en-ecmascript-6/) cuando empezamos a armar nuestras aplicaciones.

## Anidando directivas y usando atributos para pasar datos

Vale, esto est√° muy bien pero que pasa si quieros usar directivas dentro de otras, y poder pasarle par√°metros de una a otra.

Muy sencillo, imaginemos que `<mi-directiva>` pintar√° una lista de componentes `<mi-item>` que ahora definiremos, pero estos `<mi-item>` tienen un atributo `data` donde le pasamos el objeto que queramos que pinte.

Nuestra directiva `<mi-directiva>` ser√° as√≠:

```javascript
function miDirectiva() {
  return {
    scope: {},
    controller: function (MyService) {
      this.productos = MyService.getData();
    },
    controllerAs: "vm",
    template: [
      "<h1>Listado de Productos</h1>",
      "<ul>",
      '<mi-item ng-repeat="producto in vm.productos" data="producto">',
      "</mi-item>",
      "</ul>",
    ].join(""),
  };
}
```

Ahora debemos implementar `<mi-item>` teniendo en cuenta el atributo data.

√âsta directiva no necesita controlador porque ya le pasamos los datos dentro del `scope` interno.

Para [**pasar datos entre directivas** ya escrib√≠ un art√≠culo anterior](/como-pasar-variables-como-atributos-en-directivas-de-angularjs/) que te invito a que le des un vistazo para saber cu√°ndo utilizar `=`, `@` o `&`. En este caso asocio el atributo `data` con `=` porque no le paso los datos desde una expresi√≥n con doble llave `{{ ... }}`, si no como variable.

Dentro del template de la directiva puedo usar ese `data` para acceder a los datos.

```javascript
function miItem() {
  return {
    scope: {
      data: "=",
    },
    template: [
      "<li>",
      "<strong>{{ data.titulo }}</strong>: ",
      "{{ data.precio | currency }}",
      "</li>",
    ].join(""),
  };
}
```

El c√≥digo completo del `app.js` con las dos directivas ser√°:

```javascript
angular
  .module("myApp", ["ngRoute"])
  .config(appConfig)
  .service("MyService", MyService)
  .directive("miItem", miItem)
  .directive("miDirectiva", miDirectiva);

function appConfig($routeProvider) {
  $routeProvider.when("/", {
    template: "<mi-directiva></mi-directiva>",
  });
}

function miDirectiva() {
  return {
    scope: {},
    controller: function (MyService) {
      this.productos = MyService.getData();
    },
    controllerAs: "vm",
    template: [
      "<h1>Listado de Productos</h1>",
      "<ul>",
      '<mi-item ng-repeat="producto in vm.productos" data="producto">',
      "</mi-item>",
      "</ul>",
    ].join(""),
  };
}

function miItem() {
  return {
    scope: {
      data: "=",
    },
    template: [
      "<li>",
      "<strong>{{ data.titulo }}</strong>: ",
      "{{ data.precio | currency }}",
      "</li>",
    ].join(""),
  };
}

function MyService() {
  return {
    getData: getData,
  };

  function getData() {
    var datos = [
      { titulo: "Producto 1", precio: 2 },
      { titulo: "Producto 2", precio: 1.5 },
      { titulo: "Producto 3", precio: 4.2 },
      { titulo: "Producto 4", precio: 3 },
      { titulo: "Producto 5", precio: 2.5 },
    ];
    return datos;
  }
}
```

## Conclusi√≥n

¬øPor qu√© seguimos esta forma de programar?

En las pr√≥ximas versiones de Angular 1.x (la 1.5 y 1.6 al menos) tendremos novedades que nos permitir√°n adaptarnos a la versi√≥n 2.

Una de ellas es [el nuevo router](/-el-nuevo-router-de-angular-ngnewrouter/). Actualmente est√° como una librer√≠a aparte que surgi√≥ cuando la versi√≥n 1.4, pero se prev√© que se incluya en la versi√≥n 1.5 (actualmente en beta)

Este nuevo router funciona orientado a componentes, por lo que tendr√≠amos un c√≥digo de configuraci√≥n similar a √©ste:

```
angular
  .module('myApp', ['ngNewRouter'])
  .controller('AppController', AppController);

function AppController($router) {
  $router.config([
    { path: '/', component: 'miDirectiva' }
  ])
}
```

Y tambi√©n en Angular 1.5 tendremos el m√©todo `component` que sustituye de alguna forma a `directive` como vemos en [√©ste art√≠culo de Todd Motto](http://toddmotto.com/)

```javascript
// En forma de directiva
angular.module("myApp").directive("miDirectiva", miDirectiva);

function miDirectiva() {
  return {
    scope: {},
    controller: function (MyService) {
      this.productos = MyService.getData();
    },
    controllerAs: "vm",
    template: [
      "<h1>Listado de Productos</h1>",
      "<ul>",
      '<mi-item ng-repeat="producto in vm.productos" data="producto">',
      "</mi-item>",
      "</ul>",
    ].join(""),
  };
}
```

```javascript
// En forma de componente
angular.module("myApp").component("miDirectiva", {
  controller: function (MyService) {
    this.productos = MyService.getData();
  },
  template: [
    "<h1>Listado de Productos</h1>",
    "<ul>",
    '<mi-item ng-repeat="producto in vm.productos" data="producto">',
    "</mi-item>",
    "</ul>",
  ].join(""),
});
```

De momento, esto √∫ltimo est√° en fase beta y a√∫n no funciona correctamente, pero ser√°n las pr√≥ximas novedades.

Por tanto, **programar orientado a directivas (o componentes)** aparte de ser una buena pr√°ctica nos **permite prepararnos para las nuevas versiones** de AngularJS (1.5 y 1.6 al menos) y la nueva 2.0, adem√°s de utilizar la nueva metodolog√≠a de **componentizar nuestras aplicaciones**.

</article>

---

<article slug="angular-2-rutas-y-componentes" date="2015-11-11" url="https://carlosazaustre.es/blog/angular-2-rutas-y-componentes">

# Angular 2: Rutas y Componentes

**Fecha:** 2015-11-11
Continuando con el tutorial pasado, donde vimos los [primeros pasos para trabajar con Angular 2](/angular-2-primeros-pasos/), en este art√≠culo veremos c√≥mo implementar rutas basadas en componentes.

Lo primero que necesitamos hacer es modificar el fichero `app.js` para a√±adirle la configuraci√≥n de rutas. Vamos a importar los m√≥dulos correspondientes de `Angular2/Router`

```javascript
import {
  Router, RouteConfig, RouteParams,
  LocationStrategy, HashLocationStrategy,
  ROUTER_PROVIDERS, ROUTER_DIRECTIVES, ROUTER_PRIMARY_COMPONENT
} from 'angular2/router'; */
```

No necesitamos instalar una librer√≠a adicional, el m√≥dulo `router` va incluido en la librer√≠a de `angular2`, pero si necesitamos importar las directivas y componentes que vamos a emplear:

- **RouteConfig** Es un decorador que utilizaremos de la misma forma que `@Component` o `@View` para ayudarnos a configurar las rutas.

- **ROUTE_PROVIDERS** son una serie de directivas que utilizaremos a la hora de lanzar el `bootstrap` de nuestra App.

- **ROUTE_DIRECTIVES**, funciona de la misma manera, Contiene directivas como `RouterLink` y `RouterOutlet`. Las emplearemos en el `template` a la hora de _pintar_ los links.

- **ROUTE \_PRIMARY \_COMPONENT** Se utiliza para enlazar el componente de alto orden encargado del enrutado.

- **LocationStrategy** y **HashLocationStrategy** funcionan de manera similar al `LocationProvider` de Angular 1.x

El componente que se encargar√° del enrutado ser√° el principal que creamos [en el art√≠culo anterior](/angular-2-primeros-pasos/), el `<hello-app>`.

Para ello vamos a modificar la clase `HelloApp` cambi√°ndole el `template` y a√±adiendo la configuraci√≥n de rutas:

```javascript
@Component({
  selector: 'hello-app'
})
@View({
  directives: [ROUTER_DIRECTIVES],
  template: `
    <ul>
      <li><a [router-link]="['/']">Home</a></li>
      <li><a [router-link]="['/About']">About</a></li>
    </ul>
    <router-outlet></router-outlet>
  `
})
@RouteConfig([
  { path: '/', component: HelloComponent, as: 'Hello' },
  { path: '/about, component: AboutComponent, as: 'About'}
])
class HelloApp {

}
```

¬øQu√© hemos hecho aqu√≠?.

Hemos a√±adido al decorador `@View` el atributo `directives` y le hemos incluido `ROUTER_DIRECTIVES`. De esta forma en el template podemos usar `Router-Link` para crear enlaces con Angular 2 y la directiva `router-outlet` cuyo funcionamiento es similar al que ten√≠a `ng-view` o `ui-view` en Angular 1.x.

En ese elemento se insertar√°n las vistas de la aplicaci√≥n.

`@RouteConfig` por su parte, nos permite configurar las rutas en la nueva versi√≥n de Angular.

A trav√©s de un array de objetos indicamos las rutas, con un `path` para indicar la URL, `component` para indicar el componente asociado a esa vista o URL, y `as` que viene a funcionar como el antiguo `ControllerAs` de Angular 1.x

Tambi√©n cambia la funci√≥n `bootstrap`. En el ejemplo anterior tan s√≥lo le indic√°bamos la clase de arranque, pero ahora debemos pasarle las directivas que estamos utilizando:

```javascript
bootstrap(HelloApp, [
  ROUTER_PROVIDERS,
  provide(LocationStrategy, { useClass: HashLocationStrategy }),
  provide(ROUTER_PRIMARY_COMPONENT, { useValue: HelloApp }),
]);
```

Le inyectamos `ROUTE_PROVIDERS` para que funcione todo el sistema de rutas.

Le proveemos `LocationStrategy` para el tema del hash en las rutas.

Por √∫ltimo `ROUTER_PRIMARY_COMPONENT` para indicar cual es el componente principal que se encarga del enrutado.

El fichero `app.js` completo es este:

```javascript
import 'zone.js/lib/browser/zone-microtask';
import 'reflect-metadata';
import 'babel-core/polyfill';

import {
  Component, View,
  provide, bootstrap
} from 'angular2/angular2';

import {
  Router, RouteConfig,
  LocationStrategy, HashLocationStrategy,
  ROUTER_PROVIDERS, ROUTER_DIRECTIVES, ROUTER_PRIMARY_COMPONENT
} from 'angular2/router';

import { HelloComponent } from './hello.component';
import { AboutComponent } from './about.component';

@Component({
  selector: 'hello-app'
})
@View({
  directives: [ROUTER_DIRECTIVES],
  template: `
    <ul>
      <li><a [router-link]="['/']">Home</a></li>
      <li><a [router-link]="['/About']">About</a></li>
    </ul>
    <router-outlet></router-outlet>
  `
})
@RouteConfig([
  { path: '/', component: HelloComponent, as: 'Hello' },
  { path: '/about, component: AboutComponent, as: 'About'}
])
class HelloApp {

}

bootstrap(HelloApp, [
  ROUTER_PROVIDERS,
  provide(LocationStrategy, { useClass: HashLocationStrategy }),
  provide(ROUTER_PRIMARY_COMPONENT, { useValue: HelloApp })
]);
```

## Usando par√°metros de ruta

Para la ruta principal empleamos el componente que ya vimos [en el pasado tutorial](/angular-2-primeros-pasos/), pero para la URL `/about` vamos a emplear uno nuevo que ser√° el fichero `about.component.js`:

Con este componente vamos a _jugar_ un poco m√°s y para ello vamos a utilizar par√°metros de ruta con `RouteParams`, para ello tendremos que modificar un poco `app.js`, pero antes vayamos con este componente:

```javascript
import { Component, View } from "angular2/angular2";
import { RouteParams } from "angular2/router";

@Component({
  selector: "about-component",
})
@View({
  template: "<p>{{ message }}</p>",
})
export class AboutComponent {
  constructor(routeParams: RouteParams) {
    this.message = `Hola, ${routeParams.get("nombre")}!`;
  }
}
```

¬øQu√© hemos hecho aqu√≠?

Simplemente utilizamos la directiva `RouteParams` para obtener par√°metros desde la URL que llama a este componente.

Ese par√°metro lo llevar√° al mensaje que se _pinta_ en el HTML con `routeParams.get('nombre')` siendo `nombre` el par√°metro que tenemos que definir en `app.js`, donde hemos configurado las rutas.

Volvemos a `app.js` y modificamos el `@RouteConfig` de √©sta manera:

```javascript
@RouteConfig([
  { path: '/', component: HelloComponent, as: 'Hello' },
  { path: '/about/:nombre', component: AboutComponent, as: 'About'}
])
```

Y tambi√©n el `template` dentro de `@View` para que las rutas que contienen par√°metros funcionen correctamente:

```javascript
@View({
  directives: [ROUTER_DIRECTIVES],
  template: `
    <ul>
      <li><a [router-link]="['/Hello']">Home</a></li>
      <li><a [router-link]="['/About', {nombre: 'Carlos'}]">About</a></li>
    </ul>
    <router-outlet></router-outlet>
  `
})
```

Le ponemos por defecto un valor de par√°metro, en este caso `Carlos`

De esta manera, si vamos a la URL `http://localhost:8080` tendremos esto:

![Ejemplo 1](/images/angular-2-rutas-y-componentes/angular2-router-ejemplo-1.png)

Si pulsamos en el link `About` nos llevar√° a la URL `http://localhost:8080/about/carlos` y veremos esto:

![Ejemplo 2](/images/angular-2-rutas-y-componentes/angular2-router-ejemplo-2.png)

Y si por √∫ltimo cambiamos la URL por `http://localhost:8080/about/pepe` tendremos lo siguiente

![Ejemplo 3](/images/angular-2-rutas-y-componentes/angular2-router-ejemplo-3.png)

</article>

---

<article slug="angular-2-primeros-pasos" date="2015-11-09" url="https://carlosazaustre.es/blog/angular-2-primeros-pasos">

# Angular 2. Primeros pasos empleando Browserify y Babel

**Fecha:** 2015-11-09
El pasado viernes [fu√≠ invitado como ponente al #DevFestCordoba](https://cordoba.gdgdevfest.com/speakers/) organizado por el [GDG de C√≥rdoba](https://twitter.com/gdgcordobaESP) (Espa√±a). Mi charla fue sobre Angular 2. Qu√© trae nuevo y qu√© deja atr√°s.

![Angular 2 basado en ECMAScript6 y WebComponents](/images/angular-2-primeros-pasos/angular-2-ecmascript6-webcomponents.png)

En la charla compart√≠ mi experiencia probando la versi√≥n Alpha de Angular2, y como a trav√©s de la documentaci√≥n que existe hoy en d√≠a y tutoriales que he ido buscando, lograr hacer funcionar un entorno de trabajo en el que no use TypeScript ni System.js

En este tutorial te cuento como preparar tu entorno de trabajo con un **Gulpfile** [utilizando **browserify**](/browserify-desarrollando-tu-frontend-como-en-node-js/), **babelify** y algunos polifylls, para poder iniciarte en Angular2 sin mucha complicaci√≥n.

![Trabajando con Angular 2 y las herramientas Browserify y Babel](/images/angular-2-primeros-pasos/angular-2-browserify-y-babel.png)

## Instalando dependencias

El primer paso es crear nuestro proyecto de `npm` para instalar a continuaci√≥n las dependencias.

> **Atenci√≥n**

> A√∫n no he conseguido que el proyecto funcione con las versiones 12.x de `browserify` ni con la 6.x de `babel`, por lo que aseg√∫rate de que instalas las que te indico en este art√≠culo para que te funcione correctamente.

Instalamos las siguientes dependencias de desarrollo:

- **Babel** nos sirve para traducir [ECMAScript6](/ecmascript6) a ECMAScript5 que es el que entienden hoy en d√≠a los navegadores.

- **Babel-plugin-angular2-annotations** es un plugin de Babel que nos permite usar los decoradores que trae Angular, basados en ECMAScript7 (Qu√© a√∫n no son un est√°ndar pero lo ser√°n).

- **Browserify** nos permite usar m√≥dulos en el Frontend como har√≠amos en Node.js y junto con **Babelify** realizamos una transformaci√≥n para poder usar los `import` nativos de ES6.

- **Vinyl-buffer** y **Vinyl-source-stream** nos permiten trabajar con el fichero resultante de Browserify.

- **Watchify** Nos permite reconstruir el fichero resultante de Browserify cuando hagamos cambios en nuestro c√≥digo fuente de una manera √°gil.

- **Gulp** Es el gestor de tareas que utilizaremos para el build y el watch de archivos

- **http-server** es un servidor web de desarrollo para probar nuestro proyecto en local.

Los comandos ser√≠an los siguientes:

```shell
$ npm init -y
$ npm i -g babel@5.8.23
$ npm i -D babel-core@5.8.25
$ npm i -D babel-plugin-angular2-annotations@2.0.1
$ npm i -D babelify@6.3.0
$ npm i -D browserify@11.0.1
$ npm i -D vinyl-buffer@1.0.0
$ npm i -D vinyl-source-stream@1.1.0
$ npm i -D watchify@3.6.0
$ npm i -D gulp@3.9.0
$ npm i -D http-server@0.8.5
```

Las dependencias del proyecto ser√°n las siguientes:

- **Angular2** utilizaremos la versi√≥n `alpha.44`

- **reflect-metadata** Es un polifyll que nos permite usar los decoradores de ES7. Si no lo incluimos nos dar√° un error en consola y no se ejecutar√° el proyecto.

- **zone.js** Implementa _Zones_ en JavaScript. Una
  _Zone_ es un contexto de ejecuci√≥n que persiste a trav√©s de tareas as√≠ncronas. Si no lo incluimos, las rutas por ejemplo no Funcionar√°n.

Los comandos para instalar las dependencias son:

```shell
$ npm i -S angular2@2.0.0-alpha.44
$ npm i -S reflect-metadata@0.1.0
$ npm i -S zone.js@0.5.8
```

## Preparando nuestro Gulpfile

El siguiente paso es [crear el fichero Gulpfile](/automatizando-tu-flujo-de-trabajo-en-el-frontend-con-gulpjs/) que nos permita automatizar estas tareas.

Si tenemos instalado Babel de forma global, podemos emplear sintaxis de ECMAScript6 en el fichero de gulp si lo llamamos `gulpfile.babel.js`.

El contenido del fichero ser√° el siguiente:

```javascript
// -- Gulp Plugins ------------------------------------
import gulp from 'gulp';
import source from 'vinyl-source-stream';
import buffer from 'vinyl-buffer';
import browserify from 'browserify';
import watchify from 'watchify';
import babelify from 'babelify';

// -- Helper functions --------------------------------
function bundle(b) {
  return b.bundle()
    .on('error', (err) => console.log(err);)
    .pipe(source('app.js'))
    .pipe(buffer())
    .pipe(gulp.dest('./public'));
}

// -- Gulp Tasks --------------------------------------
gulp.task('copy', () => {
  return gulp.src('./src/index.html')
    .pipe(gulp.dest('./public'));
});

gulp.task('build', ['copy'], () => {
  const b = browserify('./src/app.js')
    .transform(babelify);

  return bundle(b);
});

gulp.task('watch', () => {
  const b = browserify('./src/app.js', watchify.args)
    .transform(babelify);

  const w = watchify(b)
    .on('update', () => bundle(w))
    .on('log', gutil.log);

  return bundle(w);
});

gulp.task('default', ['copy', 'watch']);

```

√önicamente tenemos dos tareas a destacar, `build` que compila el c√≥digo ES6 con decoradores ES7 que tengamos en la carpeta `src/app.js` y le aplica la transformaci√≥n con `babelify` y la deja en el directorio `/public` que ser√° el de producci√≥n.

La tarea `watch` vigila los cambios que se hagan en `app.js` y dispara de nuevo `browserify` para a√±ad√≠rselos.

Estas tareas y el servidor de desarrollo local, los vamos a incluir en el objeto `scripts` del `package.json` para llamarlas con el comando `npm`:

```javascript
...
"scripts": {
  "start": "http-server public",
  "dev": "gulp"
}
...
```

> **Atenci√≥n**

> Cuando usamos `babelify`, si no le indicamos nada, buscar√° un archivo de nombre `.babelrc` con la configuraci√≥n de plugins y nivel de compilado que queremos.
> √âste es el que has de usar:

```javascript

  "optional": ["es7.decorators"],
  "plugins": [
    "angular2-annotations"
  ]
}
```

> De esta manera le indicamos que trate los Decoradores de ES7 y utilice el plugin `Babel-plugin-angular2-annotations`.

As√≠ para ejecutar el servidor, corremos `npm start` y para ejecutar gulp y que vigile los cambios: `npm run dev`.

## El index.html de la SPA en Angular 2.

Creamos un fichero `index.html` que ser√° la √∫nica p√°gina de √©ste ejemplo de SPA con Angular2. √önicamente incluimos el fichero `app.js` en los scripts ya que las librer√≠as se est√°n incluyendo en ese fichero gracias a browserify:

```html
<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Angular2</title>
  </head>
  <body>
    <h1>Primeros pasos con Angular2 (con Babel y Browserify)</h1>
    <hello-app>Cargando...</hello-app>

    <script src="app.js"></script>
  </body>
</html>
```

A destacar el elemento `<hello-app>`. Es un componente que crearemos a continuaci√≥n y ser√° el que lleve toda la aplicaci√≥n.

El desarrollo con Angular2 [es muy parecido a React, en plan de que se plantea un desarrollo orientado a componentes](/ejemplo-de-aplicacion-con-react-js-en-ecmascript-6/) en lugar de vistas con muchas funcionalidades.

Tambi√©n se elimina la directiva `ng-app`. Ahora la aplicaci√≥n se cargar√° por el m√©todo `bootstrap` que ahora veremos.

## Funcionalidad de nuestra aplicaci√≥n en App.js

Creamos a continuaci√≥n el fichero `app.js` que ser√° el punto de arranque de nuestra aplicaci√≥n. En el ir√° una clase ES6 para el componente `<hello-app>`, utilizando nomenclatura _CamelCase_:

```javascript
class HelloApp {}
```

Sobre esta clase aplicamos los decoradores `@Component` y `@View` donde le indicamos el nombre del selector, la plantilla HTML, etc...

```javascript
@Component({
  selector: "hello-app",
})
@View({
  directives: [HelloComponent],
  template: `
    <div>
      <hello-component></hello-component>
    </div>
  `,
})
class HelloApp {}
```

El `selector` de `@Component` es el nombre que tendr√° el componente en el HTML como las antiguas directivas de Angular 1.x.

Dentro de `@View` tenemos el atributo `template` donde colocamos el marcado HTML que sustituye al componente, y como vamos a usar uno propio que enseguida crearemos, debemos inyectarlo como dependencia en el atributo `directives`.

Por √∫ltimo nos queda llamar al m√©todo `bootstrap` con el componente global que arrancar√° nuestra aplicaci√≥n y le indica el punto de entrada:

```javascript
bootstrap(HelloApp, []);
```

Para que el m√©todo `bootstrap`, los decoradores `@Component` y `@View` y el componente `HelloComponent` que ahora implementaremos funcionen, debemos importarlos al inicio:

```javascript
import { Component, View, bootstrap } from "angular2/angular2";
import { HelloComponent } from "./hello.component";
```

El fichero `app.js` completo, incluyendo los polyfills de los que hablamos al inicio ser√≠a as√≠:

```javascript
import "zone.js/lib/browser/zone-microtask";
import "reflect-metadata";

import { Component, View, bootstrap } from "angular2/angular2";
import { HelloComponent } from "./hello.component";

@Component({
  selector: "hello-app",
})
@View({
  directives: [HelloComponent],
  template: `
    <div>
      <hello-component></hello-component>
    </div>
  `,
})
class HelloApp {}

bootstrap(HelloApp, []);
```

## Creando un nuevo componente en Angular 2

En un fichero separado (`hello.component.js`), vamos a crear un nuevo componente: `HelloComponent` que es el que importamos desde `app.js`.

Para ello seguimos la misma secuencia que al crear el componente `HelloApp`, salvo que esta vez exportaremos la clase para que pueda ser importada:

```javascript
export class HelloComponent {}
```

De la misma manera, le a√±adimos los decoradores de Component y View. Esta vez no usamos otra directiva, por tanto no incluimos ninguna dependencia:

```javascript
@Component({
  selector: "hello-component",
})
@View({
  template: `<p>{{ message }}</p>`,
})
export class HelloComponent {}
```

El HTML que engloba este Component es un elemento p√°rrafo `<p>` con un _binding_ a una variable `message`.

Para poder modificar esa variable debemos hacerlo desde la clase `HelloComponent` en su constructor. EL fichero final con los m√≥dulos necesarios ser√≠a el siguiente:

```javascript
import { Component, View } from "angular2/angular2";

@Component({
  selector: "hello-component",
})
@View({
  template: `<p>{{ message }}</p>`,
})
export class HelloComponent {
  constructor() {
    this.message = "Hola, Angular 2!";
  }
}
```

## Probando en el navegador

Una vez completado el c√≥digo de este ejemplo, si ejecutamos en el terminal `gulp` o `npm run dev` para hacer el build y posteriormente `npm start` para iniciar el servidor web de desarrollo, nos dirigimos a `http://localhost:8080` en el navegador y veremos algo como √©sto:

![Localhost con aplicaci√≥n en Angular 2](/images/angular-2-primeros-pasos/tutorial-angular-2.png)

## Pr√≥ximos pasos

En siguientes entradas veremos [c√≥mo incluir rutas y eventos](/angular-2-rutas-y-componentes/) para conocer c√≥mo cambian con respecto a Angular 1.x.

</article>

---

<article slug="los-5-patrones-del-responsive-design" date="2015-11-04" url="https://carlosazaustre.es/blog/los-5-patrones-del-responsive-design">

# Los 5 patrones del Responsive Design con Flexbox

**Fecha:** 2015-11-04
_Responsive Design_ significa adaptar tu dise√±o al tama√±o de pantalla del dispositivo. Puedes hacerlo como tu quieras, pero existen 5 patrones ya definidos que te ayudar√°n en tu dise√±o. Sus nombre son:

- Tiny Tweaks
- Mostly Fluid
- Column Drop
- Layout Shifter
- Off Canvas

## Tiny Tweaks

Es el patr√≥n m√°s simple y sencillo de implementar de todos. Se basa en una s√≥la columna para el contenido.

![Patr√≥n Tiny Tweaks](/images/los-5-patrones-del-responsive-design/tiny-tweaks.png)

Sus cambios son b√°sicamente que dependiendo del tama√±o de pantalla, se ampl√≠an los espaciados y el tama√±o de fuente.

Es muy utilizado en sitios con mucho contenido escrito, as√≠ mejoran la experiencia de lectura.

Implementar este patr√≥n en HTML y CSS ser√≠a as√≠:

```html
<!DOCTYPE html>
<html>
  <head>
    <title>Tiny Tweaks</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <nav>Navbar</nav>
    <section class="columna1">Secci√≥n 1</section>
  </body>
</html>
```

```css
/* Tiny Tweaks */
.columna1 {
  padding: 10px;
  width: 100%;
}

@media (min-width: 600px) {
  .columna1 {
    padding: 20px;
    font-size: 1.5em;
  }
}

@media (min-width: 800px) {
  .columna1 {
    padding: 40px;
    font-size: 2em;
  }
}
```

## Mostly Fluid

Este patr√≥n consiste en tener una grilla o _Grid_ de tama√±o flexible.

![Patr√≥n Mostly Fluid](/images/los-5-patrones-del-responsive-design/mostly-fluid.png)

Cuando estamos en un smartphone todo forma una √∫nica columna, y en varias filas quedan colocados los distintos bloques.

Seg√∫n vaya creciendo la pantalla, los distintos bloques se agrupan ocupando toda la pantalla disponible.

En pantallas m√°s grandes, el dise√±o es el mismo pero queda agrupado dentro de un contenedor que queda centrado en la p√°gina con un tama√±o fijo de ancho.

Este patr√≥n, implementado en HTML y CSS utilizando **Flexbox**, ser√≠a as√≠:

```html
<!DOCTYPE html>
<html>
  <head>
    <title>Mostly Fluid</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <nav>Navbar</nav>
    <div class="container">
      <section class="columna1">Secci√≥n 1</section>
      <section class="columna2">Secci√≥n 2</section>
      <section class="columna3">Secci√≥n 3</section>
      <section class="columna4">Secci√≥n 4</section>
      <section class="columna5">Secci√≥n 5</section>
    </div>
  </body>
</html>
```

```css
/* Mostly Fluid */
.container {
  display: -webkit-flex;
  display: flex;
  -webkit-flex-flow: row wrap;
  flex-flow: row wrap;
}

.columna1,
.columna2,
.columna3,
.columna4,
.columna5 {
  width: 100%;
}

@media (min-width: 600px) {
  .columna2,
  .columna3,
  .columna4,
  .columna5 {
    width: 50%;
  }
}

@media (min-width: 800px) {
  .columna1 {
    width: 60%;
  }
  .columna2 {
    width: 40%;
  }
  .columna3,
  .columna4,
  .columna5 {
    width: 33.3%;
  }

  .container {
    width: 800px;
    margin-left: auto;
    margin-right: auto;
  }
}
```

El bloque que contiene todos los bloques (`.container`) le a√±adimos la propiedad `display: flex` de _Flexbox_ y que muestre el contenido en filas `row`.

Con `wrap` indicamos que si los bloques tienen que ocupar varias filas lo hagan.

Despu√©s con un par de _Media-Queries_ disponemos dos breakpoints, uno para `600px` simulando una tablet y otro para pantallas de m√°s de `800px`, simulando laptops y desktops de gran tama√±o.

Para el tama√±o _tablet_, hacemos que todas las columnas, salvo la primera, ocupen el 50%. De esta manera tenemos la primera columna ocupando todo el ancho de la pantalla y las restantes ocupar√°n 2 filas con dos bloques cada una.

En el _breakpoint_ para pantallas de gran tama√±o, hacemos que la primera columna y la segunda est√©n situadas en la primera fila, ocupando el 60% y el 40% del ancho respectivamente, y las tres restantes ocupar√°n 1/3 de la fila cada una.

En este momento, al `<div>` contenedor, le damos un ancho fijo de `800px` para que el contenido quede centrado en la pantalla sin ocupar todo el ancho.

## Column Drop

Este patr√≥n consiste en que cada bloque de contenido, que en un smartphone vemos en filas, vaya formando columnas seg√∫n vaya siendo m√°s grande la pantalla del dispositivo.

![Patr√≥n Column Drop](/images/los-5-patrones-del-responsive-design/column-drop.png)

Tendremos un _primer breakpoint_ donde la segunda fila pasa a ser columna, pero ocupando la primera posici√≥n, habitualmente para un men√∫ de navegaci√≥n.

El contenido que aparec√≠a en primer lugar en la versi√≥n m√≥vil, pasa a ocupar la segunda columna en el primer corte.

Tendremos un segundo punto de corte donde la √∫ltima fila se convierte en columna tambi√©n.

Este ser√≠a el c√≥digo HTML y CSS para este patr√≥n, utilizando Flexbox para ello:

```html
<!DOCTYPE html>
<html>
  <head>
    <title>Column Drop</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <nav>Navbar</nav>
    <div class="container">
      <section class="columna1">Secci√≥n 1</section>
      <section class="columna2">Secci√≥n 2</section>
      <section class="columna3">Secci√≥n 3</section>
    </div>
  </body>
</html>
```

```css
/* Column Drop */
.container {
  display: -webkit-flex;
  display: flex;
  -webkit-flex-flow: row wrap;
  flex-flow: row wrap;
}

.columna1,
.columna2,
.columna3 {
  width: 100%;
}

@media (min-width: 600px) {
  .columna1 {
    width: 60%;
    -webkit-order: 2;
    order: 2;
  }

  .columna2 {
    width: 40%;
    -webkit-order: 1;
    order: 1;
  }

  .columna3 {
    width: 100%;
    -webkit-order: 3;
    order: 3;
  }
}

@media (min-width: 800px) {
  .columna2,
  .columna3 {
    width: 20%;
  }
}
```

Para poder colocar con mayor facilidad la segunda fila en primera columna, hemos empleado la propiedad `order` de Flexbox, indic√°ndole con un n√∫mero que posici√≥n debe ocupar.

## Layout Shifter

Este es uno de los patrones m√°s complejos. Consiste en mover los bloques de contenido cambiando totalmente el _Layout_, de ah√≠ el nombre del patr√≥n.

![Patr√≥n Layout Shifter](/images/los-5-patrones-del-responsive-design/layout-shifer.png)

Gracias a Flexbox, estos cambios podemos realizarlos con mayor facilidad.

Las columnas 2 y 3 estar√°n englobadas dentro de un bloque que llamaremos `container-inner` que nos permitir√° hacer el cambio de _layout_.

De nuevo, el c√≥digo HTML y CSS para este patr√≥n resultar√≠a as√≠:

```html
<!DOCTYPE html>
<html>
  <head>
    <title>Layout Shifter</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <nav>Navbar</nav>
    <div class="container">
      <section class="columna1">Secci√≥n 1</section>
      <div class="container-inner">
        <section class="columna2">Secci√≥n 2</section>
        <section class="columna3">Secci√≥n 3</section>
      </div>
    </div>
  </body>
</html>
```

```css
/* Layout Shifter */
.container {
  display: -webkit-flex;
  display: flex;
  -webkit-flex-flow: row wrap;
  flex-flow: row wrap;
}

.columna1,
.columna2,
.columna3,
.container-inner {
  width: 100%;
}

@media (min-width: 600px) {
  .columna1 {
    width: 25%;
    height: 100vh;
  }

  .container-inner {
    width: 75%;
  }
}

@media (min-width: 800px) {
  .container {
    width: 800px;
    margin-left: auto;
    margin-right: auto;
  }
}
```

De nuevo, a partir del _breakpoint_ de `800px`, fijamos un ancho para el contenedor de manera que no ocupe toda la p√°gina.

## Off Canvas

Para el final he dejado el patr√≥n m√°s complejo de implementar pero uno de los m√°s utilizados, sobre todo en aplicaciones m√≥vile.

![Patr√≥n Off Canvas](/images/los-5-patrones-del-responsive-design/off-canvas.png)

Este patr√≥n esconde contenido en la pantalla y √∫nicamente es visible si realizamos un determinado gesto. Este contenido oculto normalmente es un men√∫ de navegaci√≥n. Cuando la pantalla es m√°s ancha, este contenido se hace visible.

El HTML para la p√°gina ser√≠a el habitual:

```html
<!DOCTYPE html>
<html>
  <head>
    <title>Off Canvas</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <nav>Navbar</nav>
    <div class="container">
      <section class="columna1">Secci√≥n 1</section>
      <section class="columna2">Secci√≥n 2</section>
    </div>
  </body>
</html>
```

Y el CSS vamos a verlo paso a paso

En primer lugar, la columna 1 que ser√° la que aparezca oculta, le damos un ancho fijo, y le a√±adimos un `position: absolute`.

Tambi√©n le aplicamos una transici√≥n CSS a la transformaci√≥n que vamos a declarar a continuaci√≥n

```css
.columna1 {
  position: absolute;
  width: 250px;
  height: 100vh;
  -webkit-transition: -webkit-transform 0.3s ease-out;
  transition: transform 0.3s ease-out;
  z-index: 1;
}
```

La transformaci√≥n consiste en 2 fases. Para ocultar la capa, le aplicamos la transformaci√≥n `translate(-250px, 0)` que lo que hace es "mover" la capa 250px hacia la izquierda en el eje X. Como el tama√±o de la capa le hemos definido en 250px, quedar√° oculto

Tambi√©n creamos una clase `columna1 open` que a√±adiremos con JavaScript m√°s adelante. Esta clase "mueve" a la posici√≥n 0 del eje X la capa, lo que hace sea visible.

Como hemos aplicado una `transition` este efecto ser√° suave y otorga una mayor experiencia de usuario.

```css
.columna1 {
  -webkit-transform: translate(-250px, 0);
  transform: translate(-250px, 0);
}

.columna1.open {
  -webkit-transform: translate(0, 0);
  transform: translate(0, 0);
}
```

La columna 2 (central) no tiene mayor misterio. Queremos que ocupe el 100% del ancho y todo el alto de la p√°gina.

```css
.columna2 {
  width: 100%;
  height: 100vh;
  position: absolute;
}
```

Cuando la pantalla sea m√°s ancha, vamos a aplicar al contenedor padre las propiedades de Flexbox. Esta vez el a√±adimos la propiedad `nowrap` que hace que el tama√±o de ancho de los bloques de adapte en una sola fila, sin crear varias.

Ahora la columna que estaba oculta, la sacamos a la luz, aplicando la transformaci√≥n de `translate(0,0)`

```css
@media (min-width: 600px) {
  .container {
    display: -webkit-flex;
    display: flex;
    -webkit-flex-flow: row nowrap;
    flex-flow: row nowrap;
  }

  .columna1 {
    -webkit-transform: translate(0, 0);
    transform: translate(0, 0);
  }
}
```

Muy bien, ahora es momento de _aplicar magia_ con JavaScript. Queremos que al hacer el t√≠pico gesto de _swipe_ en el m√≥vil hacia la derecha, aparezca el men√∫ _off-canva_, y al hacer el gesto contrario se oculte hacia la izquierda.

Podemos usar los eventos nativos de JavaScript `touchstart` y `touchmove` pero el c√≥digo puede quedar demasiado farragoso.
Para solucinar esto tenemos la libreria [Hammer.js](http://hammerjs.github.io/) que tiene programados los diferentes gestos que podemos usar en un tel√©fono o tablet.

Para aplicar esto, lo primero que vamos a hacer es a√±adir unos `id` a los paneles en el HTML:

```html
<div class="container">
  <section id="sidePanel" class="c1">Secci√≥n 1</section>
  <section id="mainPanel" class="c2">Secci√≥n 2</section>
</div>
```

`sidePanel` ser√° el panel _off-canva_ y `mainPanel` ser√° el panel principal.

A√±adimos tambi√©n al HTML el script con la librer√≠a **Hammer.js**. Podemos usar una local descargada o un CDN como he puesto en el ejemplo.

```html
<script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.4/hammer.min.js"></script>
```

Y a continuaci√≥n a√±adimos el c√≥digo que detectar√° los eventos `swiperight` cuando arrastremos el dedo hacia la derecha y `swipeleft` cuando lo hagamos al contrario. Estos eventos ir√°n adjuntos al elemento `mainPanel` que ser√° el que los escuche.

Por tanto primero _cacheamos_ los elementos `sidePanel` y `mainPanel`, y despu√©s se los a√±adimos a un objeto `Hammer` que lo gestionar√°.

Cuando el evento ocurra, simplemente queremos que se a√±ada la clase de CSS `open` al `sidePanel` en el caso de que no est√© a√±adida, y si no que la quite. Esto lo conseguimos con la funci√≥n de JS `toggle`. El c√≥digo JS final ser√≠a as√≠:

```javascript
(function () {
  var mainPanel = document.getElementById("mainPanel");
  var sidePanel = document.getElementById("sidePanel");

  var hammerPanel = new Hammer(mainPanel);

  hammerPanel
    .on("swiperight", function (e) {
      sidePanel.classList.toggle("open");
    })
    .on("swipeleft", function (e) {
      sidePanel.classList.toggle("open");
    });
})();
```

---

Con esto tendr√≠amos los 5 patrones de dise√±o Responsive implementados sin necesidad de frameworks. Todos ellos pueden combinarse entre s√≠, por ejemplo usar _Off-Canvas_ con un _Column Drop_ que use a su vez _Tiny Tweaks_. Todo es posible!

Si quieres seguir profundizando sobre esto te dejo algunas referencias:

- [Google Web Fundamentals - Responsive Design Patterns](https://developers.google.com/web/fundamentals/design-and-ui/responsive/patterns/?hl=en)
- [Multidevice Layout Patterns](http://www.lukew.com/ff/entry.asp?1514)
- [Visual Guide to CSS3 Flexbox Properties](https://scotch.io/tutorials/a-visual-guide-to-css3-flexbox-properties)
- [El gran poder de CSS3 Flexbox](http://filisantillan.com/el-gran-poder-de-css3-flexbox/)

De esto y mucho m√°s hablo en el [Curso de **Responsive Design** en Platzi](https://platzi.com/cursos/responsive-design/?utm_source=carlosazaustre&utm_medium=cta&utm_campaign=responsive-design)

</article>

---

<article slug="imagenes-responsive" date="2015-10-21" url="https://carlosazaustre.es/blog/imagenes-responsive">

# C√≥mo hacer que tus im√°genes sean Responsive

**Fecha:** 2015-10-21
Actualmente tenemos gran variedad de dispositivos desde los que accedemos a internet. Smartphones, tablets, laptops, desktops, televisores, incluso relojes.

Todos ellos tienen un **tama√±o de pantalla diferente y tambi√©n una resoluci√≥n diferente**. Una imagen en un smartphone puede verse muy n√≠tida, pero ese mismo archivo en un monitor de alta resoluci√≥n se ver√° pixelada.

![Tipos de dispositivos y resoluciones](/images/imagenes-responsive/resoluciones-y-tamanos-de-pantalla-responsive.png)

Lo ideal ser√≠a tener la misma imagen pero en varios tama√±os y que el navegador eligiese cual presentar en cada momento.

¬øEs esto posible?

## Atributo SRCSET al rescate!

`srcset` es un atributo dentro del elemento `img` que nos permite justo eso, tener varias im√°genes a distintas resoluciones, y el navegador, en funci√≥n del tama√±o o la resoluci√≥n, mostrar√° una u otra.

### Ejemplo de imagen

Para mostrar una imagen hemos hecho 6 copias de ella, cada una con un tama√±o diferente.

- `img-mobile.jpg`
- `img-mobileHD.jpg`
- `img-tablet.jpg`
- `img-tabletHD.jpg`
- `img-large.jpg`
- `img-largeHD.jpg`

Y queremos que cada una se muestre en un determinado momento.

Si aplicamos el patr√≥n **Mobile First**, lo ideal es que la primera imagen o la imagen por defecto sea la de menor resoluci√≥n posible. As√≠ los dispositivos m√≥viles (con menor velocidad de conexi√≥n que en un entorno desktop) puedan cargar la imagen m√°s r√°pido.

Para conseguir esto, en el atributo `src` de `img` colocamos la imagen de menor resoluci√≥n: `img-mobile.jpg`.

```javascript
<img src="img-mobile.jpg" />
```

Tenemos otra imagen, `img-mobileHD.jpg` con el doble de resoluci√≥n para si nos encontramos en un smartphone con pantalla retina. Para que el navegador cargue esta imagen la colocamos dentro del atributo `srcset` indic√°ndole el par√°metro `2x` lo que hace que el navegador entienda que se renderice esta imagen para una pantalla con doble resoluci√≥n.

```javascript
<img src="img-mobile.jpg" srcset="img-mobileHD.jpg 2x" />
```

El resto de im√°genes, para tablets y pantallas grandes, se colocan dentro del atributo `srcset` separadas por comas.

Por ejemplo, para una tablet sin pantalla retina queremos que se muestre si la pantalla del dispositivo es mayor de 768 p√≠xeles, en este caso le a√±adimos el par√°metro `768w`.

```javascript
<img src="img-mobile.jpg" srcset="img-mobileHD.jpg 2x, img-tablet.jpg 768w" />
```

Si tenemos una imagen optimizada para tablets con pantalla retina, `img-tabletHD.jpg`, debemos incluir la medida en p√≠xeles y tambien el patr√≥n de resoluci√≥n `2x`. Algo tal que as√≠:

```javascript
<img
  src="img-mobile.jpg"
  srcset="img-mobileHD.jpg 2x, 
             img-tablet.jpg 768w, 
             img-tabletHD.jpg 768w 2x"
/>
```

Recuerda, siempre separadas por comas.

El HTML final con las 6 im√°genes ser√≠a as√≠:

```javascript
<img
  src="img-mobile.jpg"
  srcset="img-mobileHD.jpg 2x, 
             img-tablet.jpg 768w, 
             img-tabletHD.jpg 768w 2x, 
             img-large.jpg 1200w, 
             img-largeHD.jpg 1200w 2x"
/>
```

## Pero ¬øPuedo usar esto actualmente?

Claro que si. Si vamos a la web [CanIUse](http://caniuse.com/#search=srcset) vemos que la mayor√≠a de los navegadores lo implementan. Por tanto no hay excusas.

Adem√°s a unas malas, el elemento `<img>` tiene el atributo `src` que por defecto nos mostrar√° esa imagen si no entiende el `srcset`.

## ¬øCu√°l es el mejor tipo de fichero para mis im√°genes web?

Vale, ya podemos utilizar varios tama√±os y resoluciones de im√°genes para hacer nuestra web m√°s _Responsive_.

Pero si trabajamos un poco m√°s, podemos lograr una **optimizaci√≥n mayor s√≥lo por elegir el tipo de fichero adecuado**.

Tenemos dos tipos de im√°genes que podemos utilizar

- Im√°genes vectoriales
- Im√°genes rasterizadas

Las **im√°genes vectoriales** son las ideales para los logos, fuentes de iconos y sobre todo formas con colores planos. El formato m√°s com√∫n para estos archivos es el `.SVG` de _Scalable Vector Graphics_. Al ser construidos vectorialmente en lugar de con p√≠xeles, pueden escalar a m√∫ltiples formatos sin perder calidad.

Las **im√°genes rasterizadas** son las ya conocidas por todos. Son las im√°genes que podemos hacer con una c√°mara de fotos. Al contrario que las vectorizadas, si escalamos una imagen de un tama√±o peque√±o a otro m√°s grande, perderemos calidad y la veremos _pixelada_.

Podemos seguir la siguiente gu√≠a descrita por [Google Developers](https://developers.google.com/web/fundamentals/design-and-ui/media/images/optimize-images-for-performance?hl=en)

- **JPG** para las fotograf√≠as. Cuando una imagen tiene muchos colores, es la mejor opci√≥n.

- **SVG** cuando tengamos un logo o im√°genes muy lineales y con colores s√≥lidos (Sin gradientes). Si no podemos usar SVG, podemos usar PNG o WebP

- **PNG** siempre mejor que **GIF**. Ofrece m√°s colores y mejor ratio de compresi√≥n.

- **Video** para animaciones complejas. Mucho mejor que un GIF, mejor calidad de imagen.

## Reducir el tama√±o de fichero.

Aunque usemos un sistema de compresi√≥n como JPG o PNG, siempre hay unos _kilobytes_ de m√°s que programas como Photoshop no terminan de comprimir eficientemente.

Ante esto, podemos usar algunas herramientas, tanto instalables como online, que nos permiten comprimir a√∫n m√°s las im√°genes sin perder calidad.

Yo en particular utilizo Gulp y un [plugin](https://www.npmjs.com/package/gulp-image-optimization) para automatizar este proceso. En mis **Gulpfile** suelo tener una tarea como la siguiente:

```javascript
var gulp = require('gulp');
var imageop = require('gulp-image-optimization');
var imageFiles = [
  './src/images/*.jpg',
  './src/images/*.jpeg,
  './src/images/*.png,
  './src/images/*.gif
];

gulp.task('images', function() {
  gulp.src(imageFiles)
    .pipe(imageop({
      optimizationLevel: 5,
      progressive: true,
      interlaced: true
    }))
    .pipe(gulp.dest('./dist/img'));
});
```

Esto hace que cada vez que ejecutemos la tarea `gulp images` lea todas las im√°genes con extensi√≥n `.jpg`, `.jpeg`, `.png` y `.gif` de la carpeta `src/images`, les pase el optimizador que nos da el plugin `gulp-image-optimization` y las deje comprimidas y listas para producci√≥n en la carpeta `dist/img`.

## ¬øY < picture > ?

`<picture>` tambi√©n es una opci√≥n que podemos utilizar, el problema es que con √©ste elemento no tenemos en cuenta la resoluci√≥n de pantalla, s√≥lo el tama√±o.

Esto significa que si queremos que en resoluci√≥n _retina_ se vea bien, siempre tendremos que tener una imagen de gran tama√±o, que en un dispositivo sin esa resoluci√≥n, no apreciaremos y por tanto estaremos desperdiciando recursos.

Las im√°genes anteriores en un elemento `<picture>` ser√≠a as√≠:

```html
<picture>
  <source media="(min-width: 1200px)" src="img-largeHD.jpg" />
  <source media="(min-width: 768px)" src="img-tabletHD.jpg" />
  <source src="img-mobileHD.jpg" />
</picture>
```

Dentro de los elementos `source` podemos tener un atributo `media` en el que podemos indicar a que tama√±o de `viewport` cambien las im√°genes.

Hablo de esto y mucho m√°s en el [**Curso de Responsive Design** en Platzi](https://platzi.com/cursos/responsive-design/?utm_source=carlosazaustre&utm_medium=cta&utm_campaign=responsive-design) de 2015

Nos vemos all√≠ :)

</article>

---

<article slug="frameworks-de-javascript" date="2015-10-19" url="https://carlosazaustre.es/blog/frameworks-de-javascript">

# ¬øQu√© framework o librer√≠a de JavaScript elegir para mis desarrollos?

**Fecha:** 2015-10-19
Cuando est√°s empezando en el desarrollo de aplicaciones web, de pronto te das cuenta que con √∫nicamente HTML y CSS no puedes hacer mucho, <a href="/libros-recomendados-sobre-javascript-y-node/">necesitas JavaScript</a>.

Pero en cuanto empiezas a investigar sobre este lenguaje te das cuenta de que forma un ecosistema brutal, y te sientes perdido entre tanta librer√≠a, framework, plugin, etc...

He escrito este art√≠culo para guiarte en esta selva que es el desarrollo web (En su parte Frontend principalmente).

A menos para que sepas **qu√© es cada librer√≠a**, por qu√© surgi√≥, cu√°l es su objetivo y por qu√© fue sustituida por otra.

No desesperes, es un mundo inmenso, pero cuando entras ya no quieres salir :)

## Hace mucho, mucho tiempo...

### Vanilla JavaScript

![Vanilla JavaScript](.javascript_vanilla.png)

_Vanilla JavaScript_ es como se conoce al lenguaje **JavaScript cuando se utiliza sin ninguna librer√≠a o framework**.

La traducci√≥n m√°s castellana ser√≠a _JavaScript a pelo_.

Al principio era la √∫nica forma de utilizar JavaScript en las p√°ginas web, pero poco a poco se ha ido complicando.

Se han ido requiriendo m√°s funcionalidades y JavaScript _a pelo_ se hac√≠a demasiado pesado.

En ese momento naci√≥ jQuery.

### jQuery

![JQuery](/images/frameworks-de-javascript/jquery.png)

[jQuery](https://jquery.com/) es una librer√≠a de JavaScript que **facilita el desarrollo con √©ste lenguaje**.

No es un framework como tal, ya que no implementa ning√∫n patr√≥n de dise√±o, s√≥lo sirve para hacer m√°s f√°cil algunas expresiones.

La parte mala es que muchos desarrolladores se acostumbraron a este tipo de programaci√≥n y olvidaron como se implementaba en JavaScript natural.

Un ejemplo del uso de jQuery es por ejemplo cuando queremos seleccionar un elemento del DOM con el id "miElemento":

```javascript
// Vanilla JavaScript
var elem = document.getElementById("miElemento");

//jQuery
var elem = $("#miElemento");
```

La **sintaxis de jQuery es m√°s sencilla de recordar** pero provoca que a la larga olvides como funciona JavaScript.

### jQuery Mobile

jQuery tambi√©n lanz√≥ [jQuery Mobile](http://jquerymobile.com/) que b√°sicamente se trataba de una **versi√≥n reducida de jQuery y optimizada para dispositivos m√≥viles** que en ese momento estaban empezando a surgir.

jQuery Mobile tuvo un antecesor que fue [jQuery UI](http://jqueryui.com/), un set de recursos tanto CSS como JS para implementar interfaces gr√°ficas. La versi√≥n mobile fue una adaptaci√≥n de √©sta.

## La guerra de los Frameworks CSS

![Bootstrap vs Foundation](/images/frameworks-de-javascript/bootstrap_foundation.png)
jQuery UI fue el predecesor de los frameworks CSS que surgieron. Hay infinidad de ellos, pero los que son m√°s utilizados son Bootstrap y Foundation.

### Bootstrap

[√âste framework](http://getbootstrap.com) fue creado por un [empleado de Twitter](https://twitter.com/mdo) y lo liber√≥ como _Open Source_.

Su popularidad se le debe a la facilidad de maquetaci√≥n que supone usar sus clases CSS, as√≠ como el dise√±o visual de los principales elementos HTML de cualquier p√°gina web.

Es muy √∫til para realizar peque√±os proyectos y probar su funcionamiento antes de invertir en dise√±o.

### Foundation

[Foundation](http://foundation.zurb.com/) es el otro gran combatiente en √©sta batalla por el control del CSS.

Su funcionamiento y uso es similar a Bootstrap, y tanto uno como el otro mejoran al otro cada vez que cambian de versi√≥n.

En su momento Foundation era mejor porque implementaba mejor el patr√≥n _Mobile First_ y las etiquetas HTML para los diferentes elementos.

Despu√©s lleg√≥ Bootstrap y con su versi√≥n 3, mejor√≥ esta parte. Actualmente Foundation est√° en su versi√≥n 5 donde tiene un [apartado espec√≠fico para WebApps](http://foundation.zurb.com/apps/), pero [est√° preparando la versi√≥n 6](http://zurb.com/article/1403/foundation-6-prototype-to-production), al igual que [Bootstrap su versi√≥n 4](http://blog.getbootstrap.com/2015/08/19/bootstrap-4-alpha/), donde ambos utilizar√°n Flexbox CSS para el posicionamiento de elementos en la p√°gina web, lo que har√° que mejore mucho m√°s su rendimiento.

## La llegada de los Frameworks JavaScript

jQuery estaba y sigue estando muy extendido, pero a medida que **las aplicaciones web implementaban cada vez m√°s funcionalidades y complejidad**, jQuery se hac√≠a inmanejable. Llamadas AJAX, cambios de vista, etc..

El **patr√≥n de dise√±o MVC** (Modelo, Vista y Controlador) **se estaba empezando a necesitar en el Frontend** cuando siempre hab√≠a sido una cuesti√≥n de Backend. Surgieron varios, pero el que destac√≥ y sigue ocupando una parte importante en el pastel es Backbone.

### Backbone JS

![Backbone js](/images/frameworks-de-javascript/backbone.png)
Fue creado por Jeremy Ashkenas, autor tambi√©n de la librer√≠a Underscore, y del precompilador CoffeeScript.

[Backbone](http://backbonejs.org/) debe su popularidad a que es un **framework extremadamente ligero** (7 Kb) comparado con otros, y te permite utilizar el sistema de plantillas que quieras, otras librer√≠as, etc.. es bastante flexible.

### Ember JS

![Ember JS](/images/frameworks-de-javascript/ember-1.png)
Ember es otro framework de la familia MVC. No lo conozco mucho porque no he trabajado con √©l, pero las bases son similares a Backbone. Es muy popular por los desarrolladores en Ruby on Rails.

### Angular JS

![Angular JS](/images/frameworks-de-javascript/angularjs.png)
[Angular](/empezando-con-angular-js/) fue el √∫ltimo en llegar y **acab√≥ superando a Backbone**. Es un proyecto iniciado por Google y alcanz√≥ mucha popularidad r√°pidamente. Angular trajo funcionalidades integradas que usando JavaScript Vanilla o BackboneJS necesitaban de otras librer√≠as para implementarlo.

Angular provee un **sistema de m√≥dulos propio**, no es necesario utilizar Require.JS como podr√≠a necesitarse en Backbone. Tambi√©n trae su **propio sistema de plantillas**, no es necesario implementar Moustache, Handlebars, etc... Provee **servicios propios para traer datos v√≠a AJAX**, sin necesidad de liber√≠as externas.

Puedes construir directivas para extender el HTML de tus aplicaciones web, etc...

Esto hace que sea un **framework m√°s pesado**, pero del que puedes sacar mucho partido. **Su curva de aprendizaje es como una monta√±a rusa**, pero una vez que entiendes gran parte de su funcionamiento te resultar√° muy r√°pido crear aplicaciones web.

![Curva de aprendizaje de Angular.js](/images/frameworks-de-javascript/curva-aprendizaje-angularjs.png)

Con **la llegada de NodeJS y su popularidad, surgi√≥ [el stack MEAN](/desarrollo-full-stack-javascript-tambien-conocido-como-mean/)** compuesto por Mongo como Base de Datos, Express y NodeJS como lenguaje y framework del servidor y AngularJS para la parte cliente. √âste stack se ha hecho tan popular o m√°s como lo fue en su d√≠a el stack LAMP (Linux + Apache + MySQL + PHP).

## Y lleg√≥ NodeJS

[Node.js supuso una revoluci√≥n en el mundo del desarrollo web](/como-crear-una-api-rest-usando-node-js/). De repende los programadores que se encargaban de la parte Frontend de las aplicaciones pod√≠an entrar en el mundo Backend, ya que **NodeJS es la forma de poder programar con JavaScript en el servidor**.

Adem√°s del mundo backend, con NodeJS surgieron varias herramientas para mejorar los desarrollos y hacerlos m√°s √°giles.

### Grunt

En un momento tuvimos [Grunt para **automatizar tareas repetitivas**](/automatizar-tareas-en-javascript-con-grunt-js/) como el minificado de archivos, concatenado, preprocesado de otros lenguajes como CoffeeScript a JavaScript, o Sass, Less, Stylus a CSS.

![Automatizadores de tareas](/images/frameworks-de-javascript/automated_tasks.png)

### Gulp

Despu√©s de Grunt vino [Gulp](/automatizando-tu-flujo-de-trabajo-en-el-frontend-con-gulpjs/), que utilizando los _Streams_ que proporciona NodeJS hizo **m√°s sencilla la implementaci√≥n y ejecuci√≥n** de las tareas que hac√≠amos antes con Grunt.

### Browserify

![Browserify](/images/frameworks-de-javascript/browserify.png)
En medio de estos dos grandes surgi√≥ [Browserify](/browserify-desarrollando-tu-frontend-como-en-node-js/), una librer√≠a que permit√≠a **llevar el modo de programaci√≥n que se estaba empleando en NodeJS al lado cliente**. Ahora pod√≠as importar m√≥dulos con el comando `require` sin necesidad de tener una _rista_ (Lista larga) de `scripts` en el HTML.

### Webpack

Actualmente tenemos [Webpack](https://webpack.github.io/) que incorpora en pocos pasos lo que m√°s repet√≠amos en Gulp, como son el transpilado, el preprocesado y el minificado. Webpack ha conseguido que, **dependiendo del tipo de proyecto, no necesites ni Gulp ni Browserify**.

Y ofrece algo muy interesante, el _Hot Loader_, permiti√©ndonos ver los cambios que hacemos mientras desarrollamos, sin perder el estado de la aplicaci√≥n. Algo que Gulp no nos permite hacer.

## ¬øAplicaciones web h√≠bridas?

El auge de las aplicaciones m√≥viles, Android e iOS, hizo que algunos frameworks evolucionaran y aparecieran nuevas herramientas.

En un momento hab√≠a muchas herramientas que permit√≠an que **una web pudiera ser empaquetada como una app mobile** (Phonegap), pero la experiencia de usuario y el uso era un infierno.

### Ionic

![Ionic](/images/frameworks-de-javascript/ionic.png)
Por suerte, Phonegap evolucion√≥ a Cordova, y surgi√≥ Ionic, una **librer√≠a basada en Angular** que nos permite crear aplicaciones m√≥viles **para Android e iOS** programando √∫nicamente en JavaScript y empaquet√°ndolo con Cordova.

Todo es genial, podemos hacer aplicaciones de una sola p√°gina con AngularJS, programar el backend y el frontend empleando JavaScript, incluso aplicaciones m√≥viles sin cambiar de lenguaje ni de stack.

Pero a los desarrolladores no nos gusta quedarnos quietos...

## El surgimiento de los WebComponents

![Web Components](/images/frameworks-de-javascript/webcomponents.png)
Webcomponents o los componentes web, son una especificaci√≥n de la W3C para **componetizar la web** y reutilizar elementos que usamos en nuestro d√≠a a d√≠a.

A d√≠a de hoy tenemos formularios, inputs, tablas, encabezados, etc.. Pero cada vez m√°s surgen nuevos patrones de dise√±os, repetitivos y no hay un est√°ndar para eso.

En nuestras webs todos tenemos men√∫s, navbars, mapas de google maps, videos de youtube, etc... Su c√≥digo HTML es ilegible, convirti√©ndose en una monta√±a de `divs` anidados. (Aprovecho para recomendar [√©ste art√≠culo](http://bordertopstyle.com/divinitis/) de [Elena Torr√≥](https://twitter.com/elenarcolepsia))

Los WebComponents tratan de solucionar eso, y √©sta especificaci√≥n surgi√≥ a la par que AngularJS y sus directivas

### Polymer

![Polymer Project](/images/frameworks-de-javascript/polymer.png)
Como los [WebComponents](http://webcomponents.org/) son un est√°ndar en revisi√≥n, no est√° implementado al 100% en todos los navegadores y por eso surgi√≥ [Polymer](https://www.polymer-project.org/1.0/), otro proyecto de Google para **acercar el desarrollo de WebComponents a todos los navegadores.**

Actualmente su [versi√≥n 1.0 ya est√° disponible con multitud de mejoras y componentes](https://elements.polymer-project.org/).

Ya no es solo un _Polyfill_ si no que es una librer√≠a para facilitar el uso e implementaci√≥n de WebComponents. Tambi√©n est√° el [Polymer Starter Kit](https://developers.google.com/web/tools/polymer-starter-kit/index?hl=en) que es una punto de arrance, y una forma para ver si realmente son necesarias las apps nativas o con una web mobile (sin empaquetados) puede llegar a ser tan vers√°til como lo nativo.

¬øConoces [AMP (**Accelerated Mobile Pages**)](https://googleblog.blogspot.com.es/2015/10/introducing-accelerated-mobile-pages.html)?

Polymer [est√° creciendo mucho](https://www.polymer-project.org/summit) y es una parte importante en esta guerra por el trono de scripts :P

## Programando orientado a componentes

En medio de todo esto aparece [React JS](/ejemplo-de-aplicacion-con-react-js-en-ecmascript-6/), una librer√≠a que ha **desarrollado Facebook** y que utiliza tanto en su red social como en Instagram y ha liberado como _Open Source_

### React

![React JS](/images/frameworks-de-javascript/reactjs.png)
Su popularidad est√° creciendo a pasos agigantados, debida en gran parte a la **velocidad de renderizado**, ya que emplea un **DOM Virtual** para ello.

React no es un framework como Angular, es √∫nicamente una **librer√≠a** (como pod√≠a ser jQuery, o Polymer) dise√±ada √∫nicamente para la interfaz gr√°fica. Puedes combinarla con cualquier framework o utilizar Vanilla JavaScript.

#### Flux

Facebook por su parte dise√±√≥ [Flux](https://facebook.github.io/flux/docs/overview.html#content), una **arquitectura para crear aplicaciones web con React**, pero sin usar ning√∫n Framework, √∫nicamente JavaScript puro sin a√±adidos.

El patr√≥n de dise√±o que nos proporciona React es componetizar nuestras aplicaciones (No es lo mismo que webcomponents).

No pienses en un MVC completo para la aplicaci√≥n.

Piensa en peque√±os √°tomos (componentes) que conforman la materia (aplicaci√≥n completa). Cada √°tomo tiene sus propiedades y estados.

Es una definici√≥n un poco complicada de digerir al principio, pero una vez que la conoces, no quieres desarrollar de otra manera :D

## El est√°ndar de JavaScript evoluciona

JavaScript empez√≥ como lenguaje para a√±adir animaciones e interacci√≥n en una p√°gina web.

[Ahora las p√°ginas web son aplicaciones](javascript-el-lenguaje-de-programacion/) y JavaScript se queda corto, de ahi el nacimiento de frameworks como Angular, o de precompiladores como CoffeeScript para traducir a JavaScript.

### ECMAScript6 (ES6 o ECMAScript 2015)

JavaScript necesitaba una revisi√≥n y al fin se ha hecho realidad.

Durante varios a√±os se ha ido definiendo [la nueva versi√≥n del est√°ndar, ECMAScript 6](/ecmascript6/), que provee clases, m√≥dulos, nuevas funcionalidades, etc..

Se ha conseguido (en cierta medida) que incluso no sea necesario emplear frameworks para desarrollar, √∫nicamente con librer√≠as podemos tener un stack muy poderoso.

Como toda especificaci√≥n, tarda en implementarse, y aunque se aprob√≥ en Julio de 2015, muchos navegadores a√∫n no tienen todas las mejoras que trae.

### Babel JS

Ah√≠ surge [Babel](http://babeljs.io) (anteriormente conocido como 6to5) que nos **permite escribir c√≥digo ES6 y que sea traducido a ES5** (La versi√≥n anterior del est√°ndar que conocen todos los navegadores)

**React ha sido uno de los primeros en adaptar su librer√≠a a las nuevas funcionalidades** que trae ES6, lo que ha disparado a√∫n m√°s su popularidad.

Combin√°ndolo con Webpack, conseguimos un entorno de desarrollo web moderno, por componentes y muy √°gil.

### Aplicaciones Isom√≥rficas

**React** est√° creciendo mucho en poco tiempo. Su forma de implementaci√≥n permite **usar la librer√≠a en la parte de servidor con Node JS**, lo que nos permite junto con otras librer√≠as como [React-Router](https://github.com/rackt/react-router) y [React-Engine](https://github.com/paypal/react-engine), crear componentes que puedan ser reutilizados tanto en el Frontend como en el Backend, lo que se conoce como [aplicaciones isom√≥rficas o universales](https://github.com/carlosazaustre/universal-js-boilerplate).

**¬øQu√© ventajas traen las aplicaciones isom√≥rficas?**

Una aplicaci√≥n SPA (_Single Page Application_) tarda un tiempo en cargarse, pero luego la velocidad de p√°gina y la UX es muy buena. Pero a cambio pierdes el SEO que te proporciona una p√°gina renderizada en el servidor.

**Una aplicaci√≥n Isom√≥rfica une lo mejor de ambos mundos**.

Cuando accedes a la web, es renderizada desde el servidor (bueno para el SEO, y la carga de p√°gina) y el resto de interacciones que hagas ser√°n desde el cliente, como una SPA (bueno para la usabilidad y la UX).

Es el futuro.

## ¬øQu√© pasa con Angular?

Angular hasta ahora era el dominante en el mundo de los frameworks de JS. Pero **React le ha estado comiendo terreno**. Y [Polymer tambi√©n](https://www.youtube.com/watch?v=jVn8tlnwAEs&t=20m41s) en cierta medida.

Angular tambi√©n tiene un peso importante dentro del desarrollo h√≠brido con Ionic, pero la llegada de [**React Native**](https://facebook.github.io/react-native/) tanto **para iOS como para Android**, le puede relegar, ya que con React Native no estamos haciendo una aplicaci√≥n h√≠brida, estamos desarrollando una **aplicaci√≥n nativa pero utilizando JavaScript** para ello.

Angular tambi√©n nos proporcion√≥ un sistema de m√≥dulos que JavaScript, nativamente, no ten√≠a, al igual que las directivas que se asemejaban a los **WebComponents** que estaban surgiendo.

Ahora que ya estas funcionalidades ya est√°n aqu√≠ con ECMAScript6. Es el momento de utilizarlas

### Angular 2.0

![Angular2](/images/frameworks-de-javascript/angular2.png)
La nueva versi√≥n del **framework de Google cambiar√° mucho la forma de programar con respecto a las versiones 1.x**, ser√° mucho mejor, usando m√°s recursos nativos.

El problema est√° que cambia tanto que una versi√≥n 1.x no es compatible con la 2.0, por lo tanto si quieres actualizar, tendr√°s que reescribir todo.

Otro problema es que est√° tardando mucho en aparecer. **Ya hay una versi√≥n [alpha](https://angular.io/)**, pero a√∫n tardar√° en ser estable y utilizarse. Y mientras tanto React le est√° comiendo terreno.

### Ionic 2

En la parte _mobile_, React tambi√©n esta pegando fuerte con Native y eso est√° haciendo que Ionic pierda fuelle, pero la gente detr√°s de **Ionic est√° [trabajando codo con codo](http://blog.ionic.io/angular-2-ionic/) con la gente detr√°s de Angular 2** para hacer un framework m√°s poderoso.

## Entonces ¬øQu√© elijo?

En estos casos siempre digo que elijas la librer√≠a, lenguaje, herramienta con la que te sientas m√°s c√≥modo. Olv√≠date de modas, y **utiliza lo que te haga m√°s productivo** y sobre todo **te divierta desarrollando**.

En mi caso **me encuentro muy c√≥modo con Angular 1.x** y utilizando Gulp para automatizar tareas.

**He probado React y tambi√©n me gusta** su patr√≥n de desarrollo basado en componentes, y para hacer peque√±os proyectos o empezar nuevos es buena opci√≥n.

**Polymer** no lo he probado a√∫n, pero tengo ganas por los comentarios que me llegan de medio GDG Espa√±a :D

Lo que no puedes hacer es reescribir toda tu aplicaci√≥n en un nuevo framework s√≥lo por el hecho de que lo est√© _petando_. Te acabar√° volviendo loco.

Prueba lo que te llame la atenci√≥n y si lo ves √∫til, adelante con √©l :)

Pruebes el framework o librer√≠a que pruebes, al final de d√≠a tienes que enfrentarte a JavaScript. Es importante conocer las bases para enfrentarse a cualquier reto. Puedes **aprender JavaScript desde cero hasta el nuevo est√°ndar ES6** con mi nuevo eBook **["Aprendiendo JavaScript".](https://leanpub.com/aprendiendojavascript?utm_source=blog-post-frameworks&utm_medium=blog&utm_campaign=ebook-js)**
**Y tu, ¬øQu√© framework usas? ¬øCu√°l te gusta m√°s?** D√©jalo en los comentarios y abramos el debate.

</article>

---

<article slug="es-tu-web-realmente-mobile-first" date="2015-10-14" url="https://carlosazaustre.es/blog/es-tu-web-realmente-mobile-first">

# ¬øEs tu web realmente Mobile First?

**Fecha:** 2015-10-14
Uno de los √∫ltimos cambios que introdujo el algoritmo de Google para las b√∫squedas se basa en que a partir de ahora **se da prioridad en los resultados de b√∫squeda a las p√°ginas que sean ‚ÄúResponsive‚Äù**, es decir, adaptadas a los dispositivos m√≥viles

¬øA qu√© se debe eso? A que cada vez m√°s, **el tr√°fico de navegaci√≥n web pasa por smartphones**, relegando a la navegaci√≥n de escritorio a un segundo plano.

No es as√≠ en todos los mercados, los desarrolladores solemos _googlear_ o buscar en _Stackoverflow_ cuando estamos programando en nuestros laptop o desktops.

Pero la **mayor√≠a de los usuarios**, ya usan el **tel√©fono como un ordenador**, para navegar, jugar, comunicarse y sobre todo para buscar informaci√≥n.

## ¬øQu√© es Mobile First?

Dentro de los distintos patrones de dise√±o adaptado a m√≥viles, tenemos b√°sicamente dos:

- Graceful Degradation
- Progressive Enhancement

![Graceful Degradation vs Progressive Enhancement](/images/es-tu-web-realmente-mobile-first/graceful-degradations-vs-progressive-enhancement.png)
Fuente de la Imagen: [Metamonks.com](http://metamonks.com/mobile-first-vs-responsive/)

El primero, **Graceful Degradation**, se basa en que tenemos un dise√±o para Desktop y lo vamos adaptando de m√°s a menos hasta llegar a un dise√±o para m√≥vil.

Es la t√©cnica que se utilizaba hasta ahora para darle a una web un dise√±o _Responsive_.

**Progressive Enhancement** se basa en comenzar por un dise√±o adaptado a smartphones y poco a poco lo vamos adaptando, a√±adiendo funcionalidades y estilos seg√∫n crece el tama√±o del navegador. Esta t√©cnica se conoce tambi√©n como **Mobile First**.

_Mobile First_ nos exige a los desarrolladores y dise√±adores a crear productos con el m√≠nimo de funcionalidades, para centrarnos m√°s en el contenido que se ofrece y en la experiencia de usuario.

## ¬øEs tu p√°gina Mobile Friendly?

Pero _Mobile First_ no significa tener una web que se vea bien en un smartphone y ya est√°.

Tenemos que tener en cuenta una serie de pasos para saber si realmente tenemos **una web adaptada a m√≥viles**.

No solo por Google y el SEO, si no porque si la experiencia que ofrecemos en un dispositivo reducido no es la correcta, el usuario se ir√° de nuestra p√°gina.

Una de las primeras herramientas que Google nos ofrece es la [Mobile Friendly Test](https://www.google.com/webmasters/tools/mobile-friendly/). Introduciendo la URL de nuestra web o la que queramos comprobar, vemos si cumple las caracter√≠sticas.

![Mobile Friendly Test](/images/es-tu-web-realmente-mobile-first/mobile-friendly-test.png)

En el caso de que tengamos alg√∫n error, esta herramienta nos avisa y nos da indicaciones para corregirlo.

Si nuestra p√°gina es _Mobile-Friendly_, cuando hagamos una b√∫squeda en Google desde un smartphone veremos el tag:

![P√°gina de resultados de Google en Mobile](/images/es-tu-web-realmente-mobile-first/resultado-de-google-en-mobile.png)

## ¬øAfecta la velocidad de carga a nuestra web?

Por supuesto que afecta, tambi√©n no solo al SEO y al algoritmo de b√∫squeda de Google, si no tambi√©n a la experiencia.

> Si una web te tarda varios segundos en cargar ¬øCuanto tiempo tardas en marcharte de ella?

Tenemos que cuidar el peso de las im√°genes, las peticiones HTTP, los scripts bloqueantes, etc..

Para saber si tienes algo que est√° retardando la carga de la p√°gina, Google tiene otra herramienta: [Google Pagespeed Insights](https://developers.google.com/speed/pagespeed/insights/).

Introduce la URL en la barra de b√∫squeda y la herramienta har√° el resto

![Google PageSpeed Insights](/images/es-tu-web-realmente-mobile-first/resultado-pagespeed-insights.png)

Si tenemos alg√∫n recurso que bloquea el rendimiento, la herramienta nos avisa y nos da consejos para optimizarlo.

**Tener un 100/100 es muy complicado**, por no decir imposible. Pero si quieres tener un buen rendimiento, es importante que los valores est√©n en verde.

Eso Google lo valora, y lo que es m√°s importante, los usuarios tambi√©n.

## En resumen

Si quieres que tu web sea lo m√°s _mobile first friendly_ posible, aplica los siguientes consejos y recomendaciones, que yo mismo he seguido para mi blog:

- Haz un **dise√±o adaptable a m√≥viles**, el pixel perfect hace tiempo que muri√≥.
- Ten **cuidado con las im√°genes**. Reduce su peso.
- **Minifica tu c√≥digo CSS** y si es posible, col√≥calo inline en el HTML
- **Minfica tu c√≥digo JS**. Si es poco ponlo inline, y siempre al final de la p√°gina.
- Si no es vital, col√≥cale el atributo async:
  `<script async src=‚Äù...‚Äù></script>`
- No hagas **redirecciones innecesarias**.
- Env√≠a los recursos con **compresi√≥n GZIP** desde tu servidor.
- **Minifica tu HTML**
- Establece par√°metros de **cach√©** para los recursos.

Poco a poco tu web ir√° ganando velocidad y eso lo comprobar√°s en tus anal√≠ticas con el tiempo.

Si quieres aprender m√°s y profundizar sobre esto, **del 28 al 30 de Noviembre** estar√© impartiendo el [**curso** online sobre **Responsive Design** en Platzi](https://platzi.com/cursos/responsive-design/?utm_source=carlosazaustre&utm_medium=cta&utm_campaign=responsive-design).

</article>

---

<article slug="websockets-como-utilizar-socket-io-en-tu-aplicacion-web" date="2015-09-24" url="https://carlosazaustre.es/blog/websockets-como-utilizar-socket-io-en-tu-aplicacion-web">

# WebSockets: C√≥mo utilizar Socket.io en tus aplicaciones web

**Fecha:** 2015-09-24
> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=ppiAvvkvAz0)
/>

Los [websockets](http://www.html5rocks.com/en/tutorials/websockets/basics/) son una tecnolog√≠a que permite una comunicaci√≥n bidireccional entre cliente y servidor sobre un √∫nico socket TCP. En cierta manera es un buen sustituto de AJAX como tecnolog√≠a para obtener datos del servidor, ya que no tenemos que pedirlos, el servidor nos los enviar√° cuando haya nuevos.

Uno de los ejemplos m√°s comunes para aprender a utilizar websockets, es desarrollando chat. Es lo que es lo que veremos en este tutorial.

> En mi [canal de Youtube](https://www.youtube.com/user/azaman1984) puedes verlo en formato **videotutorial**

Lo √∫nico que necesitaremos para que funcione es un servidor de websockets, que construiremos en Node.js con la librer√≠a [Socket.io](http://socket.io/) que nos facilita el desarrollo de aplicaciones utilizando Websockets en el cliente y en el servidor.

### Iniciando la aplicaci√≥n

Empezamos creando un paquete de Node con `npm init -y` para generar un `package.json` con las opciones por defecto:

```js
{
  "name": "sockets",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "keywords": [],
  "author": "Carlos Azaustre",
  "license": "ISC"
}
```

Ahora crearemos un fichero `server/main.js` que ser√° nuestro servidor web. Para ello necesitaremos las librer√≠as `express` y `socket.io` que instalamos v√≠a `npm`:

```js
$ npm install --save express
$ npm install --save socket.io
```

En `server/main.js` creamos una aplicaci√≥n con **express**, que pasaremos a un servidor http y todo esto ir√° ligado al servidor de websockets que creamos con **socket.io**

```js
var express = require("express");
var app = express();
var server = require("http").Server(app);
var io = require("socket.io")(server);
```

Pondremos el servidor a escuchar en `localhost` con el puerto `8080`:

```js
server.listen(8080, function () {
  console.log("Servidor corriendo en http://localhost:8080");
});
```

Para probar nuestro chat vamos a tener un array de mensajes de prueba que enviaremos cuando se conecte un cliente web.

```js
var messages = [
  {
    author: "Carlos",
    text: "Hola! que tal?",
  },
  {
    author: "Pepe",
    text: "Muy bien! y tu??",
  },
  {
    author: "Paco",
    text: "Genial!",
  },
];
```

Ahora necesitamos que el servidor de websockets, que lo tenemos en la variable `io`, est√© atento a que se realice una conexi√≥n. Eso lo logramos con `io.on()` y pas√°ndole el mensaje `connection`. Dentro de √©ste m√©todo enviaremos el array de objetos mensaje con el evento `'messages'`:

```js
io.on("connection", function (socket) {
  console.log("Un cliente se ha conectado");
  socket.emit("messages", messages);
});
```

El evento `messages` lo recogeremos en el cliente, en el fichero JavaScript de la parte cliente. As√≠ que ahora es momento de crear la parte p√∫blica de la aplicaci√≥n con un `index.html` y un `main.js`:

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>My Aplicaci√≥n con Sockets</title>
    <script src="/socket.io/socket.io.js"></script>
    <script src="main.js"></script>
  </head>
  <body>
    <h1>My App</h1>
  </body>
</html>
```

El `index.html` adem√°s de enlazar el `main.js` enlaza en su `<head>` el script de `socket.io`.
Socket.io es una librer√≠a que funciona tanto en cliente como servidor precisamente para conseguir la conexi√≥n bidireccional.

### Recibiendo mensajes

En `main.js` (de la parte cliente) conectamos el cliente con el servidor de websockets que tenemos en `http://localhost:8080` y escuchamos el evento `messages`.

```js
var socket = io.connect("http://localhost:8080", { forceNew: true });

socket.on("messages", function (data) {
  console.log(data);
});
```

`data` tendr√° el array de mensajes que env√≠a el servidor. En lugar de imprimirlo por consola queremos que se muestre en el HTML, por tanto vamos a cambiar algunas cosas.

Primero a√±adimos un `div` con el id `messages` donde pondremos todos los mensajes que lleguen.

```html
<div id="messages"></div>
```

Despu√©s en nuestro `server/main.js` tenemos que indicar cual es la ruta que tendr√°n los ficheros est√°ticos, lo hacemos con el middleware `express.static`.

```js
app.use(express.static("public"));
```

Siendo `public` la carpeta donde tenemos el `index.html` y el `main.js`.

En `main.js` del cliente, vamos a crear una funci√≥n que llamaremos `render()` que se encargar√° de pintar en el HTML los mensajes:

```js
function render(data) {
  var html = data
    .map(function (elem, index) {
      return `<div>
        		 <strong>${elem.author}</strong>:
                 <em>${elem.text}</em>
        </div>`;
    })
    .join(" ");

  document.getElementById("messages").innerHTML = html;
}

socket.on("messages", function (data) {
  render(data);
});
```

Lo que hace esta funci√≥n es iterar sobre los datos que llegan a trav√©s del socket con la funci√≥n `map` de JavaScript, y para cada elemento del array pinta una plantilla HTML con el nombre del autor y el texto del mensaje de cada elemento-mensaje.

Para este ejemplo estamos usando una de las [novedades de ECMAScript6 o ECMAScript2015](/ecmascript6) que ya pueden usarse en el navegador sin necesidad de utilizar transpiladores como **Babel.js**, y son los _Template Strings_ que no es m√°s que escribir Strings delimitados con el acento invertido y nos permite prescindir de concatenaciones con el s√≠mbolo `+` y podemos utilizar variables con `${nombre_variable}` para pintarlas dentro del String.

Despu√©s usamos el m√©todo `join`, que pintar√° los elementos del array separados por un espacio. Si no hacemos eso, nos pintar√° una coma `,` entre los elementos.

Por √∫ltimo, cuando el template est√© completo lo insertamos en el DOM, dentro del `div` con id `messages`

### Enviando mensajes

Ya recibimos mensajes y los pintamos en el HTML, pero ahora para tener un chat m√°s completo, queremos poder enviar mensajes propios, notificar al servidor y que este se encargue de que todos los clientes web conectados reciban esos mensajes al instante, sin tener que preguntar si hay nuevos.

Para poder enviar mensajes, lo primero que necesitamos es un formulario en nuestro HTML:

```html
<form onsubmit="return addMessage(this)">
  <input type="text" id="username" placeholder="Tu Nombre" />
  <input type="text" id="texto" placeholder="Cu√©ntanos algo..." />
  <input type="submit" value="Enviar!" />
</form>
```

El formulario tendr√° dos campos, para el nombre del autor y para el texto del mensaje, adem√°s del bot√≥n de `submit` para enviar. Lo que no tiene este formulario es un action, ya que eso provocar√≠a que se recargara la p√°gina. Por ello, para saber cuando se env√≠a el formulario utilizaremos el evento `onsubmit` que llamar√° a la funci√≥n `addMessage` de la aplicaci√≥n cliente.

Definamos la funci√≥n en el fichero `public/main.js`

```js
function addMessage(e) {
  var mensaje = {
    author: document.getElementById("username").value,
    text: document.getElementById("texto").value,
  };

  socket.emit("new-message", mensaje);
  return false;
}
```

La funci√≥n simplemente recoge el valor de los inputs del autor y el texto y los env√≠a por el socket con el mensaje `new-mensaje` para que lo escuche el servidor. Por tanto ahora es el momento de escuchar ese evento en el servidor. Volvemos a `server/main.js`

```js
socket.on("new-message", function (data) {
  messages.push(data);

  io.sockets.emit("messages", messages);
});
```

El socket escuchar√° el evento `new-message` y cuando llegue traer√° consigo los datos en `data`. Lo que haremos ser√° a√±adir ese nuevo mensaje que nos llega en `data` al array de `messages` con el m√©todo push.

Y ahora para notificar a los clientes conectados tenemos que avisarles de alguna forma. Si lo hacemos con `socket.emit` estamos creando una comunicaci√≥n 1:1, pero una sala de chat no es as√≠, no es una comunicaci√≥n privada. Tenemos que notificar a todos los clientes conectados. Esto lo conseguimos con `io.sockets.emit` que notificar√° a todos los sockets conectados.

De esta forma si abrimos varios navegadores en la URL `http://localhost:8080`, podemos ver que la actualizaci√≥n es instant√°nea. Todo gracias a los websockets :)

![Ejemplo con Websockets](/images/websockets-como-utilizar-socket-io-en-tu-aplicacion-web/websockets-ejemplo.jpg).

Esto es s√≥lo una prueba de concepto. Con websockets se pueden hacer muchas cosas, como videojuegos combin√°ndolo con canvas, o imagina una pizarra colaborativa d√≥nde tu pintas algo y todos los que est√°n viendo esa web pueden en tiempo real ver lo que est√°s haciendo.

### C√≥digo de la aplicaci√≥n

Este es el c√≥digo completo utilizado en este tutorial, como puedes ver es muy simple. En pocas l√≠neas de c√≥digo puedes implementar una comunicaci√≥n totalmente realtime:

- public/index.html

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>My Aplicaci√≥n con Sockets</title>
    <script src="/socket.io/socket.io.js"></script>
    <script src="main.js"></script>
  </head>
  <body>
    <h1>My App</h1>
    <div id="messages"></div>
    <br />
    <form onsubmit="return addMessage(this)">
      <input type="text" id="username" placeholder="Tu Nombre" />
      <input type="text" id="texto" placeholder="Cu√©ntanos algo..." />
      <input type="submit" value="Enviar!" />
    </form>
  </body>
</html>
```

- public/main.js

```js
var socket = io.connect("http://localhost:8080", { forceNew: true });

socket.on("messages", function (data) {
  console.log(data);
  render(data);
});

function render(data) {
  var html = data
    .map(function (elem, index) {
      return `<div>
              <strong>${elem.author}</strong>:
              <em>${elem.text}</em>
            </div>`;
    })
    .join(" ");

  document.getElementById("messages").innerHTML = html;
}

function addMessage(e) {
  var message = {
    author: document.getElementById("username").value,
    text: document.getElementById("texto").value,
  };

  socket.emit("new-message", message);
  return false;
}
```

- server/main.js

```js
var express = require("express");
var app = express();
var server = require("http").Server(app);
var io = require("socket.io")(server);

var messages = [
  {
    id: 1,
    text: "Hola soy un mensaje",
    author: "Carlos Azaustre",
  },
];

app.use(express.static("public"));

app.get("/hello", function (req, res) {
  res.status(200).send("Hello World!");
});

io.on("connection", function (socket) {
  console.log("Alguien se ha conectado con Sockets");
  socket.emit("messages", messages);

  socket.on("new-message", function (data) {
    messages.push(data);

    io.sockets.emit("messages", messages);
  });
});

server.listen(8080, function () {
  console.log("Servidor corriendo en http://localhost:8080");
});
```

> Esto y mucho m√°s est√° incluido mi libro **Aprendiendo JavaScript**, [disponible en LeanPub](http://leanpub.com/aprendiendojavascript).

</article>

---

<article slug="google-launchpad-madrid-dia-4-tecnologia" date="2015-07-09" url="https://carlosazaustre.es/blog/google-launchpad-madrid-dia-4-tecnologia">

# Google Launchpad Madrid, D√≠a 4: Tecnolog√≠a

**Fecha:** 2015-07-09
Lleg√≥ el primer d√≠a dedicado a la **tecnolog√≠a** en la semana de [Google Launchpad](/google-launchpad-week-dia-1-producto/) en [Campus Madrid](http://campus.co/madrid), donde [Paola](http://twitter.com/ggarciapaola) y yo estamos aprendiendo como mejorar [**Chefly**](https://chefly.co)

Hoy hemos contado con dos grandes charlas impartidas por [Andr√©s L. Mart√≠nez](http://twitter.com/davilagrau) (m√°s conocido como _Almo_) y [Jorge Barroso](http://twitter.com/flipper83) (m√°s conocido como _Flipper83_)

![](/images/google-launchpad-madrid-dia-4-tecnologiaIMG_20150709_100654.jpg)

_Almo_ nos ha presentado las cifras del mercado _mobile_, muy interesantes, quedando como resumen que casi el 80% de la poblaci√≥n utiliza Android, pero la monetizaci√≥n de las apps llega m√°s de la parte de iOS.

![](/images/google-launchpad-madrid-dia-4-tecnologiaIMG_20150709_101925.jpg)
![](/images/google-launchpad-madrid-dia-4-tecnologiaIMG_20150709_102256.jpg)
![](/images/google-launchpad-madrid-dia-4-tecnologiaIMG_20150709_101251.jpg)

Fuente: [Developer Economics](http://developereconomics.com/go)

Despu√©s _Flipper_ nos ha contado su experiencia como "Mobile Developer for Startups" que puede aplicarse a cualquier tipo de App, incluidas las webs.

![](/images/google-launchpad-madrid-dia-4-tecnologiaIMG_20150709_110552.jpg)

De √©l hemos sacado varias cosas importantes, como:

> No construyas tu producto sobre tu prototipo.

El prototipo es para validar una idea. Hazlo todo lo feo que puedas ya que luego es mejor que lo tires y empieces tu producto de cero en base a lo aprendido. No hay que tener miedo a tirar cosas.

> One page design

Ten en una s√≥la p√°gina el dise√±o global de tu aplicaci√≥n. Tenlo siempre presente en tu equipo, y que todo el mundo pueda verlo diariamente y a√±adir notas. As√≠ todo el mundo est√° en sinton√≠a y sabe que hay que hacer, que ha cambiado y que se ha hecho ya

> MVP: M de M√≠nimun, pero m√≠nimo de todo.

Hacer nuestro proyecto funcional. Que haga una sola cosa pero que funcione, lo haga bien y se vea bien.

> Feedback de usuarios.

Toma las decisiones en base a los n√∫meros y datos que dan tus usuarios. No hay que ser dictarorial con el dise√±o y las funcionalidades de tu aplicaci√≥n. B√°sate en lo que hacen tus usuarios y lo que demandan.

> Automatiza tu tiempo.

En una Startup lo m√°s importante es el tiempo. Si podemos automatizar cosas, tenemos que hacerlo. Tenemos herramientas como Jenkins, Travis, Tests, etc.. Invertir en ellas nos har√° ahorrar tiempo y probar mejor nuestras ideas.

Y la **m√°s √∫til** para mi:

> From STUPID to SOLID code

La mejor clase de programaci√≥n que he escuchado y en s√≥lo 5 minutos. Os recomiendo que [leais sobre ello](http://williamdurand.fr/2013/07/30/from-stupid-to-solid-code/).

A continuaci√≥n hemos tenido las mentor√≠as. M√°s relajadas que los d√≠as anteriores, pero no por ello menos interesantes y √∫tiles. Hoy hemos tenido menos mentor√≠as que otros d√≠as, y nuestros mentores han sido [Javier Lafora](https://twitter.com/eLafo), [Ricardo Varela](https://twitter.com/phobeo) e [Ismael Faro](https://twitter.com/ismaelfaro). Mil gracias por su tiempo de nuevo y por las ideas aportadas!

Javier nos ha recomendado unas cuantas herramientas muy √∫tiles para el an√°lisis de nuestro c√≥digo, monitorizaci√≥n y logs:

- [Pingdom]()
- [Monit]()
- [Rollbar]()

Ricardo nos ha dado un buen tip sobre el manejo de ramas en Git y realizar despliegues, utilizando la teor√≠a del _Patr√≥n Tofu_.

![](/images/google-launchpad-madrid-dia-4-tecnologiagit-workflow-release-cycle-2feature.png)
Fuente: [Atlassian](https://www.atlassian.com/pt/git/workflows#!workflow-gitflow)

B√°sicamente consiste en que las ramas "superiores" se encuentre el c√≥digo o versi√≥n m√°s estable, y en las "inferiores" la m√°s sujeta a cambios. Por ejemplo, la rama de producci√≥n siempre por encima de "Staging" y esta de "Development". De esta manera siempre podemos volver a versiones anteriores f√°cilmente y tener versiones estables f√°cilmente localizables.

Y por √∫ltimo Ismael nos ha dado grandes consejos en arquitectura que poco a poco iremos implementando en [Chefly](http://chefly.co). Cosas que nos ha dejado para que miremos m√°s adelante:

- [Cloudfare](https://www.cloudflare.com/plans)
- [Hapi.js](http://hapijs.com/)
- [Moe](https://github.com/Yelp/moe)
- [Kue](https://github.com/Automattic/kue)
- [Polymer Starter Kit](https://github.com/PolymerElements/polymer-starter-kit#getting-started)

Muy interesantes y que cuando definamos la pr√≥xima versi√≥n de [Chefly](https://chefly.co) valoraremos y seguramente implementemos.

En cuanto al resumen del punto de situaci√≥n y el plan de acci√≥n a tomar, estos son nuestros puntos:

- **Puntos de Situaci√≥n**:

Problemas encontrados en torno a la tecnolog√≠a y arquitectura utilizadas:

- No hacemos test en el c√≥digo (si, lo sabemos, no nos pegu√©is)

- No monitorizamos correctamente los servidores.

- No tenemos suficientemente automatizados los despliegues.

- La p√°gina pesa mucho, no optimizamos las im√°genes y dem√°s assets

- **Puntos de acci√≥n**:

Plan de acci√≥n a ejecutar:

- Aplicar herramientas de monitorizaci√≥n, logger, y an√°lisis de c√≥digo a nuestros sistemas

- Testear los puntos claves de la aplicaci√≥n como el registro, login y pago. Empezar por test unitarios para hacernos a ello y pasar a test de aceptaci√≥n. Antes de hacer los test es conveniente que definamos unas historias de usuario, que nos servir√°n para definir la UX y las funcionalidades que necesitemos.

- Llevar una gesti√≥n eficiente de las ramas de GIt. Tener una rama de ‚ÄúStaging‚Äù y un servidor de ‚ÄúStaging‚Äù para probar en un entorno similar al de producci√≥n antes de desplegar

- Cuantificar el coste que tendr√≠a utilizar una soluci√≥n ‚Äúhosteada‚Äù como Heroku, para no perder tiempo en Administraci√≥n de servidores y dedicarnos a la parte ‚Äúcore‚Äù. Analizarlo y elaborar un presupuesto.

- Utilizar cloudfare para servir los assets, nos ahorrar√° tiempo y mejorar√° la carga de la p√°gina

- Tener scripts de despliegue para automatizar la subida, y posteriormente pasar a soluciones como CodeShip

- Utilizar Mongo de manera m√°s eficiente eliminando ‚Äúpopulates‚Äù y duplicar contenido que queramos mostrar. No es limpio, pero nos da rapidez.

¬°Y ma√±ana ya acabamos! Parece que llevamos un mes, recibiendo feedback y nuevas ideas. Est√° siendo una gran experiencia. Ma√±ana veremos m√°s tecnolog√≠a y pondremos en com√∫n todo lo aprendido y a continuaci√≥n manos a la obra!

</article>

---

<article slug="chefly-en-google-launchpad-madrid-marketing" date="2015-07-08" url="https://carlosazaustre.es/blog/chefly-en-google-launchpad-madrid-marketing">

# Tercer d√≠a de Chefly en Google Launchpad Madrid: Marketing

**Fecha:** 2015-07-08
Continuo con mi serie de post sobre [Google Launchpad Week Madrid](/google-launchpad-week-dia-1-producto/), relatando la experiencia que estamos viviendo [Paola](http://twitter.com/ggarciapaola) y yo como creadores de **[Chefly](https:/chefly.es)**.

**Llevamos ya tres d√≠as** y parecen tres semanas de la cantidad de informaci√≥n, feedback y tips que estamos recibiendo. Nos pidieron por favor que redactaramos los puntos de situaci√≥n y acci√≥n que vayamos definiendo y descubriendo d√≠a a d√≠a para los casos de uso de las _Startups_ que pasan por _Launchpad_, y la verdad es que hicieron bien, porque si no hiciera esta peque√±a reflexi√≥n d√≠a a d√≠a al llegar a casa, no podr√≠a acordarme de todo lo que vemos de un d√≠a para otro y perder√≠a una informaci√≥n valios√≠sima.

Hoy ha tocado el tema del **Marketing Digital**, como vender tu producto. Algo que, como t√©cnicos que somos, necesitamos mucho y que con el _M√°ster intensivo_ que hemos tenido hoy nos ha hecho crecer el cerebro :D

La charla del d√≠a ha sido impartida por [Jorge Galido](http://twitter.com/Jorge__Galindo), Jefe de Producto en [47Degrees](http://www.47deg.com/) Que nos ha contado la estrategia que siguieron cuando lanzaron un aplicaci√≥n Launcher para Android, llamada 9cards. Comunmente se le llama Growth Hacking, pero me gusta m√°s el nombre que Jorge ha empleado, _Marketing pa' tiesos_.

![](/images/chefly-en-google-launchpad-madrid-marketing/IMG_20150708_102933.jpg)

C√≥mo con una cantidad no demasiado grande de dinero, invertirla en publicidad y seguir una estrategia inteligente para conseguir el mismo rendimiento que si no aplicasemos ninguna estrategia y gastasemos 50 veces m√°s.

Despu√©s hemos pasado a las mentor√≠as, donde [David Alay√≥n](https://twitter.com/DavidAlayon) ha repetido con nosotros, y tambi√©n hemos podido disfrutar del tiempo y la experiencia de [Vanesa Gallego](https://twitter.com/vanesagm), [Jose Manrique](https://twitter.com/jsmanrique), [Julio Rodr√≠guez Cruz](https://twitter.com/thisjrodriguez) y [Tommaso Canonici](https://twitter.com/tcanonici). Much√≠simas gracias por vuestro tiempo y feedback. Hab√©is llenado nuestra cabeza de ideas. Tenemos trabajo por delante :)

La √∫ltima hora la dedicamos a realizar un _Wrap Up_ d√≥nde exponemos lo que estamos aprendiendo cada _Startup_. **Hoy nos ha tocado** a nosotros compartir lo que estamos aprendiendo en _Launchpad_ y el mejor resumen lo ha dado Paola

![Chefly en Google Launchpad Madrid](/images/chefly-en-google-launchpad-madrid-marketing/CJZwmPWXAAAMSIG.jpg)
Foto por [@TetuanValley](http://twitter.com/tetuanvalley)

> Nuestro "hijo" no nos lo han cambiado. Sigue siendo el mismo que era, lo que pasa que antes, al hablar, s√≥lo le entend√≠amos nosotros.
> Ahora tras lo aprendido, ya vamos a ense√±arle a hablar y que todo el mundo lo entienda.

> - **[@ggarciapaola](http://twitter.com/ggarciapaola) CEO & CoFounder of [Chefly](http://chefly.co)**

No estamos comunicando bien la idea que tenemos de [Chefly](http://chefly.co). En nuestra cabeza si est√°, pero lo que la gente ve en la web no es lo mismo. Nos estamos comunicando mal, pero **creemos que tenemos la soluci√≥n**, y eso **nos est√° motivando** mucho m√°s :)

De nuevo, de cara a los casos de uso, estos son nuestros puntos de situaci√≥n y puntos de acci√≥n que tomaremos:

- **Puntos de Situaci√≥n**:

A partir de todo lo aprendido y visualizado los d√≠as anteriores nos encontramos en este punto:

- No tenemos plan de marketing porque no tenemos definidos correctamente nuestros segmentos de usuarios. Abarcamos mucho. Debemos buscar el segmento m√°s valioso aunque no sea el que m√°s dinero nos reporte.

- Los usuarios se sienten abandonados en la plataforma. No les seguimos, no les ofrecemos la atenci√≥n que requieren y son lo m√°s valioso.

- No tenemos enfocado o definidos cuales son nuestros canales ‚Äúcore‚Äù.

* **Puntos de Acci√≥n**:

Como no tenemos un plan de marketing, ni segmento de usuarios definido, esos ser√°n nuestros primeros puntos de acci√≥n:

- Definir nuestro segmento de usuario. Crear cual ser√° nuestro perfil ‚ÄúPersona‚Äù que usar√° la plataforma y elaborar las campa√±as de marketing y dise√±o orientadas a ese perfil.

- Para ello tenemos que hacer uso del Teorema del C√≠rculo Dorado, Personalizaci√≥n de la Marca y tener claras estas 7 patas: Publicidad, Comunidad, _Partners_, _Influencers_, _Offline_ y _Publish Relationship_.

- Una vez definido el segmento, realizar campa√±as de publicidad en Facebook Ads, microsegmentadas y tampoco gastar demasiado. √önicamente con el fin de tener un ‚Äúpush‚Äù inicial. No merece la pena gastar m√°s en eso. El resto del crecimiento ha de ser org√°nico.

- Cuando tengamos definido claramente el segmento, podemos invertir en AdWords una peque√±a cantidad.

- Buscar influencers que hablen de nosotros, a trav√©s de eventos, emails, post patrocinados. Siempre como empuje inicial.

Tenemos _tarea_ por delante, pero muy emocionante. Es salir de nuestra zona de comfort, lo cu√°l siempre es un reto.

[Ma√±ana](/google-launchpad-madrid-dia-4-tecnologia/) y pasado, los dos √∫ltimos d√≠as, est√°n dedicados a [**Tecnolog√≠a**](/google-launchpad-madrid-dia-4-tecnologia/), donde estoy m√°s que seguro que aprenderemos bastante.

</article>

---

<article slug="launchpad-week-madrid-dia-2-ux" date="2015-07-07" url="https://carlosazaustre.es/blog/launchpad-week-madrid-dia-2-ux">

# Launchpad Week Madrid. D√≠a 2: UX

**Fecha:** 2015-07-07
Continuamos con la [serie de post sobre Launchpad Week Madrid](/google-launchpad-week-dia-1-producto/) que ir√© escribiendo a lo largo de la semana para compartir lo que estamos aprendiendo (¬°Que no es poco!)

Si [le√≠stes el √∫ltimo post](/google-launchpad-week-dia-1-producto/), sabr√°s que [Paola](http://twitter.com/ggarciapaola) y yo estamos participando en el [Google Launchpad Week](https://events.withgoogle.com/launchpad-week-mad/) que se celebra en Madrid, con [**Chefly** (nuestra plataforma de comida casera)](http://chefly.co), donde mentores especializados de varias √°reas nos prestan su ayuda y experiencia para resolver problemas que nos surgen a las _Startups_ y ayudarnos a encontrar otros que no ve√≠amos.

Est√° siendo una gran experiencia. El d√≠a de ayer fue dedicado a **Producto** y hoy ha sido dedicado a la **UX**, usabilidad y dise√±o en general de nuestras aplicaciones. S√≥lo han pasado dos d√≠as y ya parece que llevamos m√°s de una semana debido a la intensidad y la cantidad de informaci√≥n, feedback y orientaci√≥n.

![](/images/launchpad-week-madrid-dia-2-ux/2015/07/IMG_20150707_101355.jpg)

El d√≠a de hoy ha comenzado con una charla titulada "El UX lo es todo" de [Eusebio Reyero](https://twitter.com/ereyero), CEO de [Hackity](http://hackity.com) que ha sido muy interesante y nos ha abierto mucho los ojos. Os dejo con una serie de _links_ que nos ha compartido en su presentaci√≥n para todo aquel que quiera mejorar el UX de sus aplicaciones:

- [http://hackdesign.org/lessons/9](http://hackdesign.org/lessons/9)
- [http://medium.com/bridge-collection/modern-design-tools-using-real-data-62d499e97482](http://medium.com/bridge-collection/modern-design-tools-using-real-data-62d499e97482)
- [http://www.gv.com/lib/startup-design-what-really-matters](http://www.gv.com/lib/startup-design-what-really-matters)
- [http://www.gv.com/lib/critique](http://www.gv.com/lib/critique)
- [http://measuringuserexperience.com](http://measuringuserexperience.com)
- [http://uxmag.com/articles/ten-guidelines-for-quantitative-measurement-of-ux](http://uxmag.com/articles/ten-guidelines-for-quantitative-measurement-of-ux)
- [http://www.sitepoint.com/5-ways-use-google-analytics-ux-research](http://www.sitepoint.com/5-ways-use-google-analytics-ux-research)

Despu√©s nos ha mentorizado y nos ha ense√±ando muchas m√°s cosas que UX, hemos hablado sobre Producto y tambi√©n Marketing. Ha sido muy completo y muy revelador para darnos cuenta en que situaci√≥n estamos y el trabajo que tenemos por delante. Si tuviera que resumir en pocas palabras su mentor√≠a ser√≠a:

> 1.  Mide todo lo que puedas

> 1.  Analiza los datos obtenidos

> 1.  Dedice que hacer

Como desarrolladores tendemos a hacer lo que m√°s nos gusta, programar. Implementamos funcionalidades sin probarlas y dise√±amos nuestras webs en base a nuestros gustos. Es importante **medir** lo que hacen nuestros usuarios, que son los que mandan, son los que usan nuestra aplicaci√≥n. **Analizar** los datos obtenidos y **decidir** nuestros dise√±os e iteracciones en base a ello.

![](/images/launchpad-week-madrid-dia-2-ux/CJUg_1cWwAAkvlB-jpg-large.jpeg)
Foto por [@TetuanValley](http://twitter.com/tetuanvalley)

Los dem√°s mentores que nos han prestado su tiempo han sido [Marc Borr√†s](https://twitter.com/marcborras), [Silvia P√©rez](https://www.linkedin.com/profile/view?id=45043302&authType=NAME_SEARCH&authToken=gO3T&locale=en_US&trk=tyah&trkInfo=clickedVertical%3Amynetwork%2Cidx%3A1-1-1%2CtarId%3A1436299910184%2Ctas%3Asilvia%20p%C3%A9rez%20felipe), [Nacho Rodr√≠guez](https://www.linkedin.com/profile/view?id=4417489&authType=NAME_SEARCH&authToken=btCy&locale=en_US&trk=tyah&trkInfo=clickedVertical%3Amynetwork%2Cidx%3A1-1-1%2CtarId%3A1436299995808%2Ctas%3Anacho%20rod) y [David Alay√≥n](https://twitter.com/DavidAlayon). Gente muy inteligente y profesional en su campo que nos ha dado muchos tips, consejos y visi√≥n que nos ayudar√°n a mejorar Chefly. Muchas gracias por vuestro tiempo.

[Johan Feito](https://www.linkedin.com/in/johanfeito) y [Jaime Novoa](https://www.linkedin.com/in/jaimegnovoa) se encargan desde [Google Launchpad](https://developers.google.com/startups/) a recopilar los casos de uso que las _Startups_ participantes les entregamos a fin de compartirlo con la comunidad. Por eso, comparto tambi√©n por √©ste canal lo que estamos aprendiendo para todo aqu√©l emprendedor que se encuentre en una situaci√≥n similar le sirva de ayuda.

- **Puntos de Situaci√≥n**

Partiendo del punto anterior, donde definimos o clarificamos el producto, hace que influya en nuestra UX la forma en la que presentamos la informaci√≥n. Detectamos los siguientes problemas:

- Los _copys_ est√°n mal enfocados, no indicamos con ellos lo que realmente queremos transmitir con nuestro producto. Se genera una expectativa falsa que no cuadra con lo que despues ve el usuario.

- No queda claro cuales son los pasos para registrarse, como usuario normal o como cocinero.

- Aparecen muchos productos sin ning√∫n orden m√°s que el de por distancia, pero no hay filtros, como vimos el d√≠a del producto.

- El mapa que tenemos indica inmediatez, de nuevo no estamos transmitiendo bien lo que ofrecemos y se le da mucha importancia, m√°s que al producto. Los productos aparecen peque√±os en comparaci√≥n con el mapa y son la parte clave.

- Se puede registrar cualquiera de cualquier parte del mundo, y no encuentra nada en su zona, eso provoca frustraci√≥n.

- Problemas con algunos textos que confunden, se leen mal y no aportan valor. Algunos iconos generan confusi√≥n y algunos botones, por su color y tama√±o confunden

- No medimos datos clave como son el flujo de navegaci√≥n del usuario en la p√°gina y d√≥nde abandona.

* **Puntos de Acci√≥n**

Tras defininir y tener claros estos problemas, se plantean los siguientes puntos de acci√≥n a ejecutar:

- **Filtros**. De nuevo, c√≥mo definimos el d√≠a anterior, debemos categorizar para poder filtrar la informaci√≥n en base a claves como el precio, tipo de entrega, tiempo de preparaci√≥n, tipo de comida, etc..

- **Copy**. Cambiarlos para definir claramente lo que ofrece nuestra plataforma, que se entienda y no genere falsas expectativas.

- **Empezar local**. Limitarnos a una regi√≥n que podamos controlar, para poder medir y cambiar lo necesario. Cuando el volumen crezca ser√° momento de expandirse a otras ciudades, etc.

- **Redise√±ar el registro**. En este momento resulta confuso el registro, si uno es usuario normal o cocinero. Clarificar el flujo y pedir al cocinero los datos que necesitemos para el filtrado de productos.

- **Simplicidad**. Eliminar elementos que ensucian el dise√±o y la usabilidad y no aportan m√°s valor a la plataforma
  Medir. Medir todo lo que podamos. Testear pantallas y flujos antes de implementarlo. Medir -> Datos -> Decidir.

[Ma√±ana](/chefly-en-google-launchpad-madrid-marketing/) llegamos al ecuador de la semana con el tercer d√≠a, [dedicado al **Marketing**](/chefly-en-google-launchpad-madrid-marketing/), d√≥nde a partir de las decisiones tomadas respecto a producto y dise√±o, podamos plasmarlas en una buena estrategia de marketing y publicidad.

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=XR6wjE1n32M)
/>

</article>

---

<article slug="google-launchpad-madrid-dia-1-producto" date="2015-07-06" url="https://carlosazaustre.es/blog/google-launchpad-madrid-dia-1-producto">

# Google Launchpad Week Madrid. D√≠a 1: Producto

**Fecha:** 2015-07-06
Esta semana se [celebra en Madrid](https://events.withgoogle.com/launchpad-week-mad/), en el **[CampusMadrid](http://campus.co/madrid)**, una nueva edici√≥n de la [Google Developers **Launchpad** Week](https://developers.google.com/startups/). Una semana intensa de trabajo con mentores que te ayudan a identificar los problemas que tienes en tu Startup y c√≥mo atacarlos con un plan de acci√≥n.

![Google Launchpad](/images/google-launchpad-madrid-dia-1-producto/Screen-Shot-2015-07-06-at-23-03-45.png)

En **Espa√±a ya se han celebrado 3 ediciones**, [2 en Barcelona](https://www.youtube.com/watch?v=69j2BJtPCzc) y √©sta es [la primera en Madrid](https://events.withgoogle.com/launchpad-week-mad/). En otras ciudades del mundo, como en Tel-Aviv (Israel) llevan ya m√°s de 30 ediciones.

![](/images/google-launchpad-madrid-dia-1-producto/CJN357UWgAAqoS5-jpg-large.jpeg)
Foto por [@CampusMadrid](http://twitter.com/campusmad)

Para participar tienes que ser seleccionado a trav√©s de una aceleradora, incubadora, o coworking space. Idealmente est√° enfocada para Startups que lleven un a√±o trabajando, est√©n dedicados a _Full-Time_ y que puedan acudir durante la semana al menos 2 socios, preferiblemente el CEO y el CTO.

[![Launchpad Badge](/images/google-launchpad-madrid-dia-1-producto/CJN0dwNWIAAijgV.jpg)](http://chefly.co)

Nosotros, con **[Chefly](http://chefly.co)**, al pertenecer a la comunidad de [Tetuan Valley](http://tetuanvalley.com), en su 10a edici√≥n, hemos podido acceder a esta edici√≥n de Launchpad junto con nuestros compa√±eros "Tetuaneros" de [TieDots](http://tiedots.co) y [Teltoo](http://teltoo.com).

Cada d√≠a de la semana est√° dedicado a un elemento concreto. El primer d√≠a es sobre **Producto**, el segundo **UX**, despu√©s **Marketing** y los dos √∫ltimos d√≠as son dedicados a **Tecnolog√≠a**.

Cada d√≠a sigue el siguiente _Schedule_, primero un desayuno-networking de 9:10 a 10:00h, despu√©s una charla sobre el tema del d√≠a impartida por un mentor, de 10:00 a 11:00. Despues y hasta la hora de comer, tenemos sesiones 1:1 con mentores sobre el tema concreto del d√≠a, en slots de 45 minutos, donde nosotros contamos los problemas que tenemos y ellos nos dan ideas y nos hacen ver nuevos problemas, lo cu√°l es genial porque aprendes much√≠simo. Despues 1h para comer y volvemos con 2 nuevos mentor√≠as, en total 5 al d√≠a. Al finalizar el d√≠a ponemos todas las Startups en com√∫n lo que hemos aprendido y a las 18:30 _cerramos el kiosko_ y hacemos un poco de _networking_.

![](/images/google-launchpad-madrid-dia-1-producto/CJPddp5UkAA26jw-jpg-large.jpeg)
Foto por [@TetuanValley](http://twitter.com/tetuanvalley)

**Hoy hemos tenido la primera sesi√≥n**, dedicada a la definici√≥n de Producto y vamos a compartir con la comunidad un poco los puntos m√°s importantes que hemos aprendido, problemas encontrados y puntos de acci√≥n a realizar. As√≠ si est√°s creando tu Startup, quiz√° te sirva de orientaci√≥n y ayuda :)

Nuestros **Mentores** del d√≠a han sido:  
[Anna Bofill Bert](https://twitter.com/AnnaBofillBert), [Claudio Cossio](https://twitter.com/ccossio), [Eduardo Fern√°ndez](https://twitter.com/edufernandez), [Israel Alc√°zar](https://twitter.com/ialcazar) y [Enrique Penichet](https://twitter.com/enriquepenichet). Muchas gracias a todos por vuestro tiempo y por las ideas aportadas :)

**Punto de Situaci√≥n:**

Hemos identificado los siguientes problemas:

- Falta de **Customer Retention**. Tenemos usuarios registrados y cocineros, pero apenas hay transacciones.

- La plataforma contempla todo tipo de comidas, sin definir si son de disponiblidad inmediata, para pedir dentro de X d√≠as, si son a recoger o nos lo traen. No se sabe cuando est√° el producto disponible

- Nuestro slogan, con la frase ‚Äúcerca de t√≠‚Äù indica inmediatez y no es lo que buscamos. Esto conlleva expectativas falsas y genera frustraci√≥n a los usuarios.

- No se ve claramente nuestro hilo conductor: La comida casera.

- El segmento al que nos dirigimos es muy amplio y difuso. Est√° todo muy mezclado y desenfocado.

**Puntos de Acci√≥n:**

A partir de los problemas que hemos identificado, estos ser√≠an nuestros puntos de acci√≥n a implementar:

- **Target**: Definir un segmento de mercado al que atacar. Para ello, elaborar una lista de todos los posibles segmentos, comprobar cu√°l es su tama√±o de mercado de cada uno y dirigir toda la comunicaci√≥n a ese target.

  Testear este segmento durante 2-3 semanas y analizar los resultados. Si no son los deseados, iterar al siguiente segmento hasta dar con el _Market-Fit_. Estas iteraciones han de hacerse durante m√°ximo 18-20 meses, que el tiempo de vida medio de una Startup.

- **Categorizar**: Establecer filtros, los m√°s importantes: por coste (no todos los usuarios buscan platos baratos ni tampoco caros, eso define el segmento) y por disponibilidad (De inmediato, Para comer hoy/ma√±ana/pasado, para cenar hoy/ma√±ana/pasado).

- **Preguntar**. Preguntar a nuestros usuarios registrados por qu√© lo hicieron y qu√© buscan en la plataforma. De igual manera, preguntar a nuestros cocineros registrados, saber que buscan y qu√© quieren lograr con nuestra plataforma. Esto nos dar√° orientaci√≥n hacia que segmento atacar.

- **Customer Retention**. Una vez haya transaciones, mantener a los clientes. Con promociones, recompensas, etc.. _Mail Marketing_

Esto ha sido nuestro primer d√≠a de _Launchpad_. [Ma√±ana a darle ca√±a a la UX](/launchpad-week-madrid-dia-2-ux/) :)

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=XR6wjE1n32M)
/>

</article>

---

<article slug="desplegando-contenedores-docker-en-digital-ocean" date="2015-07-02" url="https://carlosazaustre.es/blog/desplegando-contenedores-docker-en-digital-ocean">

# Desplegando contenedores en DigitalOcean con Docker, Docker Compose y Docker Machine

**Fecha:** 2015-07-02
Hace unos meses escrib√≠ un post sobre [como manejar contenedores Docker en MAC](/manejando-docker-desde-os-x-creando-nuestro-primer-contenedor/), ya que se necesita una m√°quina virtual (_boot2docker_) para poder utilizarlos.

Hoy quer√≠a probar Docker en _producci√≥n_ y en este art√≠culo voy a subir el [API REST que hice anteriormente con Node/Io.js y MongoDB](/como-crear-una-api-rest-usando-node-js/) pero en **dos contenedores Docker diferentes** (uno con la **aplicaci√≥n Node/IO** y otro con **MongoDB**) a un instancia de [DigitalOcean](https://www.digitalocean.com/?refcode=f716de9860aa) desde contenedores Docker. Vamos all√°.

El [**c√≥digo fuente** de este proyecto lo tienes en **GitHub** como siempre](http://github.com/carlosazaustre/iojs-api-example). Si√©ntete libre de descargarlo y usarlo.

1. [Montando el entorno con Docker Compose](#montandoelentornocondockercompose)
2. [Desplegando los contenedores con Docker Machine](#desplegandoloscontenedorescondockermachine)

> Si tienes dudas sobre Docker, te recomiendo que leas [el art√≠culo que escrib√≠ hace un tiempo sobre ello](/manejando-docker-desde-os-x-creando-nuestro-primer-contenedor/).

---

### Montando el entorno con Docker Compose

Primero necesitamos montar el entorno de trabajo en local. Como dije en la introducci√≥n **vamos a usar dos contenedores**, uno para servicio, el API REST en Node u IO.js ser√° uno, y el otro ser√° el que contenga la base de datos, en este caso MongoDB. SI por ejemplo us√°semos Nginx, Redis, etc... ir√≠an en otros contenedores diferentes. De esta forma, si necesitamos escalar, podemos poner cada contenedor en una m√°quina m√°s adelante sin mucha dificultad.

![docker containers mongodb node](/images/desplegando-contenedores-docker-en-digital-ocean/docker-containers.jpg)

Una vez tenemos [instalado Docker en nuestros equipos](/manejando-docker-desde-os-x-creando-nuestro-primer-contenedor/), levantamos el servicio, en el caso de Mac, usando **boot2docker** y recargando las variables de entorno de Docker que contienen la IP privada, etc...

```
$ boot2docker up
$ source ~/.bash_profile
```

Para poder manejar varios contenedores de manera sencilla y poder levantarlos y pararlos en conjunto, instalaremos **Docker Compose**, con el que a a trav√©s de un fichero `.yml` configuraremos nuestro entorno f√°cilmente.

Ya sea desde Mac o Linux, lo podemos instalar as√≠:

```
$ sudo -i
root# curl -L https://github.com/docker/compose/releases/download/1.3.1/docker-compose-`uname -s`-`uname -m` > /usr/local/bin/docker-compose
root# chmod +x /usr/local/bin/docker-compose
root# exit
$
```

> **Nota**
> Como vamos a probar varias veces, seguramente querremos borrar y parar los contenedore e im√°genes que creamos m√°s de una vez, y hacerlo de uno en uno puede resultar desesperante, por tanto estos dos comandos de a continuaci√≥n nos har√°n ahorrar tiempo:
> Eliminar todos contenedores
> `$ docker rm $(docker kill $(docker ps -aq))`
> Eliminar todas im√°genes
> `$ docker rmi $(docker images -qf "dangling=true")`
> Fuente: [Stackoverflow](http://stackoverflow.com/questions/17665283/how-does-one-remove-an-image-in-docker)

Creamos un √∫nico `Dockerfile` para nuestra aplicaci√≥n Node/IO.js, ya que el contenedor de MongoDB lo crearemos desde el propio `docker-compose.yml` ya que no necesitamos m√°s que la imagen de Mongo. En el caso de la aplicaci√≥n IO.js, aparte del entorno necesitamos copiar el c√≥digo del proyecto, instalar dependencias, etc...

```
FROM iojs:2.3.0

ADD . /iojs-api
WORKDIR /iojs-api
RUN npm install -g babel; npm install
```

Tomamos como imagen fuente la de `iojs:2.3.0` creada y mantenida por la propia comunidad de Docker. De esta manera nos ahorramos importar el sistema operativo, configurarlo, instalarle IO.js, Git, etc... , la imagen `iojs:2.3.0` ya incorpora todo eso. Si queremos tener un entorno m√°s personalizado podemos hacerlo, pero para este tutorial lo he obviado.

Ya en el fichero `docker-compose.yml` escribimos todo el entorno para la ejecuci√≥n de los contenedores

```yaml
api:
  build: .
  command: babel-node /iojs-api/index.js --restart=always
  ports:
    - "3000:3000"
  links:
    - mongodb
mongodb:
  image: mongo:2.6
  ports:
    - "27017:27017"
```

¬øQu√© estamos indicando en este fichero? Pues, que vamos a crear un contenedor llamado `api` el cual a trav√©s del comando `build: .` le decimos que lo construya con el `Dockerfile` que hay en la raiz del proyecto. Cuando finalice su montaje, ejecutar√° el comando `babel-node /iojs-api/index.js --restart=always` que es el que lanza el servidor Io.js con nuestro API. Mapeamos el puerto `3000` del contenedor con el `3000` del sistema y con `links` le decimos que se enlace con el contenedor `mongodb` que a continuaci√≥n creamos.

> **Nota**:

> Se recomienda no usar supervisores de procesos en contenedores Docker y usar en su lugar el flag `--restart=always`

> Fuente [StackOverflow](http://stackoverflow.com/questions/28942614/should-i-use-forever-pm2-within-a-docker-container)

El contenedor Mongodb no se crea a partir de un `Dockerfile` por eso no hay comando `build` pero si un comando `image` donde le indicamos a partir de que imagen de Docker crearlo, en este caso `mongo:2.6`. Tambi√©n mapeamos los puertos que vamos a usar, en el caso de Mongo es el `27017`

Ejecutando el siguiente comando levantaremos los contenedores y se pondr√°n en funcionamiento

```
$ docker-compose up
```

Si los paramos para hacer cambios y necesitamos reconstruir las im√°genes, lo haremos con el comando:

```
$ docker-compose build
```

Te habr√°s fijado que no funciona, y da un error de conexi√≥n con Mongo, ¬øSabes por qu√©? porque la URL de nuestra base de datos Mongo ya no es localhost, es una privada que le asigna Docker. ¬øY c√≥mo lo averiguamos?

Si ejecutas el siguiente comando, podemos ver las variables de entorno que crea Docker para nuestra aplicaci√≥n

```
$ docker-compose run api env
Starting iojsapi_mongodb_1...
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
HOSTNAME=9b0a72280cd4
TERM=xterm
IOJSAPI_MONGODB_1_PORT=tcp://172.17.0.4:27017
IOJSAPI_MONGODB_1_PORT_27017_TCP=tcp://172.17.0.4:27017
IOJSAPI_MONGODB_1_PORT_27017_TCP_ADDR=172.17.0.4
IOJSAPI_MONGODB_1_PORT_27017_TCP_PORT=27017
IOJSAPI_MONGODB_1_PORT_27017_TCP_PROTO=tcp
IOJSAPI_MONGODB_1_NAME=/iojsapi_api_run_1/iojsapi_mongodb_1
IOJSAPI_MONGODB_1_ENV_MONGO_VERSION=2.6.10
MONGODB_PORT=tcp://172.17.0.4:27017
MONGODB_PORT_27017_TCP=tcp://172.17.0.4:27017
MONGODB_PORT_27017_TCP_ADDR=172.17.0.4
MONGODB_PORT_27017_TCP_PORT=27017
MONGODB_PORT_27017_TCP_PROTO=tcp
MONGODB_NAME=/iojsapi_api_run_1/mongodb
MONGODB_ENV_MONGO_VERSION=2.6.10
MONGODB_1_PORT=tcp://172.17.0.4:27017
MONGODB_1_PORT_27017_TCP=tcp://172.17.0.4:27017
MONGODB_1_PORT_27017_TCP_ADDR=172.17.0.4
MONGODB_1_PORT_27017_TCP_PORT=27017
MONGODB_1_PORT_27017_TCP_PROTO=tcp
MONGODB_1_NAME=/iojsapi_api_run_1/mongodb_1
MONGODB_1_ENV_MONGO_VERSION=2.6.10
NPM_CONFIG_LOGLEVEL=info
IOJS_VERSION=2.3.0
HOME=/root
```

Hay dos que vamos a utilizar
`MONGODB_1_PORT_27017_TCP_ADDR=172.17.0.4` y `MONGODB_1_PORT_27017_TCP_PORT=27017`

Son el host y puerto de MongoDB dentro de nuestro contenedor, por tanto vamos a indic√°rselo en el c√≥digo, en el fichero `index.js` cuando nos conectamos a la base de datos.

```javascript
const mongoHost = process.env.MONGODB_1_PORT_27017_TCP_ADDR || "127.0.0.1";
const mongoPort = process.env.MONGODB_1_PORT_27017_TCP_PORT || 27017;
const database = `mongodb://${mongoHost}:${mongoPort}/directory`;
```

De esta manera, si las variables de entorno est√°n definidas las usar√°. Por el contrario si estamos fueras de los contendedor de Docker, emplear√° `localhost`

Con los cambios realizados, reconstruimos las im√°genes y levantamos de nuevo el entorno:

```
$ docker-compose build
$ docker-compose up
```

Si probamos el API en `http://dockerhost:3000/employees` veremos que funciona:

![](/images/desplegando-contenedores-docker-en-digital-ocean/Screen-Shot-2015-06-30-at-10-39-15.png)

---

### Desplegando los contenedores con Docker Machine

Ahora vamos a usar otro proyecto de Docker, llamado **Docker Machine** que nos permite crear servidores desde la linea de comandos de nuestra terminal y con ayuda de Docker Compose, desplegarlos a producci√≥n en segundos

De nuevo vamos a usar [DigitalOcean](https://www.digitalocean.com/?refcode=f716de9860aa) para servir nuestra API _contenerizada_. Pero podemos [usar otros servidores como Amazon, Azure, etc..](https://docs.docker.com/machine/#drivers)

Para poder crear servidores con [DigitalOcean](https://www.digitalocean.com/?refcode=f716de9860aa) necesitamos un token que nos d√© acceso a su API. Lo podemos conseguir clickando en el menu API dentro de nuestra cuenta.

![](/images/desplegando-contenedores-docker-en-digital-ocean/Screen-Shot-2015-06-30-at-10-59-39.png)
Ser√° un n√∫mero parecido a este: `7ghr3247fg98429jhd5dufhwg325de9ff1ab`. Lo copiamos (Ten cuidado de no compartir este n√∫mero con nadie, o tendr√°n acceso a tu cuenta)

Ahora desde la linea de comandos, gracias al _Access Token_ de Digital Ocean y su driver podemos crear un droplet con el nombre `iojsapi_DO` con el comando `docker-machine create`:

```
$ docker-machine create --driver digitalocean --digitalocean-access-token 7ghr3247fg98429jhd5dufhwg325de9ff1ab iojsapi_DO

Creating CA: /Users/carlosazaustre/.docker/machine/certs/ca.pem
Creating client certificate: /Users/carlosazaustre/.docker/machine/certs/cert.pem
Creating SSH key...
Creating Digital Ocean droplet...
To see how to connect Docker to this machine, run: docker-machine env iojsapi_DO
```

Para poder trabajar con el entorno reci√©n creado, seleccionamos la _maquina_ con el siguiente comando

```
$ eval "$(docker-machine env iojsapi_DO)"
```

Si ahora ejecutamos `docker-compose` se desplegar√° nuestro entorno en el nuevo droplet creado en DigitalOcean

```
$ docker-compose up
```

Podemos ir a un navegador o hacer uso de la aplicaci√≥n _Postman_ para probar nuestra API que estar√° corriendo en la IP que DigitalOcean nos ha proporcionado y el puerto `3000`. En mi caso en `http://45.55.195.22:3000`

![](/images/desplegando-contenedores-docker-en-digital-ocean/Screen-Shot-2015-06-30-at-11-23-32.png)

¬øNotas como tu cerebro ha crecido un poco? :)

**M√°s informaci√≥n**:

- [Manejando contenedores Docker en Mac OSX](/manejando-docker-desde-os-x-creando-nuestro-primer-contenedor/)
- [Docker: Linking containers together](https://docs.docker.com/userguide/dockerlinks/)
- [Documentaci√≥n de Docker Compose](https://docs.docker.com/compose)
- [Documentaci√≥n de Docker Machine](https://docs.docker.com/machine/)
- [Curso de Docker en Platzi](https://platzi.com/cursos/administracion-servidores/docker/?ref=carlosazaustre.es)

</article>

---

<article slug="desplegando-nuestro-api-rest-en-la-nube-con-digital-ocean" date="2015-07-01" url="https://carlosazaustre.es/blog/desplegando-nuestro-api-rest-en-la-nube-con-digital-ocean">

# Desplegando nuestro API REST Node/IO.js en la nube con Digital Ocean

**Fecha:** 2015-07-01
Despues de haber [creado nuestra API RESTful en Node/IO.js](/construyendo-un-api-rest-con-io-js-y-ecmascript-6/), nos gustar√≠a tenerla desplegada en un servidor para que pueda ser accesible desde cualquier cliente.

En √©ste art√≠culo veremos como desplegarla en producci√≥n, con Git y [DigitalOcean](https://www.digitalocean.com/?refcode=f716de9860aa) como infraestructura.

[El **c√≥digo fuente** utilizado lo tienes en el siguiente respositorio de **GitHub**, √∫salo :)](http://github.com/carlosazaustre/iojs-api-example)

1. [Registro en DigitalOcean](#registroendigitalocean)
2. [Instalaci√≥n del Entorno](#instalacindelentorno)
3. [Descarga del proyecto desde GitHub](#descargadelproyectodesdegithub)
4. [Corriendo el servidor](#corriendoelservidor)

---

### Registro en DigitalOcean

Vamos a utilizar [Digital Ocean](https://www.digitalocean.com/?refcode=f716de9860aa) como IaaS (**I**nfrastructure **a**s **a** **S**ervice) por su facilidad de uso y configuraci√≥n. Adem√°s si te registras con este [link, **consigues 10$ gratis**](https://www.digitalocean.com/?refcode=f716de9860aa), lo que suponen 2 meses de uso continuado de la instancia m√°s peque√±a.

Despues de registrarnos, creamos un Droplet.
![](/images/desplegando-nuestro-api-rest-en-la-nube-con-digital-ocean/Screen-Shot-2015-06-27-at-23-13-18.png)

Si tienes problemas a la hora de configurar DigitalOcean, puedes seguir [√©ste post](/como-configurar-tu-servidor-cloud-en-digitalocean/) que escrib√≠ hace un tiempo.

Le ponemos un nombre, por ejemplo `iojs-api` y elegimos el tama√±o m√°s peque√±o (5$ al mes) que para este ejemplo nos sirve m√°s que de sobra.

![](/images/desplegando-nuestro-api-rest-en-la-nube-con-digital-ocean/Screen-Shot-2015-06-27-at-23-38-03.png)

vamos a **elegir Ubuntu 14.04 como distribuci√≥n del sistema** y en la regi√≥n por defecto que es Nueva York:

![](/images/desplegando-nuestro-api-rest-en-la-nube-con-digital-ocean/Screen-Shot-2015-06-27-at-23-52-27.png)

No se te olvide crear una clave SSH para poder acceder al servidor desde la terminal sin tener que usar una contrase√±a. As√≠ es m√°s seguro y m√°s c√≥modo. [Aqu√≠](https://help.github.com/articles/generating-ssh-keys/) y [aqu√≠](https://www.digitalocean.com/community/tutorials/how-to-set-up-ssh-keys--2) puedes ver como [generar una clave RSA para SSH](https://help.github.com/articles/generating-ssh-keys/).

![](/images/desplegando-nuestro-api-rest-en-la-nube-con-digital-ocean/Screen-Shot-2015-06-27-at-23-52-49.png)

---

### Instalaci√≥n del entorno

Una vez est√© creado el droplet podemos acceder desde la terminal v√≠a SSH, donde `45.55.66.47` es la IP de nuestro servidor
![](/images/desplegando-nuestro-api-rest-en-la-nube-con-digital-ocean/Screen-Shot-2015-06-28-at-00-17-42.png)

```shell
$ ssh root@45.55.66.47
```

Una vez dentro podemos actualizar los paquetes del sistema operativo e instalar nuestro entorno. [En este post explico como se instala node](/como-instalar-node-js-en-ubuntu/), pero IO.js ser√≠a de manera similar eligiendo la versi√≥n `iojs-v.2.3.1` ya que nuestro API lo hemos programado bajo ese entorno en local.

```shell
root@iojs-api:~# nvm install iojs-v2.3.1
```

Tambi√©n instalamos MongoDB, que ser√° nuestra base de datos para almacenar los registros. En este enlace puedes ver [como instalar MongoDB en Ubuntu](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-ubuntu/)

Por √∫ltimo no nos olvidemos de instalar **git** ya que es nuestro sistema de actualizaci√≥n del proyecto. Descargaremos el repositorio desde GitHub a DigitalOcean.

---

### Descarga del proyecto desde GitHub

Con el entorno instalado (Node/IO, MongoDB y Git) ya podemos instalar las dependencias de nuestro proyecto. Necesitaremos `babel` para traducir el c√≥digo ES6 que IO.js todav√≠a no entiende. Lo instalamos de forma global

```shell
root@iojs-api:~# npm install -g babel
```

Tambi√©n vamos a instalar [**PM2**. Es un gestor de procesos](https://github.com/Unitech/PM2) que nos sirve para correr Node de una forma muy robusta frente a errores y actualizaciones.

```shell
root@iojs-api:~# npm install -g pm2
```

Por √∫timo creamos una clave privada en el servidor para poder comunicarnos con el repositorio de GitHub y poder hacer as√≠ el despliegue.

```shell
root@iojs-api:~# cd .ssh
root@iojs-api:~# ssh-keygen -t rsa
root@iojs-api:~# cat id_rsa.pub
ssh-rsa AAAAB3N[...]lGEr root@iojs-api
```

la copiamos en GitHub, en las preferencias del repositorio. Ya entonces podremos hacer **pulls** e incluso cambios al repositorio.
![](https://carlosazaustre.es/blog/content/images/2015/06/Screen-Shot-2015-06-28-at-11-31-32.png)

Clonamos el proyecto. En mi caso lo tengo en la url: `git@github.com:carlosazaustre/iojs-api-example.git`
Y posteriormente hacemos `npm install` para instalar las dependencias definidas en el `package.json` del proyecto

```shell
root@iojs-api:~# git clone git@github.com:carlosazaustre/iojs-api-example.git
root@iojs-api:~# cd iojs-api-example
root@iojs-api:~# npm install
```

---

### Corriendo el servidor

Ya solo tenemos que correr el API en el servidor con PM2, para que una vez salgamos de la terminal, el proceso siga funcionando. El comando ser√≠a el siguiente:

```shell
root@iojs-api:~# cd iojs-api-example
root@iojs-api:~# pm2 start index.js -i 0 ---next-gen-js --interpreter iojs --watch
```

con `start index.js` iniciamos el API, y con `--next-gen-js --interpreter iojs` le indicamos que tienes que hacer una transformaci√≥n de ECMAScript 6 a 5 o a lo que entienda IO.js. `--watch` nos sirve para que est√© atento a si se producen cambios para que se reinicie. Y por √∫ltimo `-i 0` le indicamos que se inicie en modo `cluster`.

Si ahora vamos a un navegador a la URL `http://45.55.66.47:3000/employees` o a la IP que te haya asignado Digital Ocean, podemos ver el siguiente resultado.

![](/images/desplegando-nuestro-api-rest-en-la-nube-con-digital-ocean/Screen-Shot-2015-06-28-at-11-38-44.png)

Si hacemos pruebas, como un `POST` con un objeto empleado y luego de nuevo un `GET` tendr√≠amos un resultado como el siguiente:

![](/images/desplegando-nuestro-api-rest-en-la-nube-con-digital-ocean/Screen-Shot-2015-06-28-at-12-03-58.png)

Y con un `GET` espec√≠fico
![](/images/desplegando-nuestro-api-rest-en-la-nube-con-digital-ocean/Screen-Shot-2015-06-28-at-12-04-14.png)

Ya tenemos nuestro API disponible, si queremos camuflar el puerto y la IP de nuestro servidor, podemos utilizar un dominio propio o un subdominio (por ejemplo: `api.midominio.com`) y seguir este [post de c√≥mo configurar un proxy inverso con Nginx](/como-servir-tu-api-rest-en-node-js-a-traves-de-nginx/).

Recuerda que en [√©ste enlace de **GitHub** tienes el **repositorio del proyecto**](http://github.com/carlosazaustre/iojs-api-example) para hacer pruebas y mejorarlo si quieres :)

</article>

---

<article slug="consumiendo-un-api-rest-desde-react-js-con-ecmascript6" date="2015-06-25" url="https://carlosazaustre.es/blog/consumiendo-un-api-rest-desde-react-js-con-ecmascript6">

# Consumiendo un API REST desde React.js con ECMAScript6

**Fecha:** 2015-06-25
En los [anteriores](/empezando-con-react-js-y-ecmascript-6/) [art√≠culos vimos como empezar con React, mostrando una serie de objetos en una aplicaci√≥n web](/ejemplo-de-aplicacion-con-react-js-en-ecmascript-6/). Estos objetos estaban en una variable dentro del c√≥digo de la aplicaci√≥n web. Lo suyo es que estos datos nos lleguen en formato JSON desde un servicio REST, ya sea nuestro o de un tercero.

En el ejemplo de hoy vamos a llamar un API REST que nos devuelve la informaci√≥n de los empleados en formato JSON, y en nuestra aplicaci√≥n React vamos a consumirlos usando nuevas funciones presentes en ECMAScript6 que despu√©s traduciremos a ES5 para que los navegadores que a√∫n no soportan el nuevo est√°ndar puedan correr la aplicaci√≥n.

En ES5 si quer√≠amos hacer una petici√≥n AJAX de manera nativa (Sin utilizar jQuery o un framework tipo AngularJS) us√°bamos el objeto `XMLHttpRequest`, de esta manera:

```js
var xhr = new XMLHttpRequest();

xhr.open("GET", "http://miservidor.com/recurso", true);
xhr.send();

xhr.onReadyStateChange = function () {
  if (xhr.readyState == 4 && xhr.status == 200) {
    document.getElementById("myApp").innnerHTML = xhr.responseText;
  }
};
```

Con ECMAScript6 tenemos acceso a una nueva funci√≥n llamada `fetch` que a trav√©s de _Promesas_ nos simplifica y facilita el realizar una petici√≥n AJAX de forma nativa. Ser√≠a algo as√≠:

```js
fecth("http://miservidor.com/recurso")
  .then((response) => {
    return response.json();
  })
  .then((recurso) => {
    console.log(recurso);
  });
```

En la primera promesa tendr√≠amos la respuesta completa del servidor, con cabeceras, meta-datos, datos, etc.., lo que hacemos es devolver en formato JSON la respuesta para acceder a los datos, de esa manera en la segunda promesa, tendr√≠amos nuestro recurso y y podr√≠amos tratarlo como queramos. Si quieres profundizar m√°s sobre `fetch` te recomiendo [este art√≠culo de **Carlos Villuendas**](http://carlosvillu.com/introduccion-a-la-nueva-api-fetch/) o en ingl√©s, [√©ste otro de Matt Gaunt en HTML5Rocks](http://updates.html5rocks.com/2015/03/introduction-to-fetch).

Estoy usando _Arrow functions_, una novedad de ES6 que sustituye a las funciones an√≥nimas que pasamos como callbacks. Esto:

```js
.then((response) => {
	...
})
```

es lo mismo que esto:

```js
.then(function(response) {
	...
})
```

Pasamos al c√≥digo de verdad. En el [siguiente enlace de **github est√° el repositorio** que he usado para este ejemplo](https://github.com/carlosazaustre/react-fetch). Imaginemos que la siguiente URL: `http://taller-angular.carlosazaustre.es/empleados` me devuelve un JSON compuesto de un array de objetos _Empleado_ que quiero llamar desde mi aplicaci√≥n web con React.

Vamos a retomar el c√≥digo del ejemplo anterior, pero cambiando algunas cosas. En primer lugar vamos a crear un nuevo componente `EmpleadoApp` que ser√° el encargado de realizar la petici√≥n AJAX.

En este componente vamos a utilizar los `states` de React. Los `props` se definen cuando se crean los componentes, es como una inicializaci√≥n del componente. Los `states` en cambio hay que pensar en ellos como una colecci√≥n de datos internos que afectan al renderizado del componente. Por lo tanto, el array de objetos _Empleado_ es un buen candidato para un `state`.

Empezamos a definir el componente con un constructor de la clase.

```js
// empleado-app/index.jsx
import React from "react";
import EmpleadoList from "../empleado-list";

class EmpleadoApp extends React.Component {
  constructor(props) {
    super(props);
    this.state = { empleados: [] };
  }
}
```

Hemos definido el objeto `empleados` dentro del `state` del componente, como un array vac√≠o de inicio. Despu√©s se rellenar√° con la llamada AJAX.

Adem√°s de los `states`, cada componente tiene una serie de funciones o m√©todos pertenecientes a su ciclo de vida que podemos implementar, son los siguientes:

- **componentWillMount()** Se lanza antes de que se renderice el componente
- **componentDidMount()** Se lanza despues del renderizado del componente
- **shouldComponentUpdate()** Devuelve con un valor si el componente deber√≠a actualizarse
- **componentWillUnMount()** Se lanza antes de que el componente se elimine.

En este caso vamos a usar `componentWillMount()` para realizar la llamada AJAX y obtener el listado de empleados, antes de que se renderice el componente. A√±adimos pues el siguiente m√©todo a nuestra clase `EmpleadoApp`:

```js
componentWillMount() {
    fetch('http://taller-angular.carlosazaustre.es/empleados')
      .then((response) => {
        return response.json()
      })
      .then((empleados) => {
        this.setState({ empleados: empleados })
      })
  }
```

En la respuesta con los datos, la segunda promesa, _seteamos_ el `state` empleados con los datos recibidos. Vamos ahora a implementar el m√©todo Render.

Como la llamada AJAX es as√≠ncrona, tendremos un peque√±o retardo hasta recibir los datos, y por tanto podemos mostrar un mensaje de _Cargando empleados..._ mientras se produce. Esto lo podemos realizar en la funci√≥n `render()` con una sencilla comprobaci√≥n del `state`:

```js
render() {
    if (this.state.empleados.length > 0) {
      return (
        <div className="container-fluid">
          
        </div>
      )
    } else {
      return <p className="text-center">Cargando empleados...</p>
    }
  }
```

Si el array `empleados` tiene elementos, podemos renderizar el componente `EmpleadoList` pas√°nole a su `prop` listado, los `empleados` que tenemos en el `state`.

Con todos los m√©todos implementados, nuestro componente `EmpleadoApp` al completo ser√≠a as√≠:

```js
// empleado-app/index.jsx
import React from "react";
import EmpleadoList from "../empleado-list";

class EmpleadoApp extends React.Component {
  constructor(props) {
    super(props);
    this.state = { empleados: [] };
  }

  componentWillMount() {
    fetch("http://taller-angular.carlosazaustre.es/empleados")
      .then((response) => {
        return response.json();
      })
      .then((empleados) => {
        this.setState({ empleados: empleados });
      });
  }

  render() {
    if (this.state.empleados.length > 0) {
      return (
        <div className="container-fluid">
          
        </div>
      );
    } else {
      return <p className="text-center">Cargando empleados...</p>;
    }
  }
}

export default EmpleadoApp;
```

Ya s√≥lo tenemos que modificar el `index.jsx`, el fichero principal de la aplicaci√≥n donde antes renderiz√°bamos el listado pas√°ndole como atributo el array _a mano_:

```js
// index.jsx
import React from "react";
import EmpleadoApp from "./empleado-app";

React.render(, document.getElementById("application"));
```

Y listo, ya tenemos una aplicaci√≥n web con React que consume datos desde un servicio REST.

[En el siguiente enlace tienes el **repositorio en GitHub** de este proyecto](https://github.com/carlosazaustre/react-fetch).

</article>

---

<article slug="ejemplo-de-aplicacion-con-react-js-en-ecmascript-6" date="2015-06-23" url="https://carlosazaustre.es/blog/ejemplo-de-aplicacion-con-react-js-en-ecmascript-6">

# Ejemplo de aplicaci√≥n con React.js en ECMAScript 6

**Fecha:** 2015-06-23
Hoy vamos a ver un peque√±o ejemplo de aplicaci√≥n web empleando [React.js](/empezando-con-react-js-y-ecmascript-6/) para crear componentes reutilizables y aprovecharemos para usar [ECMAScript 6](/ecmascript6/), el nuevo est√°ndar de JavaScript, que traduciremos al est√°ndar que todav√≠a entienden los navegadores actuales con [Browserify](/browserify-desarrollando-tu-frontend-como-en-node-js/) y Babel (Babelify).

Vamos a ser una aplicaci√≥n muy sencilla, sin mucha interacci√≥n, simplemente representaremos datos, m√°s adelante veremos cosas m√°s completas.

Esto ser√° lo que vamos a hacer. He delimitado con recuadros lo que yo considerar√≠a como un componente, y por tanto un elemento de React.

![Aplicaci√≥n desglosada en componentes](/images/ejemplo-de-aplicacion-con-react-js-en-ecmascript-6/react-components.jpg)

Tendremos un `EmpleadoAvatar` (recuadro rojo), un `EmpleadoRow` (recuadro verde) y por √∫ltimo un `EmpleadoList` (recuadro azul).

La estructura de directorios y ficheros que voy a utilizar ser√° la siguiente:

```shell
- src/
	- index.jsx
    - components/
    	- empleado-avatar/
        	- index.jsx
            - index.styl
        - empleado-row/
        	- index.jsx
            - index.styl
        - empleado-list
        	- index.jsx
            - index.styl
- node_modules
- build
	- index.html
    - js/
    	- bundle.js
- gulpfile.js
```

En la carpeta `components` tengo 3 componentes, el correspondiente al avatar del empleado, a la fila que contiene la informaci√≥n y al listado completo. Cada uno de ellos es una carpeta con su c√≥digo JavaScript (`index.jsx`) y sus estilos, en el caso de que tuvieramos que definirlos. En este ejemplo utilizo `stylus`. `index.jsx` debajo de la carpeta `src` ser√° el fichero de entrada de nuestra aplicaci√≥n, el _main_.

En `node_modules` estar√°n nuestras dependencias tanto para desarrollo como finales. Para emplear React necesitamos instalar su librer√≠a, lo haremos por `npm`

```shell
$ npm install --save react
```

Despues ya podemos implementar nuestros componentes. Empezamos por `EmpleadoAvatar`. Veamos su c√≥digo en `empleado-avatar/index.jsx`

```javascript
import React from "react";

class EmpleadoAvatar extends React.Component {
  render() {
    return (
      <figure className="media-left">
        <img
          className="media-object"
          width="64px"
          src={`http://taller-angular.carlosazaustre.es/asset/${this.props.picture}`}
        />
      </figure>
    );
  }
}

export default EmpleadoAvatar;
```

Creamos un componente que hereda de React.Component y va devolver una vista con un `figure` y un `img`, sus atributos o `props` van a ser √∫nicamente la URL de la imagen que contiene la foto del empleado. Exportamos el m√≥dulo como `EmpleadoAvatar` para poder utilizarlo en otra parte de nuestra aplicaci√≥n, como por ejemplo en el `EmpleadoRow`.

Voy a emplear Bootstrap para los estilos. Si tuviesemos estilos espec√≠ficos de cada componente, podr√≠an ir en su carpeta junto con el `index.jsx` y posteriormente con una tarea de Gulp, los preprocesar√≠amos y tendr√≠amos un √∫nico fichero `.css` para producci√≥n.

Ahora pasemos a ver el c√≥digo del siguiente componente, `empleado-row/index.jsx`:

```javascript
import React from "react";
import EmpleadoAvatar from "../empleado-avatar";

class EmpleadoRow extends React.Component {
  render() {
    return (
      <li className="media">
        
        <div className="media-body">
          <h4>{this.props.name}</h4>
          <p>
            {this.props.title} &nbsp;
            <span className="label label-info">{this.props.department}</span>
          </p>
        </div>
      </li>
    );
  }
}

export default EmpleadoRow;
```

Importamos de nuevo la librer√≠a `React` y el componente que hemos creado en el paso anterior `EmpleadoAvatar`. En `EmpleadoAvatar` definimos un `props` que era la imagen, con `picture`. Pues bien, ahora en este nuevo componente, como utilizaos el anterior vemos que le pasamos el atributo de la siguiente manera:

```jsx

```

Porque `picture` es una `prop` de `EmpleadoAvatar` y lo que le pasamos en una `prop` del componente que estamos creando, por eso le pasamos `this.props.picture`.

El siguiente componente ser√≠a el listado de emplados, veamos su c√≥digo `empleado-list/index.jsx`

```javascript
import React from "react";
import EmpleadoRow from "../empleado-row";

class EmpleadoList extends React.Component {
  render() {
    return (
      <ul className="media-list">
        {this.props.listado.map((empleado) => {
          return (
            
          );
        })}
      </ul>
    );
  }
}

export default EmpleadoList;
```

Aqu√≠ utilizamos el componente `EmpleadoRow` junto con sus `props`: `name, picture, title` y `department` dentro del nuevo componente `EmpleadoList` el cual tiene un nuevo `prop` llamado `listado` que recibir√° un array de objetos con la informaci√≥n de los empleados.

A este array le aplicamos la funci√≥n `map` de JavaScript para que recorra cada elemento del array y devuelva un componente `EmpleadoRow` con sus propiedades. Exportamos el componente y seguimos.

Ahora veamos el c√≥digo de `index.jsx` que es el fichero principal de la aplicaci√≥n y el que va a renderizar la vista.

```javascript
import React from "react";
import EmpleadoList from "./components/empleado-list";

let empleados = [
  {
    id: 1,
    fullName: "Laya Due√±as",
    title: "CEO",
    department: "Business",
    pic: "empleado01.png",
  },
  {
    id: 2,
    fullName: "Astryd Vall√©s",
    title: "CMO",
    department: "Marketing",
    pic: "empleado02.png",
  },
  {
    id: 3,
    fullName: "Shantell Meza",
    title: "CFO",
    department: "Business",
    pic: "empleado03.png",
  },
  {
    id: 4,
    fullName: "Sergio Ocampo",
    title: "CTO",
    department: "Engineering",
    pic: "empleado04.png",
  },
  {
    id: 5,
    fullName: "Ares Jim√©nez",
    title: "Art Director",
    department: "Marketing",
    pic: "empleado05.png",
  },
  {
    id: 6,
    fullName: "Marta P√©rez",
    title: "Frontend Dev",
    department: "Engineering",
    pic: "empleado06.png",
  },
  {
    id: 7,
    fullName: "Ellen Balderas",
    title: "Digital Strategist",
    department: "Marketing",
    pic: "empleado07.png",
  },
  {
    id: 8,
    fullName: "Cynthia Valent√≠n",
    title: "Backend Dev",
    department: "Engineering",
    pic: "empleado08.png",
  },
  {
    id: 9,
    fullName: "Bernard Jung",
    title: "DevOps Engineer",
    department: "Engineering",
    pic: "empleado09.png",
  },
];

React.render(
  ,
  document.getElementById("application")
);
```

En este fichero tenemos un array de objectos _Empleado_. Importamos el componente `EmpleadoList` y le pasamos a su `prop`, `listado`, el array `empleados` en el m√©todo `render()` de React. tambi√©n le pasamos el elemento HTML donde queremos insertar la vista. En este caso usaremos el `div` con id `#application`.

Es el momento de crear el `index.html` principal de la aplicaci√≥n. Lo hacemos en la carpeta `build` donde tendremos los archivos de _producci√≥n_.

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>React Example</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/css/bootstrap.css"
    />
  </head>

  <body>
    <h1>Listado de Empleados</h1>
    <div id="application"></div>

    <script src="/js/bundle.js"></script>
  </body>
</html>
```

El fichero `js/bundle.js` es el que vamos a generar ahora gracias a Browserify y Babelify en una tarea de gulp. Primero instalamos las dependencias que utilizaremos:

```shell
$ npm install --save-dev gulp
$ npm install --save-dev gulp-webserver
$ npm install --save-dev gulp-stylus
$ npm install --save-dev browserify
$ npm install --save-dev babelify
$ npm install --save-dev vinyl-source-stream
$ npm install --save-dev gulp-minify-css
$ npm install --save-dev nib
```

Y este ser√≠a nuestro `gulpfile.js`

```javascript
var gulp = require("gulp");
var webserver = require("gulp-webserver");
var stylus = require("gulp-stylus");
var browserify = require("browserify");
var babelify = require("babelify");
var source = require("vinyl-source-stream");
var nib = require("nib");
var minify = require("gulp-minify-css");

gulp.task("server", function () {
  gulp.src("./build").pipe(
    webserver({
      host: "0.0.0.0",
      port: 8080,
      fallback: "index.html",
      livereload: true,
    })
  );
});

gulp.task("stylus", function () {
  gulp
    .src("./src/styles/style.styl")
    .pipe(
      stylus({
        use: nib(),
        "include css": true,
      })
    )
    .pipe(minify())
    .pipe(gulp.dest("./build/css/"));
});

gulp.task("build", function () {
  browserify({
    entries: "./src/index.jsx",
    extensions: [".jsx"],
    debug: true,
  })
    .transform(babelify)
    .bundle()
    .pipe(source("bundle.js"))
    .pipe(gulp.dest("./build/js"));
});

gulp.task("watch", function () {
  gulp.watch("./src/**/*.jsx", ["build"]);
  gulp.watch(
    ["./src/styles/**/*.styl", "./src/components/**/*.styl"],
    ["stylus"]
  );
});

gulp.task("default", ["server", "watch"]);
```

He a√±adido tambi√©n tareas de preprocesado CSS en Stylus, por si tenemos estilos particulares para cada componente. Pero en este ejemplo estoy usando tan solo Bootstrap.

Para ejecutar y probar la aplicaci√≥n debemos escribir en el terminal:

```shell
$ gulp build
$ gulp
```

Y en `http://localhost:8080` tendremos nuestra app corriendo.

</article>

---

<article slug="empezando-con-react-js-y-ecmascript-6" date="2015-06-22" url="https://carlosazaustre.es/blog/empezando-con-react-js-y-ecmascript-6">

# Empezando con ReactJS y ECMAScript 6

**Fecha:** 2015-06-22
[React.js](http://facebook.github.io) es una librer√≠a de JavaScript lanzada hace poco m√°s de un a√±o por Facebook, normalmente utilizada en el Frontend aunque puede ser utilizada en el Backend. Facebook la utiliza en producci√≥n para su red social en determinadas partes, como los comentarios y tambi√©n en Instagram.

No se trata de un framework JS de cliente como pueden ser Angular, Backbone o Ember, si no de una librer√≠a que se encarga del renderizado de las vistas de una aplicaci√≥n web. Es la _V_ del patr√≥n _MVC_ por as√≠ decirlo.

Una de las primeras cosas que vi y no me gustaban mucho de React era que parec√≠a que mezclaba el HTML con c√≥digo JavaScript, pero cuando lo pruebas ves que no es as√≠, si no que usa un transformador de c√≥digo JSX (Creado por Facebook) a JavaScript para facilitarnos la vida a la hora de programar, por ejemplo este c√≥digo de React usando JSX:

```js
var Item = React.createClass({
  render: function () {
    return <div>Hello Item</div>;
  },
});
```

Y sin usar la transformaci√≥n JSX ser√≠a as√≠:

```js
var Item = React.createClass({
  render: function () {
    return React.createElement("div", {}, "Hello Item");
  },
});
```

Commo puedes ver, se ve de una forma m√°s clara con JSX lo que estamos renderizando que usando ECMAScript 5/6 puro, y eso que este ejemplo es peque√±o, si estamos usando m√°s elementos HTML, con clases, eventos, etc... se puede hacer inmanejable.

### Principales caracter√≠sticas de React

#### DOM Virtual

Lo que ha hecho que React se vuelva _trending_ es su velocidad de renderizado de vistas. Eso es posible gracias a un _Virtual DOM_ que genera React con cada componente que creamos y el algoritmo de _Diff_ que b√°sicamente lo que hace es marcar que elementos dentro de nuestro DOM Virtual tienen cambios para renderizar solo ellos y no tener que revisar y repintar el DOM entero de nuestra p√°gina. D√≥nde m√°s tiempo se pierde en una aplicaci√≥n web es en el renderizado y pintado del DOM. React evita eso y por eso es tan r√°pido.

![](/images/empezando-con-react-js-y-ecmascript-6/4.png)
![](/images/empezando-con-react-js-y-ecmascript-6/5.png)
Fuente: [React's diff Algorithm](http://calendar.perfplanet.com/2013/diff/)

#### Dise√±o orientado a componentes

React nos obliga a pensar en componentes. Es la nueva tendencia en el mundo del desarrollo Frontend. Al igual que en el backend se tiende a usar micro-servicios y librer√≠as que resuelvan una cosa concreta, en el Frontend cada vez m√°s se est√° extendiendo √©sta pr√°ctica de _componetizar_ los elementos de nuestras aplicaciones para poderlos reutilizar.

### Usando ES6 con React

Con React podemos usar el nuevo est√°ndar [ECMAScript 6 (o ECMAScript 2015)](/ecmascript6t/) para escribir nuestras aplicaciones y con Babel y [Browserify](/browserify-desarrollando-tu-frontend-como-en-node-js/) tener una versi√≥n traducida a ES5 que funcione en los navegadores actuales.

Si en nuestro `index.html` tenemos a√±adidos los enlaces a los scripts de React.js y JSX tranformer, un componente como el anterior en ES5 es as√≠:

```js
var ItemRow = React.createClass({
  render: function () {
    return <li className="Item-row">Elemento de una lista</li>;
  },
});
```

Usando ES6 e instalando las dependencias de React por npm, ser√≠a algo as√≠:

```js
import React from "react";

class ItemRow extends React.Component {
  render() {
    return <li className="Item-row">Elemento de una lista</li>;
  }
}

export default ItemRow;
```

A mi me parece m√°s claro lo que estamos haciendo utilizando ES6. Un componente de React es una clase, que hereda de un React Component. Importamos el m√≥dulo de React de forma nativa con el sistema de m√≥dulos de ES6 y tambi√©n podemos exportarlo para utilizarlo en otra parte de la aplicaci√≥n.

Para que esto funcione en un navegador moderno, podemos usar `Gulp` junto con unos plugins y tareas para crear la versi√≥n de producci√≥n. Primero necesitamos tener instaladas las siguientes dependencias:

```shell
$ npm install --save-dev browserify
$ npm install --save-dev babelify
$ npm install --save-dev vinyl-source-stream
```

Y el fichero `Gulpfile.js` con una tarea para hacer el `build` de la parte JavaScript/JSX ser√≠a:

```js
// gulpfile.js

var gulp = require('gulp');
var browserify = require('browserify');
var babelify = require('babelify');
var source = require('vinyl-source-stream');

gulp.task('build', function() {
	browserify({
    	entries: './src/index.jsx',
        extensions: ['jsx'],
        debug: true
    })
    .transform(babelify)
    .bundle()
    .pipe(source('bundle.js')
    .pipe(gulp.dest('./build'))
});
```

Esta tarea toma el fichero `src/index.jsx`, el principal de la aplicaci√≥n para usar browserify. Despu√©s le aplica la transformaci√≥n de `babelify` que no es m√°s que traducir ES6 a ES5 y crea un fichero `bundle.js` con toda nuestra aplicaci√≥n y dependencias listo para usar en el navegador.

En la [siguiente entrada vemos un ejemplo de aplicaci√≥n web _componetizada_ utilizando React.js y ECMAScript 6](/ejemplo-de-aplicacion-con-react-js-en-ecmascript-6/).

</article>

---

<article slug="como-pasar-variables-como-atributos-en-directivas-de-angularjs" date="2015-06-15" url="https://carlosazaustre.es/blog/como-pasar-variables-como-atributos-en-directivas-de-angularjs">

# C√≥mo pasar variables como atributos en directivas de AngularJS

**Fecha:** 2015-06-15
Las directivas de Angular sirven para encapsular c√≥digo HTML de manera que nuestras aplicaciones puedan tener elementos reutilizables, tambi√©n conocidos como componentes.

Cuando Angular apareci√≥ fue algo muy novedoso, aunque hoy en d√≠a podemos utilizar los _Web Components_ y la librer√≠a _Polymer_ para tener algo parecido y de forma nativa de HTML5.

Una de las cosas que suele ser algo complicada de implementar es cuando en nuestra directiva colocamos un atributo y queremos que ese atributo se utilice en el HTML _interior_ de la directiva, y adem√°s que ese atributo que pasamos sea una variable din√°mica que cambiar√° seg√∫n la vista o estado en el que nos encontremos.

En este art√≠culo vamos a ver como hacerlo con un peque√±o ejemplo.

Imaginemos que queremos implementar una directiva que sea una caja de b√∫squeda. Y lo queremos programar como directiva porque lo vamos a usar en m√°s partes de nuestra aplicaci√≥n y ese es su objetivo, que las directivas sean reutilizables. Queremos que sea algo as√≠:

```html
<search-bar busqueda=""></search-bar>
```

Esta directiva tendr√° el siguiente c√≥digo HTML por debajo:

```html
<div class="form-group">
  <input
    type="text"
    class="form-control"
    placeholder="Introduce tu texto a buscar"
    value=""
  />
</div>
```

¬øC√≥mo hacemos para pasar el contenido del atributo `busqueda` al atributo `value` del `input` dentro de nuestra directiva? Veamos el c√≥digo _JavaScript_ de la directiva, suponiendo que pertenezca a un m√≥dulo `myApp`.

```javascript
(function () {
  "use strict";

  angular.module("myApp").directive("searchBar", searchBar);

  function searchBar() {
    return {
      restrict: "E",
      scope: {
        busqueda: "@",
      },
      template:
        '<div class="form-group">' +
        '<input type="text" ' +
        'class="form-control"' +
        'placeholder="Introduce tu texto a buscar"' +
        "value={{busqueda}}" +
        "</div>",
    };
  }
})();
```

Veamos que hemos hecho aqu√≠. Hemos pasado el contenido de la directiva como un _string_ al atributo `template`. Si el HTML es muy grande, podemos tenerlo separado en un archivo HTML y pasarle la ruta de ese archivo en el atributo `templateUrl`

En la plantilla hemos indicado que el `value` del `input` sea `value={{busqueda}}`. Es decir, le pasamos como variable el contenido del atributo `busqueda` de la directiva.

Para poder hacer esto, y tambien, si el contenido que pasamos no es fijo, si no que viene de una variable, tipo:

```html
<search-bar busqueda="{{textoBusqueda}}"></search-bar>
```

necesitamos indicarle a la directiva que tiene un _scope_ propio y cuales son los atributos de ese _scope_:

```javascript
scope: {
  busqueda: "@";
}
```

Indic√°ndole `@` le estamos diciendo de manera unidireccional que el valor del atributo `busqueda` se copie e la propiedad `{{busqueda}}` del _scope_ de la directiva.

Usar `@` tiene un problema, al ser unidireccional, si queremos cambiar el valor de la propiedad `busqueda` del _scope_ de la directiva, no se cambia la propiedad en el controlador que estemos utilizando, y nos obloga a usar siempre la doble llave `{{ }}` si queremos enlazar la propiedad al controlador.

Para solucionar esto, podemos usar el caracter `=` que indica que la propiedad `busqueda` del _scope_ de la directiva sea exactamente la propiedad del _scope_ del controlador que estemos utilizando y tenga un atributo b√∫squeda.

Con estos cambios quedar√≠a as√≠ la definici√≥n:

```javascript
(function () {
  "use strict";

  angular.module("myApp").directive("searchBar", searchBar);

  function searchBar() {
    return {
      restrict: "E",
      scope: {
        busqueda: "=",
      },
      template:
        '<div class="form-group">' +
        '<input type="text" ' +
        'class="form-control"' +
        'placeholder="Introduce tu texto a buscar"' +
        "value={{busqueda}}" +
        "</div>",
    };
  }
})();
```

y podr√≠amos usar la directiva as√≠:

```html
<search-bar busqueda="textoBusqueda"></search-bar>
```

Siendo `textoBusqueda` una propiedad del _scope_ donde se llama a la directiva.

</article>

---

<article slug="ser-autonomo-en-espana-pasos-para-ser-freelance" date="2015-05-05" url="https://carlosazaustre.es/blog/ser-autonomo-en-espana-pasos-para-ser-freelance">

# Ser aut√≥nomo en Espa√±a. Pasos para ser Freelance

**Fecha:** 2015-05-05
**Espa√±a**, hoy por hoy, no es la panacea ni ning√∫n para√≠so fiscal en cuanto a creaci√≥n de empresas, emprendimiento y trabajar como aut√≥nomo. Pero si vives en Espa√±a, has de pagar impuestos en el pa√≠s en el que resides. En este art√≠culo indico los pasos para darse de alta como trabajador aut√≥nomo y trabajar como freelance en el mundo del desarrollo de software, web o dise√±o gr√°fico.

## Alta en el IAE

El IAE es el **Impuesto de Actividades Econ√≥micas**, lo que viene siendo la **Agencia Tributaria (Hacienda)**. El alta es gratis y el documento a presentar es el **037**.

![IAE 037](/images/ser-autonomo-en-espana-pasos-para-ser-freelance/iae-037.jpg)

En el debemos incluir nuestro Nombre completo, NIF (El DNI con letra), la direcci√≥n fiscal (Tu casa y/o centro de trabajo)

Indicar que quieres darte de alta en el Impuesto sobre la renta de las personas f√≠sicas (IRPF) en estimaci√≥n directa simplificada. Y en el Impuesto de valor a√±adido (IVA)

El ep√≠grafe en el que estoy dado de alta es el `763/2 - Analistas y Programadores Inform√°tica`

##Alta en el RETA
El RETA es el **R√©gimen Especial de Trabajadores Aut√≥nomos**, es decir, la **Seguridad Social**. Se presenta en la tesorer√≠a general de la Seguridad Social y la cuota mensual var√≠a seg√∫n la situaci√≥n y la ley en vigor.

El modelo a presentar es el **TA.0521/1**
![Alta en el RETA](/images/ser-autonomo-en-espana-pasos-para-ser-freelance/T-0521.png)

Yo actualmente pago **264‚Ç¨ al mes para cotizar por [la base m√≠nima (884,40‚Ç¨)](http://www.seg-social.es/Internet_1/Trabajadores/CotizacionRecaudaci10777/Basesytiposdecotiza36537/index.htm)**. Desconozco cuales son las ayudas actuales, pero creo que si eres menor de 30 a√±os o 35 si eres mujer, la cuota es de 50‚Ç¨ al mes durante los primeros 6 meses, despues pasa a cerca de 170‚Ç¨ y as√≠ es durante 15 meses (Repito, no estoy seguro, yo ya no tengo bonificaci√≥n porque llevo tiempo dado de alta de aut√≥nomo y ya estuve de alta un par de veces en los √∫ltimos 4 a√±os)

## Obligaciones

### Facturas

Una de las principales obligaciones de un trabajador aut√≥nomo es presentar facturas por los servicios que ofreces. **Indicando el importe, el 21% de IVA** y el 21% de retenci√≥n por IRPF si ofreces servicios a otras empresas. (Si es entre profesionales, no es necesario practicar la retenci√≥n).

Las **facturas deben llevar tu nombre, NIF y domicilio fiscal**. Tambi√©n deben llevar el nombre o raz√≥n social de tu cliente/comprador, su NIF/CIF y su domicilio fiscal.

Tambi√©n debes guardar las facturas de los gastos que tengas relacionados con tu actividad profesional, como pueden ser:

- Gastos de material de oficina.
- Equipos inform√°ticos
- Tel√©fono m√≥vil e Internet
- Cuota de aut√≥nomos de la Seguridad Social
- Gastos de transporte (siempre que est√©n relacionados con una actividad concreta)
- Gastos de comidas (Igual que antes)
- Alquiler de oficina si trabajas en una o en coworking
- Cuotas de asociaciones
- Gastos jur√≠dicos y de asesor√≠a fiscal
- Luz, Agua y Gas (Un % si trabajas desde casa)
  etc...

### Libro Registro de Ingresos y Gastos

Otra obligaci√≥n es llevar el control de las facturas que emites y de los gastos que tienes relacionados con tu actividad profesional anot√°ndolas en un libro registro

Puedes hacerlo perfectamente en un Excel o un Google Docs. En √©l debes apuntar:

- Fecha de la factura
- Nombre de la Empresa o Raz√≥n Social
- CIF o NIF
- Base Imponible
- Cuota de IRPF a retener
- Cuota de IVA
- Total de Factura

Adem√°s de ser obligatorio para una posible inspecci√≥n de Hacienda, te resultar√° √∫til para llevar la contabilidad, y saber cuantos ingresos y gastos tienes m√©s a m√©s y te ayudar√° a la hora de presentar las declaraciones trimestrales y anuales

### Declaraciones

Cada trimestre deb√©s presentar tus resultados a Hacienda. los periodos fiscales son:

- **T1:** Enero, Febrero, Marzo
- **T2:** Abril, Mayo, Junio
- **T3:** Julio, Agosto, Septiembre
- **T4:** Octubre, Noviembre, Diciembre

Y las fechas de presentaci√≥n son del d√≠a 1 al 20 del mes siguiente al fin del trimestre, salvo en el T4 que dan de plazo hasta el 31 de Enero.

#### Declaraci√≥n Trimestral de IRPF

![IRPF Aut√≥nomos](/images/ser-autonomo-en-espana-pasos-para-ser-freelance/IMAGEN-MODELO-130.png)

Es el [Modelo 130](https://www.agenciatributaria.gob.es/AEAT.sede/tramitacion/G601.shtml) **Se presenta cada trimestre con el total de ingresos (Sin IVA) y gastos desde el principio del a√±o hasta el final del trimestre actual.** Es decir:

- **T1:** Ingresos y Gastos desde Enero a Marzo
- **T2:** Ingresos y Gastos desde Enero a Junio
- **T3:** Ingresos y Gastos desde Enero a Septiembre
- **T4:** Ingresos y Gastos desde Enero a Diciembre

Se presenta el resultado, Ingresos menos Gastos. Si el resultado es negativo (no has ganado una mierda) no hay que hacer mucho m√°s, se pone resultado 0 y no hay que pagar nada. Si el resultado es positivo, has tenido beneficios, y hay que pagar el 20% de ese beneficio resultante en hacienda. A lo que hay que oagar, se le resta las retenciones de IRPF que hayamos tenido en nuestras facturas (en caso de que alguna de nuestras facturas lo lleve). Tambi√©n se le restan lo que hayamos pagado en periodos anteriores.

#### Declaraci√≥n Trimestral de IVA

Para √©sta declaraci√≥n se utiliza el [Modelo 303](https://www.agenciatributaria.gob.es/AEAT.sede/tramitacion/G414.shtml). En √©ste modelo se describen nuestros ingresos con la cuota de IVA soportada. Normalmente **por nuestros servicios se carga un 21% IVA** a menos que nuestro cliente sea extranjero y estemos registrados como "[operador intracomunitario](https://www.agenciatributaria.gob.es/AEAT.sede/tramitacion/ZZ09.shtml)".

![Modelo 303 IVA](/images/ser-autonomo-en-espana-pasos-para-ser-freelance/IMAGEN-MODELO-303.jpg)

Tambi√©n apuntamos los gastos y el total de IVA que hemos pagado.
Al final si el resultado es positivo (Hemos cobrado m√°s IVA que el que hemos pagado), debemos ingresar en hacienda la diferencia.

Si es al contrario (Hemos pagado m√°s IVA del que hemos cobrado) el resultado se suele dejar a compensar para la siguiente declaraci√≥n y se suele dejar para la declaraci√≥n anual la devoluci√≥n. Aunque la mayor√≠a de las veces es mejor dejarlo a compensar a√±o a a√±o porque tardan muuuuuucho en devolverlo y con muchas pegas (Hablo desde la experiencia).

Al contario que con el IRPF, **cada trimestre es independiente y solo se presentan los ingresos y gastos de el trimestre en curso.**

#### Declaraci√≥n Anual de IVA

Al final del a√±o, junto con la declaraci√≥n del cuarto trimestre se presenta el [Modelo 390](https://www.agenciatributaria.gob.es/AEAT.sede/tramitacion/G412.shtml) con el resumen anual del IVA.

![Modelo 390 IVA](/images/ser-autonomo-en-espana-pasos-para-ser-freelance/390.jpg)

No es m√°s que un resumen de los 4 trimestres presentados y es donde se indica que si dejamos a compensar el resultado de cara al a√±o siguiente o se solicita la devoluci√≥n (En el caso de que sea as√≠)

#### Operaciones con terceros

![Modelo 347](/images/ser-autonomo-en-espana-pasos-para-ser-freelance/IMAGEN-MODELO-347.jpg)

Si a lo largo del a√±o, con un cliente o proveedor, has tenido ingresos o gastos superiores a 3.000‚Ç¨, debes indicarlos en el [Modelo 347: Declaraci√≥n de operaciones con terceros](http://www.agenciatributaria.es/AEAT.internet/Modelos_formularios/modelo_347.shtml). √âste modelo se presenta en marzo del a√±o siguiente.

#### La RENTA

Y por √∫ltimo la RENTA de toda la vida. Se presenta entre Abril y Junio del a√±o siguiente y en ella hay un apartado para indicar los ingresos y gastos que has tenido por Actividades Econ√≥micas. No es m√°s que un resumen de las declaraciones trimestrales de IRPF presentadas a lo largo del a√±o. Tambi√©n se indican los pagos parciales que hayamos realizado.

![Declaraci√≥n de la Renta](/images/ser-autonomo-en-espana-pasos-para-ser-freelance/quien-puede-pedir-cita-previa--con-hacienda-para-hacer-la-renta.jpg)

Dependiendo de tu situaci√≥n personal (Casado, con hijos, hipoteca, patrimonio, etc...) El resultado de tu declaraci√≥n puede variar, puedes pagar o m√°s o que te devuelvan parte o todo lo que hayas ido pagando a lo largo del a√±o.

Como ves son varios pasos, pero con organizaci√≥n se pueden llevar f√°cilmente. A continuaci√≥n te recomiendo una serie de enlaces donde suelo buscar informaci√≥n sobre ello cuando lo necesito:

**M√°s informaci√≥n**:

- [InfoAutonomos](http://www.infoautonomos.com/blog/)
- [OffiPyme (Antiguo Fiscal Help)](http://offipyme.es/)
- [Manual Fiscal para aut√≥nomos](http://offipyme.es/ManualFiscalAutonomos.php)
- [Serautonomo](http://www.serautonomo.net/)
- [Pymes y Aut√≥nomos](http://www.pymesyautonomos.com/)

</article>

---

<article slug="manejando-docker-desde-os-x-creando-nuestro-primer-contenedor" date="2015-05-04" url="https://carlosazaustre.es/blog/manejando-docker-desde-os-x-creando-nuestro-primer-contenedor">

# Manejando Docker desde OS X. Creando nuestro primer contenedor de NodeJS

**Fecha:** 2015-05-04
### ¬øQu√© es Docker?

Docker es una aplicaci√≥n que nos permite ejecutar entornos completos dentro de contenedores Linux. Pudiendo crear esos entornos a trav√©s de `Dockerfiles` o utilizando im√°genes ya creadas por terceros desde el [Hub](https://registry.hub.docker.com/search?q=library) (Una especie de GitHub de im√°genes). Yo lo considero [la evoluci√≥n a Vagrant](/como-configurar-un-entorno-de-desarrollo-virtual-con-vagrant/) y un buen punto de partida si queremos empezar a separar nuestras aplicaciones en trozos m√°s peque√±os (microservicios).

Como Docker utiliza como base el sistema operativo Linux, en OS X no podemos utilizarlo tal cual, necesitamos una ayuda de una m√°quina virtual y algunos ajustes para que funcione como si nuestra m√°quina fuera Linux.

Para ejemplificar la estructura de c√≥mo est√° organizado Docker en nuestro sistema operativo, estas im√°genes sacadas de la documentaci√≥n oficial de Docker nos resultan de ayuda.

Si nuestro equipo fuera Linux, esta ser√≠a la organizaci√≥n:
![](/images/manejando-docker-desde-os-x-creando-nuestro-primer-contenedor/linux_docker_host.png)

Y en el caso de un equipo Mac con OS X, es √©sta:
![](/images/manejando-docker-desde-os-x-creando-nuestro-primer-contenedor/mac_docker_host.png)

La diferencia es que en Linux, nuestro Host es el mismo sistema operativo. Y en OSX, el Host es la m√°quina virtual que tiene Linux. Lo complicado aqu√≠ es el acceso, las IPs y el mapeo de los puertos, pero en este post vamos a explicar como solucionar esto y utilizarlo de manera que la m√°quin virtual no _de guerra_ ;)

### Instalar Docker en OS X (Yosemite).

Primero de todo necesitas instalar VirtualBox. Lo puedes descargar desde su p√°gina oficial.

![Descargar VirtualBox](/images/manejando-docker-desde-os-x-creando-nuestro-primer-contenedor/url-1.jpg)

Despu√©s necesitas instalar **boot2docker** que es una _mini-m√°quina-virtual_ de Linux para poder utilizar esta tecnolog√≠a en Mac. Y por supuesto, **Docker**. Recomiendo hacer esto a trav√©s de `homebrew` que funciona muy bien y as√≠ evitamos l√≠os con las variables de entorno y despu√©s es m√°s sencillo de desinstalar que si se hace manual:

```shell
$ brew update
$ brew install docker
$ brew install boot2docker
```

**Iniciamos boot2docker**. Esto √∫nicamente debemos hacerlo la primera vez, despu√©s ya quedar√° configurado en nuestro equipo.

```shell
$ boot2docker init
Downloading boot2docker ISO image...
...
Done. Type `boot2docker up` to start the VM.
```

```shell
$ boot2docker up
Waiting for VM and Docker daemon to start...
...........ooo
Started.
To connect the Docker cliente to the Docker daemon, please set:
  export DOCKER_HOST=tcp://192.168.59.103:2376
  export DOCKER_CERT_PATH=/Users/carlosazaustre/.boot2docker/certs/boot2docker-vm
  export DOCKER_TLS_VERIFY=1
Writing /Users/carlosazaustre/.boot2docker/certs/boot2docker-vm/ca.pem
Writing /Users/carlosazaustre/.boot2docker/certs/boot2docker-vm/cert.pem
Writing /Users/carlosazaustre/.boot2docker/certs/boot2docker-vm/key.pem
Your environment variables are already set correctly.
```

C√≥mo boot2docker es una m√°quina virtual de Linux, ya que nuestro equipo no lo es y para ejecutar Docker necesitamos que se haga sobre Linux, esta m√°quina virtual tendr√° una IP y un puerto con el que podeamos interactuar. Para poder hacer esto de un forma m√°s √°gil vamos exportar las siguientes variables de entorno dentro de nuestro fichero `~/.bash_profile`

```shell
export DOCKER_HOST=tcp://192.168.59.103:2376
export DOCKER_CERT_PATH=/Users/carlosazaustre/.boot2docker/certs/boot2docker-vm
export DOCKER_TLS_VERIFY=1
```

Para probar que vamos bien, ejecutaremos los siguientes comandos en nuestra terminal:

```shell
$ docker version
Client version: 1.6.0
Client API version: 1.18
Go version (client): go1.4.2
Git commit (client): 4749651
OS/Arch (client): darwin/amd64
Server version: 1.6.0
Server API version: 1.18
Go version (server): go1.4.2
Git commit (server): 4749651
OS/Arch (server): linux/amd64
```

```shell
$ docker info
Containers: 0
Images: 0
Storage Driver: aufs
 Root Dir: /mnt/sda1/var/lib/docker/aufs
 Backing Filesystem: extfs
 Dirs: 21
 Dirperm1 Supported: true
Execution Driver: native-0.2
Kernel Version: 3.18.11-tinycore64
Operating System: Boot2Docker 1.6.0 (TCL 5.4); master : a270c71 - Thu Apr 16 19:50:36 UTC 2015
CPUs: 4
Total Memory: 1.961 GiB
Name: boot2docker
Debug mode (server): true
Debug mode (client): false
Fds: 13
Goroutines: 0
System Time: Mon May  4 14:39:47 UTC 2015
EventsListeners: 0
Init Path: /usr/local/bin/docker
Docker Root Dir: /mnt/sda1/var/lib/docker
```

Si sale algo parecido a lo anterior, vamos bien encaminados. **¬øQu√© hemos hecho hasta ahora?** Instalar _boot2docker_ que es una maquina virtual ligera de Linux, instalar el servidor de Docker en esa m√°quina virtual, y comunicarnos con √©l utilizan el cliente de Docker que se ha instalado en nuestro Mac OS X.

Ya tenemos _boot2docker_ instalado y configurado en nuestro equipo Mac, pero tenemos que hacer un par de cambios previos si queremos dejarlo perfecto.

### Mapeo de puertos

Docker mapea los puertos que usa desde el container al host. En una m√°quina Linux, el host ser√≠amos nosotros mismos, pero en Mac el host es la M√°quina Virtual (boot2docker). Por tanto si corremos una aplicaci√≥n dentro de contenedor que escuche en el puerto 3000 y este puerto lo mapeamos con el puerto 3000 del host, al poner [http://localhost:3000](http://localhost:3000) no veremos nada. ¬øCu√°l es el truco? Usar la IP que nos da la m√°quina virtual:

```shell
$ boot2docker ip
192.168.59.103
```

Pero nosotros no queremos estar recordando esa IP siempre que queramos probar algo, ni tampoco tener que estar mapeando los puertos 2 veces, para que pasen del contenedor a la m√°quina virtual, como si estuvi√©ramos en Inception.

![Inception](http://cdn.playbuzz.com/cdn/882c5816-dec7-48af-9803-a4cdb5f49161/37a8c93e-684e-43c5-8342-9409afa0b9cb.gif)

Entonces podemos hacer estas **triqui√±uelas**:

```shell
# A√±adimos la IP de la m√°quina virtual al archivo de hosts,
# llam√°ndola "Dockerhost"
$ echo $(boot2docker ip) dockerhost > sudo tee -a /etc/hosts
```

Y ejecutando el siguiente script (se demora un tiempo) hacemos el mapeo de puertos contenedor > M√°quina Virtual > Localhost de nuestro equipo:

```shell
#!/bin/bash
for i in {49000..49900}; do
    VBoxManage modifyvm "boot2docker-vm" --natpf1 "tcp-port$i,tcp,,$i,,$i";
      VBoxManage modifyvm "boot2docker-vm" --natpf1 "udp-port$i,udp,,$i,,$i";
done
```

Ya tenemos todo configurado y listo. Despues podremos acceder a nuestro navegador con la URL [http://dockerhost](http://dockerhost) y estaremos recibiendo la respuesta del contenedor. Para ello lo siguiente que haremos ser√° una sencilla aplicaci√≥n en Node.js

### Creando nuestra Node App

El sistema de archivos de nuestra Mini-App ser√° el siguiente

```shell
proyecto/
    - Dockerfile
    - code/
        - node_modules
        - public
            - index.html
        - index.js
        - package.json
    - README.md
    - LICENSE
```

`Dockerfile` ser√° nuestro fichero manifiesto donde especificaremos el entorno que vamos a utilizar y los comandos a ejecutar en √©l.

`code` ser√° la carpeta ra√≠z de nuestro proyecto, dentro de ella estar√°n las dependencias (`node_modules`), el fichero principal (`index.js`) y el resto de ficheros y carpetas.

Dentro de `public` tan s√≥lo tendremos un fichero `index.html` que contendr√° lo b√°sico

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>NodeApp</title>
  </head>
  <body>
    <h1>Hello World!</h1>
  </body>
</html>
```

que serviremos desde nuestra aplicaci√≥n Node, usando el m√≥dulo `st` que permite crear un servidor de est√°ticos r√°pidamente, √âste ser√≠a el contenido de nuestro fichero `index.js`:

```js
var http = require("http");
var path = require("path");
var st = require("st");

var server = http.createServer();
var port = process.env.PORT || 3000;
var mount = st({
  path: path.join(__dirname, "public"),
  index: "index.html",
});

server.on("request", onRequest);
server.on("listening", onListening);

server.listen(port);

// -- Functions ------------------------------

function onListening() {
  console.log("Server Running on port " + port);
}

function onRequest(req, res) {
  mount(req, res, function (err) {
    if (err) return fail(err, res);

    res.statusCode = 404;
    res.end("404 Not Found: " + req.url);
  });
}

function fail(err, res) {
  res.statusCode = 500;
  res.setHeader("Content-Type", "text/plain");
  res.end(err.message);
}
```

Como puedes ver es un servidor muy sencillo, no usamos siquiera `Express, con el m√≥dulo` nativo de `http` nos apa√±amos.

Ahora es el momento de probar la aplicaci√≥n corriendo desde Docker. Para ello editamos el fichero `Dockerfile` con lo siguiente:

```shell
FROM node:0.12.2
MAINTAINER carlosazaustre@gmail.com

COPY ./code /code
RUN npm install -g pm2
RUN cd /code; npm install

EXPOSE 3000
CMD ["pm2", "start", "/code/index.js"]
```

Cosas importantes aqu√≠, Docker tiene un registro parecido a Github pero de im√°genes con entornos ya preconfigurados. Pod√≠amos crear uno desde cero que partiese de Ubuntu o CentOS y seguidamente instalar Node desde √©l, pero para hacer m√°s sencillo este ejemplo, he importado la imagen de [Node](https://registry.hub.docker.com/_/node/) [v0.12.2 ya existente](https://github.com/joyent/docker-node/blob/762a8f163f02b6de8e4022d1f8ff3a38f4c8340f/0.12/Dockerfile) de Joyent.

El campo `MAINTAINER` es para indicar el autor o mantenedor de la imagen que se est√° configurando en el `Dockerfile` en este caso he puesto mi email.

El comando `COPY ./code /code` Esta indicando que se haga una copia de la carpeta code del proyecto a la carpeta `/code` del contenedor.

`RUN npm install -g pm2` es un comando que se ejecutar√° dentro del contenedor. Estamos indicando que instale la librer√≠a `PM2` de manera global en el contenedor.

`RUN cd /code; npm install` instalar√° las dependencias que tenga el `package.json` del proyecto dentro del contenedor.

`EXPOSE 3000` indica que el puerto 3000 del contenedor (donde est√° escuchando la app node) sea mapeado hacia afuera, para que podamos acceder desde fuera del contenedor (Por ejemplo en [http://dockerhost:3000](http://dockerhost:3000))

y por √∫ltimo `CMD ["pm2", "start", "/code/index.js"]` es el comando que queramos que se ejecute al finalizar la instalaci√≥n del entorno. `pm2 start /code/index.js` es como ejecutar `node /code/index.js` pero PM2 lo ejecuta de cont√≠nuo aunque salgamos de la sesi√≥n del terminal y tiene muchas otras ventajas. Puedes echarle un ojo al repositorio del proyecto: [PM2 en Github](https://github.com/Unitech/PM2).

### Ejecutando nuestro contenedor

Lleg√≥ el momento. Ya tenemos todo configurado y nuestra aplicaci√≥n desarrollada.

Podemos ver que im√°genes tenemos descargadas en nuestro sistema y que contenedores est√°n en ejecuci√≥n con los comandos:

```shell
$ docker images
$ docker ps
```

En este momento no tenemos niguna. Vamos a crear la primera con nuestro Dockerfile y apliaci√≥n Node.js:

```shell
$ docker build -t carlosazaustre/docker-node .
```

Con √©ste comando creamos la imagen `carlosazaustre/docker-node` que corresponde con el Dockerfile que hemos escrito anteriormente. Consiste en un nombre de usuario, en mi caso mi nombre y el nombre que represete a la imagen, en mi caso le he puesto `docker-node`

Al ejecutarte el comando se descargar√° la imagen de node que indicamos en el `FROM` del Dockerfile y posteriormente ejecutar√° los comando `COPY`, `RUN` y `CMD`.

Cuando finalice, si ejecutamos `docker images` veremos algo como:

```shell
$ docker images
REPOSITORY                   TAG                 IMAGE ID            CREATED             VIRTUAL SIZE
carlosazaustre/docker-node   latest              9faf683feb75        14 seconds ago      720.8 MB
node                         0.12.2              f709efdf393f        4 days ago          710.9 MB
```

Donde vemos la imagen de node que ha descargado y la que acabamos de crear con mi nombre.

Para poner en marcha el contenedor ejecutamos el siguiente comando:

```shell
$ docker run -p 3000:3000 -d carlosazaustre/docker-node
```

Indicamos con `-p` que puerto del contenedor asociamos con nuestro host y con `-d` la imagen en cuesti√≥n. Esto ejecutar√° el comando `CMD` de nuestro `Dockerfile`.

Podemos ver que contenedores tenemos funcionando con:

```shell
$  docker ps
CONTAINER ID        IMAGE                               COMMAND                CREATED             STATUS              PORTS                    NAMES
41da388e4a39        carlosazaustre/docker-node:latest   "node /code/index.js   11 seconds ago      Up 10 seconds       0.0.0.0:3000->3000/tcp   elated_rosalind
```

Vemos que le asocia un ID a cada contenedor, en este caso `docker-node` tiene el ID `41da388e4a39`. Si queremos ver el `log` que lanza nuestra aplicaci√≥n dentro del contenedor lo podemos hacer con el comando `docker logs` y pas√°ndole las 4 primeras cifras del ID, por ejemplo:

```shell
$ docker logs 41da
[PM2] Spawning PM2 daemon
[PM2] PM2 Successfully daemonized
[PM2] Process /code/index.js launched
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ App name ‚îÇ id ‚îÇ mode ‚îÇ pid ‚îÇ status ‚îÇ restart ‚îÇ uptime ‚îÇ memory      ‚îÇ watching ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ index    ‚îÇ 0  ‚îÇ fork ‚îÇ 22  ‚îÇ online ‚îÇ 0       ‚îÇ 0s     ‚îÇ 27.633 MB   ‚îÇ disabled ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
 Use `pm2 show <id|name>` to get more details about an app
```

Vemos que la aplicaci√≥n se est√° ejecutando. ¬øC√≥mo podemos probarla? Abramos un navegador y escribamos la URL: [http://dockerhost:3000]()

![Docker container running on dockerhost](/images/manejando-docker-desde-os-x-creando-nuestro-primer-contenedor/url-2.jpg)

Prueba superada, hemos traspasado 3 niveles, a lo Dominic Cobb.
![Inception Deeper](http://i2.kym-cdn.com/photos/images/original/000/384/176/d2f.jpg)

**Referencias**

- [Install Docker on Mac](https://docs.docker.com/installation/mac/)
- [How to use Docker on OSX. The missing guide](http://viget.com/extend/how-to-use-docker-on-os-x-the-missing-guide)
- [Dockerizing a Node.js App](https://docs.docker.com/v1.6/examples/nodejs_web_app/)
- [C√≥mo desplegar contenedores en Docker](https://platzi.com/blog/desplegar-contenedores-docker/?utm-source=carlosazaustre.es)
- [Compilar y documentar tu servidor con Dockerfile](https://platzi.com/blog/imagenes-con-dockerfile/?utm-source=carlosazaustre.es)
- [Stackoverflow Question](https://platzi.com/blog/imagenes-con-dockerfile/)

</article>

---

<article slug="uso-de-promesas-en-angularjs" date="2015-04-27" url="https://carlosazaustre.es/blog/uso-de-promesas-en-angularjs">

# JavaScript Promises. Uso de promesas en AngularJS

**Fecha:** 2015-04-27
Las promesas son **objetos de JavaScript** que sustituyen de alguna manera a los callbacks. Se utilizan cuando no se puede retornar el valor de una funci√≥n porque a√∫n no se conoce, pero no podemos dejar que bloqueen la funci√≥n esperando a que llegue. El objeto promesa en un futuro contendr√° el valor que esperamos retornar. Es complicado de entender en un principio, pero si conocemos como funciona, en ocasiones nos puede resultar √∫til.

Hay que indicar que una **Promesa** no nos sustituye el hecho de utilizar callbacks para leer su valor, pero lo que nos evita es caer en el temido _Callback Hell_.

```javascript
obj.metodo1(data, function (data1) {
  obj.metodo2(data1, function (data2) {
    obj.metodo3(data2, function (data3) {
      obj.metodo4(data3, function (data4) {
        // Hasta el infinito y m√°s all√°
      });
    });
  });
});
```

Utilizaremos en su lugar los m√©todos `then()` y `catch()` para implementar la funcionalidad. El ejemplo del _Callback Hell_ anterior con promesas ser√≠a de la siguiente manera:

```javascript
obj
 .metodo1(data)
 .then(obj.metodo2(data1))
 .then(obj.metodo3(data2)
 .then(obj.metodo4(data3))
 ...
```

Un uso adecuado para ello es en los servicios en AngularJS, usando la directiva o servicio del core de Angular `$q`, que contiene toda la funcionalidad de las promesas. Veamos un ejemplo.

Por ejemplo, supongamos que tenemos un controlador `myController` de una vista de nuestra aplicaci√≥n angular que llame a un recurso a trav√©s de un API con el m√©todo `GET`:

```javascript
function MyController($scope, $http) {
  $http.get("http://midominio.com/recursos.json").success(function (data) {
    $scope.elementos = data;
  });
}
```

Por buenas pr√°cticas y por separaci√≥n de conceptos y tambi√©n para hacer nuestro c√≥digo m√°s mantenible y escalable, debemos separar la l√≥gica de nuestra aplicaci√≥n (la llamada `$http`) en un servicio y el controlador dejarlo s√≥lo para la conexi√≥n entre nuestros servicios y la vista HTML.

Por tanto creamos un servicio `dataService` que se encarga de comunicarse con nuestro API y en √©l haremos las llamadas HTTP.

La funci√≥n dentro de nuestros servicio que nos devolver√° todos los recursos (elementos) de nuestra base de datos a trav√©s de un supuesto API ser√° la funci√≥n `getAll`. En esta funci√≥n haremos lo mismo que hac√≠amos en el controlador pero utilizando el objecto `$q` de AngularJS para crear promesas (o "Promises").

Antes de hacer la llamada `HTTP GET` creamos un objeto que contendr√° la promesa a devolver y el objeto `defered` que se usa dentro de la funci√≥n as√≠ncrona y tiene dos m√©todos que luego veremos `resolve()` y `reject()`.

```javascript
var defered = $q.defer();
var promise = defered.promise;
```

Seguidamente realizamos la llamada HTTP, y en el m√©todo `Success`, que nos devuelve los datos del servidor o API si la llamada ha finalizado correctamente, invocamos la funci√≥n `resolve()` de nuestra promesa y le pasamos por argumentos los datos recibidos. √âste m√©todo sirve para indicar que se ha obtenido la informaci√≥n y pasarlo como par√°metro

```
defered.resolve(data);
```

En caso de que en nuestra llamada ocurriese un error, se llamar√≠a a la funci√≥n `Error`, en ese caso invocaremos a la funci√≥n `reject()` de nuestra promesa, que indica que la petici√≥n ha sido rechazada y se le pasa el error por par√°metro:

```
defered.reject(err);
```

Finalmente devolveremos el objecto promesa que creamos antes y ser√° el que reciba el controlador:

```
return promise;
```

Nuestro servicio `dataService` quedar√≠a as√≠:

```javascript
function dataService($http, $q) {
  return {
    getAll: getAll,
  };

  function getAll() {
    var defered = $q.defer();
    var promise = defered.promise;

    $http
      .get("http://midominio.com/recursos.json")
      .success(function (data) {
        defered.resolve(data);
      })
      .error(function (err) {
        defered.reject(err);
      });

    return promise;
  }
}
```

Solamente nos queda inyectar ese servicio en nuestro controlador y llamar a la funci√≥n `getAll()` y tratar la promesa con los m√©todos `then()` y `catch()` que se llaman cuando finalice la petici√≥n o se produzca un error:

```javascript
function myController (dataService) {
    dataService
        .getAll()
        .then(function(data) {
            $scope.elementos = data;
        })
        .catch(function(err)) {
            // Tratar el error
        }
}
```

De esta manera tenemos separados los conceptos y las funcionalidades en nuestra aplicaci√≥n Angular y utilizando promesas para devolver el resultado de nuestras peticiones.

Para ampliar m√°s esta informaci√≥n, puedes visitar:

- [NodeSchool Workshopper - Promise It Won't Hurt](https://github.com/stevekane/promise-it-wont-hurt)
- [Promises/A+](https://promisesaplus.com/)
- [Q](http://documentup.com/kriskowal/q)
- [AngularJS DOCS: Servicio $q](https://docs.angularjs.org/api/ng/service/$q)

</article>

---

<article slug="browserify-desarrollando-tu-frontend-como-en-node-js" date="2015-03-12" url="https://carlosazaustre.es/blog/browserify-desarrollando-tu-frontend-como-en-node-js">

# Browserify. Desarrollando tu Frontend como en Node.js

**Fecha:** 2015-03-12
[Browserify](http://browserify.org/) es una librer√≠a de Node.js, escrita por [substack](https://www.npmjs.com/~substack),
uno de los mayores contribuidores al core de Node.js y con mayor n√∫mero de m√≥dulos publicados en NPM.

![browserify](/images/browserify-desarrollando-tu-frontend-como-en-node-js/687474703a2f2f737562737461636b2e6e65742f696d616765732f62726f777365726966795f6c6f676f2e706e67.png)
Nos permite escribir c√≥digo JavaScript del cliente, como si estuvi√©semos programando en Node.js,
es decir, como por ahora no tenemos m√≥dulos de forma nativa en JavaScript (hasta que [se implante el est√°ndar ECMAScript6](/ecmascript6/)
que si los trae) hay librer√≠as que se encargan de imitar ese comportamiento (Caso de Require.js hace un tiempo).

Con esta librer√≠a, podemos instalar m√≥dulos para el cliente, con NPM, al igual que hac√≠amos con bower, pero ahora, podemos
llamarlos desde nuestro c√≥digo con la palabra reservada `require`, al igual que en Node.js

Y tambi√©n nos permite tener un s√≥lo archivo `.js` en el cliente, ya de inicio, olvid√°ndonos de tener que importar todas las librer√≠as
y scripts utilizados en el HTML con `<script src="..."></script>` y luego tener que concatenar etc...

Tambi√©n nos permite crear nuestros propios m√≥dulos con `module.exports` y llamarlos de nuevo desde nuestro c√≥digo con `require`.

En este art√≠culo vamos a ver como ser√≠a un ejemplo sencillo utilizando una libreria externa como `jQuery` instalada a trav√©s de NPM,
y como crear nuestro propio m√≥dulo y utilizarlo dentro de nuestra aplicaci√≥n. Para todo ello emplearemos Node.js como servidor y Gulp con algunos plugins para automatizar el proceso.

### Configuraci√≥n de Gulp

Instalamos los siguientes m√≥dulos y plugins para automatizar algunas tareas.

```shell
$ npm install --save-dev gulp
$ npm install --save-dev gulp-uglify
$ npm install --save-dev browserify
$ npm install --save-dev vinyl-source-stream
$ npm install --save-dev vinyl-buffer
```

Esta ser√° la tarea que crea el fichero `bundle.js` donde est√° el codigo fuente completo de la parte cliente, ya traducido para que
funcione en el navegador, ya que los navegadores no entienden los `require` ni los `module.exports`.

```js
gulp.task("browserify", function () {
  return browserify("./source/scripts/app.main.js")
    .bundle()
    .pipe(source("bundle.js"))
    .pipe(buffer())
    .pipe(uglify())
    .pipe(gulp.dest("./public/js"));
});
```

El fichero principal dentro de nuestros fuentes es `app.main.js`, desde ah√≠ se llama al resto de modulos y librer√≠as externas utilizadas
y el metodo `bundle()` lo compila.

Con `buffer()` del plugin `vinyl-buffer` y `source()` del plugin `vinyl-source-stream` conseguimos poder utilizar el fichero
`bundle.js` generado para aplicarle un `uglify` o lo que se nos ocurra. Si le aplicacamos `uglify` despues del `bundle()` dar√° error
porque por asincron√≠a, a√∫n no ha sido generado el fichero cuando queremos acceder a el.

### Instalando librer√≠as para el Frontend con NPM

Ahora vamos a Instalar librer√≠as cliente desde NPM, Node Package Manager, el repositorio de m√≥dulos de Node.js.

Para instalar por ejemplo, la librer√≠a de jQuery, lo hacemos de la siguiente manera:

```shell
$ npm install jquery
```

En nuestro index.html (ya sea servido por Node.js, Apache, Nginx, etc) debe incluir el script `bundle.js` generado por Browserify

```html
<!DOCTYPE html>
<html>
  <head>
    <title>Browserify Playground</title>
  </head>
  <body>
    <h1>Hola Mundo</h1>
    <script src="/static/js/bundle.js"></script>
  </body>
</html>
```

Adem√°s para este ejemplo, hemos a√±adido un `h1` con el texto _Hola Mundo_.

Ahora pasamos a nuestro c√≥digo fuente JavaScript, el fichero `app.main.js` llamar√° al m√≥dulo de jQuery con `require('jquery')` y podremos usarlo.

Este script √∫nicamente buscar√° el elemento `h1` y cambiar√° su texto por _Hello Browserify_

```js
// source/scripts/app.main.js
var $ = require("jquery");
$("h1").html("Hola Browserify");
```

El resultado que veremos en el navegador ser√° el siguiente:
![hola browserify](/images/browserify-desarrollando-tu-frontend-como-en-node-js/Screen-Shot-2015-03-11-at-20-45-18.png)

Para conseguir este resultado, hay que correr las tareas que hemos configurado en el `Gulpfile.js`

```shell
$ gulp build
$ gulp
```

### Integrando nuestros propios m√≥dulos

Voy a crear un fichero `app.persona.js` como m√≥dulo para ver como se exportar√≠a e importar√≠a en nuestra aplicaci√≥n con _browserify_

```js
// source/scripts/app.persona.js

var Persona = function (nombre, edad) {
  this.nombre = nombre;
  this.edad = edad;

  var self = this;

  return {
    saludar: function () {
      alert("Hola, mi nombre es " + self.nombre);
    },
    presentar: function () {
      alert("Tengo " + self.edad + " a√±os.");
    },
  };
};

module.exports = Persona;
```

Exportamos la variable `Persona` como m√≥dulo, y que devuelve 2 funciones, `saludar` y `presentar`,
que son las √∫nicas que podremos utilizar cuando las llamemos desde `app.main.js`

```js
var $ = require("jquery");
var persona = require("./app.persona");

$("h1").html("Hola Browserify");

var carlos = new persona("Carlos", 30);
carlos.saludar();
carlos.presentar();
```

Importamos el m√≥dulo recien creado con `require('./app.persona')` indic√°ndole la ruta donde est√° el archivo.

Creamos un objeto `persona` en la variable `carlos`, le pasamos los par√°metros `Carlos` y `30` como nombre y edad.
Llamamos a las funciones `saludar()` y `presentar()` que mostrar√°n una alerta JavaScript como las siguientes:

![saludar](/images/browserify-desarrollando-tu-frontend-como-en-node-js/Screen-Shot-2015-03-11-at-23-35-04.png)

![presentar](/images/browserify-desarrollando-tu-frontend-como-en-node-js/Screen-Shot-2015-03-11-at-23-35-09.png)

De esta manera, con `Browserify`, podemos programar el JavaScript del Frontend como en el backend con Node.js, pudiendo incluso
utilizar librer√≠as no disponibles para el navegador. Y adem√°s compilar todo en un √∫nico fichero y no tener que enlazar los scripts en el HTML, salvo el `bundle.js`

![chuck-norris-aproved](http://www.gifbin.com/bin/1237811519_chuck-norris-approves.gif)

En el siguiente enlace tienes acceso al c√≥digo utilizado en este ejemplo, para que lo puedas testear.

> [github.com/carlosazaustre/browserify-example](https://github.com/carlosazaustre/browserify-example)

</article>

---

<article slug="el-escritorio-de-un-desarrollador-web" date="2015-03-12" url="https://carlosazaustre.es/blog/el-escritorio-de-un-desarrollador-web">

# 11 dispositivos para el espacio de trabajo de un desarrollador web

**Fecha:** 2015-03-12
Tanto si eres programador de software, desarrollador web (Frontend o Backend), desarrollador de apps, incluso dise√±ador gr√°fico, habr√°s notado que **muchas veces, si trabajas con un ordenador port√°til, te falta pantalla** para colocar todas las ventanas que tienes abiertas, o tu espalda se resiente tras horas de trabajo encorvado mirando tus 13 o 15 pulgadas.

En este post, he querido recopilar y compartir contigo los accesorios que he ido adquiriendo en los √∫ltimos meses (y algunos que ya ten√≠a) que **conforman mi escritorio o espacio de trabajo** y me ayudan en mi d√≠a a d√≠a como desarrollador/formador web freelance.

![Escritorio de un desarrollador web](/images/el-escritorio-de-un-desarrollador-web/zona-de-trabajo-de-un-desarrollador-web-1.jpg)

1. [Laptop](#laptop)
2. [Monitor Externo](#monitorexterno)
3. [Auriculares](#auriculares)
4. [Tablet Monitor](#tabletmonitor)
5. [Elevador de port√°til](#elevadordeporttil)
6. [Teclado Bluetooth](#tecladobluetooth)
7. [Disco duro port√°til](#discoduroporttil)
8. [Chromecast](#chromecast)
9. [Altavoces Dom√©sticos](#altavocesdomsticos)
10. [Mesa](#mesa)
11. [Silla](#silla)

### Ordenador port√°til (Laptop)

Mi herramienta principal de trabajo es un [MacBook Pro Retina de 13"](http://www.amazon.es/gp/product/B00M976WFE/ref=as_li_ss_tl?ie=UTF8&camp=3626&creative=24822&creativeASIN=B00M976WFE&linkCode=as2&tag=pa0f-21), la edici√≥n _Late 2013_, que compr√© [durante una viaje a Estados Unidos](/viajar-estados-unidos/). Comprado en una Apple Store de San Francisco. M√°s _hipster_ no se puede ser :P

[![macbookpro retina display 13 pulgadas](/images/el-escritorio-de-un-desarrollador-web/apple-macbook-retina-13.jpg)](http://www.amazon.es/gp/product/B00M976WFE/ref=as_li_ss_tl?ie=UTF8&camp=3626&creative=24822&creativeASIN=B00M976WFE&linkCode=as2&tag=pa0f-21)

> Apple MacBookPro Retina 13" - _Late 2013_

Ya han salido varias revisiones de este laptop, la m√≠a en concreto tiene las siguientes caracter√≠sticas

- Sistema: **Mac OS X Yosemite v10.10.2**
- Procesador: **Intel Core i5 2,4GHz**
- Memoria: **4GB 1600 MHz DDR3**
- T.Gr√°fica: **Intel Iris 1536 MB**
- Almacenamiento: **128 GB SSD**

Adem√°s tiene **2 conectores USB**, **2 conectores Thunderbolt 2**, salida para auriculares, **salida HDMI** y slot para leer **tarjetas SD de memoria**.

Y lo que m√°s me gusta es la bater√≠a, con un uso intensivo, al cabo de a√±o y medio tengo unas 5 horas de bater√≠a. Si le quito el WiFi puedo llegar a 7. Los modelos actuales han mejorado a√∫n m√°s.

El [modelo actual](http://www.apple.com/macbook-pro/features-retina/) supera √©stas caracter√≠sticas. Para mi actualmente son m√°s que suficientes, por tanto si est√°s pensando en adquirir un MacBook Retina, [ve a por √©l](http://www.amazon.es/gp/product/B00M976WFE/ref=as_li_ss_tl?ie=UTF8&camp=3626&creative=24822&creativeASIN=B00M976WFE&linkCode=as2&tag=pa0f-21).

### Monitor Externo

Estuve un tiempo buscando un buen monitor y barato, para utilizar como monitor externo, que se viera bien (soy un poco _tiquismiquis_ con las pantallas) y a ser posible HDMI. Es una misi√≥n complicada, pero d√≠ con uno que adem√°s est√©ticamente es bonito y barato comparado con otros.

[![Monitor Samsung 24 pulgadas HDMI Full HD Barato](/images/el-escritorio-de-un-desarrollador-web/monitor-samsung-HDMI-full-HD-24-pulgadas-economico.jpg)](http://www.amazon.es/gp/product/B00IJS6P40/ref=as_li_ss_tl?ie=UTF8&camp=3626&creative=24822&creativeASIN=B00IJS6P40&linkCode=as2&tag=pa0f-21)

> Samsung LS24D391HL, LED, 24", HDMI

Se trata del [monitor Samsung LS24D391HL de 24"](http://www.amazon.es/gp/product/B00IJS6P40/ref=as_li_ss_tl?ie=UTF8&camp=3626&creative=24822&creativeASIN=B00IJS6P40&linkCode=as2&tag=pa0f-21), de pantalla LED, con entradas tanto VGA como **HDMI**. [Su precio en Amazon](http://www.amazon.es/gp/product/B00IJS6P40/ref=as_li_ss_tl?ie=UTF8&camp=3626&creative=24822&creativeASIN=B00IJS6P40&linkCode=as2&tag=pa0f-21), donde lo compr√© es de **160‚Ç¨** y se ve realmente bien. No es un Apple Cinema Display, pero no tiene nada que envidiarle ;).

Si buscas un buen monitor para tus programar a doble pantalla junto con tu Laptop, y encima HD y HDMI, [es una muy buena opci√≥n, te lo recomiendo](http://www.amazon.es/gp/product/B00IJS6P40/ref=as_li_ss_tl?ie=UTF8&camp=3626&creative=24822&creativeASIN=B00IJS6P40&linkCode=as2&tag=pa0f-21).

### Auriculares de diadema

Cuando necesito concentrarme, [estos auriculares](http://www.amazon.es/gp/product/B003LPTAYI/ref=as_li_ss_tl?ie=UTF8&camp=3626&creative=24822&creativeASIN=B003LPTAYI&linkCode=as2&tag=pa0f-21) me vienen de perlas. No tienen cancelaci√≥n de ruido, ni son bluetooth, pero por el precio que tienen (**26‚Ç¨**) son bastante buenos, ya que si est√°s escuchando m√∫sica o alg√∫n video, solo escuchar√°s eso.

[![auriculares audifonos baratos sennheiser](/images/el-escritorio-de-un-desarrollador-web/auriculares-baratos-sennheiser.jpg)](http://www.amazon.es/gp/product/B003LPTAYI/ref=as_li_ss_tl?ie=UTF8&camp=3626&creative=24822&creativeASIN=B003LPTAYI&linkCode=as2&tag=pa0f-21)

> Sennheiser HD 202 II

Si buscas unos buenos aud√≠fonos de diadema y no quieres dejarte un pastizal, te los recomiendo y [tambi√©n los vende Amazon](http://www.amazon.es/gp/product/B003LPTAYI/ref=as_li_ss_tl?ie=UTF8&camp=3626&creative=24822&creativeASIN=B003LPTAYI&linkCode=as2&tag=pa0f-21).

### Usando el iPad como Monitor Externo

Tengo un [iPad3](http://www.amazon.es/gp/product/B009ZC4VBI/ref=as_li_ss_tl?ie=UTF8&camp=3626&creative=24822&creativeASIN=B009ZC4VBI&linkCode=as2&tag=pa0f-21) desde hace ya unos a√±os, lo uso bastante para leer blogs a trav√©s de Flipboard, y libros t√©cnicos en PDF, ya que en ese sentido me resultan m√°s c√≥modos de leer que en un Kindle.

![DuetDisplay](/images/el-escritorio-de-un-desarrollador-web/duet-display-ipad-como-segunda-pantalla.png)

Recientemente han lanzado una aplicaci√≥n para iOS y Mac, desarrollada por ex-ingenieros de Apple, que permite utilizar tu iPad como monitor externo, sin nada de lags extra√±os. Se llama [Duet Display](http://www.duetdisplay.com/), cuesta **14‚Ç¨** pero merece la pena si quieres tener un monitor externo portatil, o un segundo monitor externo como tengo yo, para tener tu [terminal](/configura-tu-mac-como-un-desarrollador-profesionalque-2/) o slack abiertos y separados del workspace.

### Elevador para el ordendor port√°til

Como dec√≠a al principio del post, trabajar en una mesa con un portatil muchas horas hace que nuestra espalda se fuerce en una mala postura. La pantalla debe estar a la altura de nuestros ojos, y en los port√°tiles eso es complicado.

Por suerte, existen elevadores de portatiles para esto. Hay de todo, m√°s caros que el port√°til en si o m√°s econ√≥mico.

[![elevador de portatil laptop barato](/images/el-escritorio-de-un-desarrollador-web/elevador-portatil-barato.jpg)](http://www.amazon.es/gp/product/B003BV2IS2/ref=as_li_ss_tl?ie=UTF8&camp=3626&creative=24822&creativeASIN=B003BV2IS2&linkCode=as2&tag=pa0f-21)

> Ah Stands SLT001E

Yo tengo el de la imagen que adquir√≠ hace unos [d√≠as en Amazon, por **25‚Ç¨**](http://www.amazon.es/gp/product/B003BV2IS2/ref=as_li_ss_tl?ie=UTF8&camp=3626&creative=24822&creativeASIN=B003BV2IS2&linkCode=as2&tag=pa0f-21) regulable a 5 alturas, y si tienes que transportarlo, desmont√°ndolo ocupa muy poco.

### Teclado inal√°mbrico Bluetooth

Al tener el port√°til elevado, se hace necesario un teclado adicional. Los de Apple son muy caros, yo quer√≠a uno similar pero no quer√≠a dejarme otra pasta en eso.

[![Teclado Bluetooth inal√°mbrico barato](/images/el-escritorio-de-un-desarrollador-web/teclado-bluetooth-barato.jpg)](http://www.amazon.es/gp/product/B00OK4CX2K/ref=as_li_ss_tl?ie=UTF8&camp=3626&creative=24822&creativeASIN=B00OK4CX2K&linkCode=as2&tag=pa0f-21)

Encontr√© [√©ste en Amazon](http://www.amazon.es/gp/product/B00OK4CX2K/ref=as_li_ss_tl?ie=UTF8&camp=3626&creative=24822&creativeASIN=B00OK4CX2K&linkCode=as2&tag=pa0f-21), por **20‚Ç¨**, que si bien no tiene la misma calidad que uno de Apple, cumple su trabajo. Sirve tambi√©n para tablets. Si buscas uno barato, pero que funcione [te lo recomiendo](http://www.amazon.es/gp/product/B00OK4CX2K/ref=as_li_ss_tl?ie=UTF8&camp=3626&creative=24822&creativeASIN=B00OK4CX2K&linkCode=as2&tag=pa0f-21).

### Disco Duro Externo Multimedia

Mi Macbook viene con 128GB de Disco SSD. Para programas y archivos frecuentes es un buen tama√±o, pero si tienes que almacenar fotos, archivos de gran tama√±o, v√≠deos, etc.. se te queda corto en poco tiempo.

Para ello tengo un **disco duro port√°til multimedia externo de 2TB**, donde aparte de esos archivos voluminosos, guardo los backups del Mac que se realizan con TimeMachine. No ocupa mucho y es **f√°cil de transportar**. Tampoco es demasiado caro, ya que es un almacenamiento est√°ndar, si fuera SSD ser√≠a mucho m√°s costoso, pero no merece la pena a menos que edites muchos videos o manejes de manera frecuente archivos muy pesados.

[![WD MyPassport Disco Duro Externo Multimedia](/images/el-escritorio-de-un-desarrollador-web/disco-duro-portatil-wd-mypassport.jpg)](http://www.amazon.es/gp/product/B00CSH19PI/ref=as_li_ss_tl?ie=UTF8&camp=3626&creative=24822&creativeASIN=B00CSH19PI&linkCode=as2&tag=pa0f-21)

> WD MyPassport 2TB

Mi disco en cuesti√≥n es un [Western Digital, modelo _MyPassport_ y lo puedes adquirir en Amazon por menos de **100‚Ç¨**](http://www.amazon.es/gp/product/B00CSH19PI/ref=as_li_ss_tl?ie=UTF8&camp=3626&creative=24822&creativeASIN=B00CSH19PI&linkCode=as2&tag=pa0f-21). Su conexi√≥n es USB 3.0 y no he tenido pegas por ahora y llevo bastante tiempo us√°ndolo (+3 a√±os)

### Chromecast

Me lo regal√≥ [Paola](http://twitter.com/ggarciapaola) el a√±o pasado por mi cumplea√±os y lo usamos bastante. No solo como reproductor de peliculas sin necesidad de cables, si no tambi√©n para ver [videotutoriales](https://www.youtube.com/playlist?list=PLUdlARNXMVkl9MJl4r90Z1j1nmAfWEPV3) o conferencias en la TV del Sal√≥n, mientras seguimos utilizando el ordenador para otras cosas.

Tambi√©n puedes usarlo desde el m√≥vil, por lo que su usabilidad es ilimitada, todo lo que puedas ver en tu navegador, lo puedes ver en la TV.

[![Chromecast](/images/el-escritorio-de-un-desarrollador-web/chromecast.jpg)](http://www.amazon.es/gp/product/B00I4WQ8VG/ref=as_li_ss_tl?ie=UTF8&camp=3626&creative=24822&creativeASIN=B00I4WQ8VG&linkCode=as2&tag=pa0f-21)

> Google Chromecast

Te olvidas de cables y estar instalando DLNAServers. [S√≥lo cuesta **35‚Ç¨**](http://www.amazon.es/gp/product/B00I4WQ8VG/ref=as_li_ss_tl?ie=UTF8&camp=3626&creative=24822&creativeASIN=B00I4WQ8VG&linkCode=as2&tag=pa0f-21) y se instala en un momento.

### Altavoces inal√°mbricos por Bluetooth

Por √∫ltimo, en la foto de mi escritorio, aparecen unos altavoces bluetooth. No son imprescindibles para desarrollar, pero si quieres escuchar m√∫sica con mejor calidad que el altavoz del port√°til, son una buena opci√≥n.

Al ser bluetooth, puedes ponerlos en cualquier sitio de la casa y reproducir m√∫sica de Spotify desde tu ordenador.

Son antiguos, ya en [Amazon no los venden](http://www.amazon.es/gp/product/B0078M3CVM/ref=as_li_ss_tl?ie=UTF8&camp=3626&creative=24822&creativeASIN=B0078M3CVM&linkCode=as2&tag=pa0f-21), pero dejo por aqu√≠ el modelo si a alguien le interesa.

![Altavoces Bluetooth Philips AS141/12](https://carlosazaustre.es/blog/content/images/2015/10/altavoces-bluetooth.jpg)
[](http://www.amazon.es/gp/product/B0078M3CVM/ref=as_li_ss_tl?ie=UTF8&camp=3626&creative=24822&creativeASIN=B0078M3CVM&linkCode=as2&tag=pa0f-21)

> Philips AS141/12

## Bonus Extra

### Mesa

Para la mesa no hay que dejarse mucho dinero, simplemente un tablero de IKEA con 4 patas cumple a la perfecci√≥n, a menos que quieras un _standing desk_.

El tablero que compartimos [Paola](https://twitter.com/ggarciapaola) y yo es [√©ste de IKEA](http://www.ikea.com/es/es/catalog/products/S69929643/#/S69929643) que sale por **42,50‚Ç¨**

![Tablero](/images/el-escritorio-de-un-desarrollador-web/mesa.JPG)

> LINNMON

### Silla de oficina

Para la silla de oficina si conviene invertir algo m√°s de dinero, al fin y al cabo pasamos muchas horas en ella y es importante que estemos c√≥modos y nuestra espalda no sufra.

Hay de todo, desde muy caras a medianamente costosas... Yo no me puedo dar el lujo en este momento de comprar una muy cara, as√≠ que opt√© por IKEA de nuevo y [actualmente uso √©sta](http://www.ikea.com/es/es/catalog/products/60193190/#/60193185) que me cost√≥ **70‚Ç¨** y por lo menos la espalda no me duele al final del d√≠a, lo cual es mucho :D

![silla](/images/el-escritorio-de-un-desarrollador-web/vilgot-silla-giratoria-negro__0113486_PE265710_S4.JPG)

> VILGOT

---

Y b√°sicamente eso es todo lo que hay en mi mesa, aparte de la taza de caf√© reglamentaria :D.

![Zona de trabajo y escritorio de un desarrollador web freelance](/images/el-escritorio-de-un-desarrollador-web/zona-de-trabajo-de-un-desarrollador-web.jpg)

**Y t√∫, ¬øQu√© otros dispositivos o accesorios utilizas en tu escritorio? Te animo a dejarlos en los comentarios**

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=BEhxChHJvR8)
/>

</article>

---

<article slug="como-servir-tu-api-rest-en-node-js-a-traves-de-nginx" date="2015-03-10" url="https://carlosazaustre.es/blog/como-servir-tu-api-rest-en-node-js-a-traves-de-nginx">

# C√≥mo servir tu API REST en Node.js a trav√©s de Nginx

**Fecha:** 2015-03-10
Si seguimos los pasos del [desarrollo web moderno](http://www.slideshare.net/CarlosAzaustre/curso-de-desarrollo-web-de-platzi), separando nuestro Frontend de nuestro Backend, realizando [autenticaci√≥n basada en token](/que-es-la-autenticacion-con-token/), utilizando un [API RESTFul que sirva JSON](/como-crear-una-api-rest-usando-node-js), etc... llega un momento en que tenemos que servir nuestro API desde nuestro dominio. ¬øC√≥mo podemos hacerlo?

Una opci√≥n es [usar Nginx](/como-configurar-nginx-con-node-js-en-produccion/), no solo como servidor web o balanceador de carga, si no tambi√©n como Proxy inverso para redirigir las peticiones seg√∫n la URL.

Imaginemos que nuestra aplicaci√≥n frontend est√° almacenada en el directorio de nuestro servidor `/var/www/` y que tenemos nuestra API en Node.js corriendo en `localhost:3000`

Ahora lo que queremos que la parte cliente y todas las rutas del frontend (que pueden ser servidas con AngularJS) se sirvan a trav√©s de la ruta `/`. Y que nuestra API en Node.js se sirva a trav√©s de la ruta `/api`, en plan que si escribimos `http://midominio.com/` sirva el frontend y `http://midominio.com/api` sirva el API y podamos hacer las peticiones AJAX a esa URL.

Esto lo conseguimos con el siguiente fichero de configuraci√≥n de Nginx:

```shell
# HTTP proxy
server {
	listen 80;
	server_name midominio.com;

	access_log /var/log/nginx/nginx.access.log;
	error_log /var/log/nginx/nginx.error.log;

	client_max_body_size 5M;

	location / {
		add_header Cache-Control "no-store, no-cache, must-revalidate, post-check=0, pre-check=0";

		# Ruta de los ficheros est√°ticos
		root /var/www;
		try_files $uri $uri/ /index.html =404;
	}

	location /api {
		proxy_set_header 'Access-Control-Allow-Origin' 'http://midominio.com';
		proxy_set_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS, PUT, DELETE';
		proxy_set_header 'Access-Control-Allow-Headers' 'X-Requested-With,Accept,Content-Type, Origin';

		proxy_pass http://127.0.0.1:3000;
		proxy_redirect off;
		proxy_buffering on;

		proxy_set_header	Host		$host;
		proxy_set_header	X-Real-IP	$remote_addr;
		proxy_set_header	X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header	origin		'http://midominio.com';
	}
}
```

Es importante, adem√°s de indicar para cada URL, que ruta tomar, los siguientes campos:

```shell
try_files $uri $uri/ /index.html =404;
```

Esto nos permite que el HTML5Pushstate que en ocasiones usamos en AngularJS, nos funcione. De otra manera es posible que tengamos fallos y errores cuando sirvamos las vistas del Frontend en Angular.js

```shell
proxy_set_header 'Access-Control-Allow-Origin' 'http://midominio.com';
proxy_set_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS, PUT, DELETE';
proxy_set_header 'Access-Control-Allow-Headers' 'X-Requested-With,Accept,Content-Type, Origin';
```

Esto habilita CORS para nuestro API. Aunque lo tengamos habilitado en nuestra configuraci√≥n de Express dentro de Node, es conveniente configurarlo en NGINX, ya que es la primera barrera que pasan nuestras peticiones HTTP y as√≠ no entramos en conflicto

```shell
proxy_redirect off;
proxy_buffering on;
proxy_set_header	origin	'http://midominio.com';
```

Tambi√©n es importante declarar estos campos, ya que si no nuestro API puede no funcionar correctamente, con `redirect` a `off` y `buffering` a `on` nos evitamos sustos.

Por √∫ltimo indicar la cabecera `origin` con la URL de nuestro dominio, para que el Cross-Origin no se vea afectado.

</article>

---

<article slug="autenticacion-con-token-en-angularjs" date="2015-02-26" url="https://carlosazaustre.es/blog/autenticacion-con-token-en-angularjs">

# C√≥mo hacer autenticaci√≥n basada en token con AngularJS

**Fecha:** 2015-02-26
Bienvenid@ a la √∫ltima entrega de la serie de **Autenticaci√≥n basada en token en aplicaciones web**. En las anteriores entradas vimos las [bases de este m√©todo](/que-es-la-autenticacion-con-token/) y [c√≥mo programarlo en nuestro servidor o API REST con Node.js](/autenticacion-con-token-en-node-js/). En √©ste art√≠culo veremos **como implementarlo en el lado del cliente con Angular.js**

#### Usando librer√≠as de terceros

Podemos hacerlo de varias maneras. Implementarlo manualmente o utilizar una librer√≠a que nos facilite el desarrollo. Yo recomiendo esto √∫ltimo y en concreto la **librer√≠a [Satellizer](https://github.com/sahat/satellizer)**, desarrollada por [Sahat Yalkabov](http://sahatyalkabov.com/) que desarroll√≥ durante su etapa de _non-student_ en la [Hacker School](https://www.hackerschool.com/) de Nueva York.

Esta librer√≠a soporta autenticaci√≥n por usuario/contrase√±a adem√°s de proveedores OAuth como Facebook, Twitter, Google, Github, etc... Es sencilla de usar y funciona perfectamente. A continuaci√≥n veremos como configurarla.

#### Instalaci√≥n y configuraci√≥n

Primero necesitamos instalarla, podemos hacerlo por Bower o si usamos Browserify por NPM.

```
$ bower install --save satellizer
```

De seguido, en nuestro fichero principal de Angular, supongamos el `app.js`, importamos el m√≥dulo y configuramos la librer√≠a. El nombre de la directiva que utiliza _Satellizer_ es `$auth` y `$authProvider`.

```js
angular
	.module("myApp", ["satellizer"])
    .config(function($authProvider) {
    	// Parametros de configuraci√≥n
        $authProvider.loginUrl = "http://api.com/auth/login";
        $authProvider.signupUrl = "http://api.com/auth/signup";
        $authProvider.tokenName = "token";
        $authProvider.tokenPrefix = "myApp",
    });
```

En `$authProvider.loginUrl` y `$authProvider.signupUrl` indicamos cual es la ruta de nuestro servidor o API REST que maneja la autenticaci√≥n. Como vimos en el anterior post, √©stas rutas on `/auth/login` y `/auth/signup`.

En `$authProvider.tokenName` le indicamos un nombre al token y `$authProvider.tokenPrefix` para a√±adirle un prefijo al nombre del token por si queremos diferenciarlo en nuestro LocalStorage de otros. En este caso, el token quedar√° guardado en LocalStorage con la clave `myApp_token`.

#### Controladores

Lo siguiente a implementar son los controladores. Tendremos dos principalmente, el de login y el de registro, adem√°s del de logout.

```js
angular
	.module("myApp.controllers")
    .controller("SignUpController", SignUpController)
    .controller("LoginController", LoginController);
    .controller("LogoutController", LogoutController);

function SignUpController($auth, $location) {
	var vm = this;
    this.signup = function() {
    	$auth.signup({
        	email: vm.email,
            password: vm.password
        })
        .then(function() {
        	// Si se ha registrado correctamente,
            // Podemos redirigirle a otra parte
            $location.path("/private");
        })
        .catch(function(response) {
        	// Si ha habido errores, llegaremos a esta funci√≥n
        });
    }
}

function LoginController($auth, $location) {
	var vm = this;
    this.login = function(){
    	$auth.login({
        	email: vm.email,
            password: vm.password
        })
        .then(function(){
        	// Si se ha logueado correctamente, lo tratamos aqu√≠.
            // Podemos tambi√©n redirigirle a una ruta
            $location.path("/private")
        })
        .catch(function(response){
        	// Si ha habido errores llegamos a esta parte
        });
    }
}

function LogoutController($auth, $location) {
	$auth.logout()
    	.then(function() {
        	// Desconectamos al usuario y lo redirijimos
            $location.path("/")
        });
}
```

Es un c√≥digo sencillo si ya has visto AngularJS anteriormente. Creamos las funciones correspondientes que utilizaremos desde las vistas `this.signup`, `this.login`. Estas funciones a su vez llamar√°n a la librer√≠a _Satellizer_ a trav√©s de la directiva `$auth` llamando a las funciones `$auth.login()`, `$auth.signup()` y `$auth.logout()`.

Estas funciones por debajo, realizan todo el manejo de insertar en la cabecera HTTP el token de autenticaci√≥n que recibe del servidor cuando se registra/autentica y que env√≠a en cada petici√≥n HTTP una vez autenticado.

#### ¬øD√≥nde se almacena el Token?

Vamos a ver un poco como est√° hecho _Satellizer_ por dentro. Puedes mirarlo en su [repositorio en GitHub](https://github.com/sahat/satellizer/blob/master/satellizer.js) ya que es _OpenSource_, e incluso puedes ayudar a mejorarlo con tus aportes :)

Entre todos los m√≥dulos que est√°n programados en _Satellizer_, vemos uno llamado `satellizer.shared` donde se comparten los m√©todos y funciones que utiliza el resto de la librer√≠a. Digamos que √©ste es el n√∫cleo de la funcionalidad.

`shared.getToken()` busca en nuestro LocalStorage la clave que hemos definido para almacenar nuestro Token y nos lo devuelve

```js
shared.getToken = function () {
  var tokenName = config.tokenPrefix
    ? config.tokenPrefix + "_" + config.tokenName
    : config.tokenName;
  return $window.localStorage[tokenName];
};
```

`shared.getPayload()` toman el token y devuelve el `payload` que es la 2a parte del token

```js
shared.getPayload = function () {
  var tokenName = config.tokenPrefix
    ? config.tokenPrefix + "_" + config.tokenName
    : config.tokenName;
  var token = $window.localStorage[tokenName];

  if (token && token.split(".").length === 3) {
    var base64Url = token.split(".")[1];
    var base64 = base64Url.replace("-", "+").replace("_", "/");
    return JSON.parse($window.atob(base64));
  }
};
```

Y por √∫ltimo la funci√≥n `shared.setToken()`, almacena el token recibido en el LocalStorage:

```js
shared.setToken = function (response, isLinking) {
  var token =
    response.access_token ||
    (config.tokenRoot && response.data[config.tokenRoot]
      ? response.data[config.tokenRoot][config.tokenName]
      : response.data[config.tokenName]);
  var tokenName = config.tokenPrefix
    ? config.tokenPrefix + "_" + config.tokenName
    : config.tokenName;

  if (!token) {
    tokenName = config.tokenRoot
      ? config.tokenRoot + "." + config.tokenName
      : config.tokenName;
    throw new Error(
      'Expecting a token named "' +
        tokenName +
        '" but instead got: ' +
        JSON.stringify(response.data)
    );
  }

  $window.localStorage[tokenName] = token;

  if (config.loginRedirect && !isLinking) {
    $location.path(config.loginRedirect);
  }
};
```

##### ¬øC√≥mo se env√≠a el token en cada petici√≥n HTTP?

De eso se encarga la directiva `$httpProvider` que funciona como interceptor o middleware y se activa en cada petici√≥n HTTP.

```js
//...
.config(['$httpProvider', 'satellizer.config', function($httpProvider, config) {
      $httpProvider.interceptors.push(['$q', function($q) {
        var tokenName = config.tokenPrefix ? config.tokenPrefix + '_' + config.tokenName : config.tokenName;
        return {
          request: function(httpConfig) {
            var token = localStorage.getItem(tokenName);
            if (token && config.httpInterceptor) {
              token = config.authHeader === 'Authorization' ? 'Bearer ' + token : token;
              httpConfig.headers[config.authHeader] = token;
            }
            return httpConfig;
          },
          responseError: function(response) {
            return $q.reject(response);
          }
        };
      }]);
    }]);
```

De esta manera, en cada petici√≥n HTTP, se inserta en las cabeceras el token si lo tenemos en el LocalStorage y ya despues el backend (nuestro servidor o API) se encarga de ver si existe, es correcto o no y devolver el c√≥digo de respuesta para cada caso.

#### Rutas y vistas

Volvemos al m√≥dulo principal de nuestra aplicaci√≥n y a√±adimos las rutas del frontend a continuaci√≥n de la configuraci√≥n del `$authProvider` podemos usar `ngRoute` o `ui.route` si queremos tener estados en lugar de rutas y poder tener vistas anidadas (_nested views_). Yo suelo utilizar `ui.router` me parece m√°s c√≥modo. Para ello primero instalamos la librer√≠a correspondiente:

```shell
$ bower install --save angular-ui-router
```

Y lo configuramos en `app.js`

```js
angular
	.module("myApp", ["satellizer", "ui.router"])
    .config(function($authProvider, $stateProvider) {
    	// Parametros de configuraci√≥n
        $authProvider.loginUrl = "http://api.com/auth/login";
        $authProvider.signupUrl = "http://api.com/auth/signup";
        $authProvider.tokenName = "token";
        $authProvider.tokenPrefix = "myApp",

        // Configuraci√≥n de las rutas/estados
        $stateProvider
        	.state("home", {
            	url: "/",
                templateUrl: "views/index.html"
                controller: "HomeController"
            })
            .state("login", {
            	url: "/login",
                templateUrl: "views/login.html",
                controller: "LoginController",
                controllerAs: "login"
            })
            .state("signup", {
            	url: "/signup",
                templateUrl: "views/signup.html",
                controller: "SignUpController",
                controllerAs: "signup"
            })
            .state("logout", {
            	url: "/logout",
                templateUrl: null,
                controller: "LogoutController"
            })
            .state("private", {
            	url: "/private",
                templateUrl: "views/private.html",
                controller: "PrivateController",
                controllerAs: "private"
            });
    });
```

En este c√≥digo he configurado dos rutas adicionales, la de `Home` en `/` y la de `Private` en `/private` pero √©stas no las voy a desarrollar en este ejemplo. Esas ya son propias de tu aplicaci√≥n.

Lo que si voy a mostrar es como ser√≠an las vistas para el `login` y el `signup`.

```html
<!-- views/signup.html -->
<form ng-submit="signup.signup()" method="post">
  <input type="email" ng-model="signup.email" />
  <input type="password" ng-model="signup.password" />
  <button type="submit">Registrarse</button>
</form>
```

```html
<!-- views/login.html -->
<form ng-submit="login.login()" method="post">
  <input type="email" ng-model="login.email" />
  <input type="password" ng-model="login.password" />
  <button type="submit">Autenticarse</button>
</form>
```

En ellas vemos los `ng-model` que utilizamos y que obtenemos en el controlador.

Si quieres m√°s informaci√≥n (en ingl√©s) sobre estos temas de autenticaci√≥n por Token, te dejo unos enlaces a blogs y websites que me han servido para documentarme y aprender a manejar este sistema.

**Fuentes**

- [Cookies vs Tokens. Getting Auth right with Angular.js](https://auth0.com/blog/2014/01/07/angularjs-authentication-with-cookies-vs-token/)
- [The Anatomy of a JSON Web Token](https://scotch.io/tutorials/the-anatomy-of-a-json-web-token)
- [The Ins and Outs of token based authentication](https://scotch.io/tutorials/the-ins-and-outs-of-token-based-authentication)
- [Token-based authentication with AngularJS and NodeJS](http://code.tutsplus.com/tutorials/token-based-authentication-with-angularjs-nodejs--cms-22543)

</article>

---

<article slug="autenticacion-con-token-en-node-js" date="2015-02-23" url="https://carlosazaustre.es/blog/autenticacion-con-token-en-node-js">

# C√≥mo implementar autenticaci√≥n basada en token con Node.js

**Fecha:** 2015-02-23
En el [anterior post vimos las bases de la autenticaci√≥n basada en token en una aplicaci√≥n web](/que-es-la-autenticacion-con-token/). En este post, vamos a ver como implementar este tipo de **autenticaci√≥n en un servidor usando Node.js**

Voy a separar las funciones en varios archivos, siguiendo buenas pr√°cticas y modularizando dependendiendo de la funcionalidad.

#### Nuestro servidor en Node.js

Lo primero es crear el archivo `server.js` d√≥nde configuramos Express (en versi√≥n 4), importamos los m√≥dulos necesarios y hacemos correr el servidor y la base de datos.

Si te pierdes un poco, en [√©ste post anterior expliqu√© como crear un API REST en Node.js con Express y MongoDB](/como-crear-una-api-rest-usando-node-js/). Y si prefieres tambi√©n tengo un [videotutorial en YouTube sobre el tema](https://www.youtube.com/watch?v=SKoK6braZlk&list=PLUdlARNXMVkl9MJl4r90Z1j1nmAfWEPV3).

Configuraci√≥n b√°sica de un servidor en Node.js utilizando Express v4.

```js
// server.js
var express = require('express');
var bodyParser = require('body-parser');
var mongoose = require('mongoose');
var cors = require('cors');
var authCtrl = require('./auth');
var middleware = require('./middleware');

// Configuramos Express
var app = express();
app.use(bodyParser.json());
app.use(bodyParser.urlencoded({extended: true}));
app.use(cors());
app.set('port', 3000);

// Importamos nuestros modelos,
// en este ejemplo nuestro modelo de usuario
require('./models/user');

// Iniciamos las rutas de nuestro servidor/API
var router = express.Router();

// Rutas de autenticaci√≥n y login
router.post('/auth/signup', auth.emailSignup);
router.post('/auth/login', auth.emailLogin);

// Ruta solo accesible si est√°s autenticado
router.get('/private',middleware.ensureAuthenticated, function(req, res) {...} );

// Iniciamos el servidor y la base de datos
mongoose.connect('mongodb://localhost', function(err) {
	// Comprobar errores siempre
    app.listen(app.get('port'), function(){
    	console.log('Express corriendo en http://localhost:3000');
    });
});

```

Simplemente hemos importado los m√≥dulos necesarios y la configuraci√≥n b√°sica de Express. Tambi√©n he importado un archivo con el _Schema_ del modelo `User` donde almacenaremos nuestros usuarios. Las rutas que utilizaremos ser√°n `/auth/signup` para el registro con email y contrase√±a y `/auth/login` para autenticarnos.

Luego tendremos una ruta adicional, `/private` que s√≥lo podremos acceder a ella si estamos logueados. Si nos fijamos, he creado un middleware para esta √∫ltima ruta, que se ejecutar√° antes de la funci√≥n controladora. Lo he separado en un m√≥dulo aparte, de esta manera podemos reutilizar esta funci√≥n en todas las rutas que queramos que sean privadas.

De igual manera, en las funciones controladores de `/auth/signup` y `/auth/login` utilizo otras funciones importadas como son `auth.emailSignup` y `auth.emailLogin` que definiremos a continuaci√≥n.

#### Controladores

En el fichero `auth.js` voy a definir las dos funciones controladoras para el registro y autenticaci√≥n de usuarios.

```js
// auth.js
var mongoose = require("mongoose");
var User = mongoose.model("User");
var service = require("./service");

exports.emailSignup = function (req, res) {
  var user = new User({
    // Creamos el usuario con los campos
    // que definamos en el Schema
    // nombre, email, etc...
  });

  user.save(function (err) {
    return res.status(200).send({ token: service.createToken(user) });
  });
};

exports.emailLogin = function (req, res) {
  User.findOne({ email: req.body.email.toLowerCase() }, function (err, user) {
    // Comprobar si hay errores
    // Si el usuario existe o no
    // Y si la contrase√±a es correcta
    return res.status(200).send({ token: service.createToken(user) });
  });
};
```

En `emailSignup` creo un nuevo usuario, con los campos que estimemos necesarios para nuestra aplicaci√≥n, por ejemplo el email, nombre, contrase√±a, etc... Despues de salvar el usuario, enviamos un c√≥digo `200` de OK en la respuesta, junto con un mensaje en el que pasaremos el token que creamos en la funci√≥n `service.createToken()` que veremos a continuaci√≥n.

Para el `emailLogin`, buscamos primero si el usuario existe y comprobamos que la contrase√±a es correcta o no. Si todo es OK, volvemos a enviar un c√≥digo `200` en la respuesta HTTP junto con el token.

#### Codificando el JSON Web Token

Ahora vamos al "meollo" de este art√≠culo, la creaci√≥n de un Token que identifique a nuestro usuario en cada petici√≥n HTTP que realice.

Para codificar el token utilizamos una clave secreta. Es importante que esta clave permanezca lo m√°s oculta posible. Una opci√≥n es almacenarla en un fichero `config.js` y ese fichero no subirlo al repositorio con `.gitignore` o la opci√≥n mejor es utilizar una variable de entorno (con `process.env`) que est√© en nuestro servidor, y otra para nuestro entorno de desarrollo.

Ser√≠a algo as√≠:

```js
// config.js
module.exports = {
  TOKEN_SECRET: process.env.TOKEN_SECRET || "tokenultrasecreto",
};
```

Cuando importemos el fichero `config.js` en la variable `TOKEN_SECRET` tendremos nuestra clave para codificar.

Creamos el servicio que utilizaremos para codificar el token. Para ello vamos utilizar la librer√≠a [jwt-simple](https://www.npmjs.com/package/jwt-simple) que nos facilita la vida a la hora de codificar el _payload_ y hace todo el trabajo que expliqu√© en el [post anterior](/que-es-la-autenticacion-con-token/).

```js
// services.js
var jwt = require("jwt-simple");
var moment = require("moment");
var config = require("./config");

exports.createToken = function (user) {
  var payload = {
    sub: user._id,
    iat: moment().unix(),
    exp: moment().add(14, "days").unix(),
  };
  return jwt.encode(payload, config.TOKEN_SECRET);
};
```

Creamos un objeto `payload` en el que ponemos tres atributos: `sub`, `iat` y `exp`. Que ya [explicamos anteriormente](/que-es-la-autenticacion-con-token/). En `sub` almacenamos el ID del usuario que pasamos por par√°metro.

Tambi√©n usamos la librer√≠a [moment](http://momentjs.com) para ayudarnos en el manejo de fechas. Con `moment().unix()` conseguimos el tiempo actual en formato UNIX, y con `moment().add(14, "days").unix()` le estamos a√±adiendo 14 d√≠as al momento actual. Muy √∫til para establecer una fecha de creaci√≥n y expiraci√≥n.

Por √∫litmo devolvemos el JSON Web Token, codificando el payload con nuestra clave secreta.

#### Acesso a rutas con autenticaci√≥n.

Cada vez que accedamos a una ruta privada, s√≥lo accesible si estamos autenticados, como por ejemplo `/private`, le pasamos el middleware `ensureAuthenticated` que a continuaci√≥n programaremos:

```js
// middleware.js
var jwt = require("jwt-simple");
var moment = require("moment");
var config = require("./config");

exports.ensureAuthenticated = function (req, res, next) {
  if (!req.headers.authorization) {
    return res
      .status(403)
      .send({ message: "Tu petici√≥n no tiene cabecera de autorizaci√≥n" });
  }

  var token = req.headers.authorization.split(" ")[1];
  var payload = jwt.decode(token, config.TOKEN_SECRET);

  if (payload.exp <= moment().unix()) {
    return res.status(401).send({ message: "El token ha expirado" });
  }

  req.user = payload.sub;
  next();
};
```

Lo primero que hacemos en la funci√≥n es comprobar que la petici√≥n, `req` lleva la cabecera de autorizaci√≥n `req.headers.authorization`. √âsto lo env√≠a el Frontend y lo veremos en un pr√≥ximo post, con Angular.js

Si la petici√≥n no env√≠a una autorizaci√≥n, env√≠amos el c√≥digo de error `403` de acesso denegado. y si no, tomamos el token.

la cabecera, tendr√° una pinta parecida a √©sta:

```js
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbsciOiJIUzI1NiJ9.eyJzdWIiOiIWeRtU2ZWMyYjUyNjgxNzE2YmXiNzAxMzIiLCJpYXQiOjE0Mj10MjA0OTEsImV4cCI6MTQy67YzMDA5MX0.IH7ek7Rp_WQJvXeOd8zrBIpeFi4W6kUi_6htmaxv7Ow
```

S√≥lo tenemos que obtener el token de ese String y lo hacemos con el m√©todo `split` de JavaScript:

```js
var token = req.headers.authorization.split(" ")[1];
```

Decodificamos ese token con la funci√≥n `decode` y la clave secreta y ya podemos identificar al usuario, con el atributo `sub` del objeto `payload`, que seg√∫n este ejemplo ser√°n un ObjectID de Mongo.

En la pr√≥xima entrada, veremos [c√≥mo programar la autenticaci√≥n en la parte del cliente con Angular.js](/autenticacion-con-token-en-angularjs/).

</article>

---

<article slug="que-es-la-autenticacion-con-token" date="2015-02-19" url="https://carlosazaustre.es/blog/que-es-la-autenticacion-con-token">

# ¬øQu√© es la autenticaci√≥n basada en Token?

**Fecha:** 2015-02-19
Existen varios sistemas de autenticaci√≥n en una aplicaci√≥n web. A continuaci√≥n veremos las 2 versiones m√°s utilizadas junto con sus ventajas e inconvenientes.

## Autenticaci√≥n en el servidor, almacenando la sesi√≥n

El m√°s com√∫n hasta ahora era el que guardaba en una sesi√≥n la informaci√≥n del usuario. Para ello necesit√°bamos almacenar esa informaci√≥n en una base de datos, pod√≠a ser una colecci√≥n de <b>MongoDB</b> o en <b>Redis</b>.

Sin embargo esto supon√≠a una p√©rdida de escalabilidad en nuestra aplicaci√≥n, ya que el servidor debe almacenar un registro por cada vez que el usuario se autentique en el sistema. Adem√°s hacemos que el Backend se encargue de ello y de esta manera si queremos desarrollar una aplicaci√≥n m√≥vil, necesitar√≠amos otro backend diferente, no pudiendo reutilizarlo.

## Autenticaci√≥n sin estado con Tokens

Por ello una de las nuevas tendencias en cuanto al desarrollo web moderno se refiere, es la autenticaci√≥n por medio de _Tokens_ y que [nuestro backend sea un API RESTful sin informaci√≥n de estado](/como-implementar-una-api-rest-con-mongodb-node-js-usando-express-v4/), _stateless_.

El funcionamiento es el siguiente. El usuario se autentica en nuestra aplicaci√≥n, bien con un par usuario/contrase√±a, o a trav√©s de un proveedor como puede ser Twitter, Facebook o Google por ejemplo. A partir de entonces, cada petici√≥n HTTP que haga el usuario va acompa√±ada de un _Token_ en la cabecera. Este Token no es m√°s que una firma cifrada que permite a nuestro API identificar al usuario. Pero este Token no se almacena en el servidor, si no en el lado del cliente (por ejemplo en _localStorage_ o _sessionStorage_) y el API es el que se encarga de descrifrar ese Token y redirigir el flujo de la aplicaci√≥n en un sentido u otro.

Como los **tokens son almacenados en el lado del cliente**, no hay informaci√≥n de estado y la aplicaci√≥n se vuelve totalmente escalable. Podemos usar el mismo API para diferentes apliaciones (Web, Mobile, Android, iOS, ...) solo debemos preocuparnos de enviar los datos en formato JSON y generar y descrifrar tokens en la autenticaci√≥n y posteriores peticiones HTTP a trav√©s de un middleware.

![autenticaci√≥n basada en Token](/images/que-es-la-autenticacion-con-token/autenticacion-basada-en-token.png)

Tambi√©n nos **a√±ade m√°s seguridad**. Al no utilizar cookies para almacenar la informaci√≥n del usuario, podemos evitar ataques CSRF (_Cross-Site Request Forgery_) que manipulen la sesi√≥n que se env√≠a al backend. Por supuesto podemos hacer que el token expire despu√©s de un tiempo lo que le a√±ade una capa extra de seguridad.

## Autenticaci√≥n con JSON Web Tokens

El est√°ndar para este tipo de autenticaci√≥n es utilizar [JSON Web Tokens (JWT)](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html). Al igual que los APIs, el formato JSON es agn√≥stico del lenguaje, y podemos utilizar el que queramos (Node.js, Python, Ruby, PHP, .NET, Java,...)

El formato de un **JWT** est√° compuesto por 3 `strings` separados por un punto `.` algo as√≠ como:

```shell
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1NGE4Y2U2MThlOTFiMGIxMzY2NWUyZjkiLCJpYXQiOiIxNDI0MTgwNDg0IiwiZXhwIjoiMTQyNTM5MDE0MiJ9.yk4nouUteW54F1HbWtgg1wJxeDjqDA_8AhUPyjE5K0U
```

Cada `string` significa una cosa:

- **Header**
  La primera parte es la cabecera del token, que a su vez tiene otras dos partes, el tipo, en este caso un JWT y la codificaci√≥n utilizada. Comunmente es el algoritmo _HMAC SHA256_, El contenido sin codificar es el siguiente:

```js
{
	"typ": "JWT",
    "alg": "HS256
}
```

Codificado ser√≠a: `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9`

- **Payload**
  EL _Payload_ est√° compuesto por los llamados [_JWT Claims_](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html#RegisteredClaimName) donde ir√°n colocados la atributos que definen nuestro token. Exiten varios que puedes consultar aqu√≠, los m√°s comunes a utilizar son:
  _ `sub`: Identifica el sujeto del token, por ejemplo un identificador de usuario.
  _ `iat`: Identifica la fecha de creaci√≥n del token, v√°lido para si queremos ponerle una fecha de caducidad. En formato de tiempo UNIX \* `exp`: Identifica a la fecha de expiraci√≥n del token. Podemos calcularla a partir del `iat`. Tambi√©n en formato de tiempo UNIX.

```js
{
	"sub": "54a8ce618e91b0b13665e2f9",
    "iat": "1424180484",
    "exp": "1425390142"
}
```

Tambi√©n podemos a√±adirle m√°s campos, incluso personalizados, como pueden ser el rol del usuario, etc.

```js
{
	"sub": "54a8ce618e91b0b13665e2f9",
    "iat": "1424180484",
    "exp": "1425390142",
    "admin": true,
    "role": 1
}
```

Codificado ser√≠a: `eyJzdWIiOiI1NGE4Y2U2MThlOTFiMGIxMzY2NWUyZjkiLCJpYXQiOiIxNDI0MTgwNDg0IiwiZXhwIjoiMTQyNTM5MDE0MiJ9`

- **Signature**
  La firma es la tercera y √∫ltima parte del JSON Web Token. Est√° formada por los anteriores componentes (Header y Payload) cifrados en _Base64_ con una clave secreta (almacenada en nuestro backend). As√≠ sirve de _Hash_ para comprobar que todo est√° bien.

```js
HMACSHA256(base64UrlEncode(header) + "." + base64UrlEncode(payload), secret);
```

Codificado ser√≠a: `yk4nouUteW54F1HbWtgg1wJxeDjqDA_8AhUPyjE5K0U`

Por tanto, todo nuestro JSON Web Token, una vez codificado tendr√° esta pinta:

```shell
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1NGE4Y2U2MThlOTFiMGIxMzY2NWUyZjkiLCJpYXQiOiIxNDI0MTgwNDg0IiwiZXhwIjoiMTQyNTM5MDE0MiJ9.yk4nouUteW54F1HbWtgg1wJxeDjqDA_8AhUPyjE5K0U
```

Que si lo comprobamos en la web [JWT.io](http://jwt.io/) vemos que nos lo traduce a los campos que hemos visto.

En la [siguiente entrada vemos como implementar **este tipo de autenticaci√≥n en Node.js**](/autenticacion-con-token-en-node-js/) y m√°s adelante [en el **lado cliente con AngularJS**](/autenticacion-con-token-en-angularjs/).

</article>

---

<article slug="el-camino-para-ser-un-pro-en-javascript" date="2015-02-17" url="https://carlosazaustre.es/blog/el-camino-para-ser-un-pro-en-javascript">

# 7 Pasos para ser un profesional en JavaScript

**Fecha:** 2015-02-17
> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=Bg89e__YpE8)
/>

### Haz lo que te motive.

Nada resulta m√°s reconfortante y productivo que dedicar tu tiempo a algo que te guste. Si te aburre desarrollar un tipo de Software, busca otro tipo que te motive, puede ser otra plataforma, otro lenguaje,...

Yo estuve un tiempo trabajando de programador en empresas, donde no hab√≠a lugar para la creatividad, desarrollando software que no me motivaba, con lenguajes que no me resultaban pr√°cticos, etc. Eso hace que te desanimes y llegues a odiar tu profesi√≥n.

Plant√©ate un cambio de aires. Prueba un nuevo lenguaje, ese nuevo framework del que has o√≠do hablar, esa nueva plataforma que tanto est√° en boca de todos... R√©tate a ti mismo. Despejar√°s tu mente de la rutina y aprender√°s algo nuevo. Salir de tu zona de comfort siempre es una experiencia enriquecedora.

### JavaScript, un lenguaje para dominarlos a todos.

![Un lenguaje para dominarlos a todos](/images/el-camino-para-ser-un-pro-en-javascript/frodoJS.jpg)

Como lenguaje a aprender y profesionalizarme, yo me decant√© por JavaScript. Me llam√≥ mucho la atenci√≥n **Node.js**. JavaScript siempre ha sido el lenguaje que daba dinamismo y a√±ad√≠a efectos a las p√°ginas web. Que ese lenguaje haya sido llevado al servidor y permitiera servir p√°ginas web, conectar con bases de datos, etc... me pareci√≥ sorprendente.

Eso fue lo que hizo que invirtiera mi tiempo en conocer m√°s en profundidad este lenguaje. Y eleg√≠ un buen momento. Hasta ese instante los frameworks y librer√≠as m√°s conocidas y usadas eran **jQuery** y **BackboneJS**, pero r√°pidamente empezaron a surgir nuevos frameworks como **AngularJS, EmberJS, Ionic**, etc... que enriquec√≠an el ecosistema.

Hoy en d√≠a es increible la de cosas que se pueden usar con JavaScript, incluso es posible programar microcontroladores como _[Tessel](http://tessel.io)_ con JavaScript. _Awesome_

### La web es tu fuente de conocimiento.

Internet es la universidad del desarrollador. Quiz√° otras titulaciones a√∫n necesiten de una facultad para aprender y ser un profesional en su campo, pero **el sector de la programaci√≥n puede ser aprendido y practicado 100% en Internet**.

Cuando descubr√≠ los **MOOCs** (Massive Open Online Courses) me estall√≥ el cerebro. Cuando estudiaba en la universidad, si quer√≠a asistir a una clase magistral ten√≠a que ser presencial, ten√≠a que tomar apuntes corriendo y no pod√≠a dar _marcha atr√°s_ si no comprend√≠a el concepto que el profesor te daba. La mayor√≠a de los profesores no se toman en serio sus clases, porque se dedican a otras cosas, y eso hace que la calidad de la clase sea mala. Las √∫nicas referencias que pod√≠as consultar para aumentar conocimiento eran los libros de la biblioteca. La gran mayor√≠a desactualizados.

Con los MOOCs todo eso cambi√≥. Puedes acceder a miles de videos de clases de todo el mundo. No necesitas matricularte en _Stanford_ para asisitir a una clase magistral de la universidad. Con **YouTube** lo tienes. Los formadores, al estar expuestos a una audiencia mucho mayor que el aula de una clase tradicional, se esfuerzan m√°s y sus clases son de mayor calidad, ya que si el profesor no te transmite ning√∫n conocimiento seguramente su curso no sea valorado por la gente y no se dar√° a conocer.

[![Platzi](/images/el-camino-para-ser-un-pro-en-javascript/10475665_807915719276961_6638684059685897925_n.png)](http://platzi.com/c/cazaustre)

Comenc√© con [Coursera](http://coursera.com) y posteriormente conoc√≠ [Mejorando.la](http://platzi.com/c/cazaustre) (ahora [Platzi](http://platzi.com/c/cazaustre)). Si quieres aprender JavaScript son muy recomendables para iniciarte y conocer las bases y buenas pr√°cticas de mano de profesionales que se dedican a ello.

Mi primer curso fue el de [dise√±o web b√°sico](http://platzi.com/online) y posteriormente el de [Frontend](http://platzi.com/frontend) con un nivel intermedio. Actualmente, si quieres profesionalizarte en la web, te recomiendo que inicies con su [curso b√°sico de programaci√≥n](http://platzi.com/programaci√≥n), que es totalmente gratis, y te ense√±a bases de JavaScript y cosas bastante chulas y avanzadas para ser un curso b√°sico como son Canvas y programar _drones_ con JavaScript.

Posteriormente te recomiendo el de [dise√±o y desarrollo web b√°sico](http://platzi.com/online) para conocer HTML, CSS y JavaScript m√°s en profundidad. De seguido prueba con el de [Frontend Profesional](http://platzi.com/frontend) y aprende preprocesadores de CSS, frameworks de JavaScript, gestores de tareas, etc.

Si quieres ser un full-stack y dominar tanto el frontend como el backend, aprovecha tu suscripci√≥n mensual y toma el [curso de Backend](http://platzi.com/backend). Tiene un apartado de Node.js pero se centra m√°s en Django y Ruby on Rails. No est√° de mal conocer patrones de dise√±o en el backend aunque luego usemos otro lenguaje.

Y por √∫ltimo el [curso profesional de JavaScript y Node.js](http://platzi.com/js) para aprender a utilizar JavaScript de principio a fin.

### Lee.

Leer es muy importante. Nos mantiene el cerebro en funcionamiento y nos despierta la creatividad. Lee libros t√©cnicos. Se que la mayor√≠a est√°n en ingl√©s y no hay muchos [en espa√±ol](https://leanpub.com/aprendiendo-javascript). A mi eso tambi√©n me frustraba, pero hay que invertir tiempo en aprender ingl√©s. Si te dedicas a la web y no sabes ingl√©s, al menos a nivel de lectura, es muy costoso aprovechar los conocimientos que internet nos brinda. Hasta hace un par de a√±os yo era incapaz de leer un libro en ingl√©s, tardaba mucho y acababa distray√©ndome y perdi√©ndome. Como mucho le√≠a algun _blogpost_ en ingl√©s pero nada m√°s.

Hace un par de a√±os me propuse leer al menos un libro en ingl√©s al m√©s y comenc√© a notar como mejoraba mi entendimiento en ese lenguaje. Es un proceso lento, pero llega un momento en el que lees ingl√©s como si leyeras castellano. Recomiendo hacer este esfuerzo, merece la pena y descubres un mundo nuevo de conocimiento que antes ten√≠as cerrado.

[![Eloquent JavaScript](/images/el-camino-para-ser-un-pro-en-javascript/ejs_gt9otr.png)](http://www.amazon.es/gp/product/B004OEJNQ0/ref=as_li_tf_tl?ie=UTF8&camp=3626&creative=24790&creativeASIN=B004OEJNQ0&linkCode=as2&tag=pa0f-21)

Si quieres expandir tus conocimientos sobre JavaScript, hay muchos libros. [Los que m√°s me gustaron y recomiendo los recopil√© en un antiguo post que puedes consultar **aqu√≠**](/libros-javascript/).

### Desarrolla proyectos propios.

Puedes hacer todos los cursos de [Platzi](http://platzi.com), [Code School](http://codeschool.com), [Codeacademy](http://codeacademy.com), [Coursera](http://coursera.com), etc.. Tendr√°s mucho conocimiento adquirido y unas bases muy profundas, pero para probarlas tienes que desarrollar algo por tu cuenta.

Cuando empieces un proyecto personal te encontrar√°s con errores e inc√≥gnitas que no se han dado en los cursos, porque ser√°n muy espec√≠ficos de lo que est√°s desarrollando. No tienes que desarrollar la pr√≥xima _Startup_ del Bill√≥n de d√≥lares, empieza haciendo un clon de algo que ya exista, por ejemplo, un clon de _Twitter_, un clon de _Instagram_, un clon de Youtube. As√≠ aprender√°s que problemas pueden present√°rsete e intentar resolverlos.

Imagina que est√°s haciendo un clon de _Instagram_ con Node.js y AngularJS, en alg√∫n momento vas a querer programar la subida de una foto al servidor. Seguramente en ning√∫n curso te han dado una lecci√≥n de _"C√≥mo subir una foto desde Angular.js con tu API REST en Node.js a un bucket de Amazon S3"_, como mucho habr√°s visto como enviar ficheros por formulario, o como [hacer un API REST en Node.js](/como-crear-una-api-rest-usando-node-js/), pero no el caso concreto.

Es tu tarea en ese momento, buscar en Google. Tienes numerosos tutoriales de personas que se han encontrado con el mismo problema que tu y lo han compartido con la comunidad. Visita [StackOverflow](http://stackoverflow.com), seguramente hay alguien que ha tenido tu misma duda y otra presona lo ha resuelto. Pas√©ate por [GitHub](http://github.com) o [NPM](http://npmjs.org/), aprende de los proyectos _Open Source_ que la comunidad desarrolla, aprender√°s buenos _tips_, librer√≠as, formas de programar, que te har√°n crecer como profesional.

### √önete a comunidades de desarrolladores.

No te quedes s√≥lo casa, sal afuera y conoce gente. En internet tenemos muchas comunidades donde conocer gente con nuestras mismas inquietudes y gustos. Si eres estudiante de Platzi, tienes [Comunidad Platzi](https://plus.google.com/107441786043637814526/posts), donde miles de estudiantes y profesionales de toda Latinoam√©rica y Espa√±a est√°n ah√≠ compartiendo conocimiento y dudas. En [Meetup](http://meetup.com) puedes buscar grupos de desarrolladores en tu ciudad. En Madrid tenemos [NodeJSMadrid](http://www.meetup.com/Node-js-Madrid/), [MadridJS](http://www.meetup.com/madridjs/), [WebRTC Madrid](), [AngularJS Madrid](http://www.meetup.com/AngularJS_Madrid/), [Python Madrid](http://www.meetup.com/Madrid-Python-Meetup/), [Polymer Madrid](http://www.meetup.com/Madrid-Polymer-Group/), [MongoDB User Group](http://www.meetup.com/Madrid-MongoDB-User-Group/)... Seguramente en tu ciudad hay un grupo de meetup que se re√∫ne de vez en cuando y la tem√°tica es tu lenguaje favorito. Y si no lo hay, ¬°Cr√©alo! seguramente hay m√°s gente como tu que a√∫n no se ha atrevido a dar el paso.

Otra alternativa son los [Hackthones](http://hackathonlovers.com). Programar una aplicaci√≥n en menos de un d√≠a en equipo y poder ganar premios. ¬øConoces [Hackathon Lovers](http://hackathonlovers.com)?

Tambi√©n tenemos [Betabeers](http://betabeers.com), que est√° presente en varias ciudades de Espa√±a. En el puedes presentar los proyectos que est√°s desarrollando, ya sea una _Startup_, una librer√≠a que has conocido recientemnte o un _framework_ que est√©s desarrollando. De esta manera conoces m√°s gente como t√∫ y lo m√°s importante, te das a conocer.

De igual manera, existen los [Google Developer Group](https://developers.google.com/groups/), presentes en m√°s de 100 pa√≠ses y 600 ciudades, donde, al igual que en Meetup, se re√∫nen desarrolladores que utilizan tecnolog√≠as de Google, como pueden ser Android, Polymer, Angular, Google Cloud, etc. La oferta es impresionante.

### Comparte tu conocimiento.

Todo lo que aprendas, comp√°rtelo. De igual manera que cuando tienes un error en tu aplicaci√≥n y lo buscas en Google o directamente en Stackoverflow y alguien ya lo ha solucionado, se t√∫ la persona que lo solucione y ayuda a otros. Comparte tutoriales y ejemplos de lo que haces. [Abre un blog como este](https://carlosazaustre.es/)
y comparte tu conocimiento. La web la hacemos nosotros y el contenido que encotramos en ella est√° redactado por personas como nosotros. Se parte de ello, te har√° mejorar y crecer como profesional.

</article>

---

<article slug="mi-experiencia-como-profesor-en-los-cursos-de-platzi" date="2015-02-15" url="https://carlosazaustre.es/blog/mi-experiencia-como-profesor-en-los-cursos-de-platzi">

# Mi experiencia como profesor en los cursos de Platzi

**Fecha:** 2015-02-15
#### Viaje a Bogot√°

Durante esta semana (del 8 al 14 de Febrero) he sido uno de los profesores del [Curso de Desarrollo Web que ofrece Platzi](http://platzi.com/online) (Antes Mejorando.la). Para ello **he viajado a Bogot√° (Colombia)** a las oficinas y estudios centrales de **Platzi**.

![](/images/mi-experiencia-como-profesor-en-los-cursos-de-platzi/B9p1VCGIEAAZcUJ.jpg)

> Vistas de Bogot√° desde la oficina m√°s _cool_ de Colombia

Ha sido una **semana muy intensa** y a la vez muy **gratificante** y llena de experiencias.

Conoc√≠ los cursos de Platzi a principios de 2013, hace ya 2 a√±os y desde entonces soy un adicto a todo el material que producen, ya sea su [blog](http://platzi.com/blog), su [canal de Youtube](http://youtube.com/mejorandolaweb), su [Live](http://platzi.com/live) de los jueves y sobre todo, [sus cursos online](http://platzi.com/cursos).

[Freddy](http://twitter.com/freddier), CEO de Platzi, me contact√≥ hace un tiempo y fue todo un honor que pensara en mi para ser profesor del nuevo curso de desarrollo web, compartiendo "tutela" con un genio como es [Daniel Mart√≠nez](http://twitter.com/wakkos) ([@Wakkos](<(http://twitter.com/wakkos)>)).

Entre los dos hemos ense√±ado HTML5, CSS3 y JS b√°sico para que [puedas crear tu propia web desde cero](http://platzi.com/online). Por mi parte, me he encargado de ense√±ar JavaScript, jQuery y algunos elementos _cool_ de HTML5 como _Geolocation_ y _LocalStorage_ para crear una aplicaci√≥n web.

![](/images/mi-experiencia-como-profesor-en-los-cursos-de-platzi/B9gBYroCMAAKlhW.jpg)

> Team video listos para el _Streming_

#### Clases en vivo

Debo confesar que los primeros d√≠as estaba nervioso. Nunca hab√≠a dado un curso online en directo y no sab√≠a muy bien como iba a salir. Si que **ten√≠a experiencia grabando [videotutoriales](https://www.youtube.com/playlist?list=PLUdlARNXMVkl9MJl4r90Z1j1nmAfWEPV3) y alg√∫n que otro "Comunidad Platzi"** pero el directo de una clase online en vivo, no lo hab√≠a vivido a√∫n.

![](/images/mi-experiencia-como-profesor-en-los-cursos-de-platzi/B9rsQ5ECAAAIbwb.jpg)

> Minutos antes de la √∫ltima clase en vivo.

Y la verdad es que me encontr√© muy c√≥modo, pero sobre todo **gracias al equipo que hay detr√°s de los _streamings_** y que no se ve, pero sin ellos no habr√≠a nada. Entre ellos [Carlos Paredes](http://twitter.com/carloshparedes) y las nuevas incorporaciones como [√Ångel Montalb√°n](http://twitter.com/spaciosmentales) y [Winiberto](http://twitter.com/winiberto), con los que durante esta semana he compartido trabajo, risas y convivencia las 24h del d√≠a y ya los considero familia :)

![](/images/mi-experiencia-como-profesor-en-los-cursos-de-platzi/B9rBNCBIQAE8IHY.jpg)

> Win y √Ångel en pleno Live

**Las clases eran de 1:00 a 3:00 de la tarde y de 8:00 a 10:00 de la noche en Horario de Colombia**. Los d√≠as de curso sal√≠amos tarde de la oficina. Acababa el d√≠a destrozado pero muy contento. Despues del descanso necesario, **siempre volv√≠a con ganas a la _PlatziOficina_** a dar la siguiente clase.

#### Team Platzi

Cost√≥ acostumbrarse al _JetLag_ pero gracias al Team siempre hab√≠a algo que hacer y los d√≠as fueron muy intensos haci√©ndome olvidar de la hora que era.

![](/images/mi-experiencia-como-profesor-en-los-cursos-de-platzi/B9l5QaCIgAAnCA2.jpg)

> ArepaJS

No puedo dejarme al **equipo de Devs**. Aut√©nticos profesionales y mejores personas. He pasado muy buenos momentos con ellos. Compartiendo charlas de JavaScript con [Diego Uribe](https://twitter.com/DiegoUG) y [Leonidas Esteban](https://twitter.com/LeonidasEsteban), aut√©nticos ninjas del JS. Y aprendiendo a bloquear mi laptop gracias a [Yohan](https://twitter.com/yograterol) y [Victor](https://twitter.com/8766Dart), para evitar que me "Bartearan" xD

![](/images/mi-experiencia-como-profesor-en-los-cursos-de-platzi/B9fq3boIYAAEQnA.jpg)

De igual manera el **equipo de dise√±o** son unos art√≠stas y gente increible. Conocer a la gente detr√°s de la imagen de Platzi: [Carlos Vaca](https://twitter.com/unavacaverde), [Jennifer](https://twitter.com/Hell_McNamara) y [Santiago Eastman](https://twitter.com/santiagoeastman) ha sido un honor.

![](/images/mi-experiencia-como-profesor-en-los-cursos-de-platzi/B9lz1KLIgAEZwcB.jpg)

> The Platzi Men

No me olvido del resto del Team, [Sergio Zafra](https://twitter.com/szafra14), [Aleyda](https://twitter.com/leidymarmalade), [Cesar](https://twitter.com/reicek), [Alejandro](https://twitter.com/alejandrogm), Do√±a Araceli, y sobre todo de [Nicole](https://twitter.com/maldeadora), _Relationship Manager_ de Platzi y un encanto de persona a la vez que trabajadora. Si el d√≠a tuviera 30horas, ella trabajar√≠a 32, **siempre atenta a que todos estuviesemos bien**.

![](/images/mi-experiencia-como-profesor-en-los-cursos-de-platzi/B9wLPUEIUAAnC-1.jpg)

Poder ser parte de Platzi durante una semana, vivir c√≥mo es la grabaci√≥n de un Live y las clases de comunidad, son cosas que me llevo conmigo y que me han ense√±ado todo el trabajo que hay detr√°s de cada material que se publica en Platzi y que no vemos.

![](/images/mi-experiencia-como-profesor-en-los-cursos-de-platzi/B9wdwvACIAAIq4f.jpg)

> Selfie-Comunidad Platzi

A [Freddy](http://twitter.com/freddier) ya le conoc√≠ de una vista rel√°mpago que hizo a Madrid, pero me quedo sin conocer personalmente, [Christian](http://twitter.com/cvander), [Juan Pablo](https://twitter.com/UnMalNick) y [Mike](https://twitter.com/mikenieva). Pero estoy seguro que nuestros caminos se cruzar√°n de nuevo y tendremos esa oportunidad.

¬°Gracias Team!

> ¬øQuieres ganar **1 mes gratis estudiando en Platzi**? Suscr√≠bete con [este enlace](https://platzi.com/c/cazaustre) en el plan mensual o anual, y **a√±ade 1 mes gratis a tu cuenta**.

</article>

---

<article slug="2014" date="2015-01-22" url="https://carlosazaustre.es/blog/2014">

# Las m√©tricas detr√°s de √©ste blog en 2014

**Fecha:** 2015-01-22
Inici√© ese blog a finales de septiembre de 2012 (Ha llovido desde entonces). Lo comenc√© para comentar un poco mi vida y mi d√≠a a d√≠a en Cork (Irlanda) donde estuve viviendo y trabajando remotamente como freelance durante una temporada. En inicio, el blog iba a ser ingl√©s para obligarme a practicar, pero la pereza me pudo y escrib√≠a muy poco. Apenas escrib√≠ 4 post en los primeros 100 d√≠as de este blog.

Escribo este post para **compartir como ha sido el crecimiento de este blog** desde sus inicios en 2012 hasta finales de 2014. Me sirve para hacer retrospectiva y ver el resultado de un par de a√±os de trabajo compartiendo tutoriales y ejemplos con la comunidad.

### 2012. Primeros 100 d√≠as

![](/images/2014/Clocktower1885.jpg)

Como dec√≠a, los 100 primeros d√≠as de este blog, en 2012, pasaron sin pena ni gloria por el mundo de internet. Apenas 2 visitas al d√≠a de med√≠a. Demasiado para 4 art√≠culos que ten√≠a el blog:

![](/images/2014/Screen-Shot-2015-01-21-at-17-08-19.png)
Hubo un pico de visitas el 26 de Noviembre, no recuerdo a que pudo ser debido, quiz√° porque lo compart√≠ en Twitter o algo parecido.
En resumen, las m√©tricas de los primeros 100 d√≠as de vida de carlosazaustre.es fueron estas:
![](/images/2014/Screen-Shot-2015-01-22-at-19-43-46.png)

### Un vistazo a 2013. El primer a√±o de vida del blog

![](/images/2014/doc_mrfusion_LENR_cold_fusion.jpg)

Durante 2013 segu√≠ en Irlanda hasta que llegaron los meses de verano. Despu√©s del verano [estuve un mes de viaje por Estados Unidos](/viajar-estados-unidos/) y a continuaci√≥n volv√≠ a Espa√±a donde sigo viviendo a d√≠a de hoy.
**En ese a√±o escrib√≠ un total de 29 posts**. Los primeros meses continu√© con la tendencia del anterior, apenas publicaba, Entre Enero y Abril escrib√≠ 4 posts y todos ellos en Ingl√©s. A finales de Mayo le d√≠ una vuelta de tuerca y comenc√© a escribir en castellano. Desde Mayo a finales de a√±o escrib√≠ 25 posts, todos ellos relacionados con internet y la tecnolog√≠a. Sin ninguna tem√°tica m√°s concreta, aunque ya [empec√© a escribir alg√∫n tutorial](/como-crear-una-api-rest-en-node-js/).

![](/images/2014/Screen-Shot-2015-01-22-at-19-57-12.png)

Se puede ver en la gr√°fica, que hasta que no empec√© a darle ca√±a al blog (Meses de Junio y Julio sobre todo) no empezaron a llegar las visitas.

Ahi hay 2 picos importantes de tr√°fico. El primero de ellos es del 25 de Junio de 2013, por el post _[Camisetas Geeks para programadores](https://carlosazaustre.es/camisetas-geeks-para-programadores/)_ con el que empec√© a experimentar con Facebook Ads.

El siguiente pico llega el 2 de Agosto, otra fecha donde volv√≠ a iniciar una campa√±a, promocionando mis posts con Facebook Ads, sin invertir mucho dinero, tan solo para aprender y experimentar con la plataforma de anuncios de Facebook gastando menos de 25‚Ç¨.

Y el √∫ltimo pico de ese a√±o fue el 8 de noviembre por el post _[Nuestro viaje por los Estados Unidos. C√≥mo viajar de forma m√°s barata](/viajar-estados-unidos/)_. Este totalmente org√°nico a trav√©s de compartir en Twitter, Facebook y Google+.

En n√∫meros, estan fueron las m√©tricas del 2013, el primer a√±o de vida del blog

![](/images/2014/Screen-Shot-2015-01-22-at-20-05-54.png)

### 2014. El a√±o del despegue

![](/images/2014/Dmc11.jpg)

Empec√© 2014 con m√°s inter√©s en **crear art√≠culos y tutoriales para compartir conocimiento sobre la web**. S√≥lo con las visitas de Enero y Febrero alcanc√© las totales de 2013. Durante el a√±o pasado escrib√≠ 24 posts, 5 menos que en el a√±o anterior, pero a√∫n as√≠ las visitas fueron creciendo mes a mes debido imagino a que muchos de los art√≠culos se han ido **posicionando en Google** gracias a vuestros comentarios, Retweets y _Sharings_ en las redes sociales.

![](/images/2014/2014.png)
Se puede ver un pico de tr√°fico a mediados de Agosto de 2014, fue debido al [lanzamiento del eBook de Angular](https://amzn.to/2L5m5IR), que se hizo un poco viral en Twitter y se consiguieron **muchas descargas (m√°s de 7000 hacia la fecha**). En su lanzamiento pod√≠as conseguirlo por ‚Ç¨2.40 o gratis si lo compart√≠as en Twitter. [Lo puedes conseguir en espa√±ol desde Amazon](https://amzn.to/2L5m5IR).

En esta tabla he recopilado las m√©tricas mes a mes durante todo el a√±o pasado:
![](/images/2014/Screen-Shot-2015-01-22-at-21-22-30.png)

A finales de Enero [abr√≠ una p√°gina en Facebook](http://facebook.com/carlosazaustre) y comenc√© [a subir algunos videotutoriales a mi canal de YouTube](https://www.youtube.com/watch?v=SKoK6braZlk&list=PLUdlARNXMVkl9MJl4r90Z1j1nmAfWEPV3). De los _Analytics_ de Facebook no tengo datos hasta Marzo, es por eso que no aparece ninguna cifra de _Followers_ en ese campo.

Como puedes ver, **mes a mes las visitas han ido aumentando**, as√≠ como los suscriptores a la lista de correo, [cuenta de twitter](http://twitter.com/carlosazaustre), [canal de Youtube](https://www.youtube.com/user/azaman1984)... Con constancia y dedicaci√≥n se pueden llegar a conseguir muchas cosas :)

![](/images/2014/tumblr_m4i2a5wnnM1ruhu4ho1_500.jpg)

> Si te lo propones, puedes conseguirlo todo - George McFly

### ¬øY en 2015?

Como dijo [Uriel](http://twitter.com/thespianartist), uno de los _Developer Advocate_ de [Mejorando.la](http://mejorando.la) a finales del a√±o pasado:

> Este a√±o no tengan prop√≥sitos, tengan Objectives Key Results (OKR)
> ![](/images/2014/Screen-Shot-2015-01-22-at-21-33-05.png)

Para el que no sepa que es un OKR, [aqu√≠](https://www.youtube.com/watch?v=_BbhkTOv_98) te lo explican.

**Uno de mis OKR de cara al 2015 es doblar las visitas mensuales**, pasar de una media de 20.000 a 40.000. Creo que es ambicioso pero no por ello inlograble, teniendo en cuenta que ahora al mes este blog tiene el doble de visitas que todo el 2013 junto. Para conseguir eso debo proponerme y escribir m√°s art√≠culos de
calidad, m√°s tutoriales y videotutoriales y crear m√°s recursos, como por ejemplo otro eBook que tengo en mente y alguna cosillas m√°s.

Tambi√©n es importante el tiempo de carga de la p√°gina. Por eso uno de los primeros pasos que he dado este a√±o es **cambiar el motor del blog de Wordpress y [migrarlo a Ghost**](/como-migrar-de-wordpress-a-ghost/). Ahora realiza menos operaciones y consultas y no carga tantos plugins como ten√≠a mi anterior _theme_ de Wordpress. Tambi√©n he pasado de un hosting compartido a un servidor virtual en [DigitalOcean](https://www.digitalocean.com/?refcode=f716de9860aa). El _Theme_ est√° basado en [_Velox_](https://github.com/dreyacosta/velox), un Theme desarrollado por [David Rey Acosta](http://dreyacosta.com/) que tiene muy buenos _PageSpeed Insights_

¬øQu√© quiero decir con esto? Los datos hablan por si solos:
![](/images/2014/Screen-Shot-2015-01-22-at-21-52-21.png)

Esto parece una tonter√≠a, pero **la reducci√≥n del tiempo de carga**, adem√°s de evitar que los lectores abandonen la lectura, **mejora el posicionamiento en Google**, as√≠ que es bueno tenerlo en cuenta ;)

¬°Vamos a por el 2015!

![](/images/2014/1191937136_f.jpg)

> ¬øCarreteras? ¬øD√≥nde vamos no necesitamos... carreteras

</article>

---

<article slug="como-relacionar-tus-modelos-en-mongodb" date="2015-01-18" url="https://carlosazaustre.es/blog/como-relacionar-tus-modelos-en-mongodb">

# C√≥mo relacionar tus modelos en MongoDB

**Fecha:** 2015-01-18
MongoDB es una base de datos no relacional, es decir no es como las t√≠picas bases de datos SQL (MySQL, Oracle, PostgreSQL, etc...) donde existen relaciones entre una tabla y otra. Veamos un ejemplo cl√°sico.

Imaginemos una base de datos de libros. Tendr√≠amos una tabla con los t√≠tulos de los libros y otra con los datos de los autores. El campo `autor` en la tabla de libros, apuntar√≠a a un ID o clave primaria de un autor de la tabla autores.

En MongoDB podemos hacer algo parecido, por medio de referencias y el [m√©todo `populate` de MongoDB](http://mongoosejs.com/docs/populate.html).

Sigamos con el ejemplo anterior. Un modelo `autor` en Node.js usando `mongoose` ser√≠a tal que as√≠:

```javascript
var mongoose = require("mongoose");
var Schema = mongoose.Schema;

var autorSchema = new Schema({
  nombre: String,
  biografia: String,
  fecha_de_nacimiento: Date,
  nacionalidad: String,
});

module.exports = mongoose.model("Autor", autorSchema);
```

y supongamos un modelo sencillo para `libro` de la siguiente manera:

```javascript
var mongoose = require('mongoose');
var Schema = mongoose.Schema;
var Autor = mongoose.model('Autor');

var libroSchema = new Schema({
	titulo: String
    paginas: Number,
    isbn: String,
    autor: { type: Schema.ObjectId, ref: "Autor" }
});

module.exports = mongoose.model("Libro", libroSchema);
```

Si nos fijamos, para el campo `autor` en el modelo `libro` hemos usado el tipo `Schema.ObjectId` y la referencia al modelo `Autor`. Esto nos permitir√° establecer la relaci√≥n entre un campo de una tabla y otra.

Pero si no tenemos consultas SQL, y pedimos una lista de todos los libros en la base de datos ¬øQu√© datos nos llegar√°n?

Lo primero que programar√≠amos ser√≠a esto (en Express/Node.js):

```javascript
app.get("/libros", function (req, res) {
  Libro.find({}, function (err, libros) {
    res.status(200).send(libros);
  });
});
```

y si tenemos varios libros registrados en la base de datos, nos devolver√≠a un `JSON` parecido a este:

```javascript
[{
    "_id": "547db17cbe9956a000001",
    "__v": 0
    "titulo": "Juego de Tronos",
    "paginas": 150,
    "isbn": "0-553-57340-4",
    "autor": "547db17cbe9958b000001"
},
{
    "_id": "547db17cbe9956a000001",
    "__v": 0
    "titulo": "Choque de Reyes",
    "paginas": 340,
    "isbn": "0-553-57340-5",
    "autor": "547db17cbe9958b000001"
},
{
    "_id": "547db17cbe9956a000001",
    "__v": 0
    "titulo": "Tormenta de Espadas",
    "paginas": 620,
    "isbn": "0-553-57340-7",
    "autor": "547db17cbe9958b000001"
}]
```

En el campo `autor` obtenemos la referencia en formato `ObjectID` del autor, pero no su ficha completa. ¬øQu√© pasa si queremos mostrar en un s√≥lo `JSON` toda la informaci√≥n para poder pintarla de una sola llamada en nuestra webapp? Para eso necesitamos hacer uso del m√©todo `populate` de MongoDB que tambi√©n implementa la librer√≠a `mongoose`.

En nuestro controlador anterior, debemos ampliarlo con lo siguiente:

```javascript
app.get("/libros", function (req, res) {
  Libro.find({}, function (err, libros) {
    Autor.populate(libros, { path: "autor" }, function (err, libros) {
      res.status(200).send(libros);
    });
  });
});
```

La l√≠nea `Autor.populate(libros, {path: "autor"},...);` toma el array de objectos `libros` y le indica que en la ruta `autor` lo "popule" con los datos del modelo `Autor`. Quedando una respuesta m√°s completa como este ejemplo:

```javascript
[{
    "_id": "547db17cbe9956a000001",
    "__v": 0
    "titulo": "Juego de Tronos",
    "paginas": 150,
    "isbn": "0-553-57340-4",
    "autor": {
    	"_id": "547db17cbe9958b000001",
        "__v": 0,
        "nombre": "George R. R. Martin",
        "biografia": "American novelist...",
        "fecha_de_nacimiento": "1948-09-20T00:00:00.000Z",
        "nacionalidad": "USA"
    }
},
{
    "_id": "547db17cbe9956a000001",
    "__v": 0
    "titulo": "Choque de Reyes",
    "paginas": 340,
    "isbn": "0-553-57340-5",
    "autor": {
    	"_id": "547db17cbe9958b000001",
        "__v": 0,
        "nombre": "George R. R. Martin",
        "biografia": "American novelist...",
        "fecha_de_nacimiento": "1948-09-20T00:00:00.000Z",
        "nacionalidad": "USA"
    }
},
{
    "_id": "547db17cbe9956a000001",
    "__v": 0
    "titulo": "Tormenta de Espadas",
    "paginas": 620,
    "isbn": "0-553-57340-7",
    "autor": {
    	"_id": "547db17cbe9958b000001",
        "__v": 0,
        "nombre": "George R. R. Martin",
        "biografia": "American novelist...",
        "fecha_de_nacimiento": "1948-09-20T00:00:00.000Z",
        "nacionalidad": "USA"
    }
}]
```

Podemos ver que el objeto `_id` del campo `autor` ha sido sustituido por el modelo `autor` completo al que hace referencia.

De esta manera conseguimos un comportamiento parecido al t√≠pico relacional en las bases de datos SQL en MongoDB.

</article>

---

<article slug="configura-tu-mac-como-un-desarrollador-profesionalque-2" date="2015-01-10" url="https://carlosazaustre.es/blog/configura-tu-mac-como-un-desarrollador-profesionalque-2">

# Configura tu terminal de Mac como un desarrollador profesional

**Fecha:** 2015-01-10
¬øQuieres tener un flujo de trabajo que te permita ser √°gil, ahorrar tiempo y ser m√°s productivo en el desarrollo de tus proyectos? A continuaci√≥n cuento una serie de aplicaciones y configuraciones que har√°n m√°s agradable la jornada de trabajo en tu Mac. Hoy hablaremos de la terminal.

### iTerm2

Mac OSX viene con un terminal por defecto, como todos los sistemas operativos, sin embargo en ocasiones se queda demasiado limitado. Tenemos una alternativa en Mac que se llama [iTerm2](http://iterm2.com/). Es gratuita y podemos descargarla desde su [p√°gina web](http://iterm2.com/).

Una de las cosas que m√°s me gusta es la opci√≥n de ocultar y mostrar el terminal r√°pidamente con una combinaci√≥n de teclas. Para configurar esta opci√≥n, debemos ir al men√∫ `iTerm2 > Preferences...`, clickar en la pesta√±a `Keys` y habilitar el checkboxk `Hotkey - Show/hide iTerm2 with a system-wide hotkey`

![](/images/configura-tu-mac-como-un-desarrollador-profesionalque-2/Screen-Shot-2015-01-10-at-13-58-48.png)

#### Colores

Tambi√©n podemos configurar los colores que se muestran en la terminal, eligiendo unos que nos resulten agradables. Para ello en la ventana de preferencias elegimos la pesta√±a `Profiles`, nos creamos uno nuevo. En mi caso le he puesto mi nombre `carlosazaustre` y

![](/images/configura-tu-mac-como-un-desarrollador-profesionalque-2/Screen-Shot-2015-01-10-at-14-05-55.png)

Los predefinidos que usar√° el sistema son `Black`, `Red`, `Green`, `Yellow`, `Blue`, `Magenta`, `Cyan` y `White`. Podemos cambiar sus valores hexadecimales por otros que nos resulten m√°s agradables.

Un Theme para iTerm que resulta c√≥modo para la vista a la hora de trabajar y pasar muchas horas en la pantalla es el conocido c√≥mo `Solarized Dark`. Para a√±adir este theme a iTerm nos dirigimos al proyecto [Solarized en Github](https://github.com/altercation/solarized) y clickamos en la carpeta [iterm2-colors-solarized](https://github.com/altercation/solarized/tree/master/iterm2-colors-solarized). Elegimos el fichero `Solarized Dark.itermscolors` y pulsamos en `RAW` [para ver su contenido en texto plano](https://raw.githubusercontent.com/altercation/solarized/master/iterm2-colors-solarized/Solarized%20Dark.itermcolors). Guardamos el fichero en nuestro equipo con extensi√≥n `.itermcolors` y lo importamos en iTerm, en la pesta√±a `Profiles` en el bot√≥n `Load Presets...` Una vez importado, lo seleccionamos en el men√∫ desplegable para activarlo.

#### Shell

Lo m√°s normal es que tu shell por defecto sea `bash`. Para comprobarlo solo tienes que escribir el siguiente comando en la terminal:

```shell
$ echo $SHELL
```

Que te responder√° con

```shell
/bin/bash
```

`Bash` no est√° mal, pero prefiero utilizar `zsh` por las posibilidades y configuraciones que permite. Para cambiar el tipo de Shell en Mac. Abrimos el **Panel de Preferencias del sistema**, elegimos **Usuarios y Grupos**. Clickamos en nustro usuario con _Click Derecho_ y elegimos _Opciones avanzadas_

![](/images/configura-tu-mac-como-un-desarrollador-profesionalque-2/Screen-Shot-2015-01-10-at-14-25-09.png)

En el campo `Login Shell` elegimos la opci√≥n `/bib/zsh`:

![](/images/configura-tu-mac-como-un-desarrollador-profesionalque-2/Screen-Shot-2015-01-10-at-14-26-27.png)

Tu terminal de iTerm lucir√° ahora as√≠:
![](/images/configura-tu-mac-como-un-desarrollador-profesionalque-2/Screen-Shot-2015-01-10-at-14-28-53.png)

Es el momento de personalizar el prompt por uno m√°s **Pro** y √∫til que el que trae por defecto

#### Prompt

La fuente por defecto que trae iTerm es `Monaco`, que no est√° mal, pero yo √∫ltimamente prefiero la tipograf√≠a de `Ubuntu`. La podemos descargar desde [font.ubuntu.com](http://font.ubuntu.com/) y una vez instalada la versi√≥n `Monospace` en nuestro sistema, la activamos desde la pesta√±a **Text** en el tab **Profiles** de las **Preferencias de iTerm**

![](/images/configura-tu-mac-como-un-desarrollador-profesionalque-2/Screen-Shot-2015-01-10-at-14-35-51.png)

Para poder cambiar el shell por defecto que trae `zsh`, por uno m√°s personalizado, tenemos que editar el fichero `.zshrc` en el directorio home, o `~`

Cargamos los colores de iTerm dentro de la configuraci√≥n del fichero con `autoload -U colors && colors`.

Para personalizar el prompt usamos la variable `PROMPT`. Si escribimos algo como `PROMPT=" > "` en nuestro terminal tendremos algo como esto:

![](/images/configura-tu-mac-como-un-desarrollador-profesionalque-2/Screen-Shot-2015-01-10-at-15-35-48.png)

Podemos configurarlo con m√°s informaci√≥n y colores para hacerlo m√°s identificable.

- La variable `$fg[color]` nos permite cambiar el color de lo que estamos escribiendo sustituyendo `color` por `red`, `yellow`, `green`, etc...
- la variable `%n` nos devuelve el nombre del usuario del sistema, en mi caso `carlosazaustre`
- `%m` nos devuelve el nombre de la m√°quina, en mi caso `macbookpro`.
- `%~` nos permite ver el directorio en el que nos encontramos.
- `%T` nos devuelve el tiempo (hora:minutos) actual.
- la variable `$reset_color` resetea los colores y vuelve a los de por defecto del terminal

Tambi√©n podemos crear funciones, por ejemplo la funci√≥n `precmd` se ejecuta antes de cada Prompt, por lo tanto si creamos la siguiente funci√≥n:

```shell
function precmd() {
  ls
}
```

Se ejecutar√° el comando `ls` que lista los archivos del directorio en el que nos encontremos cada vez que ejecutemos un comando.

Tambi√©n podemos crear alias para comandos, y as√≠ ahorrarnos escribir. Por ejemplo, podemos hacer que el comando `ll` sea el equivalente a `ls -al` para mostrar los ficheros de un directorio en 1 columna, incluyendo los archivos ocultos. Eso lo podemos hacer con la siguiente l√≠nea:
`alias ll = 'ls -al'`

Tambi√©n es muy √∫til para comandos de Git:

```shell
alias ga = 'git add'
alias gc = 'git commit -m'
alias gst = 'git status'
```

Y a continuaci√≥n unas funciones que te har√°n ahorrar tiempo:

```shell
function take() {
  mkdir $1
  cd $1
}
```

√âsta funci√≥n lo que hace es crear un directorio con el nombre que le pasemos por par√°metro (`$1`) y despu√©s dirigirse a ese directorio, algo as√≠:

```shell
carlosazaustre@macbookpro ~/development
> take project
carlosazaustre@macbookpro ~/development/project
```

Y esta otra har√° que te estalle la cabeza:

```shell
function server() {
  if [ $1 ]
  then
    local port="$1"
  else
    local port="8000"
  fi
  open "http://localhost:$port" && python -m SimpleHTTPServer "$port"
}
```

Esto consigue que al teclear `server` en tu prompt, se arranque un servidor local en el directorio en que te encuentres y te abre el navegador para que puedas visualizarlo. Ideal para pruebas r√°pidas si no quieres configurar un servidor con Gulp o Grunt para tu entorno de desarrollo.

Mi fichero `.zshrc` completo, con lo que considero m√°s √∫til, quedar√≠a de la siguiente manera:

```shell
autoload -U colors promptinit && colors

# Quickly creates a folder
function take() {
	mkdir $1
	cd $1
}

# Run a local server on current folder
function server() {
	if [ $1 ]
	then
		local port="$1"
	else
		local port="8000"
	fi
	open "http://localhost:$port" && python -m SimpleHTTPServer "$port"
}

# Prompt
PROMPT="
$fg[red]%n$reset_color@$fg[yellow]%m$reset_color: $fg[green]%~$reset_color
$fg[green]>$reset_color "

# alias
alias ll='ls -al'
alias ga='git add'
alias gc='git commit -m'
alias gst='git status'
```

#### Oh My ZSH

Si quieres ahorrarte tiempo y ampliar la funcionalidad de tu terminal, te aconsejo que instales [Oh My ZSH](https://github.com/robbyrussell/oh-my-zsh), un framework para manejar la consiguraci√≥n de tu shell.

Lo puedes instalar de la siguiente manera:

```shell
$ cd ~
$ curl -L http://install.ohmyz.sh | sh
```

Se instalar√° en el directorio `~/.oh-my-zsh`.
Para configurar los themes, s√≥lo tienes que abrir el fichero `.zshrc` que se ha sido sobreescrito, y en la l√≠nea 8: `ZSH_THEME="nombre_del_theme_que_m√°s_te_guste"`
sustituir por el theme que m√°s te guste.

A mi, particularmente me gusta este, [nico.zsh-theme](https://gist.github.com/ntarocco/3027ed75b6e8fc1fd119), que yo he cambiado un poco.

Copia el siguiente c√≥digo en un fichero con nombre `nico.zsh-theme` en la carpeta `~/.oh-my-zsh/themes`:

```shell
# fork from AVIT ZSH Theme

PROMPT='
$(_user_host)${_current_dir}$(git_prompt_info)
$fg[yellow]>$reset_color '

PROMPT2='%{$fg[grey]%}‚óÄ%{$reset_color%} '

#RPROMPT='$(_vi_status)%{$(echotc UP 1)%}$(git_prompt_short_sha) $(_git_time_since_commit) ${_return_status} %T% %{$(echotc DO 1)%}'
RPROMPT='$(_vi_status)%{$(echotc UP 1)%}$(git_prompt_short_sha) ${_return_status} %T% %{$(echotc DO 1)%}'

local _current_dir="%{$fg[magenta]%}%0~%{$reset_color%} "
local _return_status="%{$fg[red]%}%(?..‚çâ)%{$reset_color%}"
local _hist_no="%{$fg[grey]%}%h%{$reset_color%}"

function _user_host() {
  echo "%{$fg[red]%}%n%{$reset_color%}@%{$fg[yellow]%}%m%{$reset_color%}: "
}

function _vi_status() {
  if {echo $fpath | grep -q "plugins/vi-mode"}; then
    echo "$(vi_mode_prompt_info)"
  fi
}

function _ruby_version() {
  if {echo $fpath | grep -q "plugins/rvm"}; then
    echo "%{$fg[grey]%}$(rvm_prompt_info)%{$reset_color%}"
  fi
}

# Determine the time since last commit. If branch is clean,
# use a neutral color, otherwise colors will vary according to time.
function _git_time_since_commit() {
  if git rev-parse --git-dir > /dev/null 2>&1; then
    # Only proceed if there is actually a commit.
    if [[ $(git log 2>&1 > /dev/null | grep -c "^fatal: bad default revision") == 0 ]]; then
      # Get the last commit.
      last_commit=$(git log --pretty=format:'%at' -1 2> /dev/null)
      now=$(date +%s)
      seconds_since_last_commit=$((now-last_commit))

      # Totals
      minutes=$((seconds_since_last_commit / 60))
      hours=$((seconds_since_last_commit/3600))

      # Sub-hours and sub-minutes
      days=$((seconds_since_last_commit / 86400))
      sub_hours=$((hours % 24))
      sub_minutes=$((minutes % 60))

      if [ $hours -gt 24 ]; then
          commit_age="${days}d"
      elif [ $minutes -gt 60 ]; then
          commit_age="${sub_hours}h${sub_minutes}m"
      else
          commit_age="${minutes}m"
      fi

      color=$ZSH_THEME_GIT_TIME_SINCE_COMMIT_NEUTRAL
      echo "$color$commit_age%{$reset_color%}"
    fi
  fi
}

if [[ $USER == "root" ]]; then
  CARETCOLOR="red"
else
  CARETCOLOR="white"
fi

MODE_INDICATOR="%{$fg_bold[yellow]%}‚ùÆ%{$reset_color%}%{$fg[yellow]%}‚ùÆ‚ùÆ%{$reset_color%}"

ZSH_THEME_GIT_PROMPT_PREFIX="%{$fg[green]%}"
ZSH_THEME_GIT_PROMPT_SUFFIX="%{$reset_color%} "

ZSH_THEME_GIT_PROMPT_DIRTY=" %{$fg[red]%}‚úó%{$reset_color%}"
ZSH_THEME_GIT_PROMPT_CLEAN=" %{$fg[green]%}‚úî%{$reset_color%}"
ZSH_THEME_GIT_PROMPT_ADDED=" %{$fg[green]%}‚úö{$reset_color%}"
ZSH_THEME_GIT_PROMPT_MODIFIED=" %{$fg[yellow]%}‚öë{$reset_color%} "
ZSH_THEME_GIT_PROMPT_DELETED=" %{$fg[red]%}‚úñ{$reset_color%} "
ZSH_THEME_GIT_PROMPT_RENAMED=" %{$fg[blue]%}‚ñ¥{$reset_color%} "
ZSH_THEME_GIT_PROMPT_UNMERGED=" %{$fg[cyan]%}¬ß{$reset_color%} "
ZSH_THEME_GIT_PROMPT_UNTRACKED=" %{$fg[grey]%}‚óí{$reset_color%} "

# Colors vary depending on time lapsed.
ZSH_THEME_GIT_TIME_SINCE_COMMIT_SHORT="%{$fg[green]%}"
ZSH_THEME_GIT_TIME_SHORT_COMMIT_MEDIUM="%{$fg[yellow]%}"
ZSH_THEME_GIT_TIME_SINCE_COMMIT_LONG="%{$fg[red]%}"
ZSH_THEME_GIT_TIME_SINCE_COMMIT_NEUTRAL="%{$fg[yellow]%}"

# Format for git_prompt_long_sha() and git_prompt_short_sha()
ZSH_THEME_GIT_PROMPT_SHA_BEFORE="%{$fg[white]%}[%{$fg[yellow]%}"
ZSH_THEME_GIT_PROMPT_SHA_AFTER="%{$fg[white]%}]"

# LS colors, made with http://geoff.greer.fm/lscolors/
export LSCOLORS="exfxcxdxbxegedabagacad"
export LS_COLORS='di=34;40:ln=35;40:so=32;40:pi=33;40:ex=31;40:bd=34;46:cd=34;43:su=0;41:sg=0;46:tw=0;42:ow=0;43:'
export GREP_COLOR='1;33'
```

Y en el fichero `~/.zshrc` cambia el valor de la variable `ZSH_THEME` por `nico`:

```js
ZSH_THEME = "nico";
```

Reinicia la terminal y tendr√°s el siguiente aspecto. Con feedback de la rama de Git en la que te encuentres, si ha habido cambios en el repositorio, etc...
![](/images/configura-tu-mac-como-un-desarrollador-profesionalque-2/Screen-Shot-2015-01-10-at-18-07-20.png)

</article>

---

<article slug="como-conectarte-remotamente-a-tu-base-de-datos-mongodb" date="2014-12-19" url="https://carlosazaustre.es/blog/como-conectarte-remotamente-a-tu-base-de-datos-mongodb">

# C√≥mo conectarte rem√≥tamente a tu base de datos MongoDB

**Fecha:** 2014-12-19
En este art√≠culo vamos a ver como dar seguridad a nuestra base de datos remota de producci√≥n y a su vez como conectarnos de manera remota desde nuestro entorno local.

Primero de todo inicia una instancia de MongoDB en tu servidor, sin el flag de autenticaci√≥n:

```
mongod --port 27017 --dbpath /data/db1
```

Creamos un usuario administrador que ser√° el root que administre todas las bases de datos y ser√° con el que nos conectemos por terminal (MongoShell) desde el servidor:

```javascript
use admin
db.createUser(
  {
    user: "myServerAdmin",
    pwd: "password",
    roles: [ { role: "userAdminAnyDatabase", db: "admin" } ]
  }
);
```

Reinicia la instancia de MongoDB, esta vez con la autorizaci√≥n activada:

```shell
mongod --auth --config /etc/mongodb/mongodb.conf
```

Ahora para conectarnos al MongoShell necesitamos hacerlo mediante el usuario administrador:

```shell
mongo --port 27017 -u myServerAdmin -p password --authenticationDatabase admin
```

Una vez conectados, vamos a crear un usuario adicional que gestione la base de datos que utilizar√° tu aplicaci√≥n. Que solo pueda acceder a esa base de datos y con permisos de Lectura/Escritura. Este ser√° el que utilicemos para conectarnos desde nuestra aplicaci√≥n backend.

Es importante que sea un usuario ‚Äúno-root‚Äù el que se conecte desde nuestra app para evitar ‚Äúdisgustos‚Äù y es una capa importante de seguridad para nuestro backend.

```javascript
use myDatabase
db.createUser(
    {
      user: "myUser",
      pwd: "12345678",
      roles: [
         "roles" : [ { "role" : "readWrite", "db" : "myDatabase" }
      ]
    }
);
```

Para poder conectarnos remotamente, edita el fichero `/etc/mongod.conf`

Cambia el campo `bind_ip = 127.0.0.1`, por la IP de tu servidor, y aprovecha a cambiar el campo `port = 27017` por otro diferente, para mayor seguridad

Reinicia mongo para aplicar los cambios.

```shell
sudo service mongod restart
```

Ahora si queremos conectarnos por el MongoShell a nuestra instancia de mongo, deberemos escribir el siguiente comando desde la terminal:

```shell
mongo --host x.x.x.x --port xxxxx -u myServerAdmin -p password --authenticationDatabase admin
```

siendo `x.x.x.x` la IP de tu servidor y `xxxxx` el puerto que configuraste en el fichero mongod.conf

Y para conectarnos mediante una URI String desde nuestra aplicaci√≥n backend, la URI ser√°:

```shell
mongodb://myUser:12345678@x.x.x.x:xxxxx/myDatabase
```

### Configuraci√≥n de Robomongo.

[Robomongo](http://robomongo.org/) es una aplicaci√≥n para Mac, Windows y Linux para conectarse a bases de datos Mongo, de una manera visual, sustituyendo o complementando a la terminal y al MongoShell.

La configuraci√≥n en Robomongo para conectarse remotamente a una base de datos por SSH es diferente a la conexi√≥n a tu base de datos local. Estas son las pesta√±as que debes configurar

En la **pesta√±a Conexi√≥n**, adem√°s de un nombre para identificar a la conexi√≥n, necesitas incluir la direcci√≥n IP de tu servidor (x.x.x.x) y el puerto que configuraste en el fichero mongod.conf (xxxxx)

![robomongo_conexion](/images/como-conectarte-remotamente-a-tu-base-de-datos-mongodb/robomongo_conexion_dwewwc.jpg)

En la **pesta√±a Autenticaci√≥n**, indica la base de datos ‚Äú_admin_‚Äù para poder entrar con el nombre de usuario y la contrase√±a del usuario administrador que creamos (myServerAdmin)

![robomongo_auth](/images/como-conectarte-remotamente-a-tu-base-de-datos-mongodb/robomongo_auth_carbs8.jpg)

Por √∫ltimo en la **pesta√±a SSH**, indica la direcci√≥n IP de tu servidor, el puerto de SSH (el 22 es el por defecto si no lo has cambiado), el nombre de usuario con el que puedes entrar en tu servidor por SSH y la contrase√±a

![robomongo_ssh](/images/como-conectarte-remotamente-a-tu-base-de-datos-mongodb/robomongo_ssh_zwmk7z.jpg)

Con esto podr√°s acceder con Robomongo a la base de datos remota de tu aplicaci√≥n.

**Fuentes**:

- [http://docs.mongodb.org/manual/tutorial/add-admin-user/](http://docs.mongodb.org/manual/tutorial/add-admin-user/)
- [http://docs.mongodb.org/manual/tutorial/add-user-to-database/](http://docs.mongodb.org/manual/tutorial/add-user-to-database/)
- [https://www.digitalocean.com/community/tutorials/how-to-securely-configure-a-production-mongodb-server](https://www.digitalocean.com/community/tutorials/how-to-securely-configure-a-production-mongodb-server)

</article>

---

<article slug="como-configurar-tu-servidor-cloud-en-digitalocean" date="2014-07-31" url="https://carlosazaustre.es/blog/como-configurar-tu-servidor-cloud-en-digitalocean">

# C√≥mo configurar tu servidor cloud en DigitalOcean

**Fecha:** 2014-07-31
[**DigitalOcean**](https://www.digitalocean.com/?refcode=f716de9860aa) es un _IaaS_ (Infraestructura como Servicio) como pueden ser [los servidores EC2 de Amazon Web Services](/como-crear-un-servidor-web-con-amazon-web-services/), aunque a mi parecer son m√°s sencillos de usar y la interfaz es mucho m√°s limpia y clara.

Tambi√©n es mejor [el precio](https://www.digitalocean.com/pricing/), puedes tener un _droplet_ que es como llaman aqu√≠ a las maquinas virtuales, igual que la estancia micro que te da gratis un a√±o Amazon (luego cuesta alrededor de 16$ al mes), por 5$ al mes, y por 10$ al mes un ‚Äúpepino‚Äù ;) Adem√°s son discos SSD, es decir, miel de romero!

En este tutorial voy a explicar como [registrarse en DigitalOcean](https://www.digitalocean.com/?refcode=f716de9860aa) y configurar nuestro primer servidor Linux en el que poder desplegar nuestras aplicaciones Web.

Nos dirigimos a la p√°gina web de [DigitalOcean y nos registramos con un email y una contrase√±a](https://www.digitalocean.com/?refcode=f716de9860aa). En el siguiente paso nos pedir√°n nuestros datos (nombre, apellidos, direcci√≥n y un n√∫mero de tarjeta de cr√©dito/d√©bito) los a√±adimos y ya tenemos nuestra cuenta en [DigitalOcean](https://www.digitalocean.com/?refcode=f716de9860aa). Nos llegar√° un correo de confirmaci√≥n a nuestro email, pinchamos en el link para confirmar y listo.

[![Screen Shot 2014-07-27 at 23.34.55](/images/como-configurar-tu-servidor-cloud-en-digitalocean/Screen-Shot-2014-07-27-at-23_34_55_blcekh.png)](https://www.digitalocean.com/?refcode=f716de9860aa)

Ahora elegimos que m√°quina queremos, en mi caso elijo la m√°s barata que para empezar nos sobra. 512 Mb de RAM, 1 CPU, 20GB de Disco SSD y 1TB de transferencia mensual (si lo superas, el GB adicional cuesta 0,02$)

![Screen Shot 2014-07-27 at 23.03.35](/images/como-configurar-tu-servidor-cloud-en-digitalocean/Screen-Shot-2014-07-27-at-23_03_35_rdcqjx.png)

La regi√≥n, en mi caso eleg√≠ Londres por ser el m√°s cercano a Espa√±a, para la latencia.

![Screen Shot 2014-07-27 at 23.04.52](/images/como-configurar-tu-servidor-cloud-en-digitalocean/Screen-Shot-2014-07-27-at-23_04_52_bclwzc.png)

Ya podemos acceder a nuestro panel de control y en el tendremos que configurar que software queremos instalar. En mi caso eleg√≠ una distribuci√≥n Ubuntu 14.04 x64.

![Screen Shot 2014-07-27 at 23.04.44](/images/como-configurar-tu-servidor-cloud-en-digitalocean/Screen-Shot-2014-07-27-at-23_04_44_fd9a3f.png)

Podemos instalar aplicaciones adicionales, como Ruby, Django, PHP, etc‚Ä¶ En mi caso elijo instalar Node para ahorrarme instalarlo via terminal, pero si queremos podemos hacerlo m√°s adelante por SSH.

![Screen Shot 2014-07-27 at 23.05.59](/images/como-configurar-tu-servidor-cloud-en-digitalocean/Screen-Shot-2014-07-27-at-23_05_59_vhxnbq.png)

Ya tenemos todo, lo √∫nico que nos queda es poder acceder via SSH por terminal para poder configurar nuestro servidor, realizar despliegues, etc‚Ä¶ Para ello primero necesitamos importar nuestra clave RSA p√∫blica o crear una nueva. En Mac OS se realiza as√≠:

```shell
ssh-keygen -t rsa -C "your_email@example.com"
# Creates a new ssh key, using the provided email as a label
# Generating public/private rsa key pair.
# Enter file in which to save the key (/Users/you/.ssh/id_rsa): [Press enter]
Enter passphrase (empty for no passphrase): [Type a passphrase]
# Enter same passphrase again: [Type passphrase again]
Your identification has been saved in /Users/you/.ssh/id_rsa.
# Your public key has been saved in /Users/you/.ssh/id_rsa.pub.
# The key fingerprint is:
# 01:0f:f4:3b:ca:85:d6:17:a1:7d:f0:68:9d:f0:a2:db your_email@example.com
```

Ejecutamos `cat ~./.ssh/id_rsa.pub` para ver el contenido de nuestra clave p√∫blica, copiarla en el portapapeles e [ir a la secci√≥n _SSH Keys_ del panel de control](https://cloud.digitalocean.com/ssh_keys) y pegarla ah√≠. Con esto DigitalOcean nos permite acceder via SSH desde nuestra m√°quina local.

![Screen Shot 2014-07-28 at 00.03.02](/images/como-configurar-tu-servidor-cloud-en-digitalocean/Screen-Shot-2014-07-28-at-00_03_02_u05x6a-1.png)

¬øC√≥mo accedemos v√≠a SSH? En nuestro panel de control vemos[ nuestra lista de Droplets](https://cloud.digitalocean.com/droplets) y en ella podemos ver la IP de nuestro servidor, en este caso, por ejemplo, aqu√≠ ser√≠a la `178.140.2.2`
![Screen Shot 2014-07-28 at 00.08.04](/images/como-configurar-tu-servidor-cloud-en-digitalocean/Screen-Shot-2014-07-28-at-00_08_04_tuvmnj.png)

Con esos datos podemos acceder asi en nuestra m√°quina local

```shell
$ ssh root@178.140.2.2
root@178.140.2.2's password:
Welcome to Ubuntu 14.04 LTS (GNU/Linux 3.13.0-24-generic x86_64)

 * Documentation:  https://help.ubuntu.com/

  System information as of Sun Jul 27 17:16:56 EDT 2014

  System load:  0.0               Processes:           67
  Usage of /:   7.2% of 19.56GB   Users logged in:     0
  Memory usage: 10%               IP address for eth0: 178.62.36.77
  Swap usage:   0%

  Graph this data and manage this system at:

https://landscape.canonical.com/

Last login: Sun Jul 27 17:16:57 2014 from xxx.xxx.xxx.xxx
root@tudroplet:~#
```

La password que nos pide, nos la han enviado al email con el que nos hemos registrado, y la primera vez que nos logueemos via SSH nos permite cambiarla por una propia.

Con esto ya tenemos nuestro propio servidor en la nube y ahora ya solo queda instalar el software que necesitemos (Django, Nginx, MongoDB, Redis, etc‚Ä¶) y empezar a desplegar en producci√≥n

**Fuente**:¬†[https://www.digitalocean.com/community/tutorials/how-to-create-your-first-digitalocean-droplet-virtual-server](https://www.digitalocean.com/community/tutorials/how-to-create-your-first-digitalocean-droplet-virtual-server)

</article>

---

<article slug="automatizando-tu-flujo-de-trabajo-en-el-frontend-con-gulpjs" date="2014-07-26" url="https://carlosazaustre.es/blog/automatizando-tu-flujo-de-trabajo-en-el-frontend-con-gulpjs">

# Automatizando tu flujo de trabajo en el Frontend con GulpJS

**Fecha:** 2014-07-26
[GulpJS](http://gulpjs.com) es un automatizador de tareas escrito en JavaScript y que corre bajo Node.js que sigue la misma filosof√≠a que [Grunt](/automatizar-tareas-en-javascript-con-grunt-js/). GulpJS mejora en cuanto facilidad de programaci√≥n y rapidez a la hora de ejecutar las tareas. Si has usado Grunt, creo que ver√°s que la sintaxis para declarar tareas es mucho m√°s entendible que la del propio Grunt.

En este art√≠culo mostrar√© un _Gulpfile_ b√°sico en el que declararemos varias tareas habituales que solemos hacer en el Frontend (minificar CSS, JS, etc‚Ä¶) que nos solucionar√°n la vida. Si a√∫n no has probado un automatizador de tareas, prep√°rate para descubrir un mundo nuevo :D

El fichero de configuraci√≥n de tareas debe llamarse `Gulpfile.js` y estar situado en el directorio ra√≠z de nuestro proyecto. Para poder ejecutrar gulp en nuestro equipo, debemos tener instalado [Node.js](http://nodejs.org/) y las siguientes dependencias de manera global

```shell
$ npm install -g gulp
```

Pensemos que tareas solemos hacer normalmente en nuestros desarrollos frontend. Lo m√°s habitual es que usemos un preprocesador de CSS (Sass, Less, Stylus,‚Ä¶) para realizar el dise√±o de la web. Esto nos lleva a tener varios archivos y necesitamos que se conviertan en uno solo y con formato CSS. Esto lo podemos hacer con la siguiente tarea configurada en nuestro _Gulpfile_

```js
var gulp = require('gulp');
var stylus = require('gulp-stylus');

gulp.task('css', function () {
gulp.src('./styles/**/*.styl')
.pipe(stylus({compress: true}))
.pipe(gulp.dest('./css'));
.pipe(connect.reload()); // M√°s adelante explicamos por qu√©</span>
});
```

Esta tarea recoge los ficheros `.styl` (de Stylus) que se encuentren en la carpeta _styles_ del proyecto, los preprocesa a CSS, los minifica en un solo fichero y lo deja en la carpeta _css_

Imaginemos ahora que tenemos varios ficheros JS, y los vamos a√±adiendo en nuestro HTML con las etiquetas `script`. Ser√≠a genial que un programa nos leyera esas referencias y se encargara de concatenarlas en un √∫nico fichero JS e incluso minificarlo. ¬øEs posible? Si lo es:

```js
var gulp = require("gulp");
var useref = require("gulp-useref");
var gulpif = require("gulp-if");

gulp.task("compress", function () {
  gulp
    .src("./index.html")
    .pipe(useref.assets())
    .pipe(gulpif("*.js", uglify()))
    .pipe(useref.restore())
    .pipe(useref())
    .pipe(gulp.dest("./dist"));
});
```

Esta tarea toma de nuestro `index.html` que ser√≠a de esta forma:

```html
<!-- build:js js/vendor.min.js -->
<script src="lib/jquery/dist/jquery.js"></script>
<script src="lib/lodash/lodash.js"></script>
<script src="lib/angular/angular.js"></script>
<script src="lib/angular-route/angular-route.js"></script>
<script src="lib/angular-cookies/angular-cookies.js"></script>
<!-- endbuild -->
```

Gulp recoge el contenido entre las etiquetas de comentario en HTML, y concatena todos esos archivos JS en uno solo, en este caso `vendor.min.js`

Tambi√©n podemos trabajar con im√°genes. Aunque con Photoshop o cualquier otro programa las hayamos optimizado para la web, siempre pueden ser comprimidas mucho m√°s con un optimizador de im√°genes. Tambi√©n podemos hacer esto con Gulp:

```js
var gulp = require("gulp");
var imagemin = require("gulp-imagemin");
var pngcrush = require("imagemin-pngcrush");

gulp.task("images", function () {
  gulp
    .src("./static/*.{png,jpg,jpeg,gif,svg}")
    .pipe(
      imagemin({
        progressive: true,
        svgoPlugins: [{ removeViewBox: false }],
        use: [pngcrush()],
      })
    )
    .pipe(gulp.dest("./dist/static"));
});
```

Esta tarea toma las im√°genes en formato `PNG`, `JPG`, `GIF` y `SVG` que se encuentren en la carpeta ‚Äòstatic‚Äô y las comprime y optmiza deposit√°ndolas en la carpeta `dist/static`

Estas tareas son geniales, pero ¬øNo ser√≠a a√∫n mejor que se ejecutaran cada vez que hiciesemos un cambio en los ficheros CSS y JS? Eso lo conseguimos con la tarea `watch`

```js
gulp.task('watch', function() {
  gulp.watch('./styles/**/*.styl', ['css']),
  gulp.watch('./**/*.html, ['compress'])
});
```

Y para terminar, si pudiesemos ver los cambios que hacemos en el CSS y JS seg√∫n guardamos sin tener que recargar el navegador, ahorrar√≠amos una cantidad importante de tiempo. Gulp tambi√©n nos facilita esto con el plugin `livereload`;

```js
var gulp = require("gulp");
var connect = require("gulp-connect");
var historyApiFallback = require("connect-history-api-fallback");

gulp.task("webserver", function () {
  connect.server({
    root: "./app",
    hostname: "0.0.0.0",
    port: 9000,
    livereload: true,
    middleware: function (connect, opt) {
      return [historyApiFallback];
    },
  });
});
```

Esto nos crea un servidor web de desarrollo que se ejecuta en localhost en el puerto 9000 y se recargar√° cada vez que se ejecute un cambio. Solo es necesario registrar la tarea y lo tenemos listo:

```js
gulp.task("default", ["webserver", "watch"]);
```

S√≥lo tenemos que ejecutar el comando ‚Äògulp‚Äô en el terminal y tendremos todo en funcionamiento.

Gulp al igual que Grunt posee una gran comunidad y hay disponibles cientos de plugins para hacer cualquier tipo de tarea, s√≥lo hay que revisar la documentaci√≥n y el directorio NPM para encontrar el que m√°s se ajuste a nuestras preferencias.

</article>

---

<article slug="primera-aplicacion-web-en-raspberrypi-con-nodejs-cylonjs-controlando-leds-desde-el-movil" date="2014-07-16" url="https://carlosazaustre.es/blog/primera-aplicacion-web-en-raspberrypi-con-nodejs-cylonjs-controlando-leds-desde-el-movil">

# Primera aplicaci√≥n web en RaspberryPi con NodeJS + CylonJS. Controlando LEDs desde el m√≥vil

**Fecha:** 2014-07-16
En este tutorial vamos a implementar una WebApp que controle 3 LEDs de colores conectados a los pines GPIO de la RaspberryPi. Utilizando para ello **JavaScript a _troche_ y _moche_.**

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=EnBTQTjX4wE)
/>

[Necesitaremos una RaspberryPi, con Raspbian instalado, la red configurada y con el framework CylonJS y los pines GPIO activados](/programando-en-node-js-con-raspberrypi-primeros-pasos/). Esto lo pod√©is consultar en la [anterior entrada](/programando-en-node-js-con-raspberrypi-primeros-pasos/). Como materiales adicionales necesitaremos **3 LEDs de colores** (Rojo, amarillo y verde por ejemplo) y **3 resistencias** (por ej. de 470 _ohms_) para protegerlos. Tambi√©n unos cables para conectar los Leds a los pines GPIO.

En mi caso, [adquir√≠ una placa de prototipado](http://www.adafruit.com/products/942) en la tienda [Adafruit](http://www.adafruit.com/), adem√°s de un [cable BUS que me conecta los pines GPIO](http://www.adafruit.com/products/914) con esta placa y me hace m√°s facil las instalaciones.

![RaspberryPi con Protoboard](/images/primera-aplicacion-web-en-raspberrypi-con-nodejs-cylonjs-controlando-leds-desde-el-movil/IMG_0446_xsxg6q.jpg)

### Estructura de la aplicaci√≥n

La estructura que tendr√° nuestra webapp con API ser√° esta, ahora explicaremos que hace cada fichero:

```shell
/raspi-app
|_ /app
|    |_ /controllers
|    |   |_ led.js
|    |_ /views
|        |_ index.server.view.html
|_ /public
|   |_ /css
|   |_ /js
|   |_ /fonts
|_ package.json
|_ server.js
```

**package.json**  
En este fichero se encuentran las dependencias de Node.js que vamos a utilizar. Ser√°n **Express** y las librerias necesarias para crear llamadas GET a nuestro API (**body-parser** y **method-override**) que desde la versi√≥n 4 de Express, se encuentran en proyectos diferentes para hacer m√°s ligero Express y las que nos permiten crean vistas desde el servidor (**consolidate** y **swig**).

Y despues las del framework **CylonJS** que tiene los drivers necesarios para comunicarse con las Raspberry utilizando JavaScript. El fichero ser√≠a as√≠:

```js
{
  "name": "raspi-app",
  "version": "0.0.0",
  "description": "API to turn on/off Raspi LEDs",
  "author": "Carlos Azaustre <cazaustre@gmail.com>",
  "dependencies": {
    "body-parser": "^1.4.3",
    "consolidate": "^0.10.0",
    "cylon": "^0.16.0",
    "cylon-gpio": "^0.16.0",
    "cylon-raspi": "^0.10.0",
    "cylon.i2c": "^0.13.0",
    "express": "^4.4.1",
    "method-override": "^2.1.1",
    "swig": "^1.4.1"
  },
  "devDependencies": {}
}
```

**server.js**  
Este fichero es el de arranque de nuestro servidor Node/Express. En el vamos a importar las dependencias, configurar la ruta de los ficheros est√°ticos, el sistema de plantillas para las vistas y el controlador de los LEDs lo separamos en un modulo aparte para hacer m√°s legible la aplicaci√≥n. El fichero ser√≠a as√≠:

```js
var express = require("express");
var bodyParser = require("body-parser");
var methodOverride = require("method-override");
var cons = require("consolidate");
var swig = require("swig");
var path = require("path");

var app = express();

app.use(bodyParser.urlencoded());
app.use(bodyParser.json());
app.use(methodOverride());

app.engine("server.view.html", cons["swig"]);
app.set("view engine", "server.view.html");
app.set("views", "./app/views");
app.use(express.static(path.resolve("./public")));

app.route("/").get(function (req, res, next) {
  res.render("index");
});

require("./app/controllers/leds")(app);

app.listen(3000, function () {
  console.log("Raspi Express server listening...");
});
```

El servidor **correr√° en el puerto 3000 de la IP asignada a la Raspberry** en la red local, en mi caso es `192.168.1.13`, por lo tanto si desde el navegador de un dispositivo (PC, Portatil, Tablet o Smartphone) me dirijo a `http://192.168.1.13:3000` ver√° la p√°gina `index` que se renderiza cuando estamos en la ruta ra√≠z. Para ello debemos configurar las vistas, en este caso s√≥lo 1, `index`.

**app/views/index.server.view.html**  
En server.js, con este c√≥digo:

```js
app.engine("server.view.html", cons["swig"]);
app.set("view engine", "server.view.html");
app.set("views", "./app/views");
```

hemos configurado el sistema de plantillas con `swig` y le hemos indicado que las vistas se encuentran en la ruta `/app/views` y son los ficheros del tipo `.server.view.html`.

La p√°gina que va a renderizar Express cuando estemos en la ruta ra√≠z ser√° la siguiente:

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>RaspberryPi LEDs</title>
    <meta
      name="viewport"
      content="initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui"
    />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <link rel="stylesheet" href="css/ratchet.min.css" />
    <link rel="stylesheet" href="css/ratchet-theme-ios.min.css" />
    <script src="js/ratchet.min.js"></script>
  </head>
  <body>
    <header class="bar bar-nav">
      <a class="icon icon-refresh pull-right"></a>
      <h1 class="title">RasPi GPIO LEDs</h1>
    </header>
    <div class="content">
      <ul class="table-view">
        <li class="table-view-cell">
          Red LED
          <div id="red" class="toggle">
            <div class="toggle-handle"></div>
          </div>
        </li>
        <li class="table-view-cell">
          Yellow LED
          <div id="yellow" class="toggle">
            <div class="toggle-handle"></div>
          </div>
        </li>
        <li class="table-view-cell">
          Green LED
          <div id="green" class="toggle">
            <div class="toggle-handle"></div>
          </div>
        </li>
      </ul>
    </div>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="js/main.js"></script>
  </body>
</html>
```

He utilizado un framework CSS llamado [**Ratchet**](http://goratchet.com/), de los mismos creadores de Bootstrap, que permite hacer webapps con [estilo nativo de iOS o Android.](http://goratchet.com/components) Ya que la intenci√≥n de este ejemplo y esta webapp es controlar los LEDs desde el m√≥vil a modo de control remoto, y de paso aprendemos un framework nuevo :)

Los archivos de Ratchet est√°n en la carpeta `/public`, en las carpetas CSS, JS y Fonts. Tan solo debemos descargarnos el framework y descomprimir el archivo ZIP en la carpeta `/public` de nuestra aplicaci√≥n.

Lo √∫nico que tiene esta p√°gina es un listado con 3 botones `toggle` que encender√°n o apagar√°n los LEDs. Esta funci√≥n la comunicaremos con el Backend a trav√©s de JavaScript, y tendremos esa funcionalidad en el fichero `js/main.js`

**js/main.js**  
Este fichero comunicar√° el Frontend de la webapp con el Backend de la aplicaci√≥n, realizando llamadas AJAX a nuestro API.

```js
function onReady() {
  var $btn = $(".toggle");
  var $range = $("input[type=range]");
  $btn.on("toggle", function (e) {
    var led = $(this).attr("id");
    if ($(this).hasClass("active")) {
      $.get("/api/" + led + "/on", function (data) {
        console.log(data);
      });
    } else {
      $.get("/api/" + led + "/off", function (data) {
        console.log(data);
      });
    }
  });
}
$(document).ready(onReady);
```

Lo √∫nico que hacemos aqu√≠ es escuchar el evento `toggle` de los botones asociados a los LEDs. En ese momento recogemos el valor de ID del bot√≥n pulsado, que ser√° _red_, _yellow_ o _green_ dependiendo del bot√≥n pulsado y comprobamos si la posici√≥n es _active_ o no, mirando la clase.

En caso de que sea _active_, es que queremos encenderlo, entonces hacemos una llamada AJAX v√≠a `GET` a la URL `/api/led/on`, siendo led el color del led pulsado.

En otro caso, es que queremos apagarlo, llamamos pues a la misma ruta pero con `/api/led/off`

Ahora entonces necesitamos nuestro API en el backend, lo vemos a continuaci√≥n.

**/app/controllers/led.js**  
En este fichero a√±adimos la ruta `REST` que nos permite encender/apagar los LEDs, adem√É¬°s de la configuraci√≥n de los pines GPIO asociados a los LEDs, gracias a CylonJS

```js
var Cylon = require("cylon");

module.exports = function (app) {
  Cylon.robot({
    connection: { name: "raspi", adaptor: "raspi" },
    devices: [
      { name: "red", driver: "led", pin: 15 },
      { name: "yellow", driver: "led", pin: 11 },
      { name: "green", driver: "led", pin: 7 },
    ],
    work: function (my) {
      app.route("/api/:led/:position").get(function (req, res, next) {
        var led = req.params.led;
        if (req.params.position == "on") {
          if (led == "red") my.red.turnOn();
          if (led == "yellow") my.yellow.turnOn();
          if (led == "green") my.green.turnOn();
        } else {
          if (led == "red") my.red.turnOff();
          if (led == "yellow") my.yellow.turnOff();
          if (led == "green") my.green.turnOff();
        }
        res.send(200);
      });
    },
  }).start();
};
```

Creamos un `robot` cylon, que estar√° conectado a la Raspberry y utilizar√° 3 `devices` con el driver `led`, los pines que vamos a utilizar son el `15`, `11` y `7`, que est√°n asociados a los Pines GPIO de la Raspberry: `22`, `17` y `4`. En esta [URL](http://cylonjs.com/documentation/platforms/raspberry-pi/) puedes ver la correlaci√≥n entre el n√∫mero l√≥gico y el f√≠sico. Es un poco lioso, [pero siguiendo esa tabla no hay p√©rdida.](http://cylonjs.com/documentation/platforms/raspberry-pi/)

![IMG_0449](/images/primera-aplicacion-web-en-raspberrypi-con-nodejs-cylonjs-controlando-leds-desde-el-movil/2015/02/IMG_0449_xdsn8z.jpg)

la funci√≥n `work` se iniciar√° autom√°ticamente debido al ciclo de vida que tiene el framework Cylon. En ella es donde configuraremos que LED se encender√°n dependiendo de los par√°metros en la ruta.

El par√°metro `:led`, indica el dispositivo que queremos manipular, puede ser `red`, `yellow` o `green`. El par√°metro `:position` nos indica si queremos encenderlo `on`, o apagarlo `off`.

![webapp raspberryPI Leds](/images/primera-aplicacion-web-en-raspberrypi-con-nodejs-cylonjs-controlando-leds-desde-el-movil/webapp_nw5sov.png)

Con todo esto ya podemos iniciar nuestra aplicaci√≥n en la raspberry y acceder al navegador a la IP asociada para usar la webapp como control remoto de los LEDs.

Esto es solo una prueba de concepto y una especie de _Hola Mundo_ con CylonJS + Node y Rasperry. Si en lugar de LEDs fueran sensores, o motores, podr√≠amos hacer cosas m√°s interesantes, como por ejemplo, nuestro propio coche teledirigido v√≠a web :), pero eso ya ser√° para otro d√≠a.

Espero que os haya resultado interesante. Pod√©is [acceder al respositorio del proyecto en mi GitHub para tenerlo a mano](https://github.com/carlosazaustre/raspberrypi-api-led).

</article>

---

<article slug="programando-en-node-js-con-raspberrypi-primeros-pasos" date="2014-07-15" url="https://carlosazaustre.es/blog/programando-en-node-js-con-raspberrypi-primeros-pasos">

# Programando en Node.js con RaspberryPi. Primeros pasos

**Fecha:** 2014-07-15
Hace unos d√≠as me lleg√≥ al fin el micro-controlador [Tessel.io](https://tessel.io/) en el que puedes programar en JavasScript de forma nativa y del que ya os hablar√° m√°s adelante. Esto hizo que me entraran ganas de desempolvar la [Raspberry Pi](http://www.raspberrypi.org/) que tengo desde hace a√±o y medio e investigar si podr√≠a hacer algo con **Node.js** en esta plataforma.

![cylonjs](/images/programando-en-node-js-con-raspberrypi-primeros-pasos/cylon_yjelca.png)

Navegando di con una fant√°stica librer√≠a OpenSource llamada [**CylonJS**](http://cylonjs.com) que est√° dise√±ada¬†para pr√°cticamente todas las placas y micro-controladores del mercado (_RaspberryPi_, el propio _Tessel_, _Arduino_, _BeagleBoard_, etc‚Ä¶) y nos permite programar en JavaScript en todas estas plataformas y utilizar diversos drivers (LEDs, Servomotores, etc‚Ä¶) de una forma sencilla.

Me propuse el reto de **crear una API** que permitiera encender/apagar 3 LEDs de colores conectados a los pines `GPIO` de la RaspberryPi, utilizando el framework **CylonJS** para acceder a esos puertos y **ExpressJS** para crear el servidor web y poder controlarlos desde una **webapp**.

A continuaci√≥n muestro los pasos a seguir para configurar nuestras RaspberryPi para trabajar con Node.js y CylonJS desde la instalaci√≥n del sistema operativo hasta las dependencias de Node.js via NPM. Vamos all√°.

## RaspberryPi Model B.

![RaspberryPi](/images/programando-en-node-js-con-raspberrypi-primeros-pasos/RaspberryPi_c9oeks.jpg)

El modelo que yo tengo y el m√°s popular es el **Modelo B de 512 Mb de RAM** y un **procesador ARMv6** que nos permite usar un sistema operativo (linux normalmente). Recientemente los fabricantes de Raspberry han lanzado una revisi√≥n de este modelo a√±adi√©ndole 2 puertos USB m√°s y varios pines `GPIO` extra, pero la base es la misma.

Disponemos de una ranura para tarjetas de memoria SD. Eso ser√° nuestro _disco duro_ y ah√≠ instalaremos nuestro sistema operativo.

## Sistema Operativo: Raspbian (Debian Wheezy)

![100px-Raspberry_Pi_Logo.svg](/images/programando-en-node-js-con-raspberrypi-primeros-pasos/100px-Raspberry_Pi_Logo_svg__rir0fe.png)

La mejor distribuci√≥n Linux que he probado para RaspberryPi es Raspbian, basada en la distibuci√≥n original Debian. Para poder instalar el SO en la tarjeta, primero de todo necesitamos descargar la imagen desde [aqu√≠](http://www.raspberrypi.org/downloads/). Y un programa para _flashear_ la tarjeta. En mi caso, en Mac OS X, utilizo [RPi-SD Card Builder](http://alltheware.wordpress.com/2012/12/11/easiest-way-sd-card-setup/), con el, s√≥lo tienes que introducir la tarjeta SD formateada en el ordenador y elegir la imagen del SO reci√©n descargada.

## Configuraci√≥n¬†de Red.

Introducimos la tarjeta SD en la Raspberry y le damos alimentaci√≥n¬†a trav√©s del puerto microUSB que incorpora. Si tenemos un monitor HDMI podemos ver el escritorio de la Raspberry, si no tenemos o nos da perece andar conect√°ndola a la TV, etc, podemos hacer la configuraci√≥n inicial a trav√©s de Ethernet.

Conectamos un cable Ethernet a la Raspberry y a un puerto que tengamos libre en nuestro Router. Desde la interfaz de administraci√≥n de nuestro router podemos ver que IP de la red local est√° usando la Raspberry, cuando la sepamos podemos acceder a trav√©s de SSH de la siguiente manera:

```shell
$ ssh 192.168.1.13 -l pi
```

Siendo en mi caso la IP `192.168.1.13` la que corresponde a mi Raspberry. Despues nos pedir√° la contrase√±a. Para el usuario `pi` su password es `rasbperry`. F√°cil de recordar.

![tl-wn722n.454A5022a-1024](/images/programando-en-node-js-con-raspberrypi-primeros-pasos/tl-wn722n_454A5022a-1024_uu8jmw.jpg)

Ya estamos dentro!. Lo ideal ser√≠a podernos conectar inal√°mbricamente. Si dispones de un conector Wifi USB puedes conectarlo a uno de los puertos de la Raspberry y configurar la red inal√°mbrica. En mi caso el modelo que tengo es de un ordenador antiguo, pero me sirve perfectamente. Es el **TP-Link TL-WN722N**.

Ahora si editamos el fichero `/etc/network/interfaces` con lo siguiente:

```shell
auto lo

iface lo inet loopback
iface eth0 inet dhcp

allow-hotplug wlan0
auto wlan0

iface wlan0 inet dhcp
        wpa-ssid "ssid"
        wpa-psk "password"
```

Sustituyendo `ssid` por el nombre de nuestra red y `password` por la contrase√±a de nuestro Wifi, la pr√≥xima vez que arranquemos la Raspberry **se conectar√° por Wifi.**

## Instalaci√≥n de Paquetes y Dependencias

Despues del primer reinicio ya podemos actualizar el SO con los siguientes comandos

```shell
$ sudo apt-get update
$ sudo apt-get upgrade
```

[Instalamos Node](http://joshondesign.com/2013/10/23/noderpi)

```shell
wget http://nodejs.org/dist/v0.10.2/node-v0.10.2-linux-arm-pi.tar.gz
tar -xvzf node-v0.10.2-linux-arm-pi.tar.gz
node-v0.10.2-linux-arm-pi/bin/node --version
```

A√±adimos al PATH las rutas de node en un fichero, por ejemplo `.bash_profile`

```shell
export NODE_JS_HOME=/home/pi/node-v0.10.2-linux-arm-pi
export PATH=$PATH:$NODE_JS_HOME/bin
```

Y ya podemos instalar por NPM las dependencias que necesitamos

## Instalaci√≥n de CylonJS y activando los GPIO

Para instalar la librer√≠a Cylon podemos hacerlo por NPM, tambi√©n necesitaremos [la espec√≠fica de Raspberry](http://cylonjs.com/documentation/platforms/raspberry-pi/) y es recomendable instalar 3 m√°s, la firmdata, `GPIO` e `I2C`.

```shell
$ npm install cylon
$ npm install cylon-raspi
$ npm install cylon-firmata
$ npm install cylon-gpio
$ npm install cylon-i2c
```

Para que funcionen correctamente los pines GPIO e I2C en Raspbian necesitamos hacer lo siguiente. A√±adimos lo siguiente al fichero `/etc/modules`

```shell
i2c-bcm2708
i2c-dev
```

Nos aseguramos que las siguientes entradas est√°n comentadas en el fichero `/etc/modprobe.d/raspi-blacklist.conf`

```shell
#blacklist spi-bcm2708
#blacklist i2c-bcm2708
```

Y por √∫ltimo los activamos para usarlos como pines de salida con la libreria [Pi-Blaster](https://github.com/hybridgroup/pi-blaster), con los siguientes pasos:

```shell
$ git clone https://github.com/hybridgroup/pi-blaster.git
$ cd pi-blaster
$ make
$ sudo make install
$ sudo ./pi-blaster
```

Con todo esto ya tendr√≠amos lista nuestra RaspberryPi para empezar a programar proyectos con Node.js y tecnolog√≠as web. En el pr√≥ximo post publicar√° un tutorial de como crear la API para manejar los LEDs como prueba de concepto.

</article>

---

<article slug="como-instalar-un-servidor-https-en-nginx-desde-cero" date="2014-06-16" url="https://carlosazaustre.es/blog/como-instalar-un-servidor-https-en-nginx-desde-cero">

# C√≥mo instalar un Servidor HTTPS en Nginx desde cero

**Fecha:** 2014-06-16
Cuando en nuestra web o aplicaci√≥n necesitamos tratar con datos sensibles como pueden ser tarjetas de cr√©dito, cuentas de usuario, etc, **es recomendable disponer de un certificado SSL** en nuestro servidor para utilizar el protocolo HTTPS (Http Seguro) en lugar del HTTP normal. De esta manera, nuestros datos viajan encriptados en la aplicaci√≥n y es mas dif√≠cil que sean ‚Äúescuchados‚Äù por otros.

![nginx https ssl](/images/como-instalar-un-servidor-https-en-nginx-desde-cero/Screen-Shot-2014-07-15-at-18_39_52_xjqlkp.png)

Para el proyecto que estamos llevando a cabo mi compa√±era [Paola](http://twitter.com/ggarciapaola) y yo, **[Chefly](https://chefly.co "Encuentra gente que cocine para t√≠")** (Del que pronto empezar√©is a oir) necesitamos disponer de HTTPS y tras pelearme un rato con su configuraci√≥n consegu√≠ ponerlo en marcha. Este tutorial espero que os ayude y os ahorre tiempo a la hora de implementarlo en vuestros servidores.

En nuestro caso, nuestro servidor es una instancia **EC2 en Amazon Web Services** con **Ubuntu 14.04 LTS**, y como servidor web/proxy utilizamos **Nginx**.

Lo primero que necesitamos es **crear una clave privada** en nuestro servidor:

```shell
$ cd /etc/ssl/
$ sudo openssl genrsa -des3 -out server.key 2048
```

Con nuestra clave privada generada, creamos un **Certificate Signing Request (CSR)** para solicitar nuestro certificado SSL a una entidad de autorizaci√≥n reconocida, en nuestro caso optamos por [RapidSSL](http://www.rapidssl.com/).

```shell
$ sudo openssl req -new -key server.key -out server.csr
```

Este proceso nos pedir√° una serie de datos que son importantes para solicitar el certificado SSL:

- **Country Name (C):** Un c√≥digo de dos letras para determinar el pa√≠s, en nuestro caso ponemos US ya que la entidad que lo va a manejar (RapidSSL) es de Estados Unidos.
- **State or Province (S):**¬†Estado o provincia, este campo puede quedar vac√≠o
- **Locality or City (L):**¬†Localidad o ciudad, tambi√É¬©n se puede dejar vacio.
- **Organization (O):**¬†Nombre de la organizaci√≥n que maneja tu certificado SSL, en nuestro caso RapidSSL opera a trav√©s de GeoTrust, Inc. y ponemos ese nombre.
- **Common Name (CN):** Nuestro nombre de dominio, `tudominio.com`. sin las www delante.

Esto nos generar√° un archivo `CSR` que debemos subir a RapidSSL cuando solicitemos y compremos un certificado SSL. Una vez comprado, RapidSSL nos enviar√° a nuestro email el certificado, que deberemos copiar y pegar en un fichero de texto con el nombre `SSL.crt` para seguir la nomenclatura de Nginx.

Desde la p√°gina de RapidSSL necesitamos tambi√©n descargarnos un [certificado intermedio](https://knowledge.rapidssl.com/support/ssl-certificate-support/index?page=content&id=AR1549), lo guardamos como `intermediate.crt` y¬†debemos concatenar al anterior

```shell
$ sudo cat SSL.crt intermediate.crt >> SSL.crt
```

Con esto ya tenemos lo necesario para que nuestro servidor web, acepte HTTPS, solo tenemos que **configurar Nginx para que escuche en el puerto 443** (el de HTTPS) indic√°ndole los ficheros.

Editamos el fichero default de configuraci√≥n con lo siguiente:

```shell
$ sudo nano /etc/nginx/sites-available/default
```

```shell
server {
  listen 443;
  server_name tudominio.com;

  root /usr/share/nginx/html; # Directorio donde est√°n nuestros archivos est√°ticos
  index index.html index.htm

  ssl on;
  ssl_certificate /etc/ssl/SSL.crt
  ssl_certificate_key /etc/ssl/server.key

  access_log /var/log/nginx/nginx.vhost.access.log
  error_log /var/log/nginx/nginx.vhost.error.log
```

Reiniciamos nginx y nos aseguramos que en nuestro DNS, `tudominio.com` apunta a la IP o alias de nuestro servidor

```shell
sudo service nginx restart
```

Con todo esto si accedemos a `https://tudominio.com` funcionar√°, pero ¬øY si entramos desde `http://tudominio.com`? No nos redirije al HTTPS, ¬øY si escribimos `www.tudominio.com`? aunque lo tengamos definido en nuestro DNS, no nos redirije al HTTPS. ¬øC√≥mo arreglamos esto? A√±adiendo m√°s reglas a nuestro archivo de configuraci√≥n de Nginx:

```shell
# Redirige de http://tudominio.com a https://tudominio.com
server {
        listen 80;
        return 301 https://$host$request_uri;
}

# Redirige de http://www.tudominio.com a https://tudominio.com
server {
        listen 80;
        server_name www.tudominio.com;
        return 301 https://tudominio.com$request_uri;
}

# Redirige de https://www.tudominio.com a https://tudominio.com
server {
        listen 443;
        server_name www.tudominio.com;
        return 301 $scheme://tudominio.com$request_uri;
```

Con esto ya tendremos todas las opciones cubiertas y podremos hacer uso del protocolo seguro de HTTP en nuestro servidor.

**Fuentes:**

- [http://www.digitalvalley.com/blog/como-crear-un-certificado-ssl-en-nginx-para-ubuntu/](http://www.digitalvalley.com/blog/como-crear-un-certificado-ssl-en-nginx-para-ubuntu/)
- [http://www.digicert.com/ssl-certificate-installation-nginx.htm](http://www.digicert.com/ssl-certificate-installation-nginx.htm)
- [https://knowledge.rapidssl.com/support/ssl-certificate-support/index?page=content&actp=CROSSLINK&id=SO17664](https://knowledge.rapidssl.com/support/ssl-certificate-support/index?page=content&actp=CROSSLINK&id=SO17664)

</article>

---

<article slug="registro-y-autorizacion-de-usuarios-en-node-js-con-twitter-y-facebook" date="2014-03-22" url="https://carlosazaustre.es/blog/registro-y-autorizacion-de-usuarios-en-node-js-con-twitter-y-facebook">

# Registro y autorizaci√≥n de usuarios en Node.js con Twitter y Facebook

**Fecha:** 2014-03-22
> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=Oy5ds6z4R-c)
/>

El [pasado viernes](https://plus.google.com/u/0/events/cpnqtgo6f86l2e3975p2o7lfal0) me ofrecieron impartir una **clase BONUS** en la plataforma de estudiantes de los cursos de [Mejorando.la](http://mejorando.la/cursos).

El tema que elegimos fue como implementar un **sistema de login de usuarios utilizando plataformas sociales** (**Twitter** y **Facebook**) y empleando **Node.js** en el Backend.

Y a continuaci√≥n explico a modo de tutorial los pasos para implementar este sistema en un proyecto que tengamos.

Lo primero de todo, necesitamos tener **Node.js** y **MongoDB** instalados en nuestro equipo. Node es el backend que utlizaremos y MongoDB es una base de datos no relacional, basada en documentos JSON. Podemos utlizar cualquier otra base de datos (por ejemplo, MySQL o cualquier otra). Yo lo hago con Mongo porque me parece m√°s sencillo y porque esta basada en JavaScript del cual soy un _talif√°n_ :P

- [http://nodejs.org/download/](http://nodejs.org/download/)
- [https://www.mongodb.org/downloads](https://www.mongodb.org/downloads)

A continuaci√≥n creamos una estructura base de aplicaci√≥n con el framework _Express_. De esta forma nos crea un ‚Äúesqueleto‚Äù con archivos y carpetas de una especie de ‚Äúhola mundo‚Äù con Express.

```
$ sudo npm install -g express
$ express passport-example
$ cd passport-example
$ npm install
```

Instalamos las dependencias que vamos a utilizar. **_Mongoose_** es el driver que nos ayuda a conectarnos a MongoDB e implementar esquemas de los modelos que salvemos en la base de datos. `Passport` es la librer√≠a que nos permite agilizar el proceso de autenticado y registro de usuarios con Node.js. `Passport-twitter` y `Passport-facebook` son las librer√≠as espec√≠ficas para el login con Twitter y Facebook ya que podemos utilizar Passport sin redes sociales implementando un m√©todo local con `Passport-Local`.

Con el prefijo `‚Äì-save` logramos que las dependencias se queden grabadas en el `package.json`

```
$ npm install --save mongoose
$ npm install --save passport
$ npm install --save passport-twitter
$ npm install --save passport-facebook
```

Creamos un **modelo usuario** `/models/user.js` donde indicaremos que datos vamos a querer almacenar en la base de datos para nuestros usuarios. En este ejemplo **vamos a salvar el nombre, el proveedor, un ID, la foto del usuario y un campo d√≥nde almacenaremos la fecha en la que el usuario se registr√≥ en nuestra aplicaci√≥n**.

```JavaScript
var mongoose = require('mongoose');
var Schema = mongoose.Schema;

var UserSchema = new Schema({
	name: String,
	provider: String,
	provider_id: {type: String, unique: true},
	photo: String,
	createdAt: {type: Date, default: Date.now}
});

var User = mongoose.model('User', UserSchema);
```

Configuramos **Passport** `/passport.js*` importando las librer√≠as que utilizamos y las funciones que nos permiten el login.

Con `seriealizeUser` y `deserializeUser` logramos que el objeto usuario quede almacenado en la sesi√≥n de la aplicaci√≥n y asi poder utilizarlo a lo largo de ella.

Con `TwitterStrategy` y `FacebookStrategy` utilizamos las estrategias de autenticaci√≥n que nos proporciona Passport, les pasamos como par√°metros los **API Key y API secret** que nos dan las plataformas cuando registramos una aplicaci√≥n en ellas, y nos devuelven varios objetos, entre ellos el objeto `profile` que contiene toda la informaci√≥n del usuario que devuelve Twitter o Facebook y del que podemos sacar los atributos que queramos para nuestra aplicaci√≥n (nombre, ID, foto, etc..)

```javascript
var mongoose = require('mongoose');
var User = mongoose.model('User');
var TwitterStrategy = require('passport-twitter').Strategy;
var FacebookStrategy = require('passport-facebook').Strategy;

module.exports = function(passport) {

     passport.serializeUser(function(user, done) {
		done(null, user);
	});

     passport.deserializeUser(function(obj, done) {
		done(null, obj);
	});
     passport.use(new TwitterStrategy({
		consumerKey: 'TWITTER_CONSUMER_KEY',
		consumerSecret: 'TWITTER_CONSUMER_SECRET',
		callbackURL: '/auth/twitter/callback'
	}, function(accessToken, refreshToken, profile, done) {
		User.findOne({provider_id: profile.id}, function(err, user) {
			if(err) throw(err);
			if(!err && user!= null) return done(null, user);

			var user = new User({
				provider_id: profile.id,
				provider: profile.provider,
				name: profile.displayName,
				photo: profile.photos[0].value
			});
			user.save(function(err) {
				if(err) throw err;
				done(null, user);
			});
		});
	}));
     passport.use(new FacebookStrategy({
		clientID: 'FACEBOOK_APP_CLIENT_ID',
		clientSecret: 'FACEBOOK_APP_SECRET_ID',
		callbackURL: '/auth/twitter/callback'
	}, function(accessToken, refreshToken, profile, done) {
		User.findOne({provider_id: profile.id}, function(err, user) {
			if(err) throw(err);
			if(!err && user!= null) return done(null, user);

			var user = new User({
				provider_id: profile.id,
				provider: profile.provider,
				name: profile.displayName,
				photo: profile.photos[0].value
			});
			user.save(function(err) {
				if(err) throw err;
				done(null, user);
			});
		});
	}));
```

Una buena pr√°ctica es **mantener las API Keys separadas del c√≥digo fuente que subimos al repositorio**, en un archivo `config.js` (o en las variables de entorno) que luego importamos desde donde lo necesitemos.

```javascript
var config = {
  twitter: {
    key: TWITTER_API_KEY¬Ä,
    secret: TWITTER_API_SECRET
  },
  facebook: {
    id: FACEBOOK_APP_ID,
    secret: FACEBOOK_APP_SECRET
  }
};

module.exports = config;
```

El archivo principal de la aplicaci√≥n Express y por tanto del servidor quedar√≠a mas o menos as√≠ `app.js`

```javascript
var mongoose = require('mongoose');
var passport = require('passport');
require('./models/user');
require('./passport')(passport);

mongoose.connect('mongodb://localhost/passport-example',
  function(err, res) {
    if(err) throw err;
    console.log('Conectado con √É¬©xito a la BD');
});

app.use(express.cookieParser());
app.use(express.urlencoded());
app.use(express.json());
app.use(express.methodOverride());
app.use(express.session({ secret: 'secretkey' }));

// Configuraci√≥n de Express
app.use(passport.initialize());
app.use(passport.session());
...
// Rutas de Passport
app.get('/logout', function(req, res) {
  req.logout();
  res.redirect('/');
});
app.get('/auth/twitter', passport.authenticate('twitter'));
app.get('/auth/facebook', passport.authenticate('facebook'));
app.get('/auth/twitter/callback', passport.authenticate('twitter',
  { successRedirect: '/',
    failureRedirect: '/login' }));
app.get('/auth/facebook/callback', passport.authenticate('facebook',
  { successRedirect: '/',
    failureRedirect: '/login' }));
...

exports.index = function(req, res){
  res.render('index', {
    title: 'Passport-Example',
    user: req.user
  });
};
```

Esta ser√≠a la plantilla `Jade` que renderiza el index: `/views/index.jade`. Como v√©is le aplicamos una l√≥gica dentro de la plantilla. Si existe el objeto usuario es que estamos logueados en la aplicaci√≥n y por tanto le pedimos que nos muestre la foto y el nombre y un enlace a salir. En caso de que no exista el objeto usuario es que no estamos logueados, por tanto indicamos que nos muestre los enlaces al registro/login con Twitter y Facebook

```pug
if(user)
    ul
      li
        img(src="#{user.photo}")
      li Bienvenido #{user.name}
      li
        a(href='logout') Salir
else
    ul
      li
        a(href='auth/twitter') Login con Twitter
      li
        a(href='auth/facebook') Login con Facebook
```

Para crear una aplicaci√≥n en Twitter podemos ir a [http://dev.twitter.com](http://dev.twitter.com) y registrar una nueva aplicaci√≥n. Indicamos el nombre y en los campos website y callback URL le ponemos `example.com` ya que no nos permite poner Localhost. Con facebook es similar, la URL es [http://developers.facebook.com](http://developers.facebook.com) y en este caso si podemos indicarle que nuestra aplicaci√≥n funciona en localhost.

Aqu√≠ est√°n las capturas para ambas plataformas:

![Screen Shot 2014-03-02 at 22.42.12.png](/images/registro-y-autorizacion-de-usuarios-en-node-js-con-twitter-y-facebook/Screen-Shot-2014-03-02-at-22-42-12.png)

![Screen Shot 2014-03-02 at 22.44.15.png](/images/registro-y-autorizacion-de-usuarios-en-node-js-con-twitter-y-facebook/Screen-Shot-2014-03-02-at-22-44-15.png)

![Screen Shot 2014-03-02 at 22.43.12.png](/images/registro-y-autorizacion-de-usuarios-en-node-js-con-twitter-y-facebook/Screen-Shot-2014-03-02-at-22-43-12.png)

![Screen Shot 2014-03-03 at 10.29.37.png](/images/registro-y-autorizacion-de-usuarios-en-node-js-con-twitter-y-facebook/Screen-Shot-2014-03-03-at-10-29-37.png)

![Screen Shot 2014-03-02 at 22.46.37.png](/images/registro-y-autorizacion-de-usuarios-en-node-js-con-twitter-y-facebook/Screen-Shot-2014-03-02-at-22-46-37.png)

![Screen Shot 2014-03-03 at 09.10.27.png](/images/registro-y-autorizacion-de-usuarios-en-node-js-con-twitter-y-facebook/Screen-Shot-2014-03-03-at-09-10-27.png)

Y ya est√°, el flujo de la aplicaci√≥n ser√≠a el siguiente: Primero nos pide autenticarnos con Twitter o Facebook

![Screen Shot 2014-03-03 at 10.45.01.png](/images/registro-y-autorizacion-de-usuarios-en-node-js-con-twitter-y-facebook/Screen-Shot-2014-03-03-at-10-45-01.png)

Si elegimos Twitter nos redirige a la p√°gina de autenticaci√≥n con Twitter. En el caso de no estar logueados nos pedir√≠a el usuario y la contrase√±a de Twitter

![Screen Shot 2014-03-03 at 10.45.05.png](/images/registro-y-autorizacion-de-usuarios-en-node-js-con-twitter-y-facebook/Screen-Shot-2014-03-03-at-10-45-05.png)

Y si todo sale correctamente, nos redirige a nuestra aplicaci√≥n con el usuario logueado, mostr√°ndonos el nombre de usuario y la foto de perfil

![Screen Shot 2014-03-03 at 10.45.09.png](/images/registro-y-autorizacion-de-usuarios-en-node-js-con-twitter-y-facebook/Screen-Shot-2014-03-03-at-10-45-09-1.png)

Ten√©is **todo el c√≥digo utilizado disponible y comentado en espa√±ol** en [este **respositorio de GitHub**](http://github.com/carlosazaustre/passportjs-example). Espero que os sirva en vuestros proyectos y desarrollos :)

</article>

---

<article slug="como-configurar-nginx-con-node-js-en-produccion" date="2014-02-26" url="https://carlosazaustre.es/blog/como-configurar-nginx-con-node-js-en-produccion">

# C√≥mo configurar Nginx con Node.js en Producci√≥n

**Fecha:** 2014-02-26
¬øQu√© pasa si tienes un **VPS** o una [instancia **EC2 en Amazon Web Services**](/como-crear-un-servidor-web-con-amazon-web-services/) y quieres tener **varios procesos de Node ejecut√°ndose**?

¬øY si quieres servir la parte p√∫blica de una aplicaci√≥n web por un lado y la parte Backend por otro?

Si corremos nuestra app Node en el puerto 80 para que sea accesible desde una IP o dominio, no podemos usar el mismo puerto con otro proceso. ¬øC√≥mo podemos solucionar esto? con **Nginx**.

![nodenginx](/images/como-configurar-nginx-con-node-js-en-produccion/nodenginx_rlmqcf.png)

[**Nginx**](http://nginx.org/) es un servidor web, al estilo de Apache pero orientado a eventos (como Node) y **act√∫a como un proxy** lo que nos permite redireccionar el tr√°fico entrante en funci√≥n del dominio de donde vienen, hacia el proceso¬†y puerto que nos interese.

![nginx como reverse proxy](/images/como-configurar-nginx-con-node-js-en-produccion/vn_zcknvh.png)

En este tutorial veremos como configurarlo en una instancia Amazon de una manera muy sencilla. Vamos a ello!

Gracias a Node, he pasado del mundo Frontend al Backend intentado ser un **Full-Stack Developer**. Esto ha hecho que pase de tocar el backend a acercarme peligrosamente al mundo **DevOp**, lo cu√°l es divertido porque aprendes algo nuevo y tienes una visi√≥n m√°s amplia de la **arquitectura web.**

No he probado esto en local, porque me daba muchos fallos, si alguien tiene m√°s experiencia con Nginx puede dejar en los comentarios sus aportes y entre todos aprenderemos m√°s :)

Esto est√° probado en una instancia [Ec2 de Amazon Web Services](http://aws.amazon.com/ec2/). Si no sabes como arrancar y configurar una, en [√©sta antigua entrada del blog cuento como hacerlo](/como-crear-un-servidor-web-con-amazon-web-services/).

Una vez tenemos nuestro servidor con Linux (Ubuntu preferiblemente), instalamos **Nginx**

```shell
$ sudo apt-get install nginx
```

Ahora creamos una carpeta donde se alojar√° el contenido p√∫blico y HTML est√°tico que serviremos por el puerto 80.

```shell
$ sudo mkdir -p /var/www
$ sudo chown -R ubuntu:ubuntu /var/www #Donde ubuntu es el nombre de usuario del sistema
```

Configuramos Nginx en su fichero `default` de configuraci√≥n

```shell
$ sudo nano /etc/nginx/sites-available/default
```

Y sustituimos el contenido del fichero por este otro, sustituyendo `tu_dominio` por el nombre de tu dominio en cuesti√≥n.

```shell
server {
  listen 0.0.0.0:80;

  root /var/www/tu_dominio;
  index index.html index.htm;
  server_name tu_dominio.com;
  access_log /var/log/nginx/tu_dominio.access.log;
  error_log /var/log/nginx/tu_dominio.error.log debug;

  location / {
    try_files $uri $uri/ /index.html;
  }
}
```

Antes de reiniciar Nginx, acu√©rdate de **configurar en el Panel de configuraci√≥n de DNS de tu dominio**, de tal manera que `tu_dominio.com` apunte con un registro tipo `A` a la IP de tu servidor. **De paso configura un subdominio tipo** `sudominio.tu_dominio.com` que apunte tambi√©n a la misma IP de tu m√°quina, tambi√©n como registro tipo A.

Este archivo indica que escuche en el puerto 80 y muestre el contenido de la carpeta `/var/www/tu_dominio` cuando se acceda por el navegador con el nombre `tu_dominio.com`.

Para que se vea algo cuando accedamos, creamos un archivo `index.html` en esa carpeta con el contenido que queramos

```shell
$ sudo mkdir -p /var/www/tu_dominio
$ sudo nano /var/www/tu_dominio/index.html
```

Y el contenido puede ser un simple ‚ÄúHola Mundo‚Äù;

Para finalizar esta parte, editamos el archivo `/etc/hosts` y a√±adimos los dominios de tal manera que quede as√≠

```shell
127.0.0.1         localhost
127.0.0.1         ubuntu
<IP_del_servidor> tu_dominio.com
<IP_del_servidor> subdominio.tu_dominio.com
```

Ya podemos reiniciar Nginx

```shell
$ sudo service nginx restart
```

Creamos un symlink del archivo default en la carpeta `sites-enabled`

```shell
$ sudo ln -s /etc/nginx/sites-available/default /etc/nginx/sites-enabled/default
```

De esta manera, si todo va bien, al acceder a `tu_dominio.com` veremos un ‚ÄúHola Mundo‚Äù en el navegador.

## Configuraci√≥n de Node.js con Nginx.

Ahora queremos que una aplicaci√≥n Node, que est√° corriendo en nuestro servidor en el puerto 3000 sea accesible a trav√©s de `subdominio.tu_dominio.com`. Esto lo conseguiremos haciendo lo siguiente:

Creamos un archivo de configuraci√≥n para nuestro subdominio:

```shell
$ sudo nano /etc/nginx/sites-available/subdominio.tu_dominio.com
```

Y a√±adimos la siguiente configuraci√≥n, de modo que **Nginx act√∫e como un Proxy** que redirija al puerto 3000 del servidor cuando el tr√°fico provenga de `subdominio.tu_dominio.com`

```shell
upstream subdominio.tu_dominio.com {
  server 127.0.0.1:3000;
}

server {
  listen 0.0.0.0:80;
  server_name subdominio.tu_dominio.com;
  access_log /var/log/nginx/subdominio.tu_dominio.access.log;
  error_log /var/log/nginx/subdominio.tu_dominio.error.log debug;

  location / {
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarder-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_set_header X-NginX-Proxy true;

    proxy_pass http://subdominio.tu_dominio.com;
    proxy_redirect off;
  }
}
```

Creamos un symlink para este archivo en `sites-enabled` como hicimos con el fichero `default`.

```shell
$ sudo en -s /etc/nginx/sites-available/subdominio.tu_dominio.com /etc/nginx/sites-enabled/subdominio.tu_dominio.com
```

Si accedemos a `subdominio.tu_dominio.com` nos aparecer√° el mensaje `Error 502 ‚Äì Bad Gateway`, esto es porque a√∫n no tenemos nada corriendo en el puerto 3000 y no tiene nade que mostrar.

Por tanto es hora de poner en marcha nuestra app node, desde cualquier directorio del servidor que queramos y ejecutarla preferiblemente con `forever`

```shell
$ sudo npm install -g forever
$ forever start nuestra_app.js
```

Si el servidor se reiniciara por alguna raz√≥n, tendr√≠amos que ejecutar estos comandos de node de nuevo, para evitar y esto y conseguir que las aplicaciones se nos ejecuten autom√°ticamente con el inicio de la m√°quina, creamos un `job`

```shell
$ sudo nano /etc/init/subdominio.tu_dominio.com.conf
```

con el siguiente contenido:

```shell
description "subdominio.tu_dominio.com"
env APP_PATH="ruta_donde_esta_la_app_node"

start on startup
stop on shutdown

script
  cd $APP_PATH
  exec forever start nuestra_app.js
end script
```

Y listo!, si entramos en `subdominio.tu_dominio.com` veremos nuestra aplicaci√≥n node ejecut√°ndose y si entramos por `dominio.com` veremos un Hola Mundo, estando los dos proyectos en la misma m√°quina.

</article>

---

<article slug="desarrollo-full-stack-javascript-tambien-conocido-como-mean" date="2014-02-03" url="https://carlosazaustre.es/blog/desarrollo-full-stack-javascript-tambien-conocido-como-mean">

# Desarrollo Full Stack JavaScript. El conocido como Stack MEAN

**Fecha:** 2014-02-03
Con el auge de AngularJS, una nueva corriente est√° surgiendo en el desarrollo en JavaScript de principio a fin. El llamado stack _MEAN_. Con desarrollo _end-to-end_ nos referimos a utilizar JS en todas las partes que componen una aplicaci√≥n web actual: Frontend, Backend y Base de Datos.

![mean_small_vertical](/images/desarrollo-full-stack-javascript-tambien-conocido-como-mean/mean_small_vertical_kaasp5.png)

El acr√≥nimo **MEAN** viene de (_M_)ongo + (_E_)xpress + (_A_)ngular + (_N_)ode

## MongoDB

![MongoDB](/images/desarrollo-full-stack-javascript-tambien-conocido-como-mean/Icon_MongoDB_by_xkneo.png)

[Mongo](http://www.mongodb.org/) es una base de datos no relacional (**NoSQL**) de c√≥digo abierto que guarda los datos en documentos tipo **JSON** (_JavaScript Object Notation_) pero en forma binaria (BSON) para hacer la integraci√≥n de una manera m√°s r√°pida. Se pueden ejecutar operaciones en JavaScript en su consola en lugar de consultas SQL. Adem√°s tiene una gran integraci√≥n con Node.js con los driver propio y con Mongoose. Debido a su flexibilidad es muy escalable y ayuda al desarrollo √°gil de proyectos web.

## ExpressJS

![expressjs](/images/desarrollo-full-stack-javascript-tambien-conocido-como-mean/687474703a2f2f662e636c2e6c792f6974656d732f30563253316e304b3169337931633132326730342f53637265656e25323053686f74253230323031322d30342d31312532306174253230392e35392e3432253230414d2e706e67.png)

[Express](http://expressjs.com/) es un framework por encima de Node.js que permite crear servidores web y recibir peticiones **HTTP** de una manera sencilla, lo que permite tambi√©n crear APIs REST de forma r√°pida.

## AngularJS

![Angular JS tutorial](/images/desarrollo-full-stack-javascript-tambien-conocido-como-mean/square-300x3001_scxhwx-1.png)
[Angular](http://angularjs.org) es un framework JS para la parte cliente o Frontend de una aplicaci√≥n web, que respeta el paradigma MVC y permite crear _Single-Page Applications_ (Aplicaciones web que no necesitan recargar la p√°gina), de manera m√°s o menos sencilla. Es un proyecto mantenido por Google y que actualmente est√° muy en auge.

## Node.js

![Zemanta Related Posts Thumbnail](/images/desarrollo-full-stack-javascript-tambien-conocido-como-mean/nodejs-150x1505_ns3hvi.png)

[Node](http://nodejs.org/) Es un entorno de programaci√≥n en JavaScript para el Backend basado en el motor **V8** de JavaScript del navegador **Google Chrome** y orientado a eventos, no bloqueante, lo que lo hace muy r√°pido a la hora de crear servidores web y emplear tiempo real. Fue creado en 2009 y aunque a√∫n es joven, las √∫ltimas versiones lo hacen m√°s robusto adem√°s de la gran comunidad de desarrolladores que posee. No solo se utiliza en servidor, se ha extendido tanto que se emplea en Stylus, un preproccesador CSS, en Grunt un gestor de tareas basado en JavaScript y en varias cosas m√°s como tests, etc‚Ä¶

Una de las principales ventajas de **MEAN** es que emplea el mismo lenguaje de programaci√≥n en todas las partes de la aplicaci√≥n lo que permite que una persona pueda manejarse en todos los √°mbitos de una aplicaci√≥n web moderna aunque se especialice en uno de ellos. De esta manera se colabora m√°s en los proyectos y el desarrollo es m√°s continuo.

Esto, a√±adido a las pruebas automatizadas y los test unitarios, los repositorios **git** como GitHub o Bitbucket, los **servidores de integraci√≥n continua** y las **PaaS** como **Heroku** o **Nodejitsu** hacen que el desarrollo web moderno sea m√°s divertido y √°gil.

Existen varios proyectos de esqueletos de aplicaci√≥n con el stack MEAN, uno de los m√°s conocidos es [MEAN.io](http://mean.io). Por mi parte **estoy desarrollando mi propio** [**MEAN Boilerplate**](https://github.com/carlosazaustre/mean-boilerplate)¬†(con casinos y furcias) con estas propiedades a√±adiendole [**Redis**](http://redis.io/) para el almacenaje de sesiones y **[Stylus](http://learnboost.github.io/stylus/)** como preprocessador CSS. Tambi√©n uso [**PassportJS**](http://passportjs.org) para el login y registro con Facebook y Twitter. [El proyecto est√° en GitHub](https://github.com/carlosazaustre/mean-boilerplate) y os animo a colaborar o a que lo us√©is en vuestros proyectos.

Llevo una semana en desarrollo con ello y poco a poco lo voy a ir ampliando y mejorando. Ir√© contando en el blog las cosas que vaya aprendiendo. Pod√©is contactar conmigo en [Twitter](http://twitter.com/carlosazaustre) y en [Google+](http://google.com/+CarlosAzaustre)

**Fuente**:¬†[http://addyosmani.com/blog/full-stack-javascript-with-mean-and-yeoman/](http://addyosmani.com/blog/full-stack-javascript-with-mean-and-yeoman/)

[**¬øQuieres m√°s?** Descarga el ebook en espa√±ol sobre **desarrollo web √°gil con AngularJS y GulpJS**. ![](</blog/content/images/![](https://carlosazaustre.es/blog/content/images/2015/01/adwords_728x90.jpg)es/blog/ebook-angular/?utm_source=mean-post>)

</article>

---

<article slug="tutorial-aplicacion-web-con-angularjs-y-routing" date="2014-01-20" url="https://carlosazaustre.es/blog/tutorial-aplicacion-web-con-angularjs-y-routing">

# Tutorial de AngularJS. Ejemplo de Aplicaci√≥n web con AngularJS y Routing

**Fecha:** 2014-01-20
Hace unos d√≠as vimos [como crear una simple page application con Angular JS partiendo de una API Rest con Node](/tutorial-ejemplo-de-aplicacion-web-con-angular-js-y-api-rest-con-node/). hoy vamos a ver otro ejemplo de aplicaci√≥n web con AngularJS pero en lugar de usar llamadas HTTP vamos a ver como tratar rutas y plantillas dentro de la parte _frontend_ sin recargar la p√°gina.

![Angular JS tutorial](/images/tutorial-aplicacion-web-con-angularjs-y-routing/square-300x3001_scxhwx.png)

Lo primero, al igual que la otra vez, veamos cual ser√° la estructura de archivos de la aplicaci√≥n:

```shell
main.js
index.html
/pages
--- home.html
--- acerca.html
--- contacto.html
```

- **`main.js`** contiene el c√≥digo JavaScript de la aplicaci√≥n, aqu√≠ manejaremos las rutas y los controladores
- **`index.html`** es la p√°gina principal donde inyectaremos las vistas
- **`pages`** es un directorio donde estar√°n las plantillas que ser√°n inyectadas en index.html como vistas

Veamos que tenemos que poner en `main.js`

```js
// Creaci√≥n del m√≥dulo
var angularRoutingApp = angular.module("angularRoutingApp", ["ngRoute"]);

// Configuraci√≥n de las rutas
angularRoutingApp.config(function ($routeProvider) {
  $routeProvider
    .when("/", {
      templateUrl: "pages/home.html",
      controller: "mainController",
    })
    .when("/acerca", {
      templateUrl: "pages/acerca.html",
      controller: "aboutController",
    })
    .when("/contacto", {
      templateUrl: "pages/contacto.html",
      controller: "contactController",
    })
    .otherwise({
      redirectTo: "/",
    });
});

angularRoutingApp.controller("mainController", function ($scope) {
  $scope.message = "Hola, Mundo!";
});

angularRoutingApp.controller("aboutController", function ($scope) {
  $scope.message = 'Esta es la p√°gina "Acerca de"';
});

angularRoutingApp.controller("contactController", function ($scope) {
  $scope.message =
    'Esta es la p√°gina de "Contacto", aqu√≠ podemos poner un formulario';
});
```

Expliquemos cada parte, primero creamos el modulo que es el que engloba los controladores, rutas y dem√°s configuraciones, en este caso lo hemos llamado `angularRoutingApp`. Despu√©s hemos creado las rutas con la directiva `$routeProvider`, pero atenci√≥n, para que esto funcione, debemos pasarle el m√≥dulo **`ngRoute`** a nuestro m√≥dulo para que lo entienda y a√±adir la librer√≠a **`angular-route.js`** (o `angular-route.min.js`) ya que la librer√≠a est√°ndar de Angular no controla las rutas.

Con esto ya podemos crear rutas que como pod√©is ver se llaman con el m√©todo `when` al que pasamos la URL en si, la plantilla que se ha de cargar y el controlador que manejar√° el comportamiento de ese pedazo de la aplicaci√≥n.

Despu√©s hemos a√±adido los controladores en los que √∫nicamente ponemos un mensaje dentro del √°mbito del controlador que ser√° diferente para cada p√°gina que se cargue.

Ahora pasemos a ver el `index.html`

```html
<!-- index.html -->
<html ng-app="angularRoutingApp">
  <head>
    <link
      rel="stylesheet"
      href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css"
    />
  </head>
  <body ng-controller="mainController">
    <header>
      <h1>Angular Routing</h1>
      <nav>
        <ul>
          <li><a href="#">Inicio</a></li>
          <li><a href="#acerca">Acerca de</a></li>
          <li><a href="#contacto">Contacto</a></li>
        </ul>
      </nav>
    </header>
    <div id="main">
      <!-- Aqu√≠ inyectamos las vistas -->
      <div ng-view></div>
    </div>
    <script src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.7/angular.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.3/angular-route.js"></script>
    <script src="main.js"></script>
  </body>
</html>
```

Al igual que el anterior ejemplo, indicamos a todo el HTML que utilizaremos la aplicaci√≥n `angularRoutingApp` con la directiva **`ng-app`**, los controladores con **`ng-controller`** en el body y lo m√°s importante, la directiva **`ng-view`** es donde indicamos en que parte del HTML vamos a inyectar las vistas.

Por √∫ltimo nos quedan las plantillas que no son m√°s que unas sencillas lineas de HTML que usamos para inyectar contenido. Estas son las 3 que hemos creado para el ejemplo:

```html
<div class="jumbotron text-center">
  <h1>Acerca De</h1>
  <p>{{ message }}</p>
</div>

<div class="jumbotron text-center">
  <h1>Contacto</h1>
  <p>{{ message }}</p>
</div>

<div class="jumbotron text-center">
  <h1>P√°gina Principal</h1>
  <p>{{ message }}</p>
</div>
```

Todas tienen la variable `message` cuyo valor es diferente en cada una debido a los controladores que hemos escrito en **`main.js`**

Y con esto ya tenemos una sencilla aplicaci√≥n web con rutas que no refresca la p√°gina con cada enlace. Muy diferente a aquellos tiempos oscuros cuando se usaba _PHP Include_ o Iframes para mostrar diferentes secciones.

![angularjsapprouting](/images/tutorial-aplicacion-web-con-angularjs-y-routing/Screen-Shot-2014-01-20-at-15_04_28_jzqdvq.png)

El c√≥digo de este ejemplo esta disponible en el [siguiente repositorio de github](https://github.com/carlosazaustre/angular-routing).

</article>

---

<article slug="tutorial-ejemplo-de-aplicacion-web-con-angular-js-y-api-rest-con-node" date="2014-01-13" url="https://carlosazaustre.es/blog/tutorial-ejemplo-de-aplicacion-web-con-angular-js-y-api-rest-con-node">

# Tutorial de AngularJS. Ejemplo de aplicaci√≥n web conectada a una API REST con Node

**Fecha:** 2014-01-13
[AngularJS](/empezando-con-angular-js) es uno de los frameworks m√°s populares para desarrollar aplicaciones del lado cliente (Frontend) con JavaScript.

√âste tutorial, [basado en √©ste otro de Scotch.io](https://scotch.io/tutorials/javascript/creating-a-single-page-todo-app-with-node-and-angular) nos sirve para empezar a desarrollar profesionalmente con AngularJS.

Vamos a ver como crear una [_Single Page Application_](https://en.wikipedia.org/wiki/Single-page_application), y como conectarla a una [API REST construida con NodeJS](/como-crear-una-api-rest-usando-node-js/) y Mongo como base de datos. Completando as√≠ el Stack tecnol√≥gico conocido como, [MEAN](http://mean.io).

### Arquitectura de la aplicaci√≥n web SPA + API REST

Y antes de seguir con el c√≥digo, veamos un diagrama visual del flujo que va a seguir aplicaci√≥n con las tecnolog√≠as que empleamos en cada parte:

![Esquema arquitectura de apliaci√≥n web con AngularJS y NodeJS](/images/tutorial-ejemplo-de-aplicacion-web-con-angular-js-y-api-rest-con-node/tutorial-angular-node-esquema-arquitectura-aplicacion-web.png)

Desde el frontend, con Angular hacemos llamadas AJAX a nuestra API en el servidor Node. Este consulta a la base de datos (Mongo) dependiendo de la llamada realizada. La BD devuelve el objeto como respuesta a Node y este lo sirve como JSON a Angular que lo muestra en el frontend sin necesidad de recargar la p√°gina, creando as√≠ una _Single Page Application_.

### Estructura de archivos

La estructura de archivos va a ser muy sencilla, no vamos a modularizar ni a√±adir [tareas con Grunt](/automatizar-tareas-en-javascript-con-grunt-js/) para enfocarnos en los conceptos de Angular. Estos son los ficheros que tendremos

```javascript
- public
----- index.html
----- main.js
server.js
package.json
```

- `main.js` contendr√° toda la l√≥gica del frontend, es donde tendremos los controladores de Angular JS y llamaremos via AJAX al API para pedir contenido, borrarlo, etc..
- `index.html` ser√° nuestro √∫nico fichero html y por tanto nuestra √∫nica p√°gina, toda la funcionalidad ser√° en ella.
- `server.js` es nuestro fichero Node donde estar√° la configuraci√≥n del servidor y las rutas a nuestro API.
- `package.json` es el fichero donde est√°n los datos de la aplicaci√≥n y las dependencias utlizadas, como toda aplicaci√≥n Node.

Empezaremos por **package.json** para indicar que dependencias vamos a necesitar, que simplemente ser√°n _Express_ y _Mongoose_:

```javascript
{
	"name": "angular-todo",
	"version": "0.0.1",
	"description": "Simple Angular TODO app based in MEAN stack",
	"main": "server.js",
	"dependencies": {
		"express": "~3.x",
		"mongoose": "latest"
	}
```

Despu√©s de esto, en una terminal ejecutamos `npm install` y se nos instalar√°n las dependencias para poder empezar a utilizarlas.

### Implementando nuestro API REST

Ahora pasaremos al archivo **server.js** que ser√° el fichero donde est√© la configuraci√≥n del servidor, as√≠ como la conexi√≥n a la base de datos y las rutas de nuestro API.

En los comentarios del c√≥digo he explicado a grandes rasgos que hace cada l√≠nea.

Como todo fichero de servidor de Node, primero a√±adimos las librer√≠as que necesitamos (express y mongoose).

```javascript
//server.js

var express = require("express");
var app = express();
var mongoose = require("mongoose");

// Conexi√≥n con la base de datos
mongoose.connect("mongodb://localhost:27017/angular-todo");

// Configuraci√≥n
app.configure(function () {
  // Localizaci√≥n de los ficheros est√É¬°ticos
  app.use(express.static(__dirname + "/public"));
  // Muestra un log de todos los request en la consola
  app.use(express.logger("dev"));
  // Permite cambiar el HTML con el m√©todo POST
  app.use(express.bodyParser());
  // Simula DELETE y PUT
  app.use(express.methodOverride());
});

// Escucha en el puerto 8080 y corre el server
app.listen(8080, function () {
  console.log("App listening on port 8080");
});
```

#### Creaci√≥n del modelo de datos

El siguiente paso es construir el modelo de la base de datos que modele las tareas o ‚ÄúToDos‚Äù. Esto lo hacemos con _Mongoose_ y nuestro modelo ser√° muy sencillo ya que solo cuenta con un atributo ‚ÄúText‚Äù que define la tarea. Este c√≥digo lo insertamos en **server.js** antes de la l√≠nea donde se inicia el servidor con `app.listen`

```javascript
// Definici√≥n de modelos
var Todo = mongoose.model("Todo", {
  text: String,
});
```

#### Definici√≥n de rutas o _Endpoints_ del API

Tras esto nos queda construir las rutas que llamar√°n a nuestro API y que utilizaremos desde el frontend. En esta tabla se muestran las 3 llamadas que vamos a implementar y que definir√°n nuestra API:

| HTTP   | URL                | Descripci√≥n                        |
| ------ | ------------------ | ---------------------------------- |
| GET    | `/api/todos`       | Devuelve todas las tareas de la BD |
| POST   | `/api/todos`       | Crea una tarea                     |
| DELETE | `/api/todos/:todo` | Borra una tarea                    |

Veamos las rutas. Estas ir√°n tambi√©n en el archivo `server.js`, justo antes de cuando se inicia el servidor y escucha en el puerto con `app.listen`

```javascript
// Rutas de nuestro API
// GET de todos los TODOs
app.get("/api/todos", function (req, res) {
  Todo.find(function (err, todos) {
    if (err) {
      res.send(err);
    }
    res.json(todos);
  });
});

// POST que crea un TODO y devuelve todos tras la creaci√≥n
app.post("/api/todos", function (req, res) {
  Todo.create(
    {
      text: req.body.text,
      done: false,
    },
    function (err, todo) {
      if (err) {
        res.send(err);
      }

      Todo.find(function (err, todos) {
        if (err) {
          res.send(err);
        }
        res.json(todos);
      });
    }
  );
});

// DELETE un TODO espec√≠fico y devuelve todos tras borrarlo.
app.delete("/api/todos/:todo", function (req, res) {
  Todo.remove(
    {
      _id: req.params.todo,
    },
    function (err, todo) {
      if (err) {
        res.send(err);
      }

      Todo.find(function (err, todos) {
        if (err) {
          res.send(err);
        }
        res.json(todos);
      });
    }
  );
});

// Carga una vista HTML simple donde ir√° nuestra Single App Page
// Angular Manejar√° el Frontend
app.get("*", function (req, res) {
  res.sendfile("./public/index.html");
});
```

Gracias a Mongoose podemos buscar(**find**), borrar (**remove**) y crear(**create**) de una manera muy sencilla. La √∫ltima ruta no corresponde al API, si no que ser√° la encargada de mostrar el html donde ejecutaremos toda la l√≥gica del Frontend.

### Desarrollo de la parte Frontend con AngularJS

Todo lo que hemos hecho hasta ahora corresponde al Backend de la aplicaci√≥n. Ahora empezaremos con lo que de verdad importa, el desarrollo frontend con Angular.

Tendremos toda la l√≥gica en el fichero **main.js**, primero crearemos un modulo que ser√° el que defina toda nuestra aplicaci√≥n

```javascript
angular.module("angularTodo", []);
```

y seguidamente la funci√≥n `mainController` que ser√° el controlador de la aplicaci√≥n

```javascript
function mainController($scope, $http) {
  $scope.formData = {};

  // Cuando se cargue la p√°gina, pide del API todos los TODOs
  $http
    .get("/api/todos")
    .success(function (data) {
      $scope.todos = data;
      console.log(data);
    })
    .error(function (data) {
      console.log("Error: " + data);
    });

  // Cuando se a√±ade un nuevo TODO, manda el texto a la API
  $scope.createTodo = function () {
    $http
      .post("/api/todos", $scope.formData)
      .success(function (data) {
        $scope.formData = {};
        $scope.todos = data;
        console.log(data);
      })
      .error(function (data) {
        console.log("Error:" + data);
      });
  };

  // Borra un TODO despues de checkearlo como acabado
  $scope.deleteTodo = function (id) {
    $http
      .delete("/api/todos/" + id)
      .success(function (data) {
        $scope.todos = data;
        console.log(data);
      })
      .error(function (data) {
        console.log("Error:" + data);
      });
  };
}
```

Pasemos a explicar algunos conceptos de esta parte.

En el objeto `$scope` se almacenan todas las variables dentro del √°mbito del controlador. En el HTML, todo lo que se encuentre dentro de la directiva `ng-controller=‚ÄùmainController` es controlable desde el objeto `$scope`.

Y el objeto `$http` es el que hace toda la magia, ya que nos permite hacer llamadas AJAX a nuestro API con pocas l√≠neas de c√≥digo.

Con estos dos objetos creamos las 3 funciones que hacen las 3 peticiones que acepta nuestra API, el **GET** de todas las tareas almacenadas, el **POST** de creaci√É¬≥n de una nueva tarea y el **DELETE** de una tarea.

Y por √∫ltimo nos queda el **HTML** en el que maquetaremos los resultados que nos trae el API.

Necesitamos indicar que parte de la p√°gina corresponde a la aplicaci√≥n Angular, eso lo hacemos con la directiva `ng-app`. En nuestro caso lo hemos puesto en el tag `<html>` ya que todo el HTML, es la aplicaci√≥n.

```javascript
<html lang="en" ng-app="angularTodo">...
```

Una aplicaci√≥n Angular puede tener varios controladores, en este ejemplo solo tenemos uno, el `mainController`, y debemos decir en el HTML que parte es la corresponde a esta funci√≥n, eso lo hacemos con la directiva `ng-controller`. En nuestro caso la hemos puesto en el body porque no hay m√°s. Si tuviesemos m√°s controladores, se pueden poner en otros `section`, `article` o `div` y tener varios en la p√°gina.

```javascript
<body ng-controller="mainController">...
```

Para mostrar la lista de tareas que devuelve el `GET`, utilizaremos la directiva `ng-repeat` que nos permite crear una iteraci√≥n al estilo de un `for`

```javascript
<div class="checkbox" ng-repeat="todo in todos">
	<label>
    	<input type="checkbox" ng-click="deleteTodo(todo._id)"> {{ todo.text }}
	</label>
</div>
```

Con esto creamos un input de tipo checkbox por cada objeto que nos devuelve la llamada al API. Y con la directiva `ng-click` creamos un evento que escucha cuando marquemos el checkbox para llamar a la funci√≥n deleteTodo() a la cual se le pasa como par√°metro el id de la tarea para que llame al DELETE del API.

Por √∫ltimo, tenemos un formulario con un input de tipo texto donde escribimos tareas nuevas y las mandamos por POST al API. Aqu√≠ usamos una nueva directiva, `ng-model`, que es la que controla el Modelo en este caso la tarea y su texto, y de nuevo `ng-click` en el bot√≥n de submit para llamar a la funci√≥n `createTodo()` del controlador que hace el `POST` al API y a la Base de datos.

```javascript
<form>
	<div class="form-group">
		<input type="text" class="form-control input-lg text-center" placeholder="Inserta una tarea nueva" ng-model="formData.text">
	</div>
	<button class="btn btn-primary btn-lg" ng-click="createTodo()">
		A√±adir
	</button>
</form>
```

Con esto estar√≠a todo. Solo nos queda incluir las librer√≠as de `jQuery` y `Angular` como scripts al final de la p√°gina y y tambi√©n una hoja de estilos para que no sea tan fea la aplicaci√≥n. Hemos usado un [CDN](http://cdnjs.com/) para ello y as√≠ no tenemos que preocuparnos en bajarnos la librer√≠a y a√±adirla al proyecto, para centrarnos en entender los conceptos

El c√≥digo HTML completo ser√≠a as√≠:

```javascript
<!doctype html>
<html lang="en" ng-app="angularTodo">
<head>
	<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Angular TODO app</title>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css">
</head>
<body ng-controller="mainController">
	<div class="container">
    <!--Cabecera-->
    	<div class="jumbotron text-center">
        	<h1>Angular TODO List <span class="label label-info">{{ todos.length }}</span></h1>
        </div>
        <!--Lista de Todos-->
        <div id="todo-list" class="row">
        	<div class="col-sm-4 col-sm-offset-4">
            	<div class="checkbox" ng-repeat="todo in todos">
                	<label>
                    	<input type="checkbox" ng-click="deleteTodo(todo._id)"> {{ todo.text }}
                    </label>
                 </div>
             </div>
         </div>
         <!--Formulario para insertar nuevos Todo--> 			<div id="todo-form" class="row">
        	<div class="col-sm-8 col-sm-offset-2 text-center">
            	<form>
                	<div class="form-group">
                    	<input type="text" class="form-control input-lg text-center" placeholder="Inserta una tarea nueva" ng-model="formData.text">
                    </div>
                    <button class="btn btn-primary btn-lg" ng-click="createTodo()">A√±adir</button>
                </form>
            </div>
        </div>
    </div>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script> <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.8/angular.min.js"></script> <script src="main.js"></script>
</body>
</html>
```

Y ya tenemos nuestra aplicaci√≥n de _ToDos_. Solo tenemos que correr el servidor en un terminal con node server.js e ir a un navegador a la URL http://localhost:8080 y tendremos algo como esto

![Ejemplo de Aplicaci√≥n web on AngularJS y un API REST con NodeJS](/images/tutorial-ejemplo-de-aplicacion-web-con-angular-js-y-api-rest-con-node/tutorial-angularjs-node-ejemplo-aplicacion-web.png)

##### Referencias

**Puedes ver una versi√≥n en ingl√©s de este ejemplo en el Blog [Scotch.io](http://scotch.io/tutorials/javascript/creating-a-single-page-todo-app-with-node-and-angular), escrito por [Chris Sevilleja](https://twitter.com/sevilayha/).**

</article>

---

<article slug="subiendo-archivos-estaticos-aws-s3-con-node" date="2013-09-19" url="https://carlosazaustre.es/blog/subiendo-archivos-estaticos-aws-s3-con-node">

# Subir archivos est√°ticos en AWS S3 con Node.js y Grunt.js

**Fecha:** 2013-09-19
S3 (_Amazon **S**imple **S**torage **S**ervice_) es un Disco Duro en la nube que forma parte los _Amazon Web Services_. Suele ser √∫til para almacenar los ficheros est√°ticos de nuestras aplicaciones web si queremos repartir la carga entre los servidores.

En una aplicacion Node.js, t√≠picamente, tenemos los ficheros est√°ticos en un directorio `/public` o `/static` y podemos subirlo a una plataforma como Heroku con todo el repositorio. Pero si queremos servirlos desde S3 podemos realizarlo facilmente con el [automatizador de tareas Grunt.js](/automatizar-tareas-en-javascript-con-grunt-js/ "Automatizar tareas con Grunt.js"). Veamos como hacerlo.

![Grunt.js](/images/subiendo-archivos-estaticos-aws-s3-con-node/grunt-logo_g3kshp.png)

Primero necesitamos [tener una cuenta en Amazon Web Services](/como-crear-un-servidor-web-con-amazon-web-services/) y activar un _bucket_ de S3. Necesitaremos un _Access Key ID_ y un _Secret Access Key_ para poder identificarnos con el API y acceder a los servicios. En la parte de c√≥digo necesitamos tener [**Grunt.js** instalado como cont√© en un anterior pos](/automatizar-tareas-en-javascript-con-grunt-js/)t e instalar esta nueva librer√≠a de desarrollo en nuestro proyecto.

```
npm install grunt-aws --save-dev
```

Con el flag `--save-dev` salvamos la librer√≠a dentro del archivo `package.json` de nuestro proyecto.

Una vez hecho esto, creamos una nueva tarea en nuestro fichero [Gruntfile.js](/automatizar-tareas-en-javascript-con-grunt-js/) donde automatizamos las tareas, que llamaremos **s3** y tendr√° esta pinta:

```javascript
s3: {
    options: {
        accessKeyId: "TU_AWS_ACCESS_KEY_ID",
        secretAccessKey: "TU_AWS_SECRET_ACCESS_KEY",
        bucket: "NOMBRE_DE_TU_BUCKET_S3"
    },
    build: {
        cwd: "public/",
        src: "**"
    }
}
```

Con esto le decimos a Grunt que tenemos una tarea llamada `s3` y que cuando se ejecute, se conecte a nuestro servicio S3, recoja todos los ficheros, sin importar la extensi√≥n, dentro de la carpeta `/public` de nuestra aplicaci√≥n y los suba a nuestro _bucket_ en S3.

Para que se ejecute esta tarea simplemente tenemos que llamar desde consola con este comando:

```
grunt s3
```

O agregar la tarea dentro de otra como puede ser `deployment` para agilizar nuestro desarrollo y _releases_.

</article>

---

<article slug="empezando-con-angular-js" date="2013-09-09" url="https://carlosazaustre.es/blog/empezando-con-angular-js">

# ¬øQu√© es AngularJS? Primeros pasos para aprenderlo

**Fecha:** 2013-09-09
[AngularJS](http://angularjs.org)¬†es un framework MVC de JavaScript para el Desarrollo Web Front End que permite crear aplicaciones <b>SPA</b> <i>Single-Page Applications</i>. Entra dentro de la familia de frameworks como <a href="http://backbonejs.org">BackboneJS</a> o <a href="http://backbonejs.org">EmberJS</a>.

Con tanta oferta de frameworks se nos hace dif√≠cil elegir cu√°l usar en nuestras aplicaciones, qu√© ventajas tienen unos frente a otros, etc. En esta entrada voy a comentar que hace a AngularJS diferente al resto y unos cuantos enlaces a recursos online donde aprender a usar este framework y coger soltura. All√° vamos.

‚òùÔ∏è**ACTUALIZACI√ìN**: [Nueva entrada en el blog con un sencillo tutorial de **c√≥mo crear una aplicaci√≥n web con Angular JS y una API REST en Node**](/tutorial-ejemplo-de-aplicacion-web-con-angular-js-y-api-rest-con-node/).

Anteriormente en la parte Front-End de las aplicaciones web s√≥lo ten√≠amos a jQuery (adem√°s de otras librer√≠as parecidas como Mootools, Prototype,‚Ä¶) para ayudarnos con el c√≥digo JavaScript del cliente. Pod√≠amos manipular el DOM de una forma m√°s sencilla, a√±adir efectos, llamadas AJAX, etc‚Ä¶ pero no ten√≠amos un patr√≥n a seguir. Todo el c√≥digo JS iba en funciones que √≠bamos creando seg√∫n necesit√°ramos, lo que provocaba que con el tiempo el c√≥digo fuera dif√≠cilmente manejable y se convirtiese en el temido _Spaguetti Code_.

Por suerte surgieron frameworks que implementaban el patr√≥n MVC (Modelo, Vista, Controlador) y nos ayudaban a separar conceptos. El m√°s conocido es BackboneJS, que surgi√≥ en 2010 creada por **Jeremy Ashkenas** (Creador tambi√©n de [CoffeeScript](http://coffeescript.org)) y depende de otras 2 librer√≠as: jQuery y Underscore.js Es usado por m√∫ltiples Start-ups como [Pinterest](http://pinterest.com), [Foursquare](http://foursquare.com), [AirBnB](http://airbnb.com), [Trello](http://trello.com), etc‚Ä¶

BackboneJS te permite crear tu app r√°pidamente aunque en ocasiones es complicado de utilizar. La mayor√≠a de los desarrolladores eligen BackboneJS porque parece la opci√≥n m√°s segura, lleva m√°s tiempo entre nosotros, hay mucha documentaci√≥n sobre √©l y est√° mantenido por una gran comunidad.

![](https://carlosazaustre.es/blog/content/images/2015/02/square_odd9l7.png)

Sin embargo AngularJS est√° pisando fuerte. Aunque su primera versi√≥n es de 2009, se ha hecho muy popular a finales de 2012 y ahora en 2013 est√° en pleno auge. Tanto que ya se habla de una nueva _technology stack_ como antes era **LAMP** (**L**inux + **A**pache + **M**ySQL + **P**HP) ahora la tendencia es **[MEAN](http://www.mean.io/)** (**M**ongoDB/**M**ongoose + **E**xpressJS + **A**ngularJS + **N**odeJS), lo que tambi√©n se traduce a aplicaciones _JavaScript End-to-End_. AngularJS est√° mantenido por Google y bastante comunidad. Tambi√©n como punto a su favor est√° lo sencillo que crear Tests unitarios y _End-to-End_ con [Jasmine](http://pivotal.github.io/jasmine/) y [Karma](http://karma-runner.github.io/0.10/index.html), algo que suele ser un poco costoso al principio.

Este es un ejemplo de como se implementa el patr√≥n MVC en AngularJS:

```javascript
//Model: Objetos JavaScript
$scope.files = ["foo", "bar", "baz"];
```

```html
<!-- View: HTML -->
<div ng-repeat="f in files"></div>
```

```javascript
//Controller: C√≥digo Javascript
function addFile(fileName) {
  $scope.files.push(fileName);
}
```

lo que da como resultado:

```shell
foo
bar
baz
```

AngularJS permite extender el vocabulario HTML con directivas y atributos, manteniendo la sem√°ntica y sin necesidad de emplear librer√≠as externas como [jQuery](http://jquery.com) o [Underscore.js](http://underscorejs.org) para que funcione. Para aprender a utilizar este framework en poco tiempo os recomiendo sig√°is estos pasos que [Joel Hooks cita en su blog](http://joelhooks.com/blog/2013/08/03/learn-angularjs-in-a-weekend/):

### 1. [Tutorial oficial de AngularJS](http://docs.angularjs.org/tutorial)

Google ha puesto a disposici√≥n de nosotros en la p√°gina oficial del proyecto un [tutorial paso a paso](http://docs.angularjs.org/tutorial) a trav√©s de una sencilla aplicaci√≥n web (Un cat√°logo de Smartphones) que nos sirve para entender lo b√°sico y el vocabulario. La √∫nica contra de este material es que utiliza como plantilla el proyecto _[angular-seed](https://github.com/angular/angular-seed)_ que aunque es bueno para aprender, no es recomendable para un proyecto real que necesite escalar. Aun as√≠, empezar por aqu√≠ es un buen paso.

### 2. Video-Tutoriales de [Egghead.io.](http://egghead.io)

Una vez completado el tutorial el siguiente paso es echar un vistazo a los videos de [John Lindquist, un experto desarrollador en AngularJS](http://egghead.io). Son v√≠deos cortos, de no m√°s de 8 minutos cada uno, en los que entra en detalle en los conceptos m√É¬°s dif√≠ciles de AngularJS. Aunque no entiendas todo de primeras no importa, ten estos v√≠deos presente para m√°s adelante.

### 3. Un vistazo a una¬†[Aplicaci√≥n AngularJS real](https://github.com/angular-app/angular-app)

Ahora es momento de ver las ‚Äútripas‚Äù de una aplicaci√≥n AngularJS que funciona en el mundo real. El mejor ejemplo es el c√≥digo que desarrollaron **Peter Bacon Darwin** y **Pawel Kozlowsk**i para el libro [_Mastering Web Application with AngularJS_](http://www.packtpub.com/angularjs-web-application-development/book). El [c√≥digo fuente est√° disponible en GitHub](https://github.com/angular-app/angular-app) y podemos ver la estructura de directorios, el uso de m√≥dulos, testing, comunicaci√≥n con un API RESTful en el Back-End, seguridad, etc. Es una aplicaci√≥n 100% MEAN !:)

### 4. Crea tu primera aplicaci√≥n con [Ng-Boilerplate.](https://github.com/joshdmiller/ng-boilerplate)

Llegados a este punto ya deber√≠amos tener bastantes conocimientos para construir una aplicaci√≥n con AngularJS. Para ello podemos utilizar el proyecto [ng-boilerplate](https://github.com/joshdmiller/ng-boilerplate)¬†el cual es una buena base para empezar a desarrollar una aplicaci√≥n v√É¬°lida para un entorno de producci√≥n al contrario que [angular-seed ](https://github.com/angular/angular-seed) el cual solo es v√°lido para aprender la tecnolog√≠a.

Si consigues llegar hasta aqu√≠, tendr√°s un buen conocimiento del desarrollo de aplicaciones web usando AngularJS, yo me encuentro ahora mismo entre la 2¬™ y 3¬™ etapa y voy viendo los avances, por lo tanto recomiendo seguir estos pasos si est√°s interesado en este nuevo framework, el cu√°l creo que en poco tiempo pasar√° a ser bastante m√°s usado que Backbone.

</article>

---

<article slug="tessel-el-microcontrolador-programable-en-javascript" date="2013-09-06" url="https://carlosazaustre.es/blog/tessel-el-microcontrolador-programable-en-javascript">

# Tessel, el microcontrolador programable en JavaScript

**Fecha:** 2013-09-06
![tessel-logo-horizontal](/images/tessel-el-microcontrolador-programable-en-javascript/tessel-logo-horizontal_ci3qhl.png)

Tessel, tambi√©n conocido como [Technical.io](http://technical.io), es un proyecto de Hardware _Open-Source_ que consiste en un micro-controlador, del estilo a [Arduino](http://www.arduino.cc/), pero programable con JavaScript, demostrando una vez m√°s la versatilidad de este [lenguaje de programaci√≥n ya presente en todas las partes del desarrollo web](/javascript/).

![teardown2](/images/tessel-el-microcontrolador-programable-en-javascript/teardown2_mc3p3f.png)

Adem√°s de la placa y la MicroSD, se han desarrollado diferentes m√≥dulos para a√±adirle mas funcionalidad como son el aceler√≥metro, un chip RFID, audio, bluetooth, un servo-motor, rel√©s, y sensores de temperatura y humedad. Puede programarse directamente desde un USB, sin necesidad de utilizar cables ethernet, WiFi, teclados externos y pantallas externas como pasa con el mini-ordenador [RaspberryPi](http://www.raspberrypi.org/)

Ayer, d√≠a 5 de septiembre [lanzaron su campa√±a de crowdfunding para conseguir 50.000$](http://www.dragoninnovation.com/projects/22-tessel) y as√≠ poder poner en producci√≥n el prototipo y sacarlo a la venta por un precio razonable y en solo 3 horas tras el lanzamiento de la campa√±a superaron el 100% de la financiaci√≥n necesaria.

Yo por mi parte me apunt√© a la lista de correo y ya he pre-pedido mi Tessel, la versi√≥n b√°sica con un m√≥dulo de clase A, posiblemente pida el aceler√≥metro o el sensor de temperatura. El _Master pack_ tambi√©n est√° muy interesante ya que incluye todos los sensores, pero me parec√≠a un precio demasiado elevado.

![tier_tessel_a](/images/tessel-el-microcontrolador-programable-en-javascript/tier_tessel_a_gcqfj1.png)

Se estima que los env√≠os comiencen en Febrero de 2014. Yo lo espero con ganas y as√≠ volver a recordar mis tiempos en el Ciclo Formativo de Electr√≥nica :D

</article>

---

<article slug="automatizar-tareas-en-javascript-con-grunt-js" date="2013-08-01" url="https://carlosazaustre.es/blog/automatizar-tareas-en-javascript-con-grunt-js">

# Automatizar tareas en JavaScript con Grunt.js

**Fecha:** 2013-08-01
[Grunt.js](http://gruntjs.com/) es una librer√≠a JavaScript que nos permite configurar tareas autom√°ticas y as√≠ ahorrarnos tiempo en nuestro desarrollo y despliegue de aplicaciones webs.

Con un simple fichero JS que llamaremos `Gruntfile`, indicamos las tareas que queremos automatizar con un simple comando y las escribimos en √©l en formato JSON.

![Automatizaci√≥n de tareas con Grunt JS](/images/automatizar-tareas-en-javascript-con-grunt-js/grunt-logo_g3kshp.png)

A continuaci√≥n muestro como ser√≠a este fichero para automatizar las tareas de arranque del servidor y preprocesamiento de archivos stylus a CSS y su minificaci√≥n.

Lo primero que necesitamos es instalar Grunt de manera global en nuestro equipo, doy por hecho que ya tenemos Node.js instalado, si no es as√≠ p√°sate por esta entrada.

Para ello tecleamos:

```shell
$ sudo npm install -g grunt
$ sudo npm install -g grunt-cli
```

Grunt posee diversos plugins para tareas espec√≠ficas, nosotros usaremos `grunt-contrib-watch`, `grunt-contrib-stylus`,¬†`grunt-contrib-cssmin` y `grunt-contrib-bg-shell`. Estas librer√≠as nos permitir√°n vigilar cambiso que hagamos en determinados directorios para as√≠ actuar y ejecutar la tarea que queremos, preprocesar stylus y convertirlo a CSS, minificar el CSS y ejecutar instrucciones por linea de comandos respectivamente.

Para cargar los plugins, debemos incluir en nuestro fichero `Gruntfile.js` las siguientes l√≠neas:

```javascript
grunt.loadNpmTasks("grunt-contrib-watch");
grunt.loadNpmTasks("grunt-contrib-stylus");
grunt.loadNpmTasks("grunt-contrib-cssmin");
grunt.loadNpmTasks("grunt-bg-shell");
```

las tareas que vamos a definir ser√°n las siguientes:

```javascript
// Con √©sta tarea llamada 'compile' llamamos a las
// tareas 'stylus' y 'cssmin' que ahora definiremos
grunt.registerTask("compile", ["stylus", "cssmin"]);

// √â¬âsta tarea llamada 'server' nos permitir√° correr
// el servidor a al vez que las tareas 'compile' y
// 'watch' que ahora definiremos
grunt.registerTask("server", ["bgShell:runNode", "compile", "watch"]);
```

Procedemos a crear las tareas:

- `bgShell:runNode` con ella indicamos un comando para ejecutar por el inteerprete.
- `stylus`: Con ella preprocesamos los ficheros `.styl` que tengamos a un √∫nico fichero .css (Stylus es un preprocesador de CSS como lo son Compass, Sass, Less,‚Ä¶ pero m√°s hipster porque funciona bajo Node.js ;)
- `cssmin`: Con esto minificamos el fichero css resultante en una sola l√≠nea de texto para que sea menos pesado y nuestra aplicaci√≥n web tarde menos en cargar
- `watch`: Gracias a ella cualquier cambio que hagamos en un fichero CSS o STYLUS se dar√° cuenta y ejecutar√° el preprocesamiento para que no tengamos que preocuparnos de resetear nada.

El c√≥digo para definir las tareas ser√≠a algo as√≠:

```javascript
module.exports = function(grunt) {
	grunt.initConfig({
		pkg: grunt.file.readJSON('package.json'),

		bgShell: {
			runNode: {
				cmd: 'node app.js',
				bg: true
			}
		},

		stylus: {
			compile: {
				options: {
					paths: [stylesheetsDir],
					'include css': true
				},
				files: {
					'public/app/css/app.min.css': stylesheetsDir + '/index.styl'
				}
			}
		},

		watch: {
			stylesheets: {
				files: [stylesheetsDir + '/**/*.styl', stylesheetsDir + '/**/*.css'],
				tasks: ['stylus'],
				options: {
					interrupt: true
				}
			}
		}
	});
```

Para arrancar nuestra aplicacieon y hacer correr las tareas, en lugar de ejecutar `node app.js` por ejemplo, tendr√≠amos que ejecutar

```shell
grunt server
```

Puedes ver un ejemplo completo en el siguiente repositorio [grunt-node-sandbox](https://github.com/carlosazaustre/grunt-node-sandbox). Por supuesto se pueden automatizar m√°s cosas, como por ejemplo minificar el JavaScript, generar archivos preconfigurados de backbone, a√±adir etiquetas a nuestros archivos con la fecha, nombre de autor, etc.. Un mont√≥n de cosas que puedes ver por [aqu√≠](http://gruntjs.com/sample-gruntfile)

</article>

---

<article slug="como-crear-un-servidor-web-con-amazon-web-services" date="2013-07-23" url="https://carlosazaustre.es/blog/como-crear-un-servidor-web-con-amazon-web-services">

# C√≥mo configurar un servidor web con Amazon Web Services

**Fecha:** 2013-07-23
A veces necesitamos de un servidor web para _testing_ y no nos sirve con nuestro entorno de desarrollo local porque necesitamos ense√±arle a alguien lo que estamos haciendo y por tanto es necesario que est√© subido en alg√∫n sitio.

La forma antigua de hacer esto era tener un hosting web y subir los archivos por FTP al host y y con la URL del dominio que hab√≠amos comprado ya ten√≠amos un entorno que poder ense√±ar. Esto, hoy en d√≠a, se considera un poco ‚Äúcutre‚Äù, pudiendo hacer uso de las tecnolog√≠as Cloud de las que disponemos. A continuaci√≥n cuento como registrarse en Amazon Web Services y montar un servidor LAMP en una instancia.

La que m√°s recomiendo para ‚Äútrastear‚Äù es abrirse una cuenta en [Amazon Web Services (AWS)](http://aws.amazon.com/) y lanzar una instancia [Elastic Compute Cloud (EC2)](http://aws.amazon.com/ec2/) que b√°sicamente consiste en una m√°quina virtual Linux con al que podemos hacer lo que queramos, y lo m√°s importante, **Amazon te da 1 a√±o gratis para usarlo**, despu√©s del a√±o te cobrar√° por horas de uso y almacenamiento, pero la instancia puedes pararla y terminarla cuando desees. En caso de que quieras dejarla siempre corriendo, puedes llegar a pagar unos 16‚Ç¨ al mes.

![](/images/como-crear-un-servidor-web-con-amazon-web-services/amazon_com_web_services_qepgql.jpg)

El primer paso como digo es hacerse una cuenta en Amazon Web Services, si tienes cuenta en la tienda de Amazon te sirve la misma. Para ello vamos a [aws.amazon.com](http://aws.amazon.com) y pulsamos en **Get Started for free¬†- Launch virtual machines and apps in minutes**

Nos pedir√° nuestros datos para registrarnos, as√≠ como una tarjeta de cr√©dito/d√©bito para en caso de que hagamos uso de alg√∫n servicio no gratuito o para cuando finalice nuestro periodo de prueba. Durante el primer a√±o de uso, **si no tenemos m√°s que una instancia EC2 `t1.micro`, Amazon no nos cobrar√° nada**.

Para verificar que la cuenta es tuya tendremos que verificar nuestra identidad por tel√©fono, pero no hay nada que temer, simplemente nos llamar√° una grabaci√≥n a la que debemos decir la clave que la web nos proporciona, incluso podemos darle los n√∫meros pulsando el teclado del tel√©fono.

![Registrase en AWS](/images/como-crear-un-servidor-web-con-amazon-web-services/Screen-Shot-2013-07-25-at-16_48_30_l14vfb.png)

![Registrase en AWS](/images/como-crear-un-servidor-web-con-amazon-web-services/Screen-Shot-2013-07-25-at-16_48_42_b82pcm.png)

![Registrase en AWS](/images/como-crear-un-servidor-web-con-amazon-web-services/Screen-Shot-2013-07-25-at-16_48_52_lhkoua-1.png)

Una vez verificada la cuenta, te llegar√° un email de que la activaci√≥n est√° completa y ya podr√°s acceder al dashboard de AWS.

![AWS Dashboard](/images/como-crear-un-servidor-web-con-amazon-web-services/Screen-Shot-2013-07-25-at-16_55_07_hdmpd1.png)

Ah√≠ vamos a EC2 y en el panel de control damos a lanzar nueva instancia. Lanzamos el _Quick Launch Wizard_, elegimos crear un _New Key Pair_ y como maquina virtual elegiremos **Ubuntu Server 12.04.2 LTS** que es gratuita para el `t1.micro`. Nos descargamos el fichero `.pem` con la clave privada que hemos generado para poder acceder a la m√°quina virtual y damos a siguiente.

![Elige una m√É¬°quina virtual en AWS](/images/como-crear-un-servidor-web-con-amazon-web-services/Screen-Shot-2013-07-25-at-16_59_34_x0w3vu.png)

Una vez realizados los pasos anteriores ya tendremos nuestra instancia corriendo como vemos en el dashboard

![Instancia EC2 en AWS](/images/como-crear-un-servidor-web-con-amazon-web-services/Screen-Shot-2013-07-25-at-17_04_38_pdjo8h.png)

Ahora para poder acceder via terminal a nuestra m√°quina virtual tenemos la clave privada `.pem` que hemos descargado y una URL del tipo¬†`ec2-50-19-140-229.compute-1.amazonaws.com` que apunta a la IP de nuestra instancia. Para poder acceder v√≠a SSH de una manera m√°s comoda haremos lo siguiente.

```shell
# Copiamos el fichero .pem a nuestro
# directorio ~/.ssh y le damos permisos
# de s√≥lo lectura por nosotros

$ mkdir ~/.ssh
$ copy ~/Downloads/miclave.pem ~/.ssh
$ sudo chmod 400 miclave.pem

# creamos un fichero config dentro de .ssh
# con los siguientes datos

$ sudo nano .ssh/config
Host awshost1
Hostname¬†ec2-50-19-140-229.compute-1.amazonaws.com (inserta el tuyo)
User ubuntu
IdentityFile "~/.ssh/miclave.pem"
```

De esta manera siempre que queramos acceder a nuestra m√°quina v√≠a SSH s√≥lo tenemos que escribir en el terminal

```shell
$ ssh awshost1
```

Ya estamos dentro de la instacia Linux de AWS, para tenerla actualizada es una buena opci√≥n hacer lo siguiente

```shell
$ sudo apt-get update
$ sudo apt-get upgrade
```

Y para poder instalar un entorno LAMP, ejecutamos lo siguiente:

```shell
$ sudo apt-get install tasksel
```

Esto nos abrir√° un men√∫ de opciones donde podremos elegir instalar un LAMP (Linux-Apache-MySQL-PHP) server en pocos minutos.

![Tasksel para instalar LAMP en Linux](/images/como-crear-un-servidor-web-con-amazon-web-services/Screen-Shot-2013-07-25-at-17_19_22_jhte9m.png)

Una vez finalice la instalaci√≥n, tu servidor web est√°tico estar√° ubicado en el directorio `/var/www/`.

Y si vamos a nuestro navegador y ponemos como URL la que nos proporciona la instancia de AWS, del tipo `ec2-50-19-140-229.compute-1.amazonaws.com` podremos ver el siguiente mensaje:

![Apache Web Server](/images/como-crear-un-servidor-web-con-amazon-web-services/Screen-Shot-2013-07-25-at-17_22_30_yfatt2.png)

Eso significa que hemos creado una m√°quina virtual de Linux en una instancia EC2 de AWS, hemos instalado un servidor LAMP y ya podemos servir ficheros est√°ticos y aplicaciones web basadas en PHP en √©l.

Y para ser m√°s cool todav√≠a, **olv√≠date de FTPs** eso es de la √©poca en la que las webs estaban llenas de GIFs, lucecitas y Flash. **Inst√°late Git en tu m√°quina y haz pull de tu repositorio en GitHub**, Bitbucket o donde lo tengas. Si haces eso, Dios matar√° menos gatitos.

**Fuente**: [Startup Engineering ‚Äì Coursera](https://class.coursera.org/startup-001)

</article>

---

<article slug="libros-javascript" date="2013-07-04" url="https://carlosazaustre.es/blog/libros-javascript">

# Los mejores libros recomendados sobre JavaScript y Node.js

**Fecha:** 2013-07-04
_Actualizado: Agosto 2018_

**JavaScript** es [el lenguaje que est√° pegando m√°s fuerte en los √∫ltimos tiempos](/javascript). Ya he hablando largo y tendido sobre este tema en el blog.

Por suerte vivimos en un momento en el que podemos encontrar multitud de tutoriales, documentaci√≥n y ejemplos para aprender cualquier lenguaje que nos interese.

Si quieres iniciarte en JavaScript y lo √∫nico que conoces de √©l es que sirve para poner bonitas las p√°ginas web, te recomiendo los siguientes recursos, libros y tutoriales que te har√°n cambiar de opini√≥n.

> Si nunca has usado Javascript, te recomiendo que sigas [este ‚Äútrack‚Äù de Codeacademy](http://www.codecademy.com/tracks/javascript). Es una buena forma de aprender a programar utilizando JavaScript como lenguaje. A trav√©s de sencillos ejercicios muy din√°micos y con una interfaz muy cuidada, aprendes lo b√°sico en programaci√≥n: funciones, bucles, estructuras de datos, objectos, etc‚Ä¶ Lo tienes en [ingl√©s](http://www.codecademy.com/tracks/javascript) y en [espa√±ol](http://www.codecademy.com/es/tracks/javascript-latinamerica). (Yo recomiendo el ingl√©s).

Si ya est√°s familiarizado con el lenguaje y quieres profundizar en patrones de dise√±o y buenas pr√°cticas de JavaScript (algo que es bastante recomendable) estos libros puedes servirte de ayuda. No he encontrado traducci√≥n al espa√±ol, pero si sabes un poco de ingl√©s, son f√°ciles de seguir y muy buenos.

> [![Eloquent JavaScript](/images/libros-javascript/ejs_gt9otr.png)](http://www.amazon.es/gp/product/B004OEJNQ0/ref=as_li_tf_tl?ie=UTF8&camp=3626&creative=24790&creativeASIN=B004OEJNQ0&linkCode=as2&tag=pa0f-21)

> [**Eloquent JavaScript**](http://www.amazon.es/gp/product/B004OEJNQ0/ref=as_li_tf_tl?ie=UTF8&camp=3626&creative=24790&creativeASIN=B004OEJNQ0&linkCode=as2&tag=pa0f-21) (Marijn Haverbeke)

Un muy buen complemento a los cursos de Codeacademy, para iniciarse en JavaScript y en la programaci√≥n en general. A trav√©s de 12 cap√≠tulos ense√±a lo b√°sico de la programaci√≥n y en su [versi√≥n gratuita online, que se puede seguir desde este enlace](http://eloquentjavascript.net/contents.html), ofrece peque√±os fragmentos de c√≥digo como ejemplo y ejercicios interactivos para ir aprendiendo paso a paso

> [![Javascript the good parts](/images/libros-javascript/cat_ktdcta.gif)](http://www.amazon.es/gp/product/B0026OR2ZY/ref=as_li_ss_tl?ie=UTF8&camp=3626&creative=24822&creativeASIN=B0026OR2ZY&linkCode=as2&tag=pa0f-21)

> [**JavaScript: The Good Parts**](http://www.amazon.es/gp/product/B0026OR2ZY/ref=as_li_ss_tl?ie=UTF8&camp=3626&creative=24822&creativeASIN=B0026OR2ZY&linkCode=as2&tag=pa0f-21)¬†(Douglas Crockford)

En este libro se explica en detalle todos los ‚Äútrucos‚Äù que ofrece JavaScript para dominar el lenguaje. Como hacer herencia prototipada, m√≥dulos, _scopes_, _closures_, _mixins_, _callbacks_ etc. Es un libro corto, de menos de 150 p√°ginas, pero muy f√°cil de leer y muy √∫til. Escrito por Douglas Crockford, Senior Architect en Yahoo y conocido por introducir el formato JSON.

> [![41LeGsiKCfL._UY250_](/images/libros-javascript/41LeGsiKCfL._UY250_.jpg)](https://amzn.to/2MFtq6O) >[**You don't know JS**](https://amzn.to/2MFtq6O) (Kyle Simpson)

Una colecci√≥n que no puede faltar en tu biblioteca (digital o no) t√©cnica son los libros [You don't know JS](https://amzn.to/2MFtq6O) de Kyle Simpson que puedes leer tanto en versi√≥n digital como papel. Tengo a√∫n pendientes por leer algunos de ellos.

> [![JavaScript Pattern](/images/libros-javascript/cat-1_lkvz5z.gif)](http://www.amazon.es/gp/product/B0046RERXE/ref=as_li_tf_tl?ie=UTF8&camp=3626&creative=24790&creativeASIN=B0046RERXE&linkCode=as2&tag=pa0f-21)

> [**JavaScript Patterns**](http://www.amazon.es/gp/product/B0046RERXE/ref=as_li_tf_tl?ie=UTF8&camp=3626&creative=24790&creativeASIN=B0046RERXE&linkCode=as2&tag=pa0f-21) (Stoyan Stefanov)

Este libro es algo m√°s denso que el anterior y mucho m√°s t√©cnico. Aborda las buenas pr√°cticas que deben seguirse en JavaScript as√≠ como patrones de programaci√≥n. Como programar bucles de una manera m√°s eficiente, convenciones en el uso de nombres, uso de m√≥dulos, _prototype_, patrones de dise√±o (_Singleton_, _Iterator_, etc) y patrones de lectura del DOM. Interesante y recomendado cuando ya se tiene soltura con el lenguaje.

> [![cat-2](/images/libros-javascript/cat-2_v4iv9h.gif)](http://www.amazon.es/gp/product/B007XF8PJS/ref=as_li_tf_tl?ie=UTF8&camp=3626&creative=24790&creativeASIN=B007XF8PJS&linkCode=as2&tag=pa0f-21)

> [**Node: Up and Running**](http://www.amazon.es/gp/product/B007XF8PJS/ref=as_li_tf_tl?ie=UTF8&camp=3626&creative=24790&creativeASIN=B007XF8PJS&linkCode=as2&tag=pa0f-21) (Tom Hughes-Croucher & Mike Wilson)

Para adentrarnos en el mundo del BackEnd, este libro es un buen comienzo para iniciarnos con Node. Ofrece un vistazo a los principales patrones de dise√±o en Node, c√≥mo instalarlo en nuestros equipos de desarrollo. Ejemplos pr√°cticos como desarrollar un chat, un clon de Twitter, como acceder a bases de datos, un vistazo a los principales frameworks y librer√≠as como Express y Socket.io.  
Recomendado para una primera toma de contacto con el mundo Node.

> [![O'Reilly.Node for Front-End Developers.Feb 2012](/images/libros-javascript/OReilly_Node-for-Front-End-Developers_Feb-2012_i8faaa.gif)](http://www.amazon.es/gp/product/B0073U0XFM/ref=as_li_tf_tl?ie=UTF8&camp=3626&creative=24790&creativeASIN=B0073U0XFM&linkCode=as2&tag=pa0f-21)

> [**Node for Front-End Developers**](http://www.amazon.es/gp/product/B0073U0XFM/ref=as_li_tf_tl?ie=UTF8&camp=3626&creative=24790&creativeASIN=B0073U0XFM&linkCode=as2&tag=pa0f-21) (Garann Means)

Un libro muy cortito (56 p√°ginas) que sirve como complemento al anterior sobre todo si vienes del mundo Front-End. Una buena gu√≠a para continuar inici√°ndose en SSJS (Server-Side JavaScript) con ejemplos pr√°cticos.

> [![learning_node](/images/libros-javascript/learning_node_w3rjah.jpg)](http://www.amazon.es/gp/product/B0092UB15W/ref=as_li_tf_tl?ie=UTF8&camp=3626&creative=24790&creativeASIN=B0092UB15W&linkCode=as2&tag=pa0f-21)

> [**Learning Node**](http://www.amazon.es/gp/product/B0092UB15W/ref=as_li_tf_tl?ie=UTF8&camp=3626&creative=24790&creativeASIN=B0092UB15W&linkCode=as2&tag=pa0f-21) (Shelley Powers)

Mucho m√°s denso que los anteriores y muy √∫til para profundizar con Node. A lo largo de casi 400 p√°ginas vemos el n√∫cleo de Node, el uso de m√≥dulos, eventos, crear rutas, servidores web est√°ticos, un vistazo al framework Express para crear aplicaciones web, websockets, Socket.io, uso de MongoDB como base de datos, y un largo etc. Incluye ap√©ndices sobre Git, desliegue de aplicaciones en servidores y en entornos Cloud.  
Muy completo y recomendado.

> [![building_node_applications_with_mongodb_and_backbone](/images/libros-javascript/building_node_applications_with_mongodb_and_backbone_ahutid.jpg)](http://www.amazon.es/gp/product/B00AMT35TC/ref=as_li_tf_tl?ie=UTF8&camp=3626&creative=24790&creativeASIN=B00AMT35TC&linkCode=as2&tag=pa0f-21)

> [**Building Node Applications with MongoDB and Backbone**](http://www.amazon.es/gp/product/B00AMT35TC/ref=as_li_tf_tl?ie=UTF8&camp=3626&creative=24790&creativeASIN=B00AMT35TC&linkCode=as2&tag=pa0f-21) (Mike Wilson)

Y ya para rematar, el √∫ltimo libro recomendado. Escrito por uno de los autores de ‚Äú[Node Up and Running](http://www.amazon.es/gp/product/B007XF8PJS/ref=as_li_tf_tl?ie=UTF8&camp=3626&creative=24790&creativeASIN=B007XF8PJS&linkCode=as2&tag=pa0f-21)‚Äù explica en 200 p√°ginas con un ejemplo pr√°ctico de ‚ÄúFull-Stack JavaScript‚Äù el desarrollo de una red social empleando Node para el Servidor, MongoDB para la base de datos y Backbone como framework para la parte cliente.

> [![aprendiendo-javascript-1](/images/libros-javascript/aprendiendo-javascript-1.png)](https://leanpub.com/aprendiendo-javascript) >[**Aprendiendo JavaScript**](https://leanpub.com/aprendiendo-javascript) (Carlos Azaustre)

No pod√≠a dejar de incluir mi propio libro en el que te ense√±o las bases del lenguaje web m√°s demandado a trav√©s de 90 p√°ginas. Desde cero hasta ECMAScript 6. Partiendo de las bases y poco a poco ampli√°ndose hasta ver las nuevas caracter√≠sticas del lenguaje para hacer un uso profesional de √©l.

**¬øConoces alg√∫n otro libro que te haya gustado y ayudado con JavaScript?**
Comp√°rtelo con la comunidad en los comentarios.

</article>

---

<article slug="como-ser-autonomo-en-irlanda-registro-en-hacienda" date="2013-07-01" url="https://carlosazaustre.es/blog/como-ser-autonomo-en-irlanda-registro-en-hacienda">

# C√≥mo ser aut√≥nomo en Irlanda - Registro en Hacienda

**Fecha:** 2013-07-01
El siguiente paso en la aventura de los tr√°mites para convertirse en aut√≥nomo en Irlanda es registrarse en la [Revenue Office of Ireland](http://www.revenue.ie/en/index.html), la hacienda irlandesa. Para ello antes de nada necesitas el [PPS Number](/como-ser-autonomo-en-irlanda) y el formulario [TR1 (PDF)](http://www.revenue.ie/en/tax/vat/forms/formtr1.pdf) cumplimentado.

Como ya he comentado en m√°s de una ocasi√≥n, el tema de los impuestos es diferente en Irlanda que en Espa√±a. Aqu√≠ un _self-employed_ o **aut√≥nomo √∫nicamente ha de pagar el 4% de sus ingresos al final del a√±o**, mientras que en Espa√±a se ha de pagar el 20% de los beneficios obtenidos (Ingresos ‚Äì Gastos). En tema de impuestos no es que sea mejor ni peor, ya que si en Espa√±a ingresas 10.000‚Ç¨ en un a√±o pero tienes 10.000‚Ç¨ de gastos, tu beneficio es 0 y no pagas nada, y en Irlanda si te encuentras en la misma situaci√≥n pagar√°as un 4% de tus 10.000‚Ç¨ ingresados, es decir 400‚Ç¨.

Pero por otra parte, si en Irlanda **has ingresado 5.000‚Ç¨ o menos en un a√±o, no pagas nada**. Y tambi√©n a√±adir que [**si tus ingresos no superan los 37.000‚Ç¨ en un a√±o, est√°s exento de cobrar el IVA (VAT)** en tus facturas, en caso de que tu negocio sea del sector servicios](http://selfemployedsupports.ie/tax_for_self_employed_people.en.html).

El **a√±o fiscal** en Irlanda empieza **el 1 de Noviembre y termina el 31 de Octubre** del siguiente a√±o. Hasta esa fecha no hay que preocuparse de hacer declaraciones trimestrales de IRPF, pagar el IVA cada 3 meses, y dem√°s burocracia. S√≥lo has de dedicarte a trabajar y guardar una copia de tus facturas. No tienes que tener un libro de registro donde meter todos los gastos que se te ocurran, ellos solo van a mirar tus ingresos.

Como extra, [por 20‚Ç¨ (tr√°mite online) puedes **solicitar un nombre de negocio**](http://www.cro.ie/ena/downloads-business-name.aspx) para ti, de esta manera en tus facturas en lugar de poner tu nombre como tal, puedes poner tu nombre de negocio (en mi caso [Osomsoft](http://osomsoft.com)). Parece una tonter√≠a, pero algunas empresas ven con mejor ojo que te llames ‚ÄúACME Software‚Äù que ‚ÄúManolo Garc√≠a‚Äù, sobre todo si son de los Pirineos hacia abajo.

Puedes solicitar tu nombre de negocio, una vez que ya est√°s registrado en el _Revenue_, en la [**CRO** (Companies Registration Office)](http://www.cro.ie/ena/business-registration-business-name.aspx), enviando el [formulario RBN1](http://www.cro.ie/ena/forms_r_bnames.aspx) cumplimentado. En un par de semanas recibes tu certificado en tu domicilio.

</article>

---

<article slug="como-ser-autonomo-en-irlanda" date="2013-06-27" url="https://carlosazaustre.es/blog/como-ser-autonomo-en-irlanda">

# C√≥mo ser aut√≥nomo en Irlanda

**Fecha:** 2013-06-27
Hace ya unos cuantos meses, cuando comenzamos nuestra andadura como _Freelancers_ en Irlanda, empec√© a escribir una serie de posts en los que explicaba los pasos para registrarse como _self-employed_ en Irlanda. La cosa se qued√≥ a medias y he decidido retomarlo, esta vez explicado en el leguaje de Cervantes ;)

Uno de los objetivos que nos marcamos cuando nos mudamos a Irlanda fue registrarnos como auteonomos y trabajar legalmente en el pa√≠s.

Esto tiene una serie de pasos, papeleos y dem√°s que quiero comentar aqu√≠ para poder ayudar a otra gente que est√© en una situaci√≥n similar a la m√≠a. Tiene algo de burocracia como todo papeleo, pero no es tan complicado como hacerse aut√≥nomo en Espa√±a. Vamos a ello.

Antes de nada comentar que¬†[Paola](http://twiiter.com/ggarciapaola)¬†y yo somos ambos desarrolladores/programadores de Software y los pasos que voy a comentar son para trabajar como tal. Desconozco si para cada tipo de profesi√≥n los pasos cambian o no, pero seguramente muchos sean parecidos.

Algunas personas creen que se necesita un visado o un permiso de trabajo para residir en un pa√≠s europeo o poder trabajar en √©l, pero est√°n equivocados. **Si algo bueno nos ha tra√≠do la Uni√≥n Europea es la posibilidad de circular libremente por los p√°ises de la uni√≥n con nuestro DNI espa√±ol y vivir/trabajar donde queramos**. Bien es cierto que algunos p√°ises no es tan sencillo registrarse como aut√≥nomo y ya est√°, pero Irlanda es uno de los que lo pone m√°s f√°cil. Y **en cuanto a la cuota de aut√≥nomos es el pa√≠s que mejor nos trata** (o que por lo menos yo conozco). Otro sitio donde se puede ser aut√≥nomo sin tener que hipotecarse como en Espa√±a es UK, all√≠ se paga un m√≠nimo de unas 15 libras al m√©s aproximadamente que se va incrementando seg√∫n factures o no. En Irlanda es diferente, **aqu√≠ no se paga nada por querer trabajar**, s√≥lamente a final del a√±o se pagan impuestos, en concreto un 4% de tus ingresos.

![](/images/como-ser-autonomo-en-irlanda/pps1-1.png)

Lo primero de todo que debes hacer cuando te mudes a Irlanda, es solicitar el [**PPS Number** (Personal Public Service Number)](http://www.welfare.ie/EN/Topics/PPSN/Pages/ppsnindex.aspx) que se podr√≠a traducir como una especie de ‚ÄúDNI‚Äù Irland√©s que indica que resides en el pa√≠s y sirve tambi√©n como n√∫mero de la seguridad social de aqu√≠. En Irlanda no hay DNI como tenemos en Espa√±a, aqu√≠ se identifican con el Pasaporte, pero si vives en Irlanda, necesitas un n√∫mero de estos.

Para solicitar este n√∫mero, necesitas acudir a las [Welfare Offices](http://www.welfare.ie/EN/Pages/default.aspx) (algo as√≠ como la oficina de la seguridad social) y[ llevar una **identificaci√≥n** (DNI, Pasaporte, Carnet de Conducir) y una **prueba de que est√°s residiendo en Irlanda**, como puede ser una factura de la luz o el gas a tu nombre, un contrato de alquiler, etc‚Ä¶)](http://www.welfare.ie/EN/Topics/PPSN/Pages/HowToApply.aspx)

Esto es necesario porque la administraci√≥n para comprobar la veracidad de los datos que aportas, enviar√° una carta a la direcci√≥n d√≥nde vivas para chequearlo. Esto suele tomar **1 semana m√°s o menos** de demora.

As√≠ que, en resumen, primero ven a vivir a Irlanda. Puedes estar en un hostal un par de semanas mientras encuentras un piso donde vivir como hicimos nosotros, y una vez ya tengas el contrato de alquiler empieza a moverte por las administraciones para registrarte como _self-employed_. Aunque aqu√≠ puedes empezar a trabajar como tal sin estar registrado del todo, son bastante m√°s benevolentes con eso que en otros pa√≠ses.

</article>

---

<article slug="javascript" date="2013-06-17" url="https://carlosazaustre.es/blog/javascript">

# JavaScript. Un lenguaje para dominarlos a todos

**Fecha:** 2013-06-17
Hasta no hace mucho Javascript se usaba para ‚Äúadornar‚Äù las webs, ponerles efectos bonitos que no pod√≠amos conseguir con CSS o HTML, alertas y poco m√°s. La librer√°a **jQuery** nos facilit√≥ mucho la vida, haciendo m√°s f√°cil el manejo del **DOM** (_Document Object Model_) y el uso de funciones. M√°s adelante con la llegada de **AJAX** (**A**synchronous¬†**J**avaScript¬†**A**nd¬†**X**ML), lo empezamos a utilizar para cargar contenido din√°micamente en nuestras webs. AJAX hizo posible que aplicaciones web como _Gmail_ sean lo que son.

S√≥lo hay que echar un vistazo a [GitHub](http://github.com), la mayor comunidad de proyectos _OpenSource_, y ver cuales son los lenguajes m√°s _Trending Topic:_

![lenguajes](/images/javascript/Screen-Shot-2013-06-11-at-16_57_29_neocjb.png)

Se puede ver que incluso en la lista de los 10 m√°s usados, el √∫ltimo lugar corresponde a [CoffeeScript](http://coffeescript.org/) un metalenguaje que compila a Javascript, por lo que casi el 25% de los lenguajes m√°s utilizados en la red es JS.

![js](/images/javascript/js_xkixgr.jpg)
Pero JS est√° evolucionando much√≠simo, algunos lo consideran el lenguaje de programaci√≥n del futuro, pero creo que es ya del presente. JS ha crecido en el navegador, apareciendo numerosos **frameworks MVC** (_Model View Controller_) que permiten desde el cliente hacer numerosas operaciones antes relegadas al servidor, haci√©ndolas m√°s r√°pidas y escalables.

**Javascript ha llegado tambi√©n al modelo de datos**. Anteriormente el intercambio de los mismos entre p√°ginas web se hacia con XML, ahora y desde hace un tiempo tenemos **JSON** (**J**ava**S**cript **O**bject **N**otation) mucho m√°s ligero que XML y que se entiende perfectamente con JS ya que usan la misma notaci√≥n.

Si tenemos modelo de datos, **tenemos tambi√©n base de datos**. **MongoDB** es una base de datos **NoSQL** (Base de datos no relacional) orientada a documentos.

![MongoDB](/images/javascript/MongoDB_yaii3q.png)
En lugar de guardar la informaci√≥n en tablas, se almacenan en forma de documentos JSON. De manera que pueden ser llamados facilmente desde JS e incorporarlos en nuestras aplicaciones webs. No significa que vayan a desaparecer las bases de datos tradicionales. En algunos momentos necesitamos que sean relacionales, pero para diversos tipos de aplicaciones una base NoSQL es una soluci√≥n bastante √≥ptima.

Si tenemos JS en cliente, modelo de datos y bases de datos escritas en JS, **¬øTenemos algo parecido en el servidor?** Por supuesto.

![5958685476_78ab9d2a86_m](/images/javascript/5958685476_78ab9d2a86_m_od23ju.jpg)

El [proyecto **Node.js**](https://github.com/joyent/node) ha llevado JS al lado del servidor. Fue presentado en 2009 por **Ryan Dahl** en la¬†[JSConf](http://jsconf.com/). Creado a partir del motor [V8](<http://en.wikipedia.org/wiki/V8_(JavaScript_engine)>) para renderizar Javascript del navegador Google Chrome.

> üì∫ [Ver v√≠deo en YouTube](https://www.youtube.com/watch?v=ztspvPYybIY)
/>

Ahora podemos crear servidores webs con Javascript en el Back-End que soportan bastante redundancia. Est√° en una fase temprana de desarrollo (v0.10) y tiene 4 a√±os de vida, pero est√° madurando considerablemente y ya tiene numerosos frameworks y librer√≠as ([Express](http://expressjs.com/), [Socket.io](http://socket.io/)) que est√°n haciendo m√°s sencillo crear aplicaciones en este nuevo entorno.

Cada d√≠a vemos que [si algo puede hacerse en Javascript, se acabar√° haciendo en Javascript](http://www.codinghorror.com/blog/2007/07/the-principle-of-least-power.html).

[**¬øQuieres aprender JavaScript** desde cero? Consigue mi libro en formato digital: **Aprendiendo JavaScript**](http://leanpub.com/aprendiendo-javascript)

</article>

---

<article slug="herramientas-utiles-para-desarrolladores" date="2013-06-13" url="https://carlosazaustre.es/blog/herramientas-utiles-para-desarrolladores">

# 15 Herramientas √∫tiles que todo desarrollador web deber√≠a conocer

**Fecha:** 2013-06-13
A continuaci√≥n muestro algunas de las herramientas que utilizo en mi d√≠a a d√≠a como desarrollador web que me facilitan bastante la productividad y hacen que no pierda a√±os de vida cada vez que tengo que realizar alguna tarea relacionada con mi trabajo.

Primero de todo, decir que trabajo normalmente en un [MacBook Air 13‚Ä≥](http://support.apple.com/kb/sp631) por lo ligero que es, lo poco que ocupa y su bater√≠a que despu√©s de 2 a√±os que lo compr√©, sigue durando pr√°cticamente 4 horas sin enchufe si no tengo ninguna pel√≠cula o video corriendo. Tiene 4GB de RAM, 128GB de SSD que para programar son suficientes y la velocidad que te ofrece el SSD lo merece (Para almacenar fotos, videos, im√°genes pesadas, etc‚Ä¶ utilizo un disco externo USB port√°til). Obviamente el sistema operativo que uso es [OS X Mountain Lion (10.8.4)](http://www.apple.com/ie/osx/)¬†por lo que algunas de las herramientas que empleo √∫nicamente s√≥lo est√°n disponibles para esta plataforma.

![MacBookAir](/images/herramientas-utiles-para-desarrolladores/Screen-Shot-2013-06-10-at-21_47_58_qxncj3.png)

#### Herramientas habituales

![](/images/herramientas-utiles-para-desarrolladores/8251028685_c9f6cd4f72_z_cqdwwj.jpg)

- **Editor de texto**: [Sublime Text 2](http://www.sublimetext.com/), Multiplataforma. Escrito en Python. Muy r√°pido, y ligero. Contiene numerosos paquetes y funcionalidades que lo hacen ser EL EDITOR. Bien es cierto que si programas en Objective-C te es m√°s √∫til XCode, y si lo haces para Android te sea mejor (aunque sea un dolor) utilizar Eclipse. Pero si te dedicas al desarrollo web, es lo mejor.

- **Cliente FTP**: [Cyberduck](http://cyberduck.ch/), para Mac. Tiene una UI agradable y permite conexiones SFTP con archivos de clave secreta. Ideal si quieres acceder a un servidor creador en AWS.

- **Navegador Web**: [Google Chrome](https://www.google.com/intl/en/chrome/browser/). Es mi navegador por defecto. Hace tiempo usaba Firefox por su consola firebug para depurar, pero ahora con chrome se puede hacer lo mismo gracias a sus extensiones de las que hablar√° m√°s adelante en otra entrada

- **Servidor Web local**: [XAMPP](http://www.apachefriends.org/en/xampp.html). Multiplaforma, ideal para montar un servidor Apache + PHP + MySQL local en pocos minutos. Incluye phpmyAdmin para gestionar la base de datos. Si tu proyecto utiliza alguna de estas tecnolog√≠as te lo recomiendo.

- **Comunicaci√≥n**: Utilizo varios:

  - [Skype](http://skype.com) para conversaciones con una sola persona, normalmente para trabajos freelance con clientes extranjeros, son la mejor herramienta.
    - [Hangouts](http://google.com/hangouts) si son con varias personas y puedes compartir escritorio,
    - y [HipChat](http://hipchat.com) de Atlassian, para equipos de trabajo de no m√°s de 5 personas sale gratis.

- **Gestor de tareas**: [Trello](https://trello.com/). B√°sico y muy simple pero muy √∫til. Multidispositivo

- **Repositorios y control de versiones**

  - [GitHub](http://github.com), para proyectos open source o colaborativos. Como cliente Desktop: [GitHub for Mac](http://mac.github.com/)
  - [Bitbucket](http://bitbucket.com), para proyectos privados (5 repositorios gratuitos). Como cliente Desktop: [Sourcetree](http://www.sourcetreeapp.com/)

- **Tratamiento de im√°genes**:
  [ Photoshop CS6](http://www.photoshop.com/), desde los 15 a√±os usando esto :)

- **Manejo de archivos**
  - [Dropbox](https://www.dropbox.com/), genial para compartir documentos e im√°genes entre miembros del equipo
  - [Google Drive](http://drive.google.com), perfecto para guardar ideas, escribir documentaci√≥n y modificar en linea con otros miembros del equipo. Te olvidas de tener documentos en tu ordenador con m√∫tltiples versiones. A si los tienes siempre a mano y en cualquier dispositvo y cuando quieras (siempre que tengas conexi√≥n a mano).
- **Dise√±o de Mockups y Wireframes**:
  [Moqups](https://moqups.com/): Excelente herramienta para realizar Mockups de una manera sencilla y r√°pida, se integra con Google Drive.

- **Virtualizaci√≥n**: [Parallels 8](http://www.parallels.com/), De pago. Funciona realmente bien en Mac. Suelo tener alguna distribuci√≥n Linux (Ubuntu) y copia de Windows XP para probar rarezas.

En pr√≥ximas entradas hablar√© de las herramientas y tecnolog√≠as m√°s √∫tiles especializadas y enfocadas al desarrollo web que suelo utilizar.

</article>